# common\buildings\zz_evolved_empire_buildings.txt

# ------------------------------------------------- ETHIC Buildings
 # -------- Competitive
	building_tec_entepre_forge = {		# Alloys
		base_buildtime = @b1_time
		position_priority = 60		# Civic buildings

		category = manufacturing
		
		potential = {
			NOT = { has_modifier = resort_colony }
			NOT = { has_modifier = slave_colony }
			exists = owner
			owner = {
				is_competitive = yes
			}
		}

		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 1_half
			}
		}

		inline_script = {
			script = jobs/tec_hired_foundry
			count = @b1_jobs
			mult = 1
			display = with_desc
			trigger = ""
			default_job = tec_hired_foundry
			default_trigger = "is_gestalt = yes"
		}

		inline_script = {
			script = jobs/tec_hired_foundry
			count = 1
			mult = value:tec_value|VALUE|tec_capital_tier|SUBTRACT|1|DIVIDE|2|CEILING|yes|
			display = no_desc
			trigger = "
				owner = {
					has_active_tradition = tr_mercantile_commercial_enterprise_entrepreneur_corpo
				}
			"
		}

		ai_resource_production = {
			trigger = { always = yes }
			alloys = 1
		}
	}

	building_tec_entepre_factory = {	# CG
		base_buildtime = @b1_time
		position_priority = 60		# Civic buildings

		category = manufacturing
		
		potential = {
			NOT = { has_modifier = resort_colony }
			NOT = { has_modifier = slave_colony }
			exists = owner
			owner = {
				is_competitive = yes
			}
		}

		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 1_half
			}
		}

		inline_script = {
			script = jobs/tec_job
			job = tec_hired_artisan
			count = @b1_jobs
			mult = 1
			display = with_desc
			trigger = ""
		}

		inline_script = {
			script = jobs/tec_job
			job = tec_hired_artisan
			count = 1
			mult = value:tec_value|VALUE|tec_capital_tier|SUBTRACT|1|DIVIDE|2|CEILING|yes|
			display = no_desc
			trigger = "
				owner = {
					has_active_tradition = tr_mercantile_commercial_enterprise_entrepreneur_corpo
				}
			"
		}

	}

	building_tec_entepre_research = {	# Research
		base_buildtime = @b1_time
		position_priority = 60		# Civic buildings

		category = research

		show_tech_unlock_if = {
			exists = owner
			owner = {
				is_competitive = yes
			}
		}

		prerequisites = {
			"tech_basic_science_lab_1"
		}

		
		potential = {
			NOT = { has_modifier = resort_colony }
			NOT = { has_modifier = slave_colony }
			exists = owner
			owner = {
				is_competitive = yes
			}
		}

		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 1_half
			}
		}

		inline_script = {
			script = jobs/tec_job
			job = tec_hired_researcher
			count = @b1_jobs
			mult = 1
			display = with_desc
			trigger = ""
		}

		inline_script = {
			script = jobs/tec_job
			job = tec_hired_researcher
			count = 1
			mult = value:tec_value|VALUE|tec_capital_tier|SUBTRACT|1|DIVIDE|2|CEILING|yes|
			display = no_desc
			trigger = "
				owner = {
					has_active_tradition = tr_mercantile_commercial_enterprise_entrepreneur_corpo
				}
			"
		}

		inline_script = {
			script = buildings/effects/tec_scientific_belief
			tier = 1
		}

		inline_script = {
			script = buildings/effects/tec_corporate_researchbureau
			tier = 1
		}
	}

	building_tec_entepre_theatres = {	# Amenities
		base_buildtime = @b1_time
		position_priority = 60		# Civic buildings
		category = amenity

		potential = {
			NOT = {	has_modifier = slave_colony	}
			owner = {
				is_competitive = yes
				tec_is_dystopian_empire = no
			}
		}

		allow = {
			tec_ai_allow_amenity_building = yes
		}

		destroy_trigger = {
			exists = owner
			OR = {
				owner = {
					is_competitive = no
				}
				has_modifier = slave_colony
				tec_ai_destroy_amenity_building = {
					amenities = 25
				}
			}
		}

		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 1_half
			}
		}

		inline_script = {
			script = jobs/tec_job
			job = tec_hired_entertainer
			count = @b1_jobs
			mult = 1
			display = with_desc
			trigger = ""
		}

		inline_script = {
			script = jobs/tec_job
			job = tec_hired_entertainer
			count = 1
			mult = value:tec_value|VALUE|tec_capital_tier|SUBTRACT|1|DIVIDE|2|CEILING|yes|
			display = no_desc
			trigger = "
				owner = {
					has_active_tradition = tr_mercantile_commercial_enterprise_entrepreneur_corpo
				}
			"
		}

	}

	#building_tec_entepre_unity

 # /
# ------------------------------------------------- TRADITION Buildings
 # -------- Outreach
	building_tec_outreach_platform = {	# Outreach
		icon = building_private_shipyards
		base_buildtime = @b1_time
		base_cap_amount = 1
		position_priority = 30		# Unique
		category = amenity
		ai_estimate_without_unemployment = yes

		potential = {
			exists = owner
			owner = {
				has_tradition = tr_tec_outreach_adopt
			}
		}

		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 3
			}
		}

		triggered_desc = {
			text = building_tec_outreach_platform_effect
		}

		# Modifiers
			# Ships
				triggered_planet_modifier = {	# 1
					potential = {
						tec_has_constructors_in_orbit = {
							NUM = 1
						}
					}
					planet_building_build_speed_mult = 0.25
					planet_decision_enact_speed_mult = 0.05
				}
				triggered_planet_modifier = {	# 2 or AI
					potential = {
						exists = owner
						OR = {
							tec_has_constructors_in_orbit = {
								NUM = 2
							}
							owner = { is_ai = yes }
						}

					}
					planet_building_build_speed_mult = 0.5
					planet_decision_enact_speed_mult = 0.15
				}
				triggered_planet_modifier = {	# 3
					potential = {
						tec_has_more_than_num_constructors_in_orbit = {
							NUM = 2
						}
					}
					planet_building_build_speed_mult = 1
					planet_decision_enact_speed_mult = 0.25
				}
			# /
			# Designation
				triggered_planet_modifier = {	# Rural
					potential = {
						has_rural_designation = yes
					}
					planet_jobs_energy_produces_mult = 0.05
					planet_jobs_minerals_produces_mult = 0.05
					planet_jobs_food_produces_mult = 0.05
				}
				triggered_planet_modifier = {	# Energy
					potential = {
						has_generator_designation = yes
					}
					planet_jobs_energy_produces_mult = 0.10
				}
				triggered_planet_modifier = {	# Minerals
					potential = {
						has_mining_designation = yes
					}
					planet_jobs_minerals_produces_mult = 0.10
				}
				triggered_planet_modifier = {	# Food
					potential = {
						has_farming_designation = yes
					}
					planet_jobs_food_produces_mult = 0.10
				}
				triggered_planet_modifier = {	# Industrial
					potential = {
						has_industrial_designation = yes
					}
					planet_jobs_alloys_produces_mult = 0.025
					planet_jobs_consumer_goods_produces_mult = 0.025
				}
				triggered_planet_modifier = {	# Alloys
					potential = {
						has_foundry_designation = yes
					}
					planet_jobs_alloys_produces_mult = 0.05
				}
				triggered_planet_modifier = {	# CG
					potential = {
						has_factory_designation = yes
					}
					planet_jobs_consumer_goods_produces_mult = 0.05
				}
				triggered_planet_modifier = {	# Unity
					potential = {
						OR = {
							has_unity_designation = yes
							NOR = {
								has_rural_designation = yes
								has_generator_designation = yes
								has_mining_designation = yes
								has_farming_designation = yes
								has_industrial_designation = yes
								has_foundry_designation = yes
								has_factory_designation = yes
								has_unity_designation = yes
								has_trade_designation = yes
								has_refinery_designation = yes
							}
						}
					}
					planet_jobs_unity_produces_mult = 0.05
				}
				triggered_planet_modifier = {	# Trade
					potential = {
						has_trade_designation = yes
					}
					trade_value_mult = 0.05
				}
				triggered_planet_modifier = {	# Refinery
					potential = {
						has_refinery_designation = yes
					}
					planet_jobs_volatile_motes_produces_mult = 0.05
					planet_jobs_rare_crystals_produces_mult = 0.05
					planet_jobs_exotic_gases_produces_mult = 0.05
				}
			# /
			# Colony bonus
				triggered_planet_modifier = {	# Rural
					potential = {
						has_upgraded_capital = no
						exists = owner
						owner = {
							has_active_tradition = tr_tec_outreach_final_2
						}
					}
					planet_max_buildings_add = 1
				}
			# /
		# /

		# Jobs
			inline_script = {
				script = jobs/tec_planner
				trigger = ""
				count = 1
				mult = 1
				display = with_desc
				default_job = tec_planner
			}
			inline_script = {
				script = jobs/tec_planner
				trigger = "
					has_upgraded_capital = yes
				"
				count = 1
				mult = 1
				display = no_desc
			}
		# /
	}
 # /

# ------------------------------------------------- ASCENSION Buildings
 # -------- Genetics
	building_tec_regular_genetic_archive = {
		base_buildtime = @b3_time
		base_cap_amount = 1
		position_priority = 10		# Important
		category = government
		ai_estimate_without_unemployment = yes

		potential = {
			exists = owner
			owner = {
				has_country_flag = tec_unlocked_genetic_recombination
				tec_is_biohive = no
			}
		}

		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 3
			}
		}

		triggered_desc = {
			trigger = {
				always = yes
			}
			text = building_tec_genetic_archive_allow_recombination
		}
		triggered_desc = {
			trigger = {
				always = yes
			}
			text = tec_building_capital_and_ascension_scaling
		}
		# Recombinator effect
			triggered_desc = {
				trigger = {
					exists = owner
					owner = {
						has_country_flag = tec_gene_recombinator_output
					}
				}
				text = building_tec_genetic_archive_recombinator_output
			}
			triggered_desc = {
				trigger = {
					exists = owner
					owner = {
						has_country_flag = tec_gene_recombinator_genemod
					}
				}
				text = building_tec_genetic_archive_recombinator_genemod
			}
			triggered_desc = {
				trigger = {
					exists = owner
					owner = {
						has_country_flag = tec_gene_recombinator_growth
					}
				}
				text = building_tec_genetic_archive_recombinator_growth
			}
		# /

		# Jobs
			inline_script = {
				script = jobs/tec_gene_recombinator
				trigger = ""
				count = 2
				mult = 1
				display = with_desc
				default_job = tec_gene_recombinator
			}
			# ADD per capital level
				inline_script = {
					script = jobs/tec_gene_recombinator
					trigger = ""
					count = 1
					mult = planet.value:tec_capital_tier_generic_scaling|CACHED|yes|
					display = no_desc
					default_job = tec_gene_recombinator
				}
			# /
			# ADD per Ascension
				inline_script = {	# 0.5 per
					script = jobs/tec_gene_recombinator
					count = 1
					mult = planet.value:tec_script_add_per_ascension|BASE|0|ASCENSION_BASE|0|ASCENSION_MULT|@tec_per_planet_ascension_mult_high|MULT|1|ROUND|yes|
					display = no_desc
					trigger = "
						always = yes
					"
				}
			# /
		# /

		inline_script = {
			script = buildings/tec_aibait_essential
			trigger = ""
		}

		ai_resource_production = {
			society_research = 10
			trigger = {
				always = yes
			}
		}
	}
	building_tec_biohive_genetic_archive = {
		base_buildtime = @b3_time
		base_cap_amount = 1
		position_priority = 10		# Important
		category = government
		ai_estimate_without_unemployment = yes

		potential = {
			exists = owner
			owner = {
				has_country_flag = tec_unlocked_genetic_recombination
				tec_is_biohive = yes
			}
		}

		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 3
			}
		}

		triggered_desc = {
			trigger = {
				always = yes
			}
			text = building_tec_genetic_archive_allow_recombination
		}
		triggered_desc = {
			trigger = {
				always = yes
			}
			text = tec_building_capital_and_ascension_scaling
		}
		# Recombinator effect
			triggered_desc = {
				trigger = {
					exists = owner
					owner = {
						has_country_flag = tec_gene_recombinator_output
					}
				}
				text = building_tec_genetic_archive_recombinator_output
			}
			triggered_desc = {
				trigger = {
					exists = owner
					owner = {
						has_country_flag = tec_gene_recombinator_genemod
					}
				}
				text = building_tec_genetic_archive_recombinator_genemod
			}
			triggered_desc = {
				trigger = {
					exists = owner
					owner = {
						has_country_flag = tec_gene_recombinator_growth
					}
				}
				text = building_tec_genetic_archive_recombinator_growth
			}
		# /

		# Jobs
			inline_script = {
				script = jobs/tec_gene_recombinator
				trigger = ""
				count = 2
				mult = 1
				display = with_desc
				default_job = tec_gene_recombinator
			}
			# ADD per capital level
				inline_script = {
					script = jobs/tec_gene_recombinator
					trigger = ""
					count = 1
					mult = planet.value:tec_capital_tier_generic_scaling|CACHED|yes|
					display = no_desc
					default_job = tec_gene_recombinator
				}
			# /
			# ADD per Ascension
				inline_script = {	# 0.5 per
					script = jobs/tec_gene_recombinator
					count = 1
					mult = planet.value:tec_script_add_per_ascension|BASE|0|ASCENSION_BASE|0|ASCENSION_MULT|@tec_per_planet_ascension_mult_high|MULT|1|ROUND|yes|
					display = no_desc
					trigger = "
						always = yes
					"
				}
			# /
		# /

		inline_script = {
			script = buildings/tec_aibait_essential
			trigger = ""
		}

		ai_resource_production = {
			society_research = 10
			trigger = {
				always = yes
			}
		}
	}
 # /
 # -------- Cybernetics
	#building_tec_augmentation_nexus
	#building_tec_augmentation_nexus_mainframe
	#building_tec_augmentation_nexus_cortex
	#building_tec_augmentation_nexus_internal
	#building_tec_augmentation_nexus_external
	#building_tec_augmentation_nexus_deck
 # /
 # -------- Psychics
	#building_tec_regular_psychic_beacon
	#building_tec_scifi_psychic_beacon
	#building_tec_solarpunk_psychic_beacon
	#building_tec_cyberpunk_psychic_beacon
	#building_tec_hive_psychic_beacon
	#building_tec_biohive_psychic_beacon
	#building_tec_lithohive_psychic_beacon
 # /
 # -------- Replicants
	#building_tec_regular_replicant_upgrade_center
	#building_tec_scifi_replicant_upgrade_center
	#building_tec_solarpunk_replicant_upgrade_center
	#building_tec_cyberpunk_replicant_upgrade_center
	#building_tec_regular_replicant_upgrade_center
	#building_tec_biohive_replicant_upgrade_center
	#building_tec_lithohive_replicant_upgrade_center
 # /
 # -------- Digital
	#building_tec_regular_digital_cluster
	#building_tec_regular_digital_automator
	#building_tec_regular_digital_processor
 # /
 # -------- Biopsionic
	building_tec_biopsionic_convergence = {
		base_buildtime = @b3_time
		base_cap_amount = 1
		position_priority = 10		# Important
		category = government
		ai_estimate_without_unemployment = yes

		potential = {
			exists = owner
			owner = {
				has_country_flag = tec_biopsionic_path_finished
			}
		}

		allow = {
			any_owned_species = {
				tec_is_any_psionic_species = yes
				count_species_pop = {
					count >= 2
				}
			}
		}

		triggered_desc = {
			trigger = {
				always = yes
			}
			text = building_tec_biopsionic_allow_convergence
		}
		
		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 3
			}

			cost = {
				trigger = {
					OR = {
						is_scope_valid = no
						AND = {
							exists = owner
							owner = {
								is_ai = no
							}

						}
					}
				}
				sr_zro = 50
			}
			cost = {
				trigger = {
					exists = owner
					owner = {
						is_ai = yes
					}
				}
				energy = 500
			}
			produces = {
				trigger = {
					is_scope_valid = no
				}
				sr_zro = 1
			}
			produces = {
				trigger = {
					exists = planet
					planet = {
						check_variable = {
							which = tec_conv_planet
							value > 0
						}
					}
				}
				sr_zro = 1
				multiplier = tec_conv_planet
			}
			produces = {
				trigger = {
					exists = planet
					planet = {
						check_variable = {
							which = tec_conv_planet
							value > 0
						}
					}
					exists = owner
					owner = {
						exists = ruler
						ruler = {
							has_trait = leader_trait_tec_aiauth_biopsionic_main
						}
					}
				}
				sr_tec_ai_power = 2
				multiplier = tec_conv_planet
			}
			
		}

		inline_script = {
			script = buildings/tec_aibait_essential
			trigger = ""
		}

		ai_resource_production = {
			sr_zro = 2
			trigger = {
				always = yes
			}
		}
	}
 # /
 # -------- Cyberpsionic
	building_tec_cyberpsionic_extractor = {
		base_buildtime = @b3_time
		base_cap_amount = 5
		position_priority = 12		# Important
		can_be_disabled = no
		can_be_ruined = no
		category = research
		ai_estimate_without_unemployment = yes

		potential = {
			exists = owner
			owner = {
				has_country_flag = tec_cyberpsionic_buildings
			}
		}

		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 3
			}
			cost = {
				trigger = {
					OR = {
						is_scope_valid = no
						AND = {
							exists = owner
							owner = {
								is_ai = no
							}
						}
					}
				}
				alloys = 250
				sr_zro = 50
			}
			cost = {
				trigger = {
					exists = owner
					owner = {
						is_ai = yes
					}
				}
				energy = 500
			}
			produces = {
				sr_zro = 1
			}
			produces = {
				energy = 5
				multiplier = value:tec_cyberpsionic_entropy_scaling
			}

			produces = {
				trigger = {
					exists = owner
					owner = {
						exists = ruler
						ruler = {
							has_trait = leader_trait_tec_aiauth_cyberpsionic_main
						}
					}
				}
				sr_tec_ai_power = 2
				multiplier = value:tec_cyberpsionic_entropy_scaling
			}
		}

		triggered_country_modifier = {
			potential = {
				always = yes
			}
			tec_entropy = 0.15
		}

		# Warnings
			triggered_desc = {
				trigger = {
					exists = owner
					owner = {
						check_modifier_value = {
							modifier = tec_entropy
							value < 0.50
						}
					}
				}
				text = building_tec_cyberpsionic_extractor_danger_0
			}

			triggered_desc = {
				trigger = {
					exists = owner
					owner = {
						check_modifier_value = {
							modifier = tec_entropy
							value >= 0.50
						}
						check_modifier_value = {
							modifier = tec_entropy
							value < 0.75
						}
					}
				}
				text = building_tec_cyberpsionic_extractor_danger_1
			}
			
			triggered_desc = {
				trigger = {
					exists = owner
					owner = {
						check_modifier_value = {
							modifier = tec_entropy
							value >= 0.75
						}
						check_modifier_value = {
							modifier = tec_entropy
							value < 1
						}
					}
				}
				text = building_tec_cyberpsionic_extractor_danger_2
			}
			
			triggered_desc = {
				trigger = {
					exists = owner
					owner = {
						check_modifier_value = {
							modifier = tec_entropy
							value >= 1
						}
						check_modifier_value = {
							modifier = tec_entropy
							value < 1.5
						}
					}
				}
				text = building_tec_cyberpsionic_extractor_danger_3
			}

			triggered_desc = {
				trigger = {
					exists = owner
					owner = {
						check_modifier_value = {
							modifier = tec_entropy
							value >= 1.5
						}
						check_modifier_value = {
							modifier = tec_entropy
							value < 2
						}
					}
				}
				text = building_tec_cyberpsionic_extractor_danger_4
			}

			triggered_desc = {
				trigger = {
					exists = owner
					owner = {
						check_modifier_value = {
							modifier = tec_entropy
							value >= 2
						}
					}
				}
				text = building_tec_cyberpsionic_extractor_danger_5
			}
		# /

		on_built = {
			hidden_effect = {
				owner = {
					set_country_flag = tec_cyberpsionic_entropy_check
				}
			}
		}

		#AI cyber needs at least this much stuff
		ai_resource_production = {
			sr_zro = 1
			trigger = {
				always = yes
			}
		}

		inline_script = {
			script = buildings/tec_aibait
			trigger = "
				NOT = { has_building = building_tec_cyberpsionic_extractor }
			"
		}
	}

	building_tec_cyberpsionic_transmuter = {
		base_buildtime = @b3_time
		base_cap_amount = 5
		position_priority = 11		# Important
		can_be_disabled = no
		can_be_ruined = no
		category = research
		ai_estimate_without_unemployment = yes

		potential = {
			exists = owner
			owner = {
				has_country_flag = tec_cyberpsionic_buildings
			}
		}

		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 3
			}
			upkeep = {
				energy = 5
				sr_zro = 2
			}
			# production
				produces = {	# Energy
					trigger = {
						has_generator_designation = yes
					}
					energy = 30
					multiplier = value:tec_cyberpsionic_entropy_scaling
				}
				produces = {	# Minerals
					trigger = {
						has_mining_designation = yes
					}
					minerals = 20
					multiplier = value:tec_cyberpsionic_entropy_scaling
				}
				produces = {	# Food
					trigger = {
						has_farming_designation = yes
					}
					food = 25
					multiplier = value:tec_cyberpsionic_entropy_scaling
				}
				produces = {	# Industrial
					trigger = {
						has_industrial_designation = yes
					}
					alloys = 5
					consumer_goods = 5
					multiplier = value:tec_cyberpsionic_entropy_scaling
				}
				produces = {	# Foundry
					trigger = {
						has_foundry_designation = yes
					}
					alloys = 10
					multiplier = value:tec_cyberpsionic_entropy_scaling
				}
				produces = {	# CG
					trigger = {
						has_factory_designation = yes
					}
					consumer_goods = 10
					multiplier = value:tec_cyberpsionic_entropy_scaling
				}
				produces = {	# Unity
					trigger = {
						has_unity_designation = yes
					}
					unity = 10
					multiplier = value:tec_cyberpsionic_entropy_scaling
				}
				produces = {	# Research
					trigger = {
						has_research_designation = yes
					}
					physics_research = 10
					society_research = 10
					engineering_research = 10
					multiplier = value:tec_cyberpsionic_entropy_scaling
				}
				produces = {	# Other
					trigger = {
						NOR = {
							is_scope_valid = yes
							has_generator_designation = yes
							has_mining_designation = yes
							has_farming_designation = yes
							has_industrial_designation = yes
							has_foundry_designation = yes
							has_factory_designation = yes
							has_unity_designation = yes
							has_research_designation = yes
							inline_script = {
								script = mod_support/tec_giga_present
								code = "
									tec_has_giga_mega_designation = yes
								"
							}
						}
					}
					unity = 5
					energy = 15
					multiplier = value:tec_cyberpsionic_entropy_scaling
				}
				produces = {
					trigger = {
						owner = {
							check_modifier_value = {
								modifier = tec_entropy
								value > 1
							}
						}
					}
					sr_dark_matter = 0.1
					multiplier = value:tec_cyberpsionic_entropy_scaling
				}

			# Giga compat for funsies
				inline_script = {
					script = mod_support/tec_giga_present
					code = "
						produces = {	# Mega
							trigger = {
								has_global_flag = @giga_amb_flag
								tec_has_giga_mega_designation = yes
							}
							giga_sr_amb_megaconstruction = 1
							multiplier = value:tec_cyberpsionic_entropy_scaling
						}
					"
				}
			# /	
		}

		triggered_country_modifier = {
			tec_entropy = -0.05
		}


		triggered_desc = {
			text = building_tec_cyberpsionic_transmuter_entropy
		}
		triggered_desc = {
			text = building_tec_cyberpsionic_transmuter_designation
		}
	}

	building_tec_cyberpsionic_gate = {
		base_buildtime = @b3_time
		base_cap_amount = 1
		position_priority = 10		# Important
		can_be_disabled = no
		can_be_ruined = no
		category = research
		ai_estimate_without_unemployment = yes

		potential = {
			exists = owner
			owner = {
				has_country_flag = tec_cyberpsionic_buildings
			}
		}

		allow = {
			has_upgraded_capital = yes
			tec_ai_allow_cyberpsionic_gate_building = yes
		}

		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 3
			}
			upkeep = {
				sr_zro = 0.5
			}
		}

		triggered_desc = {
			trigger = {
				always = yes
			}
			text = building_tec_cyberpsionic_gate_entropy
		}

		triggered_country_modifier = {
			potential = {
				always = yes
			}
			tec_entropy = -0.2
		}

		# Modifiers
		# Migration
			triggered_planet_modifier = {
				pop_resettlement_cost_mult = -1
			}

			triggered_planet_modifier = {
				planet_immigration_pull_add = 5
				planet_resettlement_unemployed_mult = 0.25
				planet_resettlement_unemployed_destination_mult = 0.25
				multiplier = value:tec_cyberpsionic_entropy_scaling
			}
		# /
		# Trade vs amenities
			triggered_planet_modifier = {
				potential = {
					OR = {
						is_scope_valid = no
						AND = {
							exists = owner
							owner = {
								tec_uses_trade_value = yes
							}
						}
					}
				}
				trade_value_mult = 0.15
				multiplier = value:tec_cyberpsionic_entropy_scaling
			}

			triggered_planet_modifier = {
				potential = {
					exists = owner
					owner = {
						tec_uses_trade_value = no
						is_gestalt = no
					}
				}
				planet_amenities_mult = 0.15
				multiplier = value:tec_cyberpsionic_entropy_scaling
			}
			triggered_planet_modifier = {
				potential = {
					exists = owner
					owner = {
						tec_uses_trade_value = no
						is_gestalt = yes
					}
				}
				planet_amenities_no_happiness_mult = 0.15
				multiplier = value:tec_cyberpsionic_entropy_scaling
			}
		# /

		inline_script = {
			script = buildings/tec_aibait
			trigger = "
				OR = {
					tec_is_arcology = yes
					AND = {
						exists = owner
						owner = { tec_uses_trade_value = yes }
						OR = {
							has_trade_designation = yes
							check_variable_arithmetic = {
								which = value:trade_combined_value|CACHED|yes|
								value >= 4
							}
						}
					}
				}
			"
		}
	}
 # /
 # -------- Biopsychic
	#building_tec_regular_biopsychic_essence - Cornerstone of Essences
	#building_tec_scifi_biopsychic_essence
	#building_tec_solarpunk_biopsychic_essence
	#building_tec_cyberpunk_biopsychic_essence
	#building_tec_hive_biopsychic_essence
	#building_tec_biohive_biopsychic_essence - Essence Nodule
	#building_tec_lithohive_biopsychic_essence

	#building_tec_hive_biopsychic_convergence - Convergence Nest
	#building_tec_biohive_biopsychic_convergence - Convergence Spire
	#building_tec_lithohive_biopsychic_convergence
 # /
 # -------- Cyberpsychic
	#building_tec_regular_biotic_lab
	#building_tec_scifi_biotic_lab
	#building_tec_solarpunk_biotic_lab
	#building_tec_cyberpunk_biotic_lab
 # /
# /

# ------------------------------------------------- OLD/RE-SCAVENGE
# Old/do not remove yet
	building_tec_cyberpsionic_extractor_1 = {
		base_buildtime = @b3_time
		base_cap_amount = 1
		position_priority = 10		# Important
		can_be_disabled = no
		can_be_ruined = no
		category = research

		empire_limit = {
			base = 1
			modifier = {
				factor = tec_dimensional_extraction_buildings
				exists = owner
				owner = {
					check_variable = {
						which = tec_dimensional_extraction_buildings
						value > 0
					}
				}
			}
		}

		potential = {
			always = no
			exists = owner
			owner = {
				has_ascension_perk = ap_tec_cyberpsionic
				has_country_flag = tec_cyberpsionic_buildings
				check_variable = {	# Dimensional ts 1
					which = tec_dimensional_extraction_buildings
					value < 4
				}
			}
		}

		destroy_trigger = {
			exists = owner
			owner = {
				OR = {
					NOT = {	# Not unlocked
						has_country_flag = tec_cyberpsionic_buildings
					}
					check_variable = {	# advances to t2
						which = tec_dimensional_extraction_buildings
						value > 3
					}
				}
			}
		}

		convert_to = {
			building_tec_cyberpsionic_extractor_2
		}

		
		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 3
			}
			cost = {
				alloys = 250
				sr_zro = 50
			}
			produces = {
				trigger = {
					exists = planet
					planet = {
						check_variable = {
							which = tec_dimensional_extraction_produce
							value > 0
						}
					}
				}
				sr_zro = 0.5
				energy = 5
				multiplier = tec_dimensional_extraction_produce
			}
		}

		inline_script = buildings/tec_cyberpsionic_extractor

		ai_resource_production = {
			sr_zro = 50
			trigger = {
				always = yes
			}
		}
	}

	building_tec_cyberpsionic_extractor_2 = {
		base_buildtime = @b3_time
		base_cap_amount = 1
		position_priority = 10		# Important
		can_be_disabled = no
		can_be_ruined = no
		category = research

		empire_limit = {
			base = 1
			modifier = {
				factor = tec_dimensional_extraction_buildings
				exists = owner
				owner = {
					check_variable = {
						which = tec_dimensional_extraction_buildings
						value > 1
					}
				}
			}
		}

		potential = {
			always = no
			exists = owner
			owner = {
				has_ascension_perk = ap_tec_cyberpsionic
				has_country_flag = tec_cyberpsionic_buildings
				check_variable = {	# Dimensional ts 1
					which = tec_dimensional_extraction_buildings
					value >= 4
				}
				check_variable = {	# Dimensional ts 1
					which = tec_dimensional_extraction_buildings
					value < 9
				}
			}
		}

		destroy_trigger = {
			exists = owner
			owner = {
				OR = {
					NOT = {	# Not unlocked
						has_country_flag = tec_cyberpsionic_buildings
					}
					check_variable = {	# advances to t3
						which = tec_dimensional_extraction_buildings
						value >= 9
					}
					check_variable = {	# reverts to t1
						which = tec_dimensional_extraction_buildings
						value < 4
					}
				}
			}
		}

		convert_to = {
			building_tec_cyberpsionic_extractor_3
		}

		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 3
			}
			cost = {
				alloys = 250
				sr_zro = 50
			}
			produces = {
				trigger = {
					exists = planet
					planet = {
						check_variable = {
							which = tec_dimensional_extraction_produce
							value > 0
						}
					}
				}
				sr_zro = 0.5
				energy = 5
				multiplier = tec_dimensional_extraction_produce
			}
		}

		inline_script = buildings/tec_cyberpsionic_extractor

		ai_resource_production = {
			sr_zro = 50
			trigger = {
				always = yes
			}
		}
	}

	building_tec_cyberpsionic_extractor_3 = {
		base_buildtime = @b3_time
		base_cap_amount = 1
		position_priority = 10		# Important
		can_be_disabled = no
		can_be_ruined = no
		category = research

		empire_limit = {
			base = 1
			modifier = {
				factor = tec_dimensional_extraction_buildings
				exists = owner
				owner = {
					check_variable = {
						which = tec_dimensional_extraction_buildings
						value > 1
					}
				}
			}
		}

		potential = {
			always = no
			exists = owner
			owner = {
				has_ascension_perk = ap_tec_cyberpsionic
				has_country_flag = tec_cyberpsionic_buildings
				check_variable = {	# Dimensional ts 1
					which = tec_dimensional_extraction_buildings
					value >= 9
				}
			}
		}

		destroy_trigger = {
			exists = owner
			owner = {
				OR = {
					NOT = {	# Not unlocked
						has_country_flag = tec_cyberpsionic_buildings
					}
					check_variable = {	# downgrades to t2
						which = tec_dimensional_extraction_buildings
						value < 9
					}
				}
			}
		}
		
		resources = {
			category = planet_buildings
			inline_script = {
				script = buildings/resources/tec_resource_cost
				tier = 3
			}
			cost = {
				alloys = 250
				sr_zro = 50
			}
			produces = {
				trigger = {
					exists = planet
					planet = {
						check_variable = {
							which = tec_dimensional_extraction_produce
							value > 0
						}
					}
				}
				sr_zro = 0.5
				energy = 5
				multiplier = tec_dimensional_extraction_produce
			}
		}
		
		inline_script = buildings/tec_cyberpsionic_extractor

		ai_resource_production = {
			sr_zro = 50
			trigger = {
				always = yes
			}
		}
	}
# /