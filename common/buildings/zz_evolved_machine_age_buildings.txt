#############################
#	Augmentation Bazaars	#
#############################

building_augmentation_bazaars = {
	base_buildtime = @b2_time
	base_cap_amount = 1

	category = trade

	potential = {
		exists = owner
		owner = { is_regular_empire = yes }
		OR = {
			owner = { has_valid_civic = civic_augmentation_bazaars }
			has_building = building_augmentation_bazaars
		}
		tec_planet_blocks_trade_buildings = no
	}

	inline_script = {
		script = jobs/tec_merchant
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = merchant
		default_trigger = "is_gestalt = yes"
	}

	inline_script = {
		script = jobs/tec_augmentor
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = augmentor
		default_trigger = "is_gestalt = yes"
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_tradition = tr_cybernetics_integrated_anatomy
			}
			any_owned_pop = {
				has_auto_modding_trait = yes
			}
		}
		modifier = {
			auto_mod_monthly_add = 2
		}
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 2
		}
	}


	ai_resource_production = {
		energy = 5
		trigger = {
			solar_system = {
				has_system_trade_value >= 50
			}
		}
	}

	ai_resource_production = {
		energy = 3
		trigger = {
			solar_system = {
				has_system_trade_value >= 80
			}
		}
	}
}

#####################
#	Natural Design	#
#####################

building_transcendental_retreat = {
	base_buildtime = @b2_time
	base_cap_amount = 1

	category = pop_assembly

	potential = {
		exists = owner
		owner = { has_valid_civic = civic_natural_design }
		tec_planet_blocks_amenity_buildings = no
	}

	allow = {
		always = yes
	}

	convert_to = { building_hive_transcendental_retreat }

	triggered_planet_modifier = {
		potential = {
			exists = owner
		}
		pop_growth_speed = 0.025
		planet_doctors_unity_produces_add = 1
		mult = owner.value:transcendental_growth
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_jobs_produces_mult = 0.1
	}

	inline_script = {
		script = jobs/tec_healthcare
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = healthcare
		default_trigger = "is_gestalt = yes"
	}


	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 3
		}
	}

	triggered_desc = {
		text = natural_design_ascension_bonus
	}

	prerequisites = {}
}

building_hive_transcendental_retreat = {
	base_buildtime = @b2_time
	base_cap_amount = 1

	category = pop_assembly

	potential = {
		exists = owner
		owner = { has_valid_civic = civic_hive_natural_design }
		tec_planet_blocks_amenity_buildings = no
	}

	convert_to = { building_transcendental_retreat }

	triggered_planet_modifier = {
		potential = {
			exists = owner
		}
		pop_growth_speed = 0.025
		planet_pop_assemblers_unity_produces_add = 1
		mult = owner.value:transcendental_growth
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_jobs_produces_mult = 0.1
	}

	inline_script = {
		script = jobs/tec_spawning_drone
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = spawning_drone
		default_trigger = "is_hive_empire = no"
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 3
		}
	}

	triggered_desc = {
		trigger = {
			is_scope_valid = yes
		}
		text = natural_design_hive_ascension_bonus
	}

	triggered_desc = {
		trigger = {
			is_scope_valid = no
		}
		text = natural_design_hive_ascension_bonus_no_scope
	}

	prerequisites = {}
}

#####################
# Cybernetic Creed	#
#####################

#Choir of the Mind
building_amphitheater_of_the_mind = {
	position_priority = 100
	base_buildtime = @b2_time
	base_cap_amount = 1
	empire_limit = {
		base = 1
		modifier = {
			mult = -1
			has_country_flag = cybernetic_creed_research
		}
	}
	can_demolish = no

	category = research

	potential = {
		NOR = {
			has_building = building_amphitheater_of_the_mind
			has_building = building_grand_concert_hall_of_the_mind
		}
		exists = owner
		owner = {
			has_origin = origin_cybernetic_creed
			has_country_flag = cybernetic_creed_research
		}
		tec_planet_blocks_research_buildings = no
	}

	allow = {
		exists = owner
		has_upgraded_capital = yes
		hidden_trigger = {
			owner = { has_origin = origin_cybernetic_creed }
		}
		custom_tooltip = {
			fail_text = not_cybernetic_creed_research
			owner = { has_country_flag = cybernetic_creed_research }
		}
	}

	inline_script = buildings/convert_to/tec_temple_1
	inline_script = buildings/convert_to/tec_bureaucratic_1

	destroy_trigger = {
		exists = owner
		OR = {
			tec_planet_blocks_research_buildings = yes
			owner = {
				OR = {
					NOT = { has_origin = origin_cybernetic_creed }
					AND = {
						has_origin = origin_cybernetic_creed
						OR = {
							has_country_flag = cybernetic_creed_war
							has_country_flag = cybernetic_creed_construction
							has_country_flag = cybernetic_creed_labor
							has_country_flag = cybernetic_creed_general
						}
					}
				}
			}
		}
	}

	resources = {
		category = planet_buildings

		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 1
		}
	}

	inline_script = {
		script = jobs/tec_researcher
		count = 2
		mult = 1
		trigger = "owner = { is_regular_empire = yes }"
		display = with_desc
		default_job = researcher
		default_trigger = "is_gestalt = yes"
	}

	inline_script = {
		script = jobs/tec_job
		job = haruspex
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = haruspex
	}

	upgrades = {
		building_grand_concert_hall_of_the_mind
	}

	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 30
			}
		}
		physics_research = 5
		society_research = 5
		engineering_research = 5
	}
}

building_grand_concert_hall_of_the_mind = {
	position_priority = 100
	base_buildtime = @b3_time
	can_build = no
	can_demolish = no
	category = research

	allow = {
		has_major_upgraded_capital = yes
		hidden_trigger = {
			exists = owner
			owner = { has_origin = origin_cybernetic_creed }
			NOT = {	has_building = building_grand_concert_hall_of_the_mind }
		}
		custom_tooltip = {
			fail_text = not_cybernetic_creed_research
			owner = { has_country_flag = cybernetic_creed_research }
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			tec_planet_blocks_research_buildings = yes
			owner = {
				OR = {
					NOT = { has_origin = origin_cybernetic_creed }
					AND = {
						has_origin = origin_cybernetic_creed
						OR = {
							has_country_flag = cybernetic_creed_war
							has_country_flag = cybernetic_creed_construction
							has_country_flag = cybernetic_creed_labor
							has_country_flag = cybernetic_creed_general
						}
					}
				}
			}
		}
	}


	inline_script = buildings/convert_to/tec_temple_2
	inline_script = buildings/convert_to/tec_bureaucratic_2

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 2
		}
	}

	inline_script = {
		script = jobs/tec_researcher
		count = 4
		mult = 1
		trigger = "owner = { is_regular_empire = yes }"
		display = with_desc
		default_job = researcher
		default_trigger = "is_gestalt = yes"
	}

	inline_script = {
		script = jobs/tec_job
		job = haruspex
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = haruspex
	}

	inline_script = {
		script = jobs/tec_job
		job = technophant
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
	}

	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = physics_research
				value >= 30
			}
		}
		physics_research = 5
		society_research = 5
		engineering_research = 5
	}
}

#Templars of Steel
building_battlement_of_steel = {
	position_priority = 100
	can_be_ruined = no
	base_buildtime = @b2_time
	base_cap_amount = 1
	empire_limit = {
		base = 1
		modifier = {
			mult = -1
			has_country_flag = cybernetic_creed_war
		}
	}
	can_demolish = no

	category = army

	potential = {
		NOR = {
			has_building = building_battlement_of_steel
			has_building = building_grand_battlements_of_steel
		}
		exists = owner
		owner = {
			has_origin = origin_cybernetic_creed
			has_country_flag = cybernetic_creed_war
		}
		tec_planet_blocks_stronghold_buildings = no
	}

	allow = {
		has_upgraded_capital = yes
		hidden_trigger = {
			exists = owner
			owner = { has_origin = origin_cybernetic_creed }
		}
		custom_tooltip = {
			fail_text = not_cybernetic_creed_war
			owner = { has_country_flag = cybernetic_creed_war }
		}
	}


	inline_script = buildings/convert_to/tec_temple_1
	inline_script = buildings/convert_to/tec_bureaucratic_1

	destroy_trigger = {
		exists = owner
		OR = {
			tec_planet_blocks_stronghold_buildings = yes
			owner = {
				OR = {
					NOT = { has_origin = origin_cybernetic_creed }
					AND = {
						has_origin = origin_cybernetic_creed
						OR = {
							has_country_flag = cybernetic_creed_research
							has_country_flag = cybernetic_creed_construction
							has_country_flag = cybernetic_creed_labor
							has_country_flag = cybernetic_creed_general
						}
					}
				}
			}
		}
	}


	resources = {
		category = planet_buildings_strongholds
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 1
		}
	}

	inline_script = {
		script = jobs/tec_soldier
		count = 2
		mult = 1
		trigger = ""
		display = with_desc
		default_job = soldier
		default_trigger = "is_gestalt = yes"
	}

	inline_script = {
		script = jobs/tec_job
		job = haruspex
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = haruspex
	}


	planet_modifier = {
		planet_orbital_bombardment_damage = -0.1
	}


	upgrades = {
		building_grand_battlements_of_steel
	}
}

building_grand_battlements_of_steel = {
	position_priority = 100
	can_be_ruined = no
	base_buildtime = @b3_time
	can_build = no
	can_demolish = no
	category = army

	allow = {
		has_major_upgraded_capital = yes
		hidden_trigger = {
			exists = owner
			owner = { has_origin = origin_cybernetic_creed }
			NOT = {	has_building = building_grand_battlements_of_steel }
		}
		custom_tooltip = {
			fail_text = not_cybernetic_creed_war
			owner = { has_country_flag = cybernetic_creed_war }
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			tec_planet_blocks_stronghold_buildings = yes
			owner = {
				OR = {
					NOT = { has_origin = origin_cybernetic_creed }
					AND = {
						has_origin = origin_cybernetic_creed
						OR = {
							has_country_flag = cybernetic_creed_research
							has_country_flag = cybernetic_creed_construction
							has_country_flag = cybernetic_creed_labor
							has_country_flag = cybernetic_creed_general
						}
					}
				}
			}
		}
	}


	inline_script = buildings/convert_to/tec_temple_2
	inline_script = buildings/convert_to/tec_bureaucratic_2

	resources = {
		category = planet_buildings_strongholds
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 2
		}
	}

	planet_modifier = {
		planet_orbital_bombardment_damage = -0.2
	}

	inline_script = {
		script = jobs/tec_soldier
		count = 4
		mult = 1
		trigger = ""
		display = with_desc
		default_job = soldier
		default_trigger = "is_gestalt = yes"
	}

	inline_script = {
		script = jobs/tec_job
		job = haruspex
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = haruspex
	}

	inline_script = {
		script = jobs/tec_job
		job = technophant
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
	}

}

#Commune of Toil
building_sanctuary_of_toil = {
	position_priority = 100
	base_buildtime = @b2_time
	base_cap_amount = 1
	empire_limit = {
		base = 1
		modifier = {
			mult = -1
			has_country_flag = cybernetic_creed_labor
		}
	}
	can_demolish = no

	category = resource

	potential = {
		NOR = {
			has_building = building_sanctuary_of_toil
			has_building = building_grand_cathedral_of_toil
		}
		exists = owner
		owner = {
			has_origin = origin_cybernetic_creed
			has_country_flag = cybernetic_creed_labor
		}
		tec_planet_blocks_menial_buildings = no
	}

	allow = {
		has_upgraded_capital = yes
		hidden_trigger = {
			exists = owner
			owner = { has_origin = origin_cybernetic_creed }
		}
		custom_tooltip = {
			fail_text = not_cybernetic_creed_labor
			owner = { has_country_flag = cybernetic_creed_labor }
		}
	}

	inline_script = buildings/convert_to/tec_temple_1
	inline_script = buildings/convert_to/tec_bureaucratic_1

	destroy_trigger = {
		OR = {
			tec_planet_blocks_menial_buildings = yes
			owner = {
				OR = {
					NOT = { has_origin = origin_cybernetic_creed }
					AND = {
						has_origin = origin_cybernetic_creed
						OR = {
							has_country_flag = cybernetic_creed_research
							has_country_flag = cybernetic_creed_construction
							has_country_flag = cybernetic_creed_war
							has_country_flag = cybernetic_creed_general
						}
					}
				}
			}
		}
	}

	upgrades = {
		building_grand_cathedral_of_toil
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 1
		}
	}


	planet_modifier = {
		planet_farmers_food_produces_add = 0.25
		planet_technician_energy_produces_add = 0.25
		planet_miners_minerals_produces_add = 0.25
	}

	inline_script = {
		script = jobs/tec_job
		job = haruspex
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = haruspex
		default_trigger = "is_gestalt = yes"
	}
}

building_grand_cathedral_of_toil = {
	position_priority = 100
	base_buildtime = @b2_time
	can_build = no
	can_demolish = no
	category = resource

	allow = {
		has_major_upgraded_capital = yes
		hidden_trigger = {
			exists = owner
			owner = { has_origin = origin_cybernetic_creed }
			NOT = {	has_building = building_grand_cathedral_of_toil }
		}
		custom_tooltip = {
			fail_text = not_cybernetic_creed_labor
			owner = { has_country_flag = cybernetic_creed_labor }
		}
	}

	destroy_trigger = {
		OR = {
			tec_planet_blocks_menial_buildings = yes
			owner = {
				OR = {
					NOT = { has_origin = origin_cybernetic_creed }
					AND = {
						has_origin = origin_cybernetic_creed
						OR = {
							has_country_flag = cybernetic_creed_research
							has_country_flag = cybernetic_creed_construction
							has_country_flag = cybernetic_creed_war
							has_country_flag = cybernetic_creed_general
						}
					}
				}
			}
		}
	}


	inline_script = buildings/convert_to/tec_temple_2
	inline_script = buildings/convert_to/tec_bureaucratic_2

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 2
		}
	}

	planet_modifier = {
		planet_farmers_food_produces_add = 0.5
		planet_technician_energy_produces_add = 0.5
		planet_miners_minerals_produces_add = 0.5
	}


	inline_script = {
		script = jobs/tec_job
		job = haruspex
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = haruspex
	}


	inline_script = {
		script = jobs/tec_job
		job = technophant
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = technophant
	}
}

#Fellowship of the Hammer
building_forge_of_the_fellowship = {
	position_priority = 100
	base_buildtime = @b2_time
	base_cap_amount = 1
	empire_limit = {
		base = 1
		modifier = {
			mult = -1
			has_country_flag = cybernetic_creed_construction
		}
	}
	can_demolish = no

	category = manufacturing

	potential = {
		NOR = {
			has_building = building_forge_of_the_fellowship
			has_building = building_grand_forge_of_the_fellowship
		}
		exists = owner
		owner = {
			has_origin = origin_cybernetic_creed
			has_country_flag = cybernetic_creed_construction
		}
		tec_planet_blocks_manufacturing_buildings = no
	}

	allow = {
		has_upgraded_capital = yes
		hidden_trigger = {
			owner = { has_origin = origin_cybernetic_creed }
		}
		custom_tooltip = {
			fail_text = not_cybernetic_creed_construction
			owner = { has_country_flag = cybernetic_creed_construction }
		}
	}


	inline_script = buildings/convert_to/tec_temple_1
	inline_script = buildings/convert_to/tec_bureaucratic_1

	destroy_trigger = {
		exists = owner
		OR = {
			tec_planet_blocks_manufacturing_buildings = yes
			owner = {
				OR = {
					NOT = { has_origin = origin_cybernetic_creed }
					AND = {
						has_origin = origin_cybernetic_creed
						OR = {
							has_country_flag = cybernetic_creed_research
							has_country_flag = cybernetic_creed_labor
							has_country_flag = cybernetic_creed_war
							has_country_flag = cybernetic_creed_general
						}
					}
				}
			}
		}
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 2
		}
	}

	inline_script = {
		script = jobs/tec_artisan
		count = 1
		mult = 1
		trigger = "
			owner = {
				is_regular_empire = yes
			}
		"
		display = with_desc
		default_job = artisan
		default_trigger = "is_gestalt = yes"
	}

	inline_script = {
		script = jobs/tec_foundry
		count = 1
		mult = 1
		trigger = "
			owner = {
				is_regular_empire = yes
			}
		"
		display = with_desc
		default_job = foundry
		default_trigger = "is_gestalt = yes"
	}

	inline_script = {
		script = jobs/tec_job
		job = haruspex
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = haruspex
		default_trigger = "is_gestalt = yes"
	}

	upgrades = {
		building_grand_forge_of_the_fellowship
	}
}

building_grand_forge_of_the_fellowship = {
	position_priority = 100
	base_buildtime = @b3_time
	can_build = no
	can_demolish = no
	category = manufacturing

	allow = {
		has_major_upgraded_capital = yes
		hidden_trigger = {
			exists = owner
			owner = { has_origin = origin_cybernetic_creed }
			NOT = {	has_building = building_grand_forge_of_the_fellowship }
		}
		custom_tooltip = {
			fail_text = not_cybernetic_creed_construction
			owner = { has_country_flag = cybernetic_creed_construction }
		}
	}

	destroy_trigger = {
		OR = {
			tec_planet_blocks_manufacturing_buildings = yes
			owner = {
				OR = {
					NOT = { has_origin = origin_cybernetic_creed }
					AND = {
						has_origin = origin_cybernetic_creed
						OR = {
							has_country_flag = cybernetic_creed_research
							has_country_flag = cybernetic_creed_labor
							has_country_flag = cybernetic_creed_war
							has_country_flag = cybernetic_creed_general
						}
					}
				}
			}
		}
	}

	inline_script = buildings/convert_to/tec_temple_2
	inline_script = buildings/convert_to/tec_bureaucratic_2

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 3
		}
	}

	inline_script = {
		script = jobs/tec_artisan
		count = 2
		mult = 1
		trigger = "
			owner = {
				is_regular_empire = yes
			}
		"
		display = with_desc
		default_job = artisan
		default_trigger = "is_gestalt = yes"
	}

	inline_script = {
		script = jobs/tec_foundry
		count = 2
		mult = 1
		trigger = "
			owner = {
				is_regular_empire = yes
			}
		"
		display = with_desc
		default_job = artisan
		default_trigger = "is_gestalt = yes"
	}

	inline_script = {
		script = jobs/tec_job
		job = haruspex
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = haruspex
	}

	inline_script = {
		script = jobs/tec_job
		job = technophant
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = technophant
	}
}

#United Creed
building_the_sanctum_of_augmentation = {
	position_priority = 100
	base_buildtime = @b2_time
	base_cap_amount = 1
	empire_limit = {
		base = 1
		modifier = {
			mult = -1
			has_country_flag = cybernetic_creed_general
		}
	}
	can_demolish = no

	category = unity

	potential = {
		NOR = {
			has_building = building_the_sanctum_of_augmentation
			has_building = building_the_united_sanctum_of_augmentation
		}
		exists = owner
		owner = {
			has_origin = origin_cybernetic_creed
			has_country_flag = cybernetic_creed_general
		}
		tec_planet_blocks_temple_buildings = no
	}

	allow = {
		has_upgraded_capital = yes
		hidden_trigger = {
			exists = owner
			owner = { has_origin = origin_cybernetic_creed }
		}
		custom_tooltip = {
			fail_text = not_cybernetic_creed_general
			owner = { has_country_flag = cybernetic_creed_general }
		}
	}


	inline_script = buildings/convert_to/tec_temple_1
	inline_script = buildings/convert_to/tec_bureaucratic_1

	destroy_trigger = {
		exists = owner
		OR = {
			tec_planet_blocks_temple_buildings = yes
			owner = {
				OR = {
					NOT = { has_origin = origin_cybernetic_creed }
					AND = {
						has_origin = origin_cybernetic_creed
						OR = {
							has_country_flag = cybernetic_creed_research
							has_country_flag = cybernetic_creed_labor
							has_country_flag = cybernetic_creed_war
							has_country_flag = cybernetic_creed_construction
						}
					}
				}
			}
		}
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 2
		}
	}

	inline_script = {
		script = jobs/tec_job
		job = haruspex
		count = 2
		mult = 1
		trigger = ""
		display = with_desc
		default_job = haruspex
	}

	inline_script = {
		script = jobs/tec_job
		job = technophant
		count = 1
		mult = 1
		trigger = ""
		display = with_desc
		default_job = technophant
	}

	upgrades = {
		building_the_united_sanctum_of_augmentation
	}
}

building_the_united_sanctum_of_augmentation = {
	position_priority = 100
	base_buildtime = @b3_time
	can_build = no
	can_demolish = no
	category = unity

	allow = {
		has_major_upgraded_capital = yes
		hidden_trigger = {
			exists = owner
			owner = { has_origin = origin_cybernetic_creed }
			NOT = {	has_building = building_the_united_sanctum_of_augmentation }
		}
		custom_tooltip = {
			fail_text = not_cybernetic_creed_general
			owner = { has_country_flag = cybernetic_creed_general }
		}
	}

	destroy_trigger = {
		OR = {
			tec_planet_blocks_temple_buildings = yes
			owner = {
				OR = {
					NOT = { has_origin = origin_cybernetic_creed }
					AND = {
						has_origin = origin_cybernetic_creed
						OR = {
							has_country_flag = cybernetic_creed_research
							has_country_flag = cybernetic_creed_labor
							has_country_flag = cybernetic_creed_war
							has_country_flag = cybernetic_creed_construction
						}
					}
				}
			}
		}
	}

	inline_script = buildings/convert_to/tec_temple_2
	inline_script = buildings/convert_to/tec_bureaucratic_2

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 3
		}
	}

	inline_script = {
		script = jobs/tec_job
		job = haruspex
		count = 4
		mult = 1
		trigger = ""
		display = with_desc
		default_job = haruspex
	}

	inline_script = {
		script = jobs/tec_job
		job = technophant
		count = 2
		mult = 1
		trigger = ""
		display = with_desc
		default_job = technophant
	}
}

#########################
# Synthetic Fertility	#
#########################

#Identity Repository
building_identity_repository = {
	base_buildtime = @b2_time
	base_cap_amount = 1
	position_priority = 100
	can_demolish = no
	can_be_disabled = no
	category = resource

	category = research

	potential = {
		exists = owner
		owner = {
			has_origin = origin_synthetic_fertility
			NOT = { has_country_flag = synthetic_fertility_no_identity_left_behind }
		}
	}

	destroy_trigger = {
		exists = owner
		NOT = {
			owner = {
				has_origin = origin_synthetic_fertility
			}
		}
	}

	inline_script = buildings/convert_to/tec_research_1

	allow = {
		owner = { has_origin = origin_synthetic_fertility }
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 4
		}
		upkeep = {
			trigger = {
				exists = owner
			}
			energy = @b1_upkeep
			mult = owner.value:identity_repository_scaling_mult
		}
		produces = {
			trigger = {
				exists = owner
				owner = { has_origin = origin_synthetic_fertility }
			}
			physics_research = 2
			society_research = 2
			engineering_research = 2
			unity = 2
			mult = owner.value:identity_repository_scaling_mult
		}

		upkeep = {
			trigger = {
				is_scope_valid = no
			}
			energy = 6
		}
		produces = {
			trigger = {
				is_scope_valid = no
			}
			physics_research = 6
			society_research = 6
			engineering_research = 6
			unity = 6
		}
	}

	triggered_planet_modifier = {
		potential = {
			is_scope_valid = no
		}
		trade_value_add = 2
		mult = 3
	}

	triggered_planet_modifier = {
		potential = {
			has_global_flag = game_started
			exists = owner
		}
		trade_value_add = 2
		mult = owner.value:identity_repository_scaling_mult
	}

	triggered_planet_modifier = {
		potential = {
			has_global_flag = game_started
			exists = owner
			any_owned_pop = {
				is_robot_pop = yes
			}
		}
		planet_jobs_robotic_produces_mult = 0.01
		mult = owner.value:identity_repository_scaling_mult
	}

	triggered_desc = {
		text = building_identity_repository_tt
	}
}

building_abandoned_gene_clinic = {
	icon = building_ancient_cryo_chamber
	position_priority = 100
	can_demolish = no
	can_build = no
	category = resource

	category = research

	potential = {
		exists = owner
		owner = { has_origin = origin_synthetic_fertility }
	}

	destroy_trigger = {
		exists = owner
		NOT = {
			owner = { has_origin = origin_synthetic_fertility }
		}
	}

	allow = {
		owner = { has_origin = origin_synthetic_fertility }
	}

	triggered_desc = {
		text = building_abandoned_gene_clinic_tt
	}
}

#####################
# Synaptic Lathe	#
#####################

# Habitat Administration
building_lathe_capital = {
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0
	building_sets = { cosmogenesis_world }

	category = government

	potential = {
		uses_district_set = cosmogenesis_world
		exists = owner
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_fe_resource_cost
			tier = 3
		}
		upkeep = {
			alloys = 5
		}
	}

	planet_modifier = {
		planet_housing_add = 20
		planet_amenities_add = 15
		planet_stability_add = 15
	}

	inline_script = {
		script = capitals/effects/tec_productivity
		tier = 1
	}

	upgrades = {
		"building_lathe_major_capital"
	}
}

# Habitat Central Complex
building_lathe_major_capital = {
	base_buildtime = @b2_time
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0
	building_sets = { cosmogenesis_world }

	category = government

	potential = {
		uses_district_set = cosmogenesis_world
		exists = owner
		owner = {
			has_ascension_perk = ap_cosmogenesis
		}
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_fe_resource_cost
			tier = 4
		}
		upkeep = {
			alloys = 10
		}
	}

	planet_modifier = {
		planet_max_districts_add = 2
		planet_housing_add = 40
		planet_amenities_add = 30
		planet_stability_add = 25
	}


	inline_script = {
		script = capitals/effects/tec_productivity
		tier = 2
	}

	upgrades = {
		"building_lathe_super_capital"
	}

	on_built = {
		planet = {
			set_planet_entity = {
				entity = "neural_calculator_phase_2_entity"
			}
		}
	}
}

# Habitat Central Complex
building_lathe_super_capital = {
	base_buildtime = @b3_time
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0
	building_sets = { cosmogenesis_world }

	category = government

	potential = {
		uses_district_set = cosmogenesis_world
		exists = owner
		owner = {
			has_ascension_perk = ap_cosmogenesis
		}
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_fe_resource_cost
			tier = 4
		}
		upkeep = {
			alloys = 15
		}
	}

	planet_modifier = {
		planet_max_districts_add = 4
		planet_housing_add = 100
		planet_amenities_add = 50
		planet_stability_add = 40
	}


	inline_script = {
		script = capitals/effects/tec_productivity
		tier = 3
	}

	on_built = {
		planet = {
			set_planet_entity = {
				entity = "neural_calculator_phase_3_entity"
			}
		}
	}
}

building_lathe_resonator = {
	base_buildtime = @b2_time
	base_cap_amount = 2
	building_sets = { cosmogenesis_world }

	potential = {
		is_planet_class = pc_cosmogenesis_world
	}

	category = resource

	resources = {
		category = planet_buildings

		inline_script = {
			script = buildings/resources/tec_fe_lathe_resource_cost
			tier = 3
		}

		inline_script = {
			script = buildings/resources/tec_fe_rare_resource_cost
			rare = rare_crystals
		}
	}

	triggered_planet_modifier = {
		planet_jobs_upkeep_mult = 1
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_jobs_produces_mult = 0.01
		mult = value:num_chip_slave_raw
	}

	prerequisites = {
		tech_lathe_resonator
	}

	triggered_desc = {
		text = lathe_resonator_tt
	}
	ai_estimate_without_unemployment = yes
	additional_ai_weight = 200
	ai_weight_coefficient = 1.2
}

building_lathe_stabilisator = {
	base_buildtime = @b2_time
	base_cap_amount = 2
	building_sets = { cosmogenesis_world }

	potential = {
		is_planet_class = pc_cosmogenesis_world
		exists = owner
		owner = {
			has_ascension_perk = ap_cosmogenesis
		}
	}

	category = government

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_fe_lathe_resource_cost
			tier = 3
		}

		inline_script = {
			script = buildings/resources/tec_fe_rare_resource_cost
			rare = exotic_gases
		}
	}

	triggered_planet_modifier = {
		planet_stability_add = 15
	}
	ai_estimate_without_unemployment = yes
	additional_ai_weight = 200
	ai_weight_coefficient = 1.2
}

building_lathe_overclocker = {
	base_buildtime = @b2_time
	base_cap_amount = 2
	building_sets = { cosmogenesis_world }

	potential = {
		is_planet_class = pc_cosmogenesis_world
		exists = owner
		owner = {
			has_ascension_perk = ap_cosmogenesis
		}
	}

	category = resource

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_fe_lathe_resource_cost
			tier = 3
		}

		inline_script = {
			script = buildings/resources/tec_fe_rare_resource_cost
			rare = volatile_motes
		}
	}

	triggered_planet_modifier = {
		modifier = {
			planet_neural_chips_physics_research_produces_add = 1
			planet_neural_chips_society_research_produces_add = 1
			planet_neural_chips_engineering_research_produces_add = 1
			planet_neural_chips_advanced_logic_produces_add = 0.5
			pop_purge_speed = 0.75
		}
	}

	#triggered_desc = {
	#	text = lathe_overclocker_tt
	#}

	prerequisites = {
		tech_lathe_overclocker
	}
	ai_estimate_without_unemployment = yes
	additional_ai_weight = 200
	ai_weight_coefficient = 1.2
}

building_lathe_preserver = {
	base_buildtime = @b2_time
	base_cap_amount = 2
	building_sets = { cosmogenesis_world }

	potential = {
		is_planet_class = pc_cosmogenesis_world
		exists = owner
		owner = {
			has_ascension_perk = ap_cosmogenesis
		}
	}

	category = amenity

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_fe_lathe_resource_cost
			tier = 3
		}

		inline_script = {
			script = buildings/resources/tec_fe_rare_resource_cost
			rare = exotic_gases
		}
	}

	planet_modifier = {
		pop_purge_speed = -0.15
	}

	prerequisites = {
		tech_lathe_preserver
	}
	ai_estimate_without_unemployment = yes
	additional_ai_weight = 200
	ai_weight_coefficient = 1.2
}

building_lathe_reactor = {
	base_buildtime = @b2_time
	base_cap_amount = 2
	building_sets = { cosmogenesis_world }

	potential = {
		is_planet_class = pc_cosmogenesis_world
		exists = owner
		owner = {
			has_ascension_perk = ap_cosmogenesis
		}
	}

	category = resource

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_fe_lathe_resource_cost
			tier = 3
		}

		inline_script = {
			script = buildings/resources/tec_fe_rare_resource_cost
			rare = exotic_gases
		}
	}

	planet_modifier = {
		planet_jobs_upkeep_mult = -0.15
		planet_buildings_upkeep_mult = -0.15
		planet_districts_energy_upkeep_mult = -0.15
	}
	ai_estimate_without_unemployment = yes
	additional_ai_weight = 200
	ai_weight_coefficient = 1.2
}

building_lathe_life_support = {
	base_buildtime = @b2_time
	base_cap_amount = 2
	building_sets = { cosmogenesis_world }

	potential = {
		is_planet_class = pc_cosmogenesis_world
		exists = owner
		owner = {
			has_ascension_perk = ap_cosmogenesis
		}
	}

	category = amenity

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_fe_lathe_resource_cost
			tier = 3
		}

		inline_script = {
			script = buildings/resources/tec_fe_rare_resource_cost
			rare = rare_crystals
		}
	}

	planet_modifier = {
		planet_housing_add = 50
		planet_amenities_add = 50
	}

	prerequisites = {
		tech_lathe_life_support
	}
	ai_estimate_without_unemployment = yes
	additional_ai_weight = 200
	ai_weight_coefficient = 1.2
}

building_lathe_cogitator = {
	base_buildtime = @b2_time
	base_cap_amount = 2
	building_sets = { cosmogenesis_world }

	potential = {
		is_planet_class = pc_cosmogenesis_world
		exists = owner
		owner = {
			has_ascension_perk = ap_cosmogenesis
		}
	}

	category = army

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_fe_lathe_resource_cost
			tier = 4
		}

		inline_script = {
			script = buildings/resources/tec_fe_rare_resource_cost
			rare = volatile_motes
		}

	}

	planet_modifier = {
		planet_amenities_add = -50
		planet_jobs_produces_mult = -0.35
	}

	triggered_country_modifier = {
		potential = {
			always = yes
		}
		country_naval_cap_mult = 0.01
		ship_experience_gain_mult = 0.02
		mult = value:num_chip_slave_raw
	}

	triggered_desc = {
		text = building_lathe_cogitator_tt
	}

	prerequisites = {
		tech_lathe_cogitator
	}
	ai_estimate_without_unemployment = yes
	additional_ai_weight = 200
	ai_weight_coefficient = 1.2
}

building_lathe_validator = {
	base_buildtime = @b2_time
	base_cap_amount = 2
	building_sets = { cosmogenesis_world }

	potential = {
		is_planet_class = pc_cosmogenesis_world
		exists = owner
		owner = {
			has_ascension_perk = ap_cosmogenesis
		}
	}

	category = research

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_fe_lathe_resource_cost
			tier = 3
		}

		inline_script = {
			script = buildings/resources/tec_fe_rare_resource_cost
			rare = rare_crystals
		}
	}

	planet_modifier = {
		planet_stability_add = -10
	}

	triggered_country_modifier = {
		potential = {
			always = yes
		}
		category_computing_research_speed_mult = 0.01
		mult = value:num_chip_slave_raw
	}

	triggered_desc = {
		text = building_lathe_validator_tt
	}

	prerequisites = {
		tech_lathe_validator
	}
	ai_estimate_without_unemployment = yes
	additional_ai_weight = 200
	ai_weight_coefficient = 1.2
}

#########################
# CYBERIZATION SITUATION
#########################

building_augmentation_center = {
	base_buildtime = @b3_time

	desc = { # Regular empire, default
		trigger = {
			exists = owner
			owner = {
				is_regular_empire = yes
				NOT = { has_origin = origin_cybernetic_creed }
				NOR = {
					has_country_flag = cyber_control_government
					has_country_flag = cyber_control_corporate
					has_country_flag = cyber_control_independent
				}
			}
		}
		text = building_augmentation_center_desc
	}

	desc = { # Regular empire, government control
		trigger = {
			exists = owner
			owner = {
				is_regular_empire = yes
				NOT = { has_origin = origin_cybernetic_creed }
				has_country_flag = cyber_control_government
			}
		}
		text = building_augmentation_center_government_desc
	}

	desc = { # Regular empire, corporate control
		trigger = {
			exists = owner
			owner = {
				is_regular_empire = yes
				NOT = { has_origin = origin_cybernetic_creed }
				has_country_flag = cyber_control_corporate
			}
		}
		text = building_augmentation_center_corporate_desc
	}

	desc = { # Regular empire, independent control
		trigger = {
			exists = owner
			owner = {
				is_regular_empire = yes
				NOT = { has_origin = origin_cybernetic_creed }
				has_country_flag = cyber_control_independent
			}
		}
		text = building_augmentation_center_independent_desc
	}

	desc = { # Cybernetic Creed
		trigger = {
			exists = owner
			owner = {
				has_origin = origin_cybernetic_creed
			}
		}
		text = building_augmentation_center_creed_desc
	}

	desc = { # Hive
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		text = building_augmentation_center_hive_desc
	}

	category = pop_assembly

	base_cap_amount = 1

	potential = {
		owner = {
			OR = {
				has_country_flag = augmentation_center_available
				has_active_tradition = tr_cybernetics_augmentation_centers
			}
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_tradition = tr_cybernetics_integrated_anatomy
			}
			any_owned_pop = {
				has_auto_modding_trait = yes
			}
		}
		modifier = {
			auto_mod_monthly_add = 6
		}
	}

	inline_script = {
		script = jobs/tec_augmentor
		count = 2
		mult = 1
		trigger = ""
		display = with_desc
		default_job = augmentor
	}

	inline_script = {
		script = jobs/tec_augmentor
		count = 2
		mult = 1
		trigger = "
			owner = { has_active_tradition = tr_cybernetics_augmentation_overload }
		"
		display = no_desc
	}

	### CONTROLLING SECTOR MODIFIERS ###
	triggered_planet_modifier = { # Government control, after Cyberization
		potential = {
			exists = owner
			owner = {
				has_country_flag = cyber_augmentation_center_government
			}
		}
		modifier = {
			planet_jobs_unity_produces_mult = 0.10
		}
	}

	triggered_planet_modifier = { # Corporate control, after Cyberization
		potential = {
			exists = owner
			owner = {
				has_country_flag = cyber_augmentation_center_corporate
			}
		}
		modifier = {
			planet_jobs_consumer_goods_produces_mult = 0.10
		}
	}

	triggered_planet_modifier = { # Independent control, after Cyberization
		potential = {
			exists = owner
			owner = {
				has_country_flag = cyber_augmentation_center_independent
			}
		}
		modifier = {
			planet_jobs_upkeep_mult = -0.05
		}
	}

	### JOB STRATA FOCUS MODIFIERS ###
	triggered_planet_modifier = { # Ruler focus
		potential = {
			exists = owner
			owner = {
				has_country_flag = cyber_focus_rulers
			}
		}
		modifier = {
			planet_jobs_ruler_produces_mult = 0.10
		}
	}

	triggered_planet_modifier = { # Specialist focus
		potential = {
			exists = owner
			owner = {
				has_country_flag = cyber_focus_specialists
			}
		}
		modifier = {
			planet_jobs_specialist_produces_mult = 0.10
		}
	}

	triggered_planet_modifier = { # Worker focus
		potential = {
			exists = owner
			owner = {
				has_country_flag = cyber_focus_workers
			}
		}
		modifier = {
			planet_jobs_worker_produces_mult = 0.10
		}
	}

	triggered_planet_modifier = { # General focus
		potential = {
			exists = owner
			owner = {
				has_country_flag = cyber_focus_everyone
			}
		}
		modifier = {
			planet_jobs_produces_mult = 0.05
		}
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 3
		}
	}

	is_essential = yes
}

building_cyberdome = { # Cyber Imperial Collectivist
	base_buildtime = @b3_time
	base_cap_amount = 1

	desc = {
		text = building_cyberdome_desc
	}

	category = amenity

	potential = {
		owner = {
			is_imperial_authority = yes
			has_country_flag = cyber_collectivist
		}
		is_capital = yes
	}

	allow = {

	}

	destroy_trigger = {
		OR = {
			AND = {
				exists = owner
				owner = {
					NOT = { has_authority = auth_imperial }
				}
			}
			AND = {
				exists = planet
				planet = {
					is_capital = no
				}
			}
		}
	}

	inline_script = {
		script = jobs/tec_job
		job = cyberdome_duelist
		count = 2
		mult = 1
		trigger = ""
		display = with_desc
		default_job = cyberdome_duelist
	}

	inline_script = {
		script = jobs/tec_job
		job = cyberdome_spectator
		count = 2
		mult = 1
		trigger = ""
		display = with_desc
		default_job = cyberdome_duelist
	}

	# With edict
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_edict = neurocasted_spectacles
			}
		}
		planet_housing_add = 50
		pop_growth_from_immigration = 0.2
		planet_pops_upkeep_mult = -0.1
		job_cyberdome_duelist_per_pop = 0.05 # 1 job per 20 pops
		job_cyberdome_spectator_per_pop = 0.1 # 1 job per 10 pops
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 2
		}
	}
}

###########################
# SYNTHESIZATION SITUATION
###########################

building_identity_complex = {
	base_buildtime = @b3_time
	empire_limit = {
		base = 1
	}

	desc = {
		text = building_identity_complex_desc
	}

	category = pop_assembly

	potential = {
		owner = { has_country_flag = identity_complex_available }
	}

	destroy_trigger = {
		exists = owner
		NOT = {
			owner = { has_country_flag = identity_complex_available }
		}
	}

	inline_script = {
		script = jobs/tec_job
		job = identity_designer
		count = 2
		mult = 1
		trigger = ""
		display = with_desc
		default_job = identity_designer
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 3
		}
	}

	is_essential = yes
}

#################
#	Nanotech	#
#################

building_nanolab_1 = {
	base_buildtime = @b2_time

	category = research

	potential = {
		exists = owner
		owner = { has_tradition = tr_nanotech_adopt }
	}

	allow = {
		exists = owner
		owner = { has_tradition = tr_nanotech_adopt }
	}

	destroy_trigger = {
		exists = owner
		OR = {
			NOT = { owner = { has_tradition = tr_nanotech_adopt } }
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}


	inline_script = buildings/convert_to/tec_research_2

	resources = {
		category = planet_buildings

		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 3
		}

		inline_script = {
			script = buildings/resources/tec_rare_resource_cost
			rare = nanites
			tier = 2
			trigger = ""
		}
	}

	inline_script = {
		script = jobs/tec_nanotech_researcher
		count = 3
		mult = 1
		trigger = ""
		display = with_desc
		default_job = nanotech_researcher
	}

	inline_script = {
		script = buildings/effects/type/tec_research_lab
		tier = 2
		type = all
	}

	upgrades = {
		"building_nanolab_2"
	}
}

building_nanolab_2 = {
	base_buildtime = @b3_time
	can_build = no

	category = research

	potential = {
		exists = owner
		owner = { has_tradition = tr_nanotech_1 }
	}

	allow = {
		has_upgraded_capital = yes
	}

	inline_script = buildings/convert_to/tec_research_3

	destroy_trigger = {
		exists = owner
		OR = {
			NOT = { owner = { has_tradition = tr_nanotech_1 } }
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}

	resources = {
		category = planet_buildings

		inline_script = {
			script = buildings/resources/tec_resource_cost
			tier = 4
		}

		inline_script = {
			script = buildings/resources/tec_rare_resource_cost
			rare = nanites
			tier = 3
			trigger = ""
		}

	}

	inline_script = {
		script = jobs/tec_nanotech_researcher
		count = 6
		mult = 1
		trigger = ""
		display = with_desc
		default_job = nanotech_researcher
	}

	inline_script = {
		script = buildings/effects/type/tec_research_lab
		tier = 3
		type = all
	}
}

building_nanotech_cauldron = {
	base_buildtime = @b2_time

	category = manufacturing

	potential = {
		exists = owner
		owner = { has_tradition = tr_nanotech_2 }
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		always = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			NOT = { owner = { has_tradition = tr_nanotech_2 } }
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			alloys = @b3_minerals
		}
		upkeep = {
			nanites = 3
			energy = 30
		}
		produces = {
			alloys = 15
		}
	}
}
