# -----------------------------------------
# UNITY BUILDINGS
# -----------------------------------------
# Note - Bureaucratic buildings are available for every regular empire
# Bureaucrats will add a small amount of edict funds

# BASIC UNITY PRODUCTION
# -----------------------------------------
# --------------- Bureaucrats
building_bureaucratic_1 = {
	base_buildtime = @b1_time
	position_priority = 130		# Admin

	category = unity

	prerequisites = {
		"tech_planetary_government"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		tec_is_paperwork_cult = no
		tec_is_aiauth_empire = no
		has_make_spiritualist_perk = no
	}

	upgrades = {
		"building_bureaucratic_2"
	}

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes 
			tec_is_paperwork_cult = no
			tec_is_aiauth_empire = no
			has_make_spiritualist_perk = no
		}
		NOT = { has_modifier = slave_colony }
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_regular_empire = no
				tec_is_paperwork_cult = yes
				tec_is_aiauth_empire = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		# Regular
		#	building_bureaucratic_1
		# AI auth
			building_tec_aiauth_1
		# Cult of paperwork
			#building_tec_paperwork_temple_1
		# Hive
			building_hive_node
		# Cyberhive
			building_tec_cyberhive_node
		# Biohive
			#building_tec_cyberhive_node
		# Lithohive
			#building_tec_lithohive_node	
		# Machine
			building_uplink_node
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
	}

	inline_script = {
		script = buildings/effects/inline_evolved_byzantine_bureaucracy
		tier = 1
	}

	inline_script = {
		script = jobs/inline_evolved_bureaucrat
		count = @b1_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_bureaucratic_2 = {
	base_buildtime = @b2_time
	can_build = no
	position_priority = 130		# Admin

	category = unity

	prerequisites = {
		"tech_colonial_bureaucracy"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		tec_is_paperwork_cult = no
		tec_is_aiauth_empire = no
		has_make_spiritualist_perk = no
	}

	upgrades = {
		"building_bureaucratic_3"
	}

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes 
			tec_is_paperwork_cult = no
			tec_is_aiauth_empire = no
			has_make_spiritualist_perk = no
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_regular_empire = no
				tec_is_paperwork_cult = yes
				tec_is_aiauth_empire = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		# Regular
		#	building_bureaucratic_2
		# AI auth
			building_tec_aiauth_2
		# Cult of paperwork
			#building_tec_paperwork_temple_2
		# Hive
			building_hive_cluster
		# Cyberhive
			building_tec_cyberhive_cluster
		# Biohive
			#building_tec_biohive_cluster
		# Lithohive
			#building_tec_lithohive_cluster	
		# Machine
			building_network_junction
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}

		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = rare_crystals
		}
	}

	inline_script = {
		script = buildings/effects/inline_evolved_byzantine_bureaucracy
		tier = 2
	}

	inline_script = {
		script = jobs/inline_evolved_bureaucrat
		count = @b2_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_bureaucratic_3 = {
	base_buildtime = @b3_time
	can_build = no
	position_priority = 130		# Admin

	category = unity

	prerequisites = {
		"tech_galactic_bureaucracy"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		tec_is_paperwork_cult = no
		tec_is_aiauth_empire = no
		has_make_spiritualist_perk = no
	}

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes 
			tec_is_paperwork_cult = no
			tec_is_aiauth_empire = no
			has_make_spiritualist_perk = no
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_regular_empire = no
				tec_is_paperwork_cult = yes
				tec_is_aiauth_empire = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		# Regular
		#	building_bureaucratic_3
		# AI auth
			building_tec_aiauth_3
		# Cult of paperwork
			#building_tec_paperwork_temple_3
		# Hive
			building_hive_confluence
		# Cyberhive
			building_tec_cyberhive_confluence
		# Biohive
			#building_tec_biohive_confluence
		# Lithohive
			#building_tec_lithohive_confluence	
		# Machine
			building_system_conflux
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}

		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 3
			rare = rare_crystals
		}
	}

	inline_script = {
		script = buildings/effects/inline_evolved_byzantine_bureaucracy
		tier = 3
	}

	inline_script = {
		script = jobs/inline_evolved_bureaucrat
		count = @b3_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}

	inline_script = buildings/effects/inline_evolved_all_the_priests_2
}

# --------------- AI auth - Directly replaces bureaucratic buildings
building_tec_aiauth_1 = {
	base_buildtime = @b1_time
	position_priority = 130		# Admin

	category = unity

	prerequisites = {
		"tech_planetary_government"
	}

	show_tech_unlock_if = {
		tec_is_aiauth_empire = yes
	}

	upgrades = {
		"building_tec_aiauth_2"
	}

	potential = {
		exists = owner
		owner = {
			tec_is_aiauth_empire = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	destroy_trigger = {
		exists = owner
		owner = {
			tec_is_aiauth_empire = no
		}
	}

	convert_to = {
		# Regular
			building_bureaucratic_1
		# AI auth
			#building_tec_aiauth_1
		# Cult of paperwork
			#building_tec_paperwork_temple_1
		# Hive
			building_hive_node
		# Cyberhive
			building_tec_cyberhive_node
		# Biohive
			#building_tec_cyberhive_node
		# Lithohive
			#building_tec_lithohive_node	
		# Machine
			building_uplink_node
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
	}

	inline_script = {
		script = buildings/effects/inline_evolved_byzantine_bureaucracy
		tier = 1
	}

	inline_script = {
		script = jobs/inline_evolved_bureaucrat
		count = @b1_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_tec_aiauth_2 = {
	base_buildtime = @b2_time
	can_build = no
	position_priority = 130		# Admin

	category = unity

	prerequisites = {
		"tech_colonial_bureaucracy"
	}

	show_tech_unlock_if = {
		tec_is_aiauth_empire = yes
	}

	upgrades = {
		"building_tec_aiauth_3"
	}

	potential = {
		exists = owner
		owner = {
			tec_is_aiauth_empire = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	destroy_trigger = {
		exists = owner
		owner = { tec_is_aiauth_empire = no }
	}

	allow = {
		has_upgraded_capital = yes
	}

	convert_to = {
		# Regular
			building_bureaucratic_2
		# AI auth
			#building_tec_aiauth_2
		# Cult of paperwork
			#building_tec_paperwork_temple_2
		# Hive
			building_hive_cluster
		# Cyberhive
			building_tec_cyberhive_cluster
		# Biohive
			#building_tec_biohive_cluster
		# Lithohive
			#building_tec_lithohive_cluster	
		# Machine
			building_network_junction
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}

		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = rare_crystals
		}
	}

	inline_script = {
		script = buildings/effects/inline_evolved_byzantine_bureaucracy
		tier = 2
	}

	inline_script = {
		script = jobs/inline_evolved_bureaucrat
		count = @b2_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_tec_aiauth_3 = {
	base_buildtime = @b3_time
	can_build = no
	position_priority = 130		# Admin

	category = unity

	prerequisites = {
		"tech_galactic_bureaucracy"
	}

	show_tech_unlock_if = {
		tec_is_aiauth_empire = yes
	}

	potential = {
		exists = owner
		owner = {
			tec_is_aiauth_empire = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { tec_is_aiauth_empire = no }
	}

	convert_to = {
		# Regular
			building_bureaucratic_3
		# AI auth
			#building_tec_aiauth_3
		# Cult of paperwork
			#building_tec_paperwork_temple_3
		# Hive
			building_hive_confluence
		# Cyberhive
			building_tec_cyberhive_confluence
		# Biohive
			#building_tec_biohive_confluence
		# Lithohive
			#building_tec_lithohive_confluence	
		# Machine
			building_system_conflux
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}

		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 3
			rare = rare_crystals
		}
	}

	inline_script = {
		script = buildings/effects/inline_evolved_byzantine_bureaucracy
		tier = 3
	}

	inline_script = {
		script = jobs/inline_evolved_bureaucrat
		count = @b3_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}

	inline_script = buildings/effects/inline_evolved_all_the_priests_2
}

# --------------- Regular Spi
building_temple = {
	base_buildtime = @b1_time
	position_priority = 120		# Unity

	category = unity

	prerequisites = {
		"tech_cultural_heritage"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
		tec_is_spiritualist_main_cult = no
	}

	upgrades = {
		building_holotemple
	}

	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
			tec_is_spiritualist_main_cult = no
		}
		NOT = { has_modifier = slave_colony }
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			owner = { tec_is_spiritualist_main_cult = yes }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		# Base
		#	building_temple
		# Death cult
			building_sacrificial_temple_1
		# Machine cult
			building_tec_mecha_temple_1
		# Cult of paperwork
			#building_tec_paperwork_temple_1	
		# Star cult
			#building_tec_star_temple_1
		# Atom cult
			#building_tec_atom_temple_1
		# Cult of Cycles
			#building_tec_cycle_temple_1
		# Cult of Wealth
			#building_tec_wealth_temple_1
		# Hive
			building_hive_node
		# Cyberhive
			building_tec_cyberhive_node
		# Biohive
			#building_tec_biohive_node
		# Lithohive
			#building_tec_lithohive_node	
		# Machine
			building_uplink_node
		# Bureaucratic fallback
			building_bureaucratic_1
		# Aiauth fallback
			#building_tec_aiauth_1
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
	}

	# Modifiers
		planet_modifier = {
			pop_ethic_spiritualist_attraction_mult = 0.05
		}
	# /

	inline_script = {
		script = jobs/inline_evolved_job
		job = priest
		count = @b1_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_holotemple = {
	base_buildtime = @b2_time
	position_priority = 120		# Unity
	can_build = no

	category = unity

	prerequisites = {
		"tech_holographic_rituals"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
		tec_is_spiritualist_main_cult = no
	}

	upgrades = {
		building_sacred_nexus
	}

	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
			tec_is_spiritualist_main_cult = no
		}
		NOT = {
			has_modifier = slave_colony
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			owner = { tec_is_spiritualist_main_cult = yes }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		# Base
		#	building_holotemple
		# Death cult
			building_sacrificial_temple_2
		# Machine cult
			building_tec_mecha_temple_2
		# Cult of paperwork
			#building_tec_paperwork_temple_2	
		# Star cult
			#building_tec_star_temple_2
		# Atom cult
			#building_tec_atom_temple_2
		# Cult of Cycles
			#building_tec_cycle_temple_2
		# Cult of Wealth
			#building_tec_wealth_temple_2
		# Hive
			building_hive_cluster
		# Cyberhive
			building_tec_cyberhive_cluster
		# Biohive
			#building_tec_biohive_cluster
		# Lithohive
			#building_tec_lithohive_cluster	
		# Machine
			building_network_junction
		# Bureaucratic fallback
			building_bureaucratic_2
		# Aiauth fallback
			#building_tec_aiauth_2	
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = rare_crystals
		}
	}

	# Modifiers
		planet_modifier = {
			pop_ethic_spiritualist_attraction_mult = 0.10
		}
	# /
	
	inline_script = {
		script = jobs/inline_evolved_job
		job = priest
		count = @b2_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_sacred_nexus = {
	base_buildtime = @b3_time
	can_build = no
	position_priority = 120		# Unity

	category = unity

	prerequisites = {
		"tech_consecration_fields"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
		tec_is_spiritualist_main_cult = no
	}

	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
			tec_is_spiritualist_main_cult = no
		}
		NOT = {
			has_modifier = slave_colony
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			owner = { tec_is_spiritualist_main_cult = yes }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		# Base
		#	building_sacred_nexus
		# Death cult
			building_sacrificial_temple_3
		# Machine cult
			building_tec_mecha_temple_3
		# Cult of paperwork
			#building_tec_paperwork_temple_3	
		# Star cult
			#building_tec_star_temple_3
		# Atom cult
			#building_tec_atom_temple_3
		# Cult of Cycles
			#building_tec_cycle_temple_3
		# Cult of Wealth
			#building_tec_wealth_temple_3
		# Hive
			building_hive_confluence
		# Cyberhive
			building_tec_cyberhive_confluence
		# Biohive
			#building_tec_biohive_confluence
		# Lithohive
			#building_tec_lithohive_confluence
		# Machine
			building_system_conflux
		# Bureaucratic fallback
			building_bureaucratic_3
		# Aiauth fallback
			#building_tec_aiauth_3
	}
	
	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 3
			rare = rare_crystals
		}
	}

	# Modifiers
		planet_modifier = {
			pop_ethic_spiritualist_attraction_mult = 0.15
		}
	# /
	
	# Jobs
		# Priests
			inline_script = {
				script = jobs/inline_evolved_job
				job = priest
				count = @b3_jobs
				mult = 1
				display = with_desc
				trigger = ""
			}
		# /
		# High priests
			inline_script = buildings/effects/inline_evolved_exalted_priesthood
			inline_script = buildings/effects/inline_evolved_all_the_priests_2
		# /
	# /
}

# --------------- Death cult
building_sacrificial_temple_1 = { # Sacrificial Temple (basic)
	base_buildtime = @b1_time
	position_priority = 120		# Unity

	category = unity

	prerequisites = { "tech_cultural_heritage" }

	show_tech_unlock_if = {
		tec_is_death_cult = yes
	}

	upgrades = { building_sacrificial_temple_2 }

	potential = {
		exists = owner
		owner = {
			tec_is_death_cult = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				tec_is_death_cult = no
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		# Base
			building_temple
		# Death cult
		#	building_sacrificial_temple_1
		# Machine cult
			building_tec_mecha_temple_1
		# Cult of paperwork
			#building_tec_paperwork_temple_1	
		# Star cult
			#building_tec_star_temple_1
		# Atom cult
			#building_tec_atom_temple_1
		# Cult of Cycles
			#building_tec_cycle_temple_1
		# Cult of Wealth
			#building_tec_wealth_temple_1
		# Hive
			building_hive_node
		# Cyberhive
			building_tec_cyberhive_node
		# Biohive
			#building_tec_biohive_node
		# Lithohive
			#building_tec_lithohive_node	
		# Machine
			building_uplink_node
		# Bureaucratic fallback
			building_bureaucratic_1
		# Aiauth fallback
			#building_tec_aiauth_1
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
	}

	# Modifiers
		planet_modifier = {
			pop_ethic_spiritualist_attraction_mult = 0.15
		}
	# /
	
	# Jobs
		# Priests
			inline_script = {
				script = jobs/inline_evolved_job
				job = death_priest
				count = @b1_half_jobs
				mult = 1
				display = with_desc
				trigger = ""
			}
			inline_script = {
				script = jobs/inline_evolved_job
				job = mortal_initiate
				count = @b1_half_jobs
				mult = 1
				display = with_desc
				trigger = ""
			}
		# /
	# /
}

building_sacrificial_temple_2 = { # Grim Holotemple
	base_buildtime = @b2_time
	can_build = no
	position_priority = 120		# Unity

	category = unity

	prerequisites = { "tech_holographic_rituals" }

	show_tech_unlock_if = {
		tec_is_death_cult = yes
	}

	upgrades = { building_sacrificial_temple_3 }

	potential = {
		exists = owner
		owner = {
			tec_is_death_cult = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		exists = owner
		has_upgraded_capital = yes
		owner = {
			tec_is_death_cult = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				tec_is_death_cult = no
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		# Base
			building_holotemple
		# Death cult
		#	building_sacrificial_temple_2
		# Machine cult
			building_tec_mecha_temple_2
		# Cult of paperwork
			#building_tec_paperwork_temple_2	
		# Star cult
			#building_tec_star_temple_2
		# Atom cult
			#building_tec_atom_temple_2
		# Cult of Cycles
			#building_tec_cycle_temple_2
		# Cult of Wealth
			#building_tec_wealth_temple_2
		# Hive
			building_hive_cluster
		# Cyberhive
			building_tec_cyberhive_cluster
		# Biohive
			#building_tec_biohive_cluster
		# Lithohive
			#building_tec_lithohive_cluster	
		# Machine
			building_network_junction
		# Bureaucratic fallback
			building_bureaucratic_2
		# Aiauth fallback
			#building_tec_aiauth_2	
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = rare_crystals
		}
	}

	# Modifiers
		planet_modifier = {
			pop_ethic_spiritualist_attraction_mult = 0.1
		}
	# /

	# Jobs
		# Priests
		inline_script = {
			script = jobs/inline_evolved_job
			job = death_priest
			count = @b2_half_jobs
			mult = 1
			display = with_desc
			trigger = ""
		}
		inline_script = {
			script = jobs/inline_evolved_job
			job = mortal_initiate
			count = @b2_half_jobs
			mult = 1
			display = with_desc
			trigger = ""
		}
	# /
# /
}

building_sacrificial_temple_3 = { # Temple of Grand Sacrifice
	base_buildtime = @b3_time
	can_build = no
	position_priority = 120		# Unity

	category = unity

	prerequisites = { "tech_consecration_fields" }

	show_tech_unlock_if = {
		tec_is_death_cult = yes
	}

	potential = {
		exists = owner
		owner = {
			tec_is_death_cult = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				tec_is_death_cult = no
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		# Base
			building_sacred_nexus
		# Death cult
		#	building_sacrificial_temple_3
		# Machine cult
			building_tec_mecha_temple_3
		# Cult of paperwork
			#building_tec_paperwork_temple_3	
		# Star cult
			#building_tec_star_temple_3
		# Atom cult
			#building_tec_atom_temple_3
		# Cult of Cycles
			#building_tec_cycle_temple_3
		# Cult of Wealth
			#building_tec_wealth_temple_3
		# Hive
			building_hive_confluence
		# Cyberhive
			building_tec_cyberhive_confluence
		# Biohive
			#building_tec_biohive_confluence
		# Lithohive
			#building_tec_lithohive_confluence
		# Machine
			building_system_conflux
		# Bureaucratic fallback
			building_bureaucratic_3
		# Aiauth fallback
			#building_tec_aiauth_3
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 3
			rare = rare_crystals
		}
	}

	# Modifiers
		planet_modifier = {
			pop_ethic_spiritualist_attraction_mult = 0.15
		}
	# /

	# Jobs
		# Base
			inline_script = {
				script = jobs/inline_evolved_job
				job = death_priest
				count = @b3_half_jobs
				mult = 1
				display = with_desc
				trigger = ""
			}
			inline_script = {
				script = jobs/inline_evolved_job
				job = mortal_initiate
				count = @b3_half_jobs
				mult = 1
				display = with_desc
				trigger = ""
			}
		# /

		# High priests
			inline_script = buildings/effects/inline_evolved_exalted_priesthood
			inline_script = buildings/effects/inline_evolved_all_the_priests_2
		# /
	# /
}

# --------------- Machine cult
building_tec_mecha_temple_1 = { # Mecha-Temple (basic)
	base_buildtime = @b1_time
	position_priority = 120		# Unity

	category = unity

	prerequisites = { "tech_cultural_heritage" }

	show_tech_unlock_if = {
		tec_is_machine_cult = yes
	}

	upgrades = { building_tec_mecha_temple_2 }

	potential = {
		exists = owner
		owner = {
			tec_is_machine_cult = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				tec_is_machine_cult = no
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		# Base
			building_temple
		# Death cult
			building_sacrificial_temple_1
		# Machine cult
		#	building_tec_mecha_temple_1
		# Cult of paperwork
			#building_tec_paperwork_temple_1	
		# Star cult
			#building_tec_star_temple_1
		# Atom cult
			#building_tec_atom_temple_1
		# Cult of Cycles
			#building_tec_cycle_temple_1
		# Cult of Wealth
			#building_tec_wealth_temple_1
		# Hive
			building_hive_node
		# Cyberhive
			building_tec_cyberhive_node
		# Biohive
			#building_tec_biohive_node
		# Lithohive
			#building_tec_lithohive_node	
		# Machine
			building_uplink_node
		# Bureaucratic fallback
			building_bureaucratic_1
		# Aiauth fallback
			#building_tec_aiauth_1
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
	}

	planet_modifier = {
		pop_ethic_spiritualist_attraction_mult = 0.05
		planet_pops_robotics_upkeep_mult = -0.025
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = tec_mecha_priest
		count = @b1_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_tec_mecha_temple_2 = { # Mecha Holotemple
	base_buildtime = @b2_time
	can_build = no
	position_priority = 120		# Unity

	category = unity

	prerequisites = { "tech_holographic_rituals" }

	show_tech_unlock_if = {
		tec_is_machine_cult = yes
	}

	upgrades = { building_tec_mecha_temple_3 }

	potential = {
		exists = owner
		owner = {
			tec_is_machine_cult = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				tec_is_machine_cult = no
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		# Base
			building_holotemple
		# Death cult
			building_sacrificial_temple_2
		# Machine cult
		#	building_tec_mecha_temple_2
		# Cult of paperwork
			#building_tec_paperwork_temple_2	
		# Star cult
			#building_tec_star_temple_2
		# Atom cult
			#building_tec_atom_temple_2
		# Cult of Cycles
			#building_tec_cycle_temple_2
		# Cult of Wealth
			#building_tec_wealth_temple_2
		# Hive
			building_hive_cluster
		# Cyberhive
			building_tec_cyberhive_cluster
		# Biohive
			#building_tec_biohive_cluster
		# Lithohive
			#building_tec_lithohive_cluster	
		# Machine
			building_network_junction
		# Bureaucratic fallback
			building_bureaucratic_2
		# Aiauth fallback
			#building_tec_aiauth_2	
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = rare_crystals
		}
	}

	planet_modifier = {
		pop_ethic_spiritualist_attraction_mult = 0.1
		planet_pops_robotics_upkeep_mult = -0.025
	}

	# Jobs
		inline_script = {
			script = jobs/inline_evolved_job
			job = tec_mecha_priest
			count = @b2_jobs
			mult = 1
			display = with_desc
			trigger = ""
		}
	# /
}

building_tec_mecha_temple_3 = { # Temple of the Holy Machine
	base_buildtime = @b3_time
	can_build = no
	position_priority = 120		# Unity

	category = unity

	prerequisites = { "tech_consecration_fields" }

	show_tech_unlock_if = {
		tec_is_machine_cult = yes
	}

	potential = {
		exists = owner
		owner = {
			tec_is_machine_cult = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				tec_is_machine_cult = no
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		# Base
			building_sacred_nexus
		# Death cult
			building_sacrificial_temple_3
		# Machine cult
		#	building_tec_mecha_temple_3
		# Cult of paperwork
			#building_tec_paperwork_temple_3	
		# Star cult
			#building_tec_star_temple_3
		# Atom cult
			#building_tec_atom_temple_3
		# Cult of Cycles
			#building_tec_cycle_temple_3
		# Cult of Wealth
			#building_tec_wealth_temple_3
		# Hive
			building_hive_confluence
		# Cyberhive
			building_tec_cyberhive_confluence
		# Biohive
			#building_tec_biohive_confluence
		# Lithohive
			#building_tec_lithohive_confluence
		# Machine
			building_system_conflux
		# Bureaucratic fallback
			building_bureaucratic_3
		# Aiauth fallback
			#building_tec_aiauth_3
	}


	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 3
			rare = rare_crystals
		}
	}

	
	planet_modifier = {
		pop_ethic_spiritualist_attraction_mult = 0.15
		planet_pops_robotics_upkeep_mult = -0.025
	}

	# Jobs
		inline_script = {
			script = jobs/inline_evolved_job
			job = tec_mecha_priest
			count = @b3_jobs
			mult = 1
			display = with_desc
			trigger = ""
		}

		# High priests
			inline_script = buildings/effects/inline_evolved_exalted_priesthood
			inline_script = buildings/effects/inline_evolved_all_the_priests_2
		# /
	# /
}

# --------------- Paperwork Cult
#building_tec_paperwork_temple_1
#building_tec_paperwork_temple_2
#building_tec_paperwork_temple_3

# --------------- Star Cult
#building_tec_star_temple_1
#building_tec_star_temple_2
#building_tec_star_temple_3

# --------------- Atom Cult
#building_tec_atom_temple_1
#building_tec_atom_temple_2
#building_tec_atom_temple_3

# --------------- Cycle Cult
#building_tec_cycle_temple_1
#building_tec_cycle_temple_2
#building_tec_cycle_temple_3

# Note: gestalts attempt to fallback to temples, and if not possible, to bureaucratic
# --------------- Hiveminds
building_hive_node = {
	base_buildtime = @b1_time
	position_priority = 120		# Unity
	exempt_from_ai_planet_specialization = no

	category = unity

	prerequisites = {
		"tech_hive_node"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_cyberhive = no
		tec_is_biohive = no
		tec_is_servitor_hive = no
	}

	upgrades = {
		building_hive_cluster
	}

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
			tec_is_cyberhive = no
			tec_is_biohive = no
			tec_is_servitor_hive = no
		}
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				tec_is_cyberhive = yes
				tec_is_biohive = yes
				tec_is_servitor_hive = yes
			}
		}
	}

	convert_to = {
		# Base
			building_temple
		# Death cult
			building_sacrificial_temple_1
		# Machine cult
			building_tec_mecha_temple_1
		# Cult of paperwork
			#building_tec_paperwork_temple_1	
		# Star cult
			#building_tec_star_temple_1
		# Atom cult
			#building_tec_atom_temple_1
		# Cult of Cycles
			#building_tec_cycle_temple_1
		# Cult of Wealth
			#building_tec_wealth_temple_1
		# Hive
		#	building_hive_node
		# Cyberhive
			building_tec_cyberhive_node
		# Biohive
			building_tec_biohive_node
		# Lithohive
			#building_tec_lithohive_node	
		# Machine
			building_uplink_node
		# Bureaucratic fallback
			building_bureaucratic_1
		# Aiauth fallback
			#building_tec_aiauth_1
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
		inline_script = buildings/resources/inline_evolved_synaptic_reinforcement_upkeep
	}
	
	inline_script = {
		script = jobs/inline_evolved_synapse
		count = @b1_jobs
		mult = 1
		trigger = ""
		display = with_desc
	}

	inline_script = buildings/effects/inline_evolved_synaptic_reinforcement

	inline_script = buildings/effects/inline_evolved_synaptic_extensions

	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 1
	}
}

building_hive_cluster = {
	base_buildtime = @b2_time
	can_build = no
	exempt_from_ai_planet_specialization = no
	position_priority = 120		# Unity

	category = unity

	prerequisites = {
		"tech_hive_cluster"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_cyberhive = no
		tec_is_biohive = no
		tec_is_servitor_hive = no
	}

	upgrades = {
		building_hive_confluence
	}

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
			tec_is_cyberhive = no
			tec_is_biohive = no
			tec_is_servitor_hive = no
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no 
				tec_is_cyberhive = yes
				tec_is_biohive = yes
				tec_is_servitor_hive = yes
			}
		}
	}

	convert_to = {
		# Base
			building_holotemple
		# Death cult
			building_sacrificial_temple_2
		# Machine cult
			building_tec_mecha_temple_2
		# Cult of paperwork
			#building_tec_paperwork_temple_2	
		# Star cult
			#building_tec_star_temple_2
		# Atom cult
			#building_tec_atom_temple_2
		# Cult of Cycles
			#building_tec_cycle_temple_2
		# Cult of Wealth
			#building_tec_wealth_temple_2
		# Hive
		#	building_hive_cluster
		# Cyberhive
			building_tec_cyberhive_cluster
		# Biohive
			building_tec_biohive_cluster
		# Lithohive
			#building_tec_lithohive_cluster	
		# Machine
			building_network_junction
		# Bureaucratic fallback
			building_bureaucratic_2
		# Aiauth fallback
			#building_tec_aiauth_2	
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = rare_crystals
		}
		inline_script = buildings/resources/inline_evolved_synaptic_reinforcement_upkeep
	}
	
	inline_script = {
		script = jobs/inline_evolved_synapse
		count = @b2_jobs
		mult = 1
		trigger = ""
		display = with_desc
	}

	inline_script = buildings/effects/inline_evolved_synaptic_reinforcement

	inline_script = buildings/effects/inline_evolved_synaptic_extensions

	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 2
	}
}

building_hive_confluence = {
	base_buildtime = @b3_time
	can_build = no
	position_priority = 120		# Unity
	
	category = unity

	prerequisites = {
		"tech_hive_confluence"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_cyberhive = no
		tec_is_biohive = no
		tec_is_servitor_hive = no
	}

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
			tec_is_cyberhive = no
			tec_is_biohive = no
			tec_is_servitor_hive = no
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				tec_is_cyberhive = yes
				tec_is_biohive = yes
				tec_is_servitor_hive = yes
			}
		}
	}

	convert_to = {
		# Base
			building_sacred_nexus
		# Death cult
			building_sacrificial_temple_3
		# Machine cult
			building_tec_mecha_temple_3
		# Cult of paperwork
			#building_tec_paperwork_temple_3	
		# Star cult
			#building_tec_star_temple_3
		# Atom cult
			#building_tec_atom_temple_3
		# Cult of Cycles
			#building_tec_cycle_temple_3
		# Cult of Wealth
			#building_tec_wealth_temple_3
		# Hive
		#	building_hive_confluence
		# Cyberhive
			building_tec_cyberhive_confluence
		# Biohive
			#building_tec_biohive_confluence
		# Lithohive
			#building_tec_lithohive_confluence
		# Machine
			building_system_conflux
		# Bureaucratic fallback
			building_bureaucratic_3
		# Aiauth fallback
			#building_tec_aiauth_3
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 3
			rare = rare_crystals
		}
		inline_script = buildings/resources/inline_evolved_synaptic_reinforcement_upkeep
	}
	
	inline_script = {
		script = jobs/inline_evolved_synapse
		count = @b3_jobs
		mult = 1
		trigger = ""
		display = with_desc
	}

	inline_script = buildings/effects/inline_evolved_synaptic_reinforcement

	inline_script = buildings/effects/inline_evolved_synaptic_extensions

	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 3
	}
}

# --------------- Cyberhives
building_tec_cyberhive_node = {
	base_buildtime = @b1_time
	position_priority = 120		# Unity
	icon = hive_unity_t1	# WIP
	category = unity

	prerequisites = {
		"tech_hive_node"
	}

	show_tech_unlock_if = {
		tec_is_cyberhive = yes
	}

	upgrades = {
		building_tec_cyberhive_cluster
	}

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
			tec_is_cyberhive = yes
			tec_is_servitor_gestalt = no
		}
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				tec_is_cyberhive = no
				tec_is_servitor_gestalt = yes
			}
		}
	}

	convert_to = {
		# Base
			building_temple
		# Death cult
			building_sacrificial_temple_1
		# Machine cult
			building_tec_mecha_temple_1
		# Cult of paperwork
			#building_tec_paperwork_temple_1	
		# Star cult
			#building_tec_star_temple_1
		# Atom cult
			#building_tec_atom_temple_1
		# Cult of Cycles
			#building_tec_cycle_temple_1
		# Cult of Wealth
			#building_tec_wealth_temple_1
		# Hive
			building_hive_node
		# Cyberhive
		#	building_tec_cyberhive_node
		# Biohive
			#building_tec_biohive_node
		# Lithohive
			#building_tec_lithohive_node	
		# Machine
			building_uplink_node
		# Bureaucratic fallback
			building_bureaucratic_1
		# Aiauth fallback
			#building_tec_aiauth_1
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
		inline_script = buildings/resources/inline_evolved_synaptic_reinforcement_upkeep
	}
	
	inline_script = {
		script = jobs/inline_evolved_synapse
		count = @b1_jobs
		mult = 1
		trigger = ""
		display = with_desc
	}

	inline_script = buildings/effects/inline_evolved_synaptic_reinforcement

	inline_script = buildings/effects/inline_evolved_synaptic_extensions

	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 1
	}
}

building_tec_cyberhive_cluster = {
	base_buildtime = @b2_time
	can_build = no
	position_priority = 120		# Unity
	icon = hive_unity_t2	# WIP

	category = unity

	prerequisites = {
		"tech_hive_cluster"
	}

	show_tech_unlock_if = {
		tec_is_cyberhive = yes
	}

	upgrades = {
		building_tec_cyberhive_confluence
	}

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
			tec_is_cyberhive = yes
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				tec_is_cyberhive = no
			}
		}
	}

	convert_to = {
		# Base
			building_holotemple
		# Death cult
			building_sacrificial_temple_2
		# Machine cult
			building_tec_mecha_temple_2
		# Cult of paperwork
			#building_tec_paperwork_temple_2	
		# Star cult
			#building_tec_star_temple_2
		# Atom cult
			#building_tec_atom_temple_2
		# Cult of Cycles
			#building_tec_cycle_temple_2
		# Cult of Wealth
			#building_tec_wealth_temple_2
		# Hive
			building_hive_cluster
		# Cyberhive
		#	building_tec_cyberhive_cluster
		# Biohive
			#building_tec_biohive_cluster
		# Lithohive
			#building_tec_lithohive_cluster	
		# Machine
			building_network_junction
		# Bureaucratic fallback
			building_bureaucratic_2
		# Aiauth fallback
			#building_tec_aiauth_2	
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = rare_crystals
		}
		inline_script = buildings/resources/inline_evolved_synaptic_reinforcement_upkeep
	}
	
	inline_script = {
		script = jobs/inline_evolved_synapse
		count = @b2_jobs
		mult = 1
		trigger = ""
		display = with_desc
	}

	inline_script = buildings/effects/inline_evolved_synaptic_reinforcement

	inline_script = buildings/effects/inline_evolved_synaptic_extensions

	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 2
	}
}

building_tec_cyberhive_confluence = {
	base_buildtime = @b3_time
	can_build = no
	position_priority = 120		# Unity
	icon = hive_unity_t3	# WIP

	category = unity


	prerequisites = {
		"tech_hive_confluence"
	}

	show_tech_unlock_if = {
		tec_is_cyberhive = yes
	}

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
			tec_is_cyberhive = yes
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				tec_is_cyberhive = no
			}
		}
	}

	convert_to = {
		# Base
			building_sacred_nexus
		# Death cult
			building_sacrificial_temple_3
		# Machine cult
			building_tec_mecha_temple_3
		# Cult of paperwork
			#building_tec_paperwork_temple_3	
		# Star cult
			#building_tec_star_temple_3
		# Atom cult
			#building_tec_atom_temple_3
		# Cult of Cycles
			#building_tec_cycle_temple_3
		# Cult of Wealth
			#building_tec_wealth_temple_3
		# Hive
			building_hive_confluence
		# Cyberhive
		#	building_tec_cyberhive_confluence
		# Biohive
			#building_tec_biohive_confluence
		# Lithohive
			#building_tec_lithohive_confluence
		# Machine
			building_system_conflux
		# Bureaucratic fallback
			building_bureaucratic_3
		# Aiauth fallback
			#building_tec_aiauth_3
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 3
			rare = rare_crystals
		}
		inline_script = buildings/resources/inline_evolved_synaptic_reinforcement_upkeep
	}
	
	inline_script = {
		script = jobs/inline_evolved_synapse
		count = @b3_jobs
		mult = 1
		trigger = ""
		display = with_desc
	}

	inline_script = buildings/effects/inline_evolved_synaptic_reinforcement

	inline_script = buildings/effects/inline_evolved_synaptic_extensions

	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 3
	}
}

# --------------- Biohives
building_tec_biohive_node = {
	base_buildtime = @b1_time
	position_priority = 120		# Unity
	exempt_from_ai_planet_specialization = no

	category = unity

	prerequisites = {
		"tech_hive_node"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_biohive = yes
	}

	upgrades = {
		building_tec_biohive_cluster
	}

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
			tec_is_biohive = yes
		}
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				tec_is_biohive = no
			}
		}
	}

	convert_to = {
		# Base
			building_temple
		# Death cult
			building_sacrificial_temple_1
		# Machine cult
			building_tec_mecha_temple_1
		# Cult of paperwork
			#building_tec_paperwork_temple_1	
		# Star cult
			#building_tec_star_temple_1
		# Atom cult
			#building_tec_atom_temple_1
		# Cult of Cycles
			#building_tec_cycle_temple_1
		# Cult of Wealth
			#building_tec_wealth_temple_1
		# Hive
			building_hive_node
		# Cyberhive
			building_tec_cyberhive_node
		# Biohive
		#	building_tec_biohive_node
		# Lithohive
			#building_tec_lithohive_node	
		# Machine
			building_uplink_node
		# Bureaucratic fallback
			building_bureaucratic_1
		# Aiauth fallback
			#building_tec_aiauth_1
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
		inline_script = buildings/resources/inline_evolved_synaptic_reinforcement_upkeep
	}
	
	inline_script = {
		script = jobs/inline_evolved_synapse
		count = @b1_jobs
		mult = 1
		trigger = ""
		display = with_desc
	}

	inline_script = buildings/effects/inline_evolved_synaptic_reinforcement

	inline_script = buildings/effects/inline_evolved_synaptic_extensions

	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 1
	}
}

building_tec_biohive_cluster = {
	base_buildtime = @b2_time
	can_build = no
	exempt_from_ai_planet_specialization = no
	position_priority = 120		# Unity

	category = unity

	prerequisites = {
		"tech_hive_cluster"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_biohive = yes
	}

	upgrades = {
		building_tec_biohive_confluence
	}

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
			tec_is_biohive = yes
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no 
				tec_is_biohive = no
			}
		}
	}

	convert_to = {
		# Base
			building_holotemple
		# Death cult
			building_sacrificial_temple_2
		# Machine cult
			building_tec_mecha_temple_2
		# Cult of paperwork
			#building_tec_paperwork_temple_2	
		# Star cult
			#building_tec_star_temple_2
		# Atom cult
			#building_tec_atom_temple_2
		# Cult of Cycles
			#building_tec_cycle_temple_2
		# Cult of Wealth
			#building_tec_wealth_temple_2
		# Hive
			building_hive_cluster
		# Cyberhive
			building_tec_cyberhive_cluster
		# Biohive
		#	building_tec_biohive_cluster
		# Lithohive
			#building_tec_lithohive_cluster	
		# Machine
			building_network_junction
		# Bureaucratic fallback
			building_bureaucratic_2
		# Aiauth fallback
			#building_tec_aiauth_2	
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = rare_crystals
		}
		inline_script = buildings/resources/inline_evolved_synaptic_reinforcement_upkeep
	}
	
	inline_script = {
		script = jobs/inline_evolved_synapse
		count = @b2_jobs
		mult = 1
		trigger = ""
		display = with_desc
	}

	inline_script = buildings/effects/inline_evolved_synaptic_reinforcement

	inline_script = buildings/effects/inline_evolved_synaptic_extensions

	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 2
	}
}

building_tec_biohive_confluence = {
	base_buildtime = @b3_time
	can_build = no
	position_priority = 120		# Unity

	category = unity

	prerequisites = {
		"tech_hive_confluence"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_biohive = yes
	}

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
			tec_is_biohive = yes
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				tec_is_biohive = no
			}
		}
	}

	convert_to = {
		# Base
			building_sacred_nexus
		# Death cult
			building_sacrificial_temple_3
		# Machine cult
			building_tec_mecha_temple_3
		# Cult of paperwork
			#building_tec_paperwork_temple_3	
		# Star cult
			#building_tec_star_temple_3
		# Atom cult
			#building_tec_atom_temple_3
		# Cult of Cycles
			#building_tec_cycle_temple_3
		# Cult of Wealth
			#building_tec_wealth_temple_3
		# Hive
			building_hive_confluence
		# Cyberhive
			building_tec_cyberhive_confluence
		# Biohive
		#	building_tec_biohive_confluence
		# Lithohive
			#building_tec_lithohive_confluence
		# Machine
			building_system_conflux
		# Bureaucratic fallback
			building_bureaucratic_3
		# Aiauth fallback
			#building_tec_aiauth_3
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 3
			rare = rare_crystals
		}
		inline_script = buildings/resources/inline_evolved_synaptic_reinforcement_upkeep
	}
	
	inline_script = {
		script = jobs/inline_evolved_synapse
		count = @b3_jobs
		mult = 1
		trigger = ""
		display = with_desc
	}

	inline_script = buildings/effects/inline_evolved_synaptic_reinforcement

	inline_script = buildings/effects/inline_evolved_synaptic_extensions

	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 3
	}
}

# --------------- Machines
building_uplink_node = {
	base_buildtime = @b1_time
	icon = building_autochthon_monument
	position_priority = 130		# Admin

	category = unity

	prerequisites = {
		"tech_planetary_government"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			has_valid_civic = civic_machine_servitor
		}
	}

	upgrades = {
		"building_network_junction"
	}

	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes 
			NOT = {
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no 
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		# Base
			building_temple
		# Death cult
			building_sacrificial_temple_1
		# Machine cult
			building_tec_mecha_temple_1
		# Cult of paperwork
			#building_tec_paperwork_temple_1	
		# Star cult
			#building_tec_star_temple_1
		# Atom cult
			#building_tec_atom_temple_1
		# Cult of Cycles
			#building_tec_cycle_temple_1
		# Cult of Wealth
			#building_tec_wealth_temple_1
		# Hive
			building_hive_node
		# Cyberhive
			building_tec_cyberhive_node
		# Biohive
			#building_tec_biohive_node
		# Lithohive
			#building_tec_lithohive_node	
		# Machine
		#	building_uplink_node
		# Bureaucratic fallback
			building_bureaucratic_1
		# Aiauth fallback
			#building_tec_aiauth_1
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
	}

	inline_script = {
		script = jobs/inline_evolved_coordinator
		count = @b1_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}

	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 1
	}
}

building_network_junction = {
	base_buildtime = @b2_time
	can_build = no
	icon = building_heritage_site
	position_priority = 130		# Admin

	category = unity

	prerequisites = {
		"tech_colonial_bureaucracy"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
	}

	upgrades = {
		"building_system_conflux"
	}

	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes 
			NOT = {
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no 
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		# Base
			building_holotemple
		# Death cult
			building_sacrificial_temple_2
		# Machine cult
			building_tec_mecha_temple_2
		# Cult of paperwork
			#building_tec_paperwork_temple_2	
		# Star cult
			#building_tec_star_temple_2
		# Atom cult
			#building_tec_atom_temple_2
		# Cult of Cycles
			#building_tec_cycle_temple_2
		# Cult of Wealth
			#building_tec_wealth_temple_2
		# Hive
			building_hive_cluster
		# Cyberhive
			building_tec_cyberhive_cluster
		# Biohive
			#building_tec_biohive_cluster
		# Lithohive
			#building_tec_lithohive_cluster	
		# Machine
		#	building_network_junction
		# Bureaucratic fallback
			building_bureaucratic_2
		# Aiauth fallback
			#building_tec_aiauth_2	
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = rare_crystals
		}
	}

	inline_script = {
		script = jobs/inline_evolved_coordinator
		count = @b2_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}

	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 2
	}
}

building_system_conflux = {
	base_buildtime = @b3_time
	can_build = no
	icon = building_hypercomms_forum
	position_priority = 130		# Admin

	category = unity

	prerequisites = {
		"tech_galactic_bureaucracy"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
	}

	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes 
			NOT = {
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no 
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		# Base
			building_sacred_nexus
		# Death cult
			building_sacrificial_temple_3
		# Machine cult
			building_tec_mecha_temple_3
		# Cult of paperwork
			#building_tec_paperwork_temple_3	
		# Star cult
			#building_tec_star_temple_3
		# Atom cult
			#building_tec_atom_temple_3
		# Cult of Cycles
			#building_tec_cycle_temple_3
		# Cult of Wealth
			#building_tec_wealth_temple_3
		# Hive
			building_hive_confluence
		# Cyberhive
			building_tec_cyberhive_confluence
		# Biohive
			#building_tec_biohive_confluence
		# Lithohive
			#building_tec_lithohive_confluence
		# Machine
		#	building_system_conflux
		# Bureaucratic fallback
			building_bureaucratic_3
		# Aiauth fallback
			#building_tec_aiauth_3
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 3
			rare = rare_crystals
		}
	}

	inline_script = {
		script = jobs/inline_evolved_coordinator
		count = @b2_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}

	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 3
	}
}

# --------------- Servitors
building_organic_sanctuary = {
	base_buildtime = @b1_time
	position_priority = 50		# Playstyle

	category = unity

	upgrades = {
		"building_organic_paradise"
	}

	potential = {
		exists = owner
		owner = { tec_is_servitor_gestalt = yes }
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				tec_is_servitor_gestalt = no
			}
			AND = {
				owner = { is_ai = yes }
				count_owned_pop = { limit = { has_citizenship_type = { type = citizenship_organic_trophy } }count <= 20 }
				num_buildings = { type = building_organic_sanctuary value > 3 }
			}
			AND = {
				owner = { is_ai = yes }
				count_owned_pop = { limit = { has_citizenship_type = { type = citizenship_organic_trophy } }count <= 40 }
				num_buildings = { type = building_organic_paradise value > 5 }
			}
		}
	}

	convert_to = {
		building_luxury_residence
		building_communal_housing
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
	}

	planet_modifier = {
		planet_carry_cap_add = 10
	}

	inline_script = {
		script = jobs/inline_evolved_artisan
		count = 1
		mult = 1
		display = with_desc
		trigger = ""
	} 

	inline_script = {
		script = jobs/inline_evolved_job
		job = bio_trophy
		count = 10
		mult = 1
		display = with_desc
		trigger = ""
	} 

	
	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 1
	}

	# We need to cheat here and tell AI that this will probably give some complex output since AI can not evaluate what this building does without the pops which it cant get without the building - chicken and egg
	ai_resource_production = {
		unity = 10
		physics_research = 10
		alloys = 5

		trigger = {
			NOT = { has_building = building_organic_sanctuary }
		}
	}

	# Here we try to adress the second issue that the AI cant evaluate the pop job output of the bio trophy given the happiness trigger that was put inplace to guard against players exploiting bio trophies

	#science
	ai_resource_production = {
		unity = 10
		physics_research = 10

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = physics_research
				value >= 100
				type = produces
			}
		}
	}

	#alloys
	ai_resource_production = {
		unity = 10
		alloys = 10

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = alloys
				value >= 100
				type = produces
			}
		}
	}

	#cgs
	ai_resource_production = {
		unity = 10
		consumer_goods = 10

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = consumer_goods
				value >= 100
				type = produces
			}
		}
	}
}

building_organic_paradise = {
	base_buildtime = @b2_time
	can_build = no
	position_priority = 50		# Playstyle
	icon = building_paradise_dome

	category = unity
	
	prerequisites = { "tech_paradise_dome" }

	show_tech_unlock_if = {
		owner = { tec_is_servitor_gestalt = yes }
	}

	potential = {
		exists = owner
		owner = { tec_is_servitor_gestalt = yes }
	}

	destroy_trigger = {
		exists = owner
		owner = { tec_is_servitor_gestalt = no }
	}

	convert_to = {
		building_paradise_dome
		building_communal_housing_large
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}

		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = exotic_gases
		}
	}

	planet_modifier = {
		planet_carry_cap_add = 20
	}

	inline_script = {
		script = jobs/inline_evolved_artisan
		count = 2
		mult = 1
		display = with_desc
		trigger = ""
	} 

	inline_script = {
		script = jobs/inline_evolved_maintenance_drone
		count = 1
		mult = 1
		display = with_desc
		trigger = ""
	} 

	inline_script = {
		script = jobs/inline_evolved_job
		job = bio_trophy
		count = 20
		mult = 1
		display = with_desc
		trigger = ""
	} 

	
	inline_script = {
		script = buildings/effects/inline_evolved_gestalt_introspective
		tier = 3
	}
}

# BOOSTERS
# -----------------------------------------
# --------------- Regular
building_autocurating_vault = {
	base_buildtime = @b2_time
	base_cap_amount = 1
	position_priority = 30		# Unique

	category = unity

	prerequisites = {
		"tech_autocurating_vault"
	}

	show_tech_unlock_if = {
		is_machine_empire = no
		is_spiritualist = no
		OR = {
			is_hive_empire = yes
			has_make_spiritualist_perk = no
		}
		is_megacorp = no
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_machine_empire = no
			is_spiritualist = no
			OR = {
				is_hive_empire = yes
				has_make_spiritualist_perk = no
			}
			is_megacorp = no
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = yes
					is_spiritualist = yes
					is_megacorp = yes
				}
			}
		}
	}

	convert_to = {
		building_citadel_of_faith
		building_alpha_hub
		building_corporate_vault
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}

		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = rare_crystals
		}


		inline_script = {
			script = buildings/resources/inline_evolved_ring_production_cost
			rare = rare_crystals
			type = unity
		}

		produces = {
			unity = 10
		}
	}

	planet_modifier = {
		planet_administrators_produces_mult = 0.15
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_administrators_unity_produces_add = 1
		planet_managers_unity_produces_add = 1
		planet_priests_unity_produces_add = 1
		planet_telepaths_unity_produces_add = 1
	}

}

# --------------- Spiritualist
building_citadel_of_faith = {
	base_buildtime = @b2_time
	base_cap_amount = 1
	position_priority = 30		# Unique

	category = unity

	potential = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = yes
				AND = {
					is_gestalt = no
					has_make_spiritualist_perk = yes
				}
			}
		}
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		has_major_upgraded_capital = yes
	}
	
	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}
	
	prerequisites = {
		"tech_transcendent_faith"
	}

	convert_to = {
		building_autocurating_vault
		building_alpha_hub
		building_corporate_vault
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}

		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = rare_crystals
		}

		inline_script = {
			script = buildings/resources/inline_evolved_ring_production_cost
			rare = rare_crystals
			type = unity
		}

		produces = {
			unity = 10
		}
	}

	planet_modifier = {
		pop_ethic_spiritualist_attraction_mult = 0.20
		planet_administrators_produces_mult = 0.15
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = high_priest
		count = 1
		mult = 1
		display = with_desc
		trigger = ""
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = high_priest
		count = 2
		mult = 1
		display = no_desc
		trigger = "
			exists = owner
			owner = {
				has_valid_civic = civic_exalted_priesthood 
			}
		"
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = transcend
		count = 2
		mult = 1
		display = no_desc
		trigger = "
			exists = owner
			owner = {
				tec_is_spiritual_seekers = yes
			}
		"
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_administrators_unity_produces_add = 1
		planet_managers_unity_produces_add = 1
		planet_priests_unity_produces_add = 1
		planet_telepaths_unity_produces_add = 1
	}
}

# --------------- Megacorp
building_corporate_vault = {
	base_buildtime = @b3_time
	base_cap_amount = 1
	position_priority = 30		# Unique
	icon = building_autocurating_vault

	category = unity

	prerequisites = {
		"tech_autocurating_vault"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_megacorp = yes
			is_spiritualist = no
			has_make_spiritualist_perk = no
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_spiritualist = yes
					has_make_spiritualist_perk = yes
				}
			}
		}
	}

	convert_to = {
		building_citadel_of_faith
		building_autocurating_vault
		building_alpha_hub
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}

		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = rare_crystals
		}

		inline_script = {
			script = buildings/resources/inline_evolved_ring_production_cost
			rare = rare_crystals
			type = unity
		}

		produces = {
			unity = 10
		}
	}

	planet_modifier = {
		planet_administrators_produces_mult = 0.15
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		planet_administrators_unity_produces_add = 1
		planet_managers_unity_produces_add = 1
		planet_priests_unity_produces_add = 1
		planet_telepaths_unity_produces_add = 1
	}

}

# --------------- Hive
#building_tec_hive_amplifier

# --------------- Machine
building_alpha_hub = {
	base_buildtime = @b3_time
	base_cap_amount = 1
	position_priority = 30		# Unique
	icon = building_autocurating_vault

	category = unity

	potential = {
		exists = owner
		owner = { is_machine_empire = yes }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { is_machine_empire = no }
	}

	convert_to = {
		building_autocurating_vault
		building_citadel_of_faith
		building_corporate_vault
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}

		inline_script = {
			script = buildings/resources/inline_evolved_rare_resource_cost
			tier = 2
			rare = rare_crystals
		}

		inline_script = {
			script = buildings/resources/inline_evolved_ring_production_cost
			rare = rare_crystals
			type = unity
		}

		produces = {
			unity = 10
		}
	}

	planet_modifier = {
		planet_administrators_produces_mult = 0.15
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		custom_tooltip = "sm_ring_maintenance_hub_effect"
	}

	prerequisites = {
		"tech_autocurating_vault"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
	}

}

# MEMORIAL BOOSTERS
# -----------------------------------------
# --------------- Regular
building_autochthon_monument = {
	base_buildtime = @b1_time
	base_cap_amount = 1
	position_priority = 30		# Unique

	category = unity

	prerequisites = {
		"tech_cultural_heritage"
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		tec_is_memorialist_empire = no
	}

	upgrades = {
		building_heritage_site
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			NOR = {
				is_gestalt = yes
				is_megacorp = yes
				tec_is_memorialist_empire = yes
			}
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					tec_is_memorialist_empire = yes
				}
			}
		}
	}

	resources = {
		category = planet_buildings
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
		produces = {
			trigger = { exists = owner }
			unity = 1
			multiplier = owner.trigger:num_ascension_perks
		}
	}

	convert_to = {
		#building_autochthon_monument
		building_corporate_monument
		building_sensorium_1
		building_tec_cyberhive_relay_1
		building_simulation_1
		building_galactic_memorial_1
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.05
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = culture_worker
		count = @b1_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}

	triggered_desc = {
		text = building_autochthon_monument_effect
	}
}

building_heritage_site = {
	base_buildtime = @b2_time
	position_priority = 30		# Unique
	can_build = no

	category = unity

	prerequisites = {
		"tech_heritage_site"
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		tec_is_memorialist_empire = no
	}

	upgrades = {
		building_hypercomms_forum
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			NOR = {
				is_gestalt = yes
				is_megacorp = yes
			}
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
				}
			}
		}
	}

	convert_to = {
		#building_heritage_site
		building_corporate_site
		building_sensorium_2
		building_tec_cyberhive_relay_2
		building_simulation_2
		building_galactic_memorial_2
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 2
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.10
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = culture_worker
		count = @b2_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}

	triggered_desc = {
		text = building_heritage_site_effect
	}
}

building_hypercomms_forum = {
	base_buildtime = @b3_time
	position_priority = 30		# Unique
	can_build = no

	category = unity

	prerequisites = {
		"tech_hypercomms_forum"
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		tec_is_memorialist_empire = no
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			NOR = {
				is_gestalt = yes
				is_megacorp = yes
			}
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
				}
			}
		}
	}

	convert_to = {
		#building_hypercomms_forum
		building_corporate_forum
		building_sensorium_3
		building_tec_cyberhive_relay_3
		building_simulation_3
		building_galactic_memorial_3
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 3
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.15
	}

	triggered_desc = {
		text = building_hypercomms_forum_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = culture_worker
		count = @b3_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

# --------------- Corporate
building_corporate_monument = {
	base_buildtime = @b1_time
	position_priority = 30		# Unique
	base_cap_amount = 1
	icon = building_autochthon_monument

	category = unity

	prerequisites = {
		"tech_cultural_heritage"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
		tec_is_memorialist_empire = no
	}

	upgrades = {
		building_corporate_site
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_megacorp = yes
			tec_is_memorialist_empire = no
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				is_megacorp = no
				tec_is_memorialist_empire = yes
			}
		}
	}

	convert_to = {
		building_autochthon_monument
		#building_corporate_monument
		building_sensorium_1
		building_tec_cyberhive_relay_1
		building_simulation_1
		building_galactic_memorial_1
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 1
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.05
	}

	triggered_desc = {
		text = building_autochthon_monument_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = culture_worker
		count = @b1_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_corporate_site = {
	base_buildtime = @b2_time
	position_priority = 30		# Unique
	can_build = no
	icon = building_heritage_site

	category = unity

	prerequisites = {
		"tech_heritage_site"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}

	upgrades = {
		building_corporate_forum
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_megacorp = yes
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				is_megacorp = no
			}
		}
	}

	convert_to = {
		building_heritage_site
		#building_corporate_site
		building_sensorium_2
		building_tec_cyberhive_relay_2
		building_simulation_2
		building_galactic_memorial_2
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 2
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.10
	}

	triggered_desc = {
		text = building_heritage_site_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = culture_worker
		count = @b2_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}

}

building_corporate_forum = {
	base_buildtime = @b3_time
	position_priority = 30		# Unique
	can_build = no
	icon = building_hypercomms_forum

	category = unity

	prerequisites = {
		"tech_hypercomms_forum"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_megacorp = yes
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				is_megacorp = no
			}
		}
	}

	convert_to = {
		building_hypercomms_forum
		#building_corporate_forum
		building_sensorium_3
		building_tec_cyberhive_relay_3
		building_simulation_3
		building_galactic_memorial_3
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 3
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.15
	}

	triggered_desc = {
		text = building_hypercomms_forum_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = culture_worker
		count = @b3_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}

}

# --------------- Hivemind
building_sensorium_1 = {
	base_buildtime = @b1_time
	position_priority = 30		# Unique
	base_cap_amount = 1
	icon = building_holo_theatres

	category = unity

	prerequisites = {
		"tech_hive_node"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_memorialist_empire = no
		tec_is_cyberhive = no
		tec_is_biohive = no
	}

	upgrades = {
		building_sensorium_2
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			tec_is_cyberhive = no
			tec_is_memorialist_empire = no
			tec_is_biohive = no
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					tec_is_memorialist_empire = yes
					tec_is_cyberhive = yes
					tec_is_biohive = yes
				}
			}
		}
	}

	convert_to = {
		building_autochthon_monument
		building_corporate_monument
		#building_sensorium_1
		building_tec_cyberhive_relay_1
		building_tec_biohive_relay_1
		building_simulation_1
		building_galactic_memorial_1
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 1
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.05
	}

	triggered_desc = {
		text = building_autochthon_monument_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = evaluator
		count = @b1_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_sensorium_2 = {
	base_buildtime = @b2_time
	position_priority = 30		# Unique
	can_build = no
	icon = building_hyper_entertainment_forum

	category = unity

	prerequisites = {
		"tech_hive_cluster"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_memorialist_empire = no
		tec_is_cyberhive = no
		tec_is_biohive = no
	}

	upgrades = {
		building_sensorium_3
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			tec_is_memorialist_empire = no
			tec_is_cyberhive = no
			tec_is_biohive = no
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					tec_is_memorialist_empire = yes
					tec_is_cyberhive = yes
					tec_is_biohive = yes
				}
			}
		}
	}

	convert_to = {
		building_heritage_site
		building_corporate_site
		#building_sensorium_2
		building_tec_cyberhive_relay_2
		building_tec_biohive_relay_2
		building_simulation_2
		building_galactic_memorial_2
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 2
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.10
	}

	triggered_desc = {
		text = building_heritage_site_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = evaluator
		count = @b2_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_sensorium_3 = {
	base_buildtime = @b3_time
	position_priority = 30		# Unique
	can_build = no
	icon = building_citadel_of_faith

	category = unity

	prerequisites = {
		"tech_hive_confluence"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_memorialist_empire = no
		tec_is_cyberhive = no
		tec_is_biohive = no
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			tec_is_memorialist_empire = no
			tec_is_cyberhive = no
			tec_is_biohive = no
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					tec_is_memorialist_empire = yes
					tec_is_cyberhive = yes
					tec_is_biohive = yes
				}
			}
		}
	}

	convert_to = {
		building_hypercomms_forum
		building_corporate_forum
		#building_sensorium_3
		building_tec_cyberhive_relay_3
		building_tec_biohive_relay_3
		building_simulation_3
		building_galactic_memorial_3
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 3
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.15
	}

	triggered_desc = {
		text = building_hypercomms_forum_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = evaluator
		count = @b3_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

# --------------- Cyberhive
building_tec_cyberhive_relay_1 = {
	base_buildtime = @b1_time
	position_priority = 30		# Unique
	base_cap_amount = 1
	icon = building_autochthon_monument

	category = unity

	prerequisites = {
		"tech_hive_node"
	}
	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_memorialist_empire = no
		tec_is_cyberhive = yes
	}

	upgrades = {
		building_tec_cyberhive_relay_2
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			tec_is_cyberhive = yes
			tec_is_memorialist_empire = no
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					tec_is_memorialist_empire = yes
					tec_is_cyberhive = no
				}
			}
		}
	}

	convert_to = {
		building_autochthon_monument
		building_corporate_monument
		building_sensorium_1
		#building_tec_cyberhive_relay_1
		building_tec_biohive_relay_1
		building_simulation_1
		building_galactic_memorial_1
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 1
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.05
	}

	triggered_desc = {
		text = building_autochthon_monument_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = evaluator
		count = @b1_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_tec_cyberhive_relay_2 = {
	base_buildtime = @b2_time
	position_priority = 30		# Unique
	can_build = no
	icon = building_heritage_site

	category = unity
	
	prerequisites = {
		"tech_hive_cluster"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_memorialist_empire = no
		tec_is_cyberhive = yes
	}

	upgrades = {
		building_tec_cyberhive_relay_3
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			tec_is_memorialist_empire = no
			tec_is_cyberhive = yes
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					tec_is_memorialist_empire = yes
					tec_is_cyberhive = no
				}
			}
		}
	}

	convert_to = {
		building_heritage_site
		building_corporate_site
		building_sensorium_2
		#building_tec_cyberhive_relay_2
		building_tec_biohive_relay_2
		building_simulation_2
		building_galactic_memorial_2
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 2
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.10
	}

	triggered_desc = {
		text = building_heritage_site_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = evaluator
		count = @b2_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_tec_cyberhive_relay_3 = {
	base_buildtime = @b3_time
	position_priority = 30		# Unique
	can_build = no
	icon = building_hypercomms_forum

	category = unity
	
	prerequisites = {
		"tech_hive_confluence"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_memorialist_empire = no
		tec_is_cyberhive = yes
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			tec_is_memorialist_empire = no
			tec_is_cyberhive = yes
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					tec_is_memorialist_empire = yes
					tec_is_cyberhive = no
				}
			}
		}
	}

	convert_to = {
		building_hypercomms_forum
		building_corporate_forum
		building_sensorium_3
		#building_tec_cyberhive_relay_3
		building_tec_biohive_relay_3
		building_simulation_3
		building_galactic_memorial_3
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 3
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.15
	}

	triggered_desc = {
		text = building_hypercomms_forum_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = evaluator
		count = @b3_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

# --------------- Biohive
building_tec_biohive_relay_1 = {
	base_buildtime = @b1_time
	position_priority = 30		# Unique
	base_cap_amount = 1
	icon = building_autochthon_monument

	category = unity

	prerequisites = {
		"tech_hive_node"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_memorialist_empire = no
		tec_is_biohive = yes
	}

	upgrades = {
		building_tec_biohive_relay_2
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			tec_is_memorialist_empire = no
			tec_is_biohive = yes
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					tec_is_memorialist_empire = yes
					tec_is_biohive = no
				}
			}
		}
	}
	
	convert_to = {
		building_autochthon_monument
		building_corporate_monument
		building_sensorium_1
		building_tec_cyberhive_relay_1
		#building_tec_biohive_relay_1
		building_simulation_1
		building_galactic_memorial_1
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 1
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.05
		job_evaluator_add = @b1_jobs
	}

	triggered_desc = {
		text = building_autochthon_monument_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = evaluator
		count = @b1_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_tec_biohive_relay_2 = {
	base_buildtime = @b2_time
	position_priority = 30		# Unique
	can_build = no
	icon = building_heritage_site

	category = unity
	
	prerequisites = {
		"tech_hive_cluster"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_memorialist_empire = no
		tec_is_biohive = yes
	}

	upgrades = {
		building_tec_biohive_relay_3
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			tec_is_memorialist_empire = no
			tec_is_biohive = yes
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					tec_is_memorialist_empire = yes
					tec_is_biohive = no
				}
			}
		}
	}

	convert_to = {
		building_heritage_site
		building_corporate_site
		building_sensorium_2
		building_tec_cyberhive_relay_2
		#building_tec_biohive_relay_2
		building_simulation_2
		building_galactic_memorial_2
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 2
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.10
	}

	triggered_desc = {
		text = building_heritage_site_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = evaluator
		count = @b2_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_tec_biohive_relay_3 = {
	base_buildtime = @b3_time
	position_priority = 30		# Unique
	can_build = no
	icon = building_hypercomms_forum

	category = unity

	prerequisites = {
		"tech_hive_confluence"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		tec_is_memorialist_empire = no
		tec_is_biohive = yes
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_hive_empire = yes
			tec_is_memorialist_empire = no
			tec_is_biohive = yes
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					tec_is_memorialist_empire = yes
					tec_is_biohive = no
				}
			}
		}
	}

	convert_to = {
		building_hypercomms_forum
		building_corporate_forum
		building_sensorium_3
		building_tec_cyberhive_relay_3
		#building_tec_biohive_relay_3
		building_simulation_3
		building_galactic_memorial_3
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 3
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.15
	}

	triggered_desc = {
		text = building_hypercomms_forum_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = evaluator
		count = @b3_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

# --------------- Machine
building_simulation_1 = {
	base_buildtime = @b1_time
	position_priority = 30		# Unique
	base_cap_amount = 1
	icon = building_holo_theatres

	category = unity

	prerequisites = {
		"tech_cultural_heritage"
	}
	
	show_tech_unlock_if = {
		is_machine_empire = yes
		tec_is_memorialist_empire = no
	}

	upgrades = {
		building_simulation_2
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_machine_empire = yes
			tec_is_memorialist_empire = no
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					tec_is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_autochthon_monument
		building_corporate_monument
		building_sensorium_1
		building_tec_cyberhive_relay_1
		#building_simulation_1
		building_galactic_memorial_1
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 1
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.05
	}

	triggered_desc = {
		text = building_autochthon_monument_effect
	}
	inline_script = {
		script = jobs/inline_evolved_job
		job = evaluator
		count = @b1_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_simulation_2 = {
	base_buildtime = @b2_time
	position_priority = 30		# Unique
	can_build = no
	icon = building_hyper_entertainment_forum

	category = unity

	prerequisites = {
		"tech_heritage_site"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		tec_is_memorialist_empire = no
	}

	upgrades = {
		building_simulation_3
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_machine_empire = yes
			tec_is_memorialist_empire = no
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					tec_is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_heritage_site
		building_corporate_site
		building_sensorium_2
		building_tec_cyberhive_relay_2
		#building_simulation_2
		building_galactic_memorial_2
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 2
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.10
	}

	triggered_desc = {
		text = building_heritage_site_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = evaluator
		count = @b2_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

building_simulation_3 = {
	base_buildtime = @b3_time
	position_priority = 30		# Unique
	can_build = no
	icon = building_citadel_of_faith

	category = unity
	
	prerequisites = {
		"tech_hypercomms_forum"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		tec_is_memorialist_empire = no
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			is_machine_empire = yes
			tec_is_memorialist_empire = no
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					tec_is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_hypercomms_forum
		building_corporate_forum
		building_sensorium_3
		building_tec_cyberhive_relay_3
		#building_simulation_3
		building_galactic_memorial_3
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 3
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.15
	}

	triggered_desc = {
		text = building_hypercomms_forum_effect
	}

	inline_script = {
		script = jobs/inline_evolved_job
		job = evaluator
		count = @b3_jobs
		mult = 1
		display = with_desc
		trigger = ""
	}
}

# --------------- Memorialists
building_galactic_memorial_1 = { #Sanctuary of Repose
	base_buildtime = @b1_time
	position_priority = 30		# Unique
	base_cap_amount = 1

	category = unity

	prerequisites = {
		"tech_cultural_heritage"
	}

	show_tech_unlock_if = {
		tec_is_memorialist_empire = yes
	}
	
	upgrades = {
		building_galactic_memorial_2
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			tec_is_memorialist_empire = yes
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				tec_is_memorialist_empire = no
			}
		}
	}

	convert_to = {
		building_autochthon_monument
		building_corporate_monument
		building_sensorium_1
		building_tec_cyberhive_relay_1
		building_tec_biohive_relay_1
		building_simulation_1
		#building_galactic_memorial_1
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 1
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 1
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.05
	}

	triggered_desc = {
		text = building_autochthon_monument_effect
	}

	#Jobs
	inline_script = {
		script = jobs/inline_evolved_job
		job = death_chronicler
		count = @b1_jobs
		mult = 1
		display = with_desc
		trigger = "
			exists = owner
			owner = { is_regular_empire = yes }
		"
	}
	inline_script = {
		script = jobs/inline_evolved_job
		job = chronicle_drone
		count = @b1_jobs
		mult = 1
		display = with_desc
		trigger = "
			exists = owner
			owner = { is_gestalt = yes }
		"
	}

	inline_script = buildings/effects/inline_evolved_memorialist
}

building_galactic_memorial_2 = { #Pillar of Quietus
	base_buildtime = @b2_time
	position_priority = 30		# Unique
	can_build = no

	category = unity

	prerequisites = {
		"tech_heritage_site"
	}

	show_tech_unlock_if = {
		tec_is_memorialist_empire = yes
	}

	upgrades = {
		building_galactic_memorial_3
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			tec_is_memorialist_empire = yes
		}
	}

	allow = {
		exists = owner
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				tec_is_memorialist_empire = no
			}
		}
	}

	convert_to = {
		building_heritage_site
		building_corporate_site
		building_sensorium_2
		building_tec_cyberhive_relay_2
		building_tec_biohive_relay_2
		building_simulation_2
		#building_galactic_memorial_2
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 2
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 2
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.10
	}

	triggered_desc = {
		text = building_heritage_site_effect
	}

	#Jobs
	inline_script = {
		script = jobs/inline_evolved_job
		job = death_chronicler
		count = @b2_jobs
		mult = 1
		display = with_desc
		trigger = "
			exists = owner
			owner = { is_regular_empire = yes }
		"
	}
	inline_script = {
		script = jobs/inline_evolved_job
		job = chronicle_drone
		count = @b2_jobs
		mult = 1
		display = with_desc
		trigger = "
			exists = owner
			owner = { is_gestalt = yes }
		"
	}

	inline_script = buildings/effects/inline_evolved_memorialist
}

building_galactic_memorial_3 = { #Galactic Memorial
	base_buildtime = @b3_time
	position_priority = 30		# Unique
	can_build = no

	category = unity	

	prerequisites = {
		"tech_hypercomms_forum"
	}
	
	show_tech_unlock_if = {
		tec_is_memorialist_empire = yes
	}

	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		owner = {
			tec_is_memorialist_empire = yes
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				tec_is_memorialist_empire = no
			}
		}
	}

	convert_to = {
		building_hypercomms_forum
		building_corporate_forum
		building_sensorium_3
		building_tec_cyberhive_relay_3
		building_tec_biohive_relay_3
		building_simulation_3
		#building_galactic_memorial_3
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = { exists = owner }
			unity = 2
			multiplier = owner.trigger:num_ascension_perks
		}
		inline_script = {
			script = buildings/resources/inline_evolved_resource_cost
			tier = 3
		}
	}

	planet_modifier = {
		planet_jobs_unity_produces_mult = 0.15
	}

	triggered_desc = {
		text = building_hypercomms_forum_effect
	}

	#Jobs
	inline_script = {
		script = jobs/inline_evolved_job
		job = death_chronicler
		count = @b3_jobs
		mult = 1
		display = with_desc
		trigger = "
			exists = owner
			owner = { is_regular_empire = yes }
		"
	}
	inline_script = {
		script = jobs/inline_evolved_job
		job = chronicle_drone
		count = @b3_jobs
		mult = 1
		display = with_desc
		trigger = "
			exists = owner
			owner = { is_gestalt = yes }
		"
	}

	inline_script = buildings/effects/inline_evolved_memorialist
}

