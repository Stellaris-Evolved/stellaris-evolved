# common\situations\zz_evolved_ascension_mechanic_situations.txt

# -------------------------------------------------------------------------
# New path mechanic situations
# -------------------------------------------------------------------------
# ----------------------- Genetic Ascension Situations ---------------------------
	situation_tec_ascension_genetic_recombination = {	# TODO ASCENSION TOTAL
		# Note: uses event range tec_ascension_biological.10XX
		# Descs
			desc = {	# Basic
				text = situation_tec_ascension_genetic_recombination_desc
				trigger = {
					hidden_trigger = {
						always = yes
					}
				}
			}
		# /
		picture = GFX_evt_overtuned
		category = positive
		complete_icon_frame = GFX_situation_outcome_frame_green
		complete_icon = GFX_situation_outcome_unknown
		fail_icon_frame = GFX_situation_outcome_frame_red
		fail_icon = GFX_situation_outcome_negative
		start_value = 0
		progress_direction = monodirectional

		on_monthly = {
			random_events = {
				# Nothing
				200 = 0
				# Positive random outcomes
				#1 = a
				#1 = a
				#1 = a
				# Negative random outcomes
				#1 = a
				#1 = a
				#1 = a
				# TODO ASCENSION
			}
		}

		on_start = {
			set_situation_locked = yes
		}

		on_fail = {
			# This should never happen
			custom_tooltip = situation_tec_ascension_genetic_recombination_fail_tooltip
			destroy_situation = this
		}
		
		on_progress_complete = {
			# This should never happen
			custom_tooltip = situation_tec_ascension_genetic_recombination_end_tooltip
			hidden_effect = {
				situation_event = {
					id = tec_gene_path.505
				}
				# Note: This is done so the agenda is ready (with a mirror) every time
				owner = {
					if = {
						limit = {
							NOT = {
								has_country_flag = agenda_tec_genetic_recombination_cd
							}
						}
						set_timed_country_flag = {
							flag = agenda_tec_genetic_recombination_cd
							years = 5
						}
					}
				}
				destroy_situation = this
			}
		}

		stages = {
			situation_tec_ascension_genetic_recombination_stage_0 = { # Base
				icon = GFX_situation_stage_tec_0
				icon_background = GFX_situation_stage_frame_tec_orange
				#0 - 10%
				end = 100
			}
			situation_tec_ascension_genetic_recombination_stage_0 = { # Selection 1
				icon = GFX_situation_stage_tec_0
				icon_background = GFX_situation_stage_frame_tec_orange
				#10 - 25%
				end = 250
				on_first_enter = {
					hidden_effect = {
						situation_event = {
							id = tec_gene_path.50010
						}
					}
				}
			}
			situation_tec_ascension_genetic_recombination_stage_1 = { # Selection 2
				icon = GFX_situation_stage_2
				icon_background = GFX_situation_stage_frame_tec_yellow
				#20 - 40%
				end = 500
				on_first_enter = {
					hidden_effect = {
						situation_event = {
							id = tec_gene_path.50025
						}
					}
				}
			}
			situation_tec_ascension_genetic_recombination_stage_2 = { # Selection 3
				icon = GFX_situation_stage_3
				icon_background = GFX_situation_stage_frame_green
				#50-100%
				end = 1000
				on_first_enter = {
					hidden_effect = {
						situation_event = {
							id = tec_gene_path.50050
						}
					}
				}
			}
		}

		# Approaches
			approach = { # Slow
				name = situation_tec_ascension_genetic_recombination_approach_slow
				icon = GFX_situation_approach_genetics
				icon_background = GFX_situation_approach_bg_tec_blue
				on_select = {
					custom_tooltip = situation_tec_ascension_genetic_recombination_approach_slow_tooltip
				}
				allow = {
					hidden_trigger = {
						always = yes
					}
				}
				modifier = {
					country_society_research_produces_mult = @tec_ascension_cost_perc
				}
			}
			approach = { # Standard
				name = situation_tec_ascension_genetic_recombination_approach_standard
				icon = GFX_situation_approach_research
				icon_background = GFX_situation_approach_bg_green
				on_select = {
					custom_tooltip = situation_tec_ascension_genetic_recombination_approach_standard_tooltip
				}
				allow = {
					hidden_trigger = {
						always = yes
					}
				}
				modifier = {
					country_society_research_produces_mult = @tec_ascension_cost_perc
				}
			}
			approach = { # Fast
				name = situation_tec_ascension_genetic_recombination_approach_fast
				icon = GFX_situation_approach_tec_genecrank
				icon_background = GFX_situation_approach_bg_yellow
				on_select = {
					custom_tooltip = situation_tec_ascension_genetic_recombination_approach_fast_tooltip
				}
				potential = {
					has_situation_flag = situation_tec_ascension_genetic_recombination_approach_fast_unlocked
				}
				allow = {
					hidden_trigger = {
						always = yes
					}
				}
				modifier = {
					country_society_research_produces_mult = @tec_ascension_cost_perc_high
				}
			}
		# /

		monthly_progress = {
			base = 5
			modifier = { # Debug
				add = value:tec_ascension_debug_value
				desc = EXCELLENT
				OR = {
					has_situation_flag = situation_tec_debug
					has_situation_flag = situation_tec_debug_5
					has_situation_flag = situation_tec_debug_10
					has_situation_flag = situation_tec_debug_negative_5
					has_situation_flag = situation_tec_debug_negative_10
				}
			}
			# Approaches
			modifier = {
				mult = @tec_ascension_speed_slow
				desc = situation_tec_ascension_genetic_recombination_approach_slow
				current_situation_approach = situation_tec_ascension_genetic_recombination_approach_slow
			}
			modifier = {
				mult = @tec_ascension_speed_standard
				desc = situation_tec_ascension_genetic_recombination_approach_standard
				current_situation_approach = situation_tec_ascension_genetic_recombination_approach_standard
			}
			modifier = {
				mult = @tec_ascension_speed_fast
				desc = situation_tec_ascension_genetic_recombination_approach_fast
				current_situation_approach = situation_tec_ascension_genetic_recombination_approach_fast
			}
			# Jobs
			modifier = {
				add = owner.value:tec_gene_recombinator_job_scaling|GESTALT|no|
				desc = situation_tec_ascension_genetic_recombination_job_contribution
				exists = owner
				owner = {
					is_gestalt = no
				}
			}
			modifier = {
				add = owner.value:tec_gene_recombinator_job_scaling|GESTALT|yes|
				desc = situation_tec_ascension_genetic_recombination_job_contribution_gestalt
				exists = owner
				owner = {
					is_gestalt = yes
				}
			}
		}

		abort_trigger = {
			NOT = {
				exists = owner
			}
		}
	}
# /
# ----------------------- Biogenic Ascension Situations ---------------------------
	# TODO ASCENSION
	#situation_tec_ascension_organic_t2_mutation
# /
# ----------------------- Organic Ascension Situations ---------------------------
	# TODO ASCENSION
	#situation_tec_ascension_organic_t2_build_a_pop
# /
# ----------------------- Psionics Ascension Situations ---------------------------
	# TODO ASCENSION
	#situation_tec_ascension_psionic_t2_shroud_delving
	#situation_tec_ascension_psionic_t2_ritual_of_ascension
# /
# ----------------------- Psychics Ascension Situations ---------------------------
	# TODO ASCENSION
	#situation_tec_ascension_psychic_t2_manifestation
	#situation_tec_ascension_psychic_t2_hive_manifestation
# /
# ----------------------- Ethereal Ascension Situations ---------------------------
	# TODO ASCENSION
	#situation_tec_ascension_ethereal_t2_shroud_incursion
	#situation_tec_ascension_ethereal_t2_dimensional_incursion
# /
# ----------------------- Cyborg Ascension Situations ---------------------------
	# TODO ASCENSION
	#situation_tec_ascension_cybernetics_t2_cyberpsychosis
	#situation_tec_ascension_cybernetics_t2_cyberpsychosis_gestalt
# /
# ----------------------- Bioware Ascension Situations ---------------------------

# /
# ----------------------- Synthetic Ascension Situations ---------------------------

# /
# ----------------------- Digital Ascension Situations ---------------------------

# /

# Test
# ------------------------------------------------------------
situation_tec_test = {
	desc = {
		text = situation_tec_test_desc
		trigger = {
			hidden_trigger = {
				always = yes
			}
		}
	}
	picture = GFX_evt_cybernetics
	category = positive
	complete_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_unknown
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_negative
	start_value = 0
	progress_direction = monodirectional

	on_start = {
		set_situation_locked = no
	}

	on_fail = {

	}

	on_monthly = {
		random_events = {
			# Nothing
			200 = 0
		}
	}
	
	on_progress_complete = {
		if = {
			limit = {
				owner = {
					has_country_flag = tec_situation_test
				}
			}
			owner = {
				set_country_flag = tec_situation_test			
			}
			owner = {
				start_situation = {
					type = situation_tec_test
					target = capital_scope
					effect = {
						save_event_target_as = new_situation
					}
				}
				event_target:new_situation = {
					set_situation_locked = no
					set_situation_approach = situation_approach_tec_test_neutral
				}
			}
		}
	}

	stages = {
		situation_tec_test_stage_1 = { #25% - After unlocks approaches
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_tec_orange
			end = 25
		}

		situation_tec_test_stage_2 = { #50%
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_tec_yellow
			end = 50
			on_first_enter = {
				hidden_effect = {
					set_situation_flag = situation_tec_psionic_path_t2_approachs
				}
			}
		}

		situation_tec_test_stage_3 = { #75%
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_green
			end = 75
		}

		situation_tec_test_stage_4 = { #100%
			icon = GFX_situation_stage_4
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = {
				hidden_effect = {
					
				}
			}
		}
	}

	# Approaches
	approach = { # Slow but good
		name = situation_approach_tec_test_slow
		icon = GFX_situation_approach_tec_gear
		icon_background = GFX_situation_approach_bg_green
		on_select = {
			custom_tooltip = situation_approach_tec_test_slow
			#custom_tooltip = situation_approach_tec_test_slow_tooltip
		}
		resources = {
			category = situations
			upkeep = {
				society_research = 10
			}
		}
	}

	approach = { # Basic
		name = situation_approach_tec_test_neutral
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		on_select = {
			custom_tooltip = situation_approach_tec_test_neutral
			#custom_tooltip = situation_approach_tec_test_neutral_tooltip
		}
		resources = {
			category = situations
			upkeep = {
				society_research = 10
			}
		}
	}

	approach = { # Fast but bad
		name = situation_approach_tec_test_fast
		icon = GFX_situation_approach_tec_genecrank
		icon_background = GFX_situation_approach_bg_red
		on_select = {
			custom_tooltip = situation_approach_tec_test_fast
			#custom_tooltip = situation_approach_tec_test_fast_tooltip
		}
		resources = {
			category = situations
			upkeep = {
				society_research = 10
			}
		}
	}

	monthly_progress = {
		base = 0
		# Debug
		modifier = {
			add = 10
			desc = EXCELLENT
			OR = {
				has_situation_flag = situation_tec_debug
				owner = {
					has_country_flag = situation_tec_debug
				}
			}
		}
		# Passive
		
		# Approaches
		modifier = {
			add = 1
			desc = situation_string_tec_test_slow
			current_situation_approach = situation_approach_tec_test_slow
		}
		modifier = {
			add = 1
			desc = situation_string_tec_test_neutral
			current_situation_approach = situation_approach_tec_test_neutral
		}
		modifier = {
			add = 2
			desc = situation_string_tec_test_fast
			current_situation_approach = situation_approach_tec_test_fast
		}
	}

	abort_trigger = {
		NOT = { exists = owner }
	}
}

situation_tec_test_bidirectional = {
	desc = {
		text = situation_tec_test_bidirectional_desc
		trigger = {
			hidden_trigger = {
				always = yes
			}
		}
	}
	picture = GFX_evt_cybernetics
	category = positive
	complete_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_unknown
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_negative
	start_value = 0
	progress_direction = bidirectional

	on_start = {
		set_situation_locked = no
	}

	on_fail = {

	}

	on_monthly = {
		random_events = {
			# Nothing
			200 = 0
		}
	}
	
	on_progress_complete = {
		
	}

	stages = {
		situation_tec_test_bidirectional_stage_1 = { #25% - After unlocks approaches
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_tec_orange
			end = 25
		}

		situation_tec_test_bidirectional_stage_2 = { #50%
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_tec_yellow
			end = 50
			on_first_enter = {
				hidden_effect = {
					set_situation_flag = situation_tec_psionic_path_t2_approachs
				}
			}
		}

		situation_tec_test_bidirectional_stage_3 = { #75%
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_green
			end = 75
		}

		situation_tec_test_bidirectional_stage_4 = { #100%
			icon = GFX_situation_stage_4
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = {
				hidden_effect = {
					
				}
			}
		}
	}

	# Approaches
	approach = { # Slow but good
		name = situation_approach_tec_test_bidirectional_slow
		icon = GFX_situation_approach_tec_gear
		icon_background = GFX_situation_approach_bg_green
		on_select = {
			custom_tooltip = situation_approach_tec_test_bidirectional_slow
			#custom_tooltip = situation_approach_tec_test_bidirectional_slow_tooltip
			hidden_effect = {
				# This is irrelevant
				set_situation_flag = situation_tec_psionic_path_t1_unlock_approachs
			}
		}
		resources = {
			category = situations
			upkeep = {
				society_research = 10
			}
		}
	}

	approach = { # Basic
		name = situation_approach_tec_test_bidirectional_standard
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		on_select = {
			custom_tooltip = situation_approach_tec_test_bidirectional_standard
			#custom_tooltip = situation_approach_tec_test_bidirectional_standard_tooltip
			# This should not matter
			owner = {
				set_country_flag = situation_tec_debug
			}
		}
		resources = {
			category = situations
			upkeep = {
				society_research = 10
			}
		}
	}

	approach = { # Fast but bad
		name = situation_approach_tec_test_bidirectional_fast
		icon = GFX_situation_approach_tec_genecrank
		icon_background = GFX_situation_approach_bg_red
		on_select = {
			custom_tooltip = situation_approach_tec_test_bidirectional_fast
			#custom_tooltip = situation_approach_tec_test_bidirectional_fast_tooltip
		}
		resources = {
			category = situations
			upkeep = {
				society_research = 10
			}
		}
	}

	monthly_progress = {
		base = 0
		# Debug
		modifier = {
			add = 10
			desc = EXCELLENT
			OR = {
				has_situation_flag = situation_tec_debug
				owner = {
					has_country_flag = situation_tec_debug
				}
			}
		}

		# Approaches
		modifier = {
			mult = @tec_ascension_speed_slow
			desc = situation_string_tec_test_bidirectional_slow
			current_situation_approach = situation_approach_tec_test_bidirectional_slow
		}
		modifier = {
			mult = @tec_ascension_speed_standard
			desc = situation_string_tec_test_bidirectional_neutral
			current_situation_approach = situation_approach_tec_test_bidirectional_standard
		}
		modifier = {
			mult = @tec_ascension_speed_fast
			desc = situation_string_tec_test_bidirectional_fast
			current_situation_approach = situation_approach_tec_test_bidirectional_fast
		}
	}

	abort_trigger = {
		NOT = { exists = owner }
	}
}