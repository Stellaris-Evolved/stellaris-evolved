situation_cybernetic_creed_cyberization = {
    picture = GFX_evt_cyber_creed_2
    category = positive
    complete_icon_frame = GFX_situation_outcome_frame_green
    complete_icon = GFX_situation_outcome_ascension
    on_progress_complete = {
        custom_tooltip = situation_cybernetic_creed_cyberization_complete
        hidden_effect = {
            if = {
                limit = {
                    owner = {
                        NOT = { has_country_flag = cybernetic_creed_general }
                    }
                }
                situation_event = {
                    id = machine_age.1090
                }
            }
            if = {
                limit = {
                    owner = {
                        has_country_flag = cybernetic_creed_general
                    }
                }
                situation_event = {
                    id = machine_age.1100
                }
            }
            owner = {
                set_country_flag = tec_has_cyber_creed_authority_tenet
                advanced_authority_refresh = yes
            }
        }
    }
    stages = {
        stage_1 = {
            icon = GFX_situation_stage_1
            icon_background = GFX_situation_stage_frame_blue
            end = 100
            custom_tooltip = stage_cybernetic_creed_the_conclave_effects
        }
        stage_2 = {
            icon = GFX_situation_stage_2
            icon_background = GFX_situation_stage_frame_blue
            end = 300
            on_first_enter = {
                situation_event = { id = machine_age.1000 }
            }
            custom_tooltip = stage_cybernetic_creed_cyberization_effects
        }
        stage_3 = {
            icon = GFX_situation_stage_3
            icon_background = GFX_situation_stage_frame_blue
            end = 500
            on_first_enter = {
                situation_event = { id = machine_age.1010 }
            }
            custom_tooltip = stage_cybernetic_creed_cyberization_effects
        }
        stage_4 = {
            icon = GFX_situation_stage_4
            icon_background = GFX_situation_stage_frame_blue
            end = 700
            on_first_enter = {
                situation_event = { id = machine_age.1020 }
            }
            custom_tooltip = stage_cybernetic_creed_cyberization_effects
        }
        stage_5 = {
            icon = GFX_situation_stage_5
            icon_background = GFX_situation_stage_frame_blue
            end = 900
            on_first_enter = {
                situation_event = { id = machine_age.1070 }
            }
            custom_tooltip = stage_cybernetic_creed_cyberization_effects
        }
        stage_6 = {
            icon = GFX_situation_stage_6
            icon_background = GFX_situation_stage_frame_blue
            end = 1000
            on_first_enter = {
                situation_event = { id = machine_age.1075 }
            }
            custom_tooltip = stage_cybernetic_creed_cyberization_effects
        }
    }
    approach = {
        name = situation_cybernetic_creed_cyberization_no_funding
        icon = GFX_situation_approach_balance_sheet
        icon_background = GFX_situation_approach_bg_yellow
        potential = {
        }
        allow = {
            custom_tooltip = {
                fail_text = cybernetic_creed_cyberization_no_funding_approach
            }
        }
        default = yes
        on_select = {
            custom_tooltip = cybernetic_creed_cyberization_no_funding
        }
        ai_weight = {
            base = 0
        }
        modifier = {
            country_engineering_tech_research_speed = -0.2
            country_unity_produces_mult = -0.2
        }
    }
    approach = {
        name = situation_cybernetic_creed_cyberization_funding
        icon = GFX_situation_approach_energy_credits
        icon_background = GFX_situation_approach_bg_green
        potential = {
            NOT = { current_stage = stage_1 }
        }
        allow = {
            custom_tooltip = {
                fail_text = cybernetic_creed_cyberization_funding_approach
                has_situation_flag = cybernetic_creed_cyberization_funding
            }
        }
        on_select = {
            custom_tooltip = cybernetic_creed_cyberization_funding
        }
        ai_weight = {
            base = 10
        }
        modifier = {
            country_engineering_tech_research_speed = -0.2
            country_energy_produces_mult = -0.2
        }
    }
    approach = {
        name = situation_cybernetic_creed_cyberization_people_power
        icon = GFX_situation_approach_pop
        icon_background = GFX_situation_approach_bg_green
        potential = {
            NOT = { current_stage = stage_1 }
        }
        allow = {
            custom_tooltip = {
                fail_text = cybernetic_creed_cyberization_people_power
                has_situation_flag = cybernetic_creed_cyberization_funding
            }
        }
        on_select = {
            custom_tooltip = cybernetic_creed_cyberization_people_power
        }
        ai_weight = {
            base = 0
        }
        modifier = {
            country_engineering_tech_research_speed = -0.2
            planet_jobs_produces_mult = -0.1
        }
    }
    on_monthly = {
        events = {
            machine_age.2000 # Cyberize pops - situation is paused
        }
    }
    monthly_progress = { #On average, the situation should take about 7 years to complete
        base = 1
        modifier = {
            add = owner.value:num_active_technophant
            desc = cybernetic_creed_number_of_technophant
        }
        modifier = {
            add = owner.value:num_active_haruspex
            desc = cybernetic_creed_number_of_haruspex
        }
        modifier = {
            has_situation_flag = cybernetic_creed_cyberization_ongoing
            desc = num_owned_planets
        }
        modifier = {
            mult = 1.2
            desc = situation_cybernetic_creed_cyberization_people_power
            current_situation_approach = situation_cybernetic_creed_cyberization_people_power
        }
        modifier = {
            mult = 1.2
            desc = situation_cybernetic_creed_cyberization_funding
            current_situation_approach = situation_cybernetic_creed_cyberization_funding
        }
        modifier = {
            mult = 1.1
            desc = "civic_augmentation_bazaars"
            owner = { has_valid_civic = civic_augmentation_bazaars }
        }
        modifier = {
            mult = 1.05
            desc = "tr_cybernetics_transubstantiation_synthesis"
            owner = { has_active_tradition = tr_cybernetics_transubstantiation_synthesis_situation }
        }
        modifier = {
            mult = 1.05
            desc = "tr_cybernetics_organ_harvesting"
            owner = { has_active_tradition = tr_cybernetics_organ_harvesting_situation }
        }
        modifier = {
            mult = 1.05
            desc = "tr_cybernetics_metabolic_reprocessing"
            owner = { has_active_tradition = tr_cybernetics_metabolic_reprocessing_situation }
        }
        modifier = {
            mult = 1.05
            desc = "tr_cybernetics_integrated_anatomy"
            owner = { has_active_tradition = tr_cybernetics_integrated_anatomy_situation }
        }
        modifier = {
            mult = 1.05
            desc = "tr_cybernetics_augmentation_overload"
            owner = { has_active_tradition = tr_cybernetics_augmentation_overload_situation }
        }
        modifier = {
            mult = 1.05
            desc = "tr_cybernetics_modular_cybernetics"
            owner = { has_active_tradition = tr_cybernetics_modular_cybernetics_situation }
        }
        modifier = { # Not in numerical order, but in tooltip order
            mult = 1.25
            desc = "tr_cybernetics_finish"
            owner = { has_active_tradition = tr_cybernetics_finish_situation }
        }
        modifier = {
            mult = 1.0
            desc = cybernetic_creed_cyberization_no_funding
            has_situation_flag = cybernetic_creed_cyberization_no_funding
        }
        modifier = {
            mult = 0.01
            desc = cybernetic_creed_cyberization_ongoing
            has_situation_flag = cybernetic_creed_cyberization_ongoing
            owner = {
                any_owned_planet = {
                    has_active_building = building_augmentation_center
                }
            }
        }
        modifier = {
            mult = 0
            desc = situation_augmentation_center_needed_desc
            AND = {
                situation_progress >= 900
                owner = {
                    NOT = {
                        any_owned_planet = {
                            has_active_building = building_augmentation_center
                        }
                    }
                }
            }
        }
        modifier = {
            mult = 0
            desc = "situation_cyberization_pause_desc"
            has_situation_flag = situation_cyberization_pause
        }
    }
    triggered_blocked_desc = {
        trigger = {
            situation_progress >= 900
            owner = {
                NOT = {
                    any_owned_planet = {
                        has_active_building = building_augmentation_center
                    }
                }
            }
        }
        text = "situation_augmentation_center_needed_desc"
    }
    abort_trigger = {
        OR = {
            NOT = { exists = target.owner }
            target.owner = { NOT = { is_same_value = root.owner } }
        }
    }
}
