# By Rodahtnov

# Vars
# -----------------------------------------
@ap_engineered_evolution_POINTS = 3
@ap_engineered_evolution_COST_MULT = -0.25
@ap_evolutionary_mastery_POINTS = 3
@ap_evolutionary_mastery_COST_MULT = -0.25
@ap_tec_genetic_perfection_POINTS = 2

# -----------------------------------------
# MAIN ASCENSION PATHS
# -----------------------------------------
# ------------------------------------------------- Psionics
ap_mind_over_matter = { 			# Psionic Tier I

	potential = {
		has_utopia = yes
		NOR = {
			#selfperk
				tec_has_psionic_ascension_path = yes
			# /
			#auth
				is_machine_empire = yes
				is_hive_empire = yes
			# /
			# Blocked if you have another path started
				#has_ascension_perk = ap_mind_over_matter
				has_ascension_perk = ap_engineered_evolution
				has_ascension_perk = ap_the_flesh_is_weak
				has_ascension_perk = ap_synthetic_evolution
			# Blocked if you have completed a path
				has_ascension_perk = ap_tec_genetic_perfection			# perfect bio
				has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
				has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
				has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
				has_ascension_perk = ap_tec_replicant					# biorobot
				has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
				has_ascension_perk = ap_tec_biopsionic					# biopsi

				has_ascension_perk = ap_tec_hive_psionic_3				# hivepsi good
				has_ascension_perk = ap_tec_hive_psionic_shatter		# hivepsi bad
			# /
			
			has_origin = @origin_techno_world
		}
		is_mechanical_empire = no
		is_synthetic_empire = no
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_1"
			num_ascension_perks > 0
		}
		custom_tooltip = {
			fail_text = "tec_ap_require_unification_tech"
			has_technology = tech_planetary_unification
		}
		custom_tooltip = {
			fail_text = "synthetic_empire_psionic_ascension"
			NOT = { has_trait = trait_mechanical }
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# Locked if the empire has picked another T1 or T2
				# Completed main perk
					#tec_has_psionic_ascension_path = yes
					tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
					tec_has_synthetic_ascension_path = yes
				# /
				# Completed evolved perk
					# Psionics
						#has_ascension_perk = ap_tec_psionic_ascendance
						#has_ascension_perk = ap_tec_
					# Genetics
						has_ascension_perk = ap_tec_genetic_perfection
						#has_ascension_perk = ap_tec_
					# Cybernetics
						has_ascension_perk = ap_tec_cybernetic_revolution
						#has_ascension_perk = ap_tec_
					# Synthetics
						has_ascension_perk = ap_tec_synthetic_singularity
						#has_ascension_perk = ap_tec_
				# /
				# Completed mixed path
					has_ascension_perk = ap_tec_replicant
					#has_ascension_perk = ap_tec_biopsionic
					#has_ascension_perk = ap_tec_cyberpsionic
				# /
			}
		}
		custom_tooltip = {
			fail_text = crisis_cant_pick_ap
			is_crisis_faction = no
		}
	}

	on_enabled = {
		custom_tooltip = "mind_over_matter_project_tooltip"
 		hidden_effect = {
			# Global controller
				event_target:global_event_country = {
					change_variable = {
						which = tec_number_of_psiascended_empires
						value = 1
					}
				}
			# /
			# Effects
				#country_event = { id = utopia.2600 }
				if = {
					limit = {
						has_country_flag = tec_advanced_ascension
					}
					tec_give_psi_t1_ap_effect = yes
				}
				else = {
					country_event = {
						id = tec_psionic_path.100
					}
				}
			# /	
		}
		if = { # Pre-steps - Psionic Theory
			limit = {
				NOT = {
					has_technology = tech_psionic_theory
				}
			}
			custom_tooltip = tec_ap_unlock_psi_theory_tech
			hidden_effect = {
				add_research_option = tech_psionic_theory
			}
		}
		if = { # Free - Telepathy
			limit = {
				NOT = {
					has_technology = tech_telepathy
				}
			}
			custom_tooltip = tec_ap_unlock_psi_telepathy_tech
			hidden_effect = {
				add_research_option = tech_telepathy
			}
		}
		custom_tooltip = tec_ap_unlock_psionic_tradition
		custom_tooltip = ap_mind_over_matter_steps
	}

	ai_weight = {
		factor = 200
		# Ethic
			modifier = {
				factor = 0.75
				NOR = {
					has_ethic = ethic_spiritualist
					has_ethic = ethic_fanatic_spiritualist
				}
			}
			modifier = {
				factor = 1.25
				OR = {
					has_ethic = ethic_spiritualist
					has_ethic = ethic_fanatic_spiritualist
				}
			}
		# /
		# Overlord
			modifier = {
				factor = 2
				is_subject = yes
				overlord = {
					tec_has_psionic_ascension_path = yes
				}
			}
		# /
		# Ascension Controller
			# Note: This affect mixed paths
			# Global checker
			modifier = {
				factor = 0.75
				event_target:global_event_country = {
					check_variable = {
						which = tec_number_of_psiascended_empires
						value >= 2
					}
				}
			}
			modifier = {
				factor = 0.5
				event_target:global_event_country = {
					check_variable = {
						which = tec_number_of_psiascended_empires
						value >= 3
					}
				}
			}
			modifier = {
				factor = 0.25
				event_target:global_event_country = {
					check_variable = {
						which = tec_number_of_psiascended_empires
						value >= 4
					}
				}
			}
			# Picked ascensions
			#Avoid confusion for ais, better standard paths
			modifier = {
				factor = 0
				OR = {
					#tec_has_psionic_ascension_path = yes
					tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
					tec_has_synthetic_ascension_path = yes
				}
			}
		# /	
		modifier = {
			factor = 10
			has_ascension_perk = ap_become_the_crisis
		}
	}
}

ap_tec_psionic_ascendance = {		# Psionic Tier II
	
	potential = {
		has_utopia = yes
		# has_ascension_perk = ap_transcendence
			#has_country_flag = tec_psionics_t2_completed
		NOR = {
			#selfperk
			has_ascension_perk = ap_tec_psionic_ascendance
		
			#auth
			is_machine_empire = yes
			is_hive_empire = yes

			# Blocked if you have completed a path
			has_ascension_perk = ap_tec_genetic_perfection			# perfect bio			
			#has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
			has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
			has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
			has_ascension_perk = ap_tec_replicant					# biorobot
			has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
			has_ascension_perk = ap_tec_biopsionic					# biopsi

			has_ascension_perk = ap_tec_hive_psionic_3		# hivepsi good
			has_ascension_perk = ap_tec_hive_psionic_shatter			# hivepsi bad
			# Blocked if you have started other main path
			has_ascension_perk = ap_engineered_evolution
			#has_ascension_perk = ap_mind_over_matter
			has_ascension_perk = ap_the_flesh_is_weak
			has_ascension_perk = ap_synthetic_evolution
			# PD
			has_origin = @origin_techno_world
		}
		is_mechanical_empire = no
		is_synthetic_empire = no
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_3"
			num_ascension_perks > 2
		}
		custom_tooltip = {	# Tradition
			fail_text = "ap_tec_psionic_ascendance_requirements_path"
			has_tradition = tr_psionics_finish
		}
		custom_tooltip = {	# Situation
			fail_text = "ap_tec_psionic_ascendance_requirements_situation"
			has_country_flag = tec_psionics_gate_completed
		}
		custom_tooltip = {
			fail_text = "synthetic_empire_psionic_ascension"
			NOT = { has_trait = trait_mechanical }
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# if two tier 1 or a tier 2 is reached, the path is blocked
				# mixed
				AND = {	# Replicants
					tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				AND = { # Purity
					tec_has_genetic_ascension_path = yes
					tec_has_psionic_ascension_path = yes
				}
				AND = {	# Purity hive
					tec_has_genetic_ascension_path = yes
					has_ascension_perk = ap_tec_hive_psionic_1
				}
				AND = {	# Infused
					tec_has_psionic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				# pure
				has_ascension_perk = ap_evolutionary_mastery
				has_ascension_perk = ap_synthetic_evolution
				has_ascension_perk = ap_tec_cybernetic_fascination
			#	has_ascension_perk = ap_transcendence

				has_ascension_perk = ap_tec_hive_psionic_2
				}
		}
	}

	on_enabled = {
		custom_tooltip = "ap_tec_psionic_ascendance_tooltip"
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = tec_advanced_ascension
				}
				tec_give_psi_t2_ap_effect = yes
			}
			else = {
				country_event = {
					id = tec_psionic_path.300
				}
			}
		}
		if = {	# Special effect
			limit = {
				has_country_flag = tec_psionics_t2_completed
			}
			custom_tooltip = ap_tec_psionic_ascendance_tooltip_discovered
		}
		else = {
			custom_tooltip = ap_tec_psionic_ascendance_tooltip
		}
		custom_tooltip =tec_ap_unlock_ascendance_tradition
		custom_tooltip = ap_tec_psionic_ascendance_steps
	}

	ai_weight = {
		factor = 1000
	}
}

#ap_tec_ethereal_transcendence

# ------------------------------------------------- Genetics
ap_engineered_evolution = {			# Biologic Tier I
	potential = {
		has_utopia = yes
		NOR = {
			#selfperk
				tec_has_genetic_ascension_path = yes
			# /
			#auth
				is_machine_empire = yes
			# /
			# Blocked if you have another path started
				has_ascension_perk = ap_mind_over_matter
				#has_ascension_perk = ap_engineered_evolution
				has_ascension_perk = ap_the_flesh_is_weak
				has_ascension_perk = ap_synthetic_evolution
			# Blocked if you have completed a path
				has_ascension_perk = ap_tec_genetic_perfection			# perfect bio			
				has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
				has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
				has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
				has_ascension_perk = ap_tec_replicant					# biorobot
				has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
				has_ascension_perk = ap_tec_biopsionic					# biopsi

				has_ascension_perk = ap_tec_hive_psionic_3				# hivepsi good
				has_ascension_perk = ap_tec_hive_psionic_shatter		# hivepsi bad
			# /
			
			has_origin = @origin_techno_world
		}
		is_mechanical_empire = no
		is_synthetic_empire = no
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_1"
			num_ascension_perks > 0
		}
		custom_tooltip = {
			fail_text = "tec_ap_require_genemod_tech"
			has_technology = tech_genome_mapping
		}
		custom_tooltip = {
			fail_text = "synthetic_empire_biological_ascension"
			NOT = { has_trait = trait_mechanical }
		}
		custom_tooltip = {
			fail_text = "requires_free_tradition_tree"
			num_tradition_categories < @tec_max_tradition_slots
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# Locked if the empire has picked another T1 or T2
				# Completed main perk
					tec_has_psionic_ascension_path = yes
					#tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
					tec_has_synthetic_ascension_path = yes
				# /
				# Completed evolved perk
					# Psionics
						has_ascension_perk = ap_tec_psionic_ascendance
						#has_ascension_perk = ap_tec_
					# Genetics
						#has_ascension_perk = ap_tec_genetic_perfection
						#has_ascension_perk = ap_tec_
					# Cybernetics
						has_ascension_perk = ap_tec_cybernetic_revolution
						#has_ascension_perk = ap_tec_
					# Synthetics
						has_ascension_perk = ap_tec_synthetic_singularity
						#has_ascension_perk = ap_tec_
				# /
				# Completed mixed path
					#has_ascension_perk = ap_tec_replicant
					#has_ascension_perk = ap_tec_biopsionic
					has_ascension_perk = ap_tec_cyberpsionic
				# /
			}
		}
		custom_tooltip = {
			fail_text = crisis_cant_pick_ap
			is_crisis_faction = no
		}
	}

	on_enabled = {
		custom_tooltip = "ap_engineered_evolution_tooltip"
 		hidden_effect = {
			# Global controller
				event_target:global_event_country = {
					change_variable = {
						which = tec_number_of_bioascended_empires
						value = 1
					}
				}
			# /
			# Effects
				if = {
					limit = {
						has_country_flag = tec_advanced_ascension
					}
					tec_give_gene_t1_ap_effect = yes
				}
				else = {
					country_event = {
						id = tec_gene_path.100
					}
				}
			# /	
		}
		if = {	# Pre-steps - Gene Tailoring
			limit = {
				NOT = {
					has_technology = tech_gene_tailoring
				}
			}
			custom_tooltip = tec_ap_unlock_genemod_tech
			hidden_effect = {
				add_research_option = tech_gene_tailoring
			}
		}
		if = {	# Free - Gene Seed
			limit = {
				NOT = {
					has_technology = tech_gene_seed_purification
				}
			}
			custom_tooltip = tec_ap_unlock_geneseed_tech
			hidden_effect = {
				add_research_option = tech_gene_seed_purification
			}
		}
		if = {	# Notify Clone Army
			limit = {
				has_origin = origin_clone_army
				OR = {
					has_trait = trait_clone_soldier_infertile
					has_trait = trait_clone_soldier_infertile_full_potential
				}
			}
			custom_tooltip = clone_soldier_locked_genes
		}
		custom_tooltip = tec_ap_unlock_genetic_tradition
		custom_tooltip = ap_engineered_evolution_steps
	}

	ai_weight = {
		factor = 200
		# Ethic
			modifier = {
				factor = 0.75
				OR = {
					is_industrialist = yes
					has_authority = auth_tec_hive_cybernetic
				}
			}
			modifier = {
				factor = 1.25
				OR = {
					is_ecologist = yes
					has_authority = auth_hive_mind
					has_authority = auth_tec_hive_biological
				}
			}
		# /
		# Overlord
			modifier = {
				factor = 2
				is_subject = yes
				overlord = {
					tec_has_genetic_ascension_path = yes
				}
			}
		# /
		# Pop types
			modifier = {
				factor = 1.5
				pop_percentage = {
					percentage >= 0.20
					limit = {
						has_trait = @trait_tec_bioservant
					}
				}
			}
		# /
		# Ascension Controller
			# Note: This affect mixed paths
			# Global checker
			modifier = {
				factor = 0.75
				event_target:global_event_country = {
					check_variable = {
						which = tec_number_of_bioascended_empires
						value >= 2
					}
				}
			}
			modifier = {
				factor = 0.5
				event_target:global_event_country = {
					check_variable = {
						which = tec_number_of_bioascended_empires
						value >= 3
					}
				}
			}
			modifier = {
				factor = 0.25
				event_target:global_event_country = {
					check_variable = {
						which = tec_number_of_bioascended_empires
						value >= 4
					}
				}
			}
			# Picked ascensions
			#Avoid confusion for ais, better standard paths
			modifier = {
				factor = 0
				OR = {
					tec_has_psionic_ascension_path = yes
					#tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
					tec_has_synthetic_ascension_path = yes
				}
			}
		# /	
	}
}

ap_tec_genetic_perfection = {		# Biologic Tier II
	
	potential = {
		# tec_has_genetic_ascension_path = yes
		has_utopia = yes
		NOR = {
			#selfperk
			has_ascension_perk = ap_tec_genetic_perfection
		
			#auth
			is_machine_empire = yes

			# Blocked if you have completed a path
			#has_ascension_perk = ap_tec_genetic_perfection			# perfect bio			
			has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
			has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
			has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
			has_ascension_perk = ap_tec_replicant					# biorobot
			has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
			has_ascension_perk = ap_tec_biopsionic					# biopsi

			has_ascension_perk = ap_tec_hive_psionic_3				# hivepsi good
			has_ascension_perk = ap_tec_hive_psionic_shatter		# hivepsi bad
			# Blocked if you have started other main path
			#has_ascension_perk = ap_engineered_evolution
			has_ascension_perk = ap_mind_over_matter
			has_ascension_perk = ap_the_flesh_is_weak
			has_ascension_perk = ap_synthetic_evolution
			# PD
			has_origin = @origin_techno_world
		}
		is_mechanical_empire = no
		is_synthetic_empire = no
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_3"
			num_ascension_perks > 2
		}
		custom_tooltip = {	# Tradition
			fail_text = "ap_tec_genetic_perfection_requirements_path"
			has_tradition = tr_genetics_finish
		}
		custom_tooltip = {	# Situation
			fail_text = "ap_tec_genetic_perfection_requirements_situation"
			has_country_flag = tec_genetics_gate_completed
		}
		custom_tooltip = {
			fail_text = "synthetic_empire_biological_ascension"
			NOT = { has_trait = trait_mechanical }
		}
		custom_tooltip = {
			fail_text = "requires_technology_glandular_acclimation"
			has_technology = tech_glandular_acclimation
		}
		custom_tooltip = {
			fail_text = "requires_not_shroudwalker_apprentice"
			NOT = { has_origin = origin_shroudwalker_apprentice }
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# if two tier 1 or a tier 2 is reached, the path is blocked
				# mixed
				AND = {	# Replicants
					tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				AND = { # Purity
					tec_has_genetic_ascension_path = yes
					tec_has_psionic_ascension_path = yes
				}
				AND = {	# Purity hive
					tec_has_genetic_ascension_path = yes
					has_ascension_perk = ap_tec_hive_psionic_1
				}
				AND = {	# Infused
					tec_has_psionic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				# pure
				#has_ascension_perk = ap_evolutionary_mastery
				has_ascension_perk = ap_synthetic_evolution
				has_ascension_perk = ap_tec_cybernetic_fascination
				has_ascension_perk = ap_transcendence

				has_ascension_perk = ap_tec_hive_psionic_2
			}
		}
	}

	modifier = {
		BIOLOGICAL_species_trait_points_add = @ap_tec_genetic_perfection_POINTS
	}

	on_enabled = {
		hidden_effect = {
			set_country_flag = tec_allow_t3_biotraits
			if = {
				limit = {
					has_country_flag = tec_advanced_ascension
				}
				tec_give_gene_t2_ap_effect = yes
			}
			else = {
				country_event = { 
					id = tec_gene_path.300
				}
			}
		}
		if = {
			limit = {
				has_origin = origin_clone_army
				OR = {
					has_trait = trait_clone_soldier_infertile
					has_trait = trait_clone_soldier_infertile_full_potential
				}
			}
			custom_tooltip = clone_soldier_locked_genes
		}
		if = {	# GIGASTRUCTURES COMP
			limit = {
				has_global_flag = giga_game_started
			}
			add_research_option = @giga_tech_the_vat
		}

		custom_tooltip = ap_tec_genetic_perfection_tooltip
		custom_tooltip = tec_ap_unlock_genetic_perfection_tradition
		custom_tooltip = ap_tec_genetic_perfection_steps
	}

	ai_weight = {
		factor = 100
	}
}

#ap_tec_biological_integration

# ------------------------------------------------- Cybernetics
ap_the_flesh_is_weak = {			# Cybernetics Tier I

	potential = {
		has_utopia = yes
		NOR = {
			#selfperk
				tec_has_cybernetic_ascension_path = yes
			# /
			#auth
				is_machine_empire = yes
			# /
			# Blocked if you have another path started
				has_ascension_perk = ap_mind_over_matter
				has_ascension_perk = ap_engineered_evolution
				#has_ascension_perk = ap_the_flesh_is_weak
				has_ascension_perk = ap_synthetic_evolution
			# Blocked if you have completed a path
				has_ascension_perk = ap_tec_genetic_perfection			# perfect bio			
				has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
				has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
				has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
				has_ascension_perk = ap_tec_replicant					# biorobot
				has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
				has_ascension_perk = ap_tec_biopsionic					# biopsi

				has_ascension_perk = ap_tec_hive_psionic_3				# hivepsi good
				has_ascension_perk = ap_tec_hive_psionic_shatter		# hivepsi bad
			# /
			# PD
			has_origin = @origin_techno_world
		}
		is_mechanical_empire = no
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_1"
			num_ascension_perks > 0
		}
		custom_tooltip = {
			fail_text = "requires_technology_integrated_cybernetics"
			has_technology = tech_integrated_cybernetics
		}
		custom_tooltip = {
			fail_text = "synthetic_empire_synthetic_ascension"
			NOT = { has_trait = trait_mechanical }
		}
		custom_tooltip = {
			fail_text = "requires_free_tradition_tree"
			num_tradition_categories < @tec_max_tradition_slots
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# Locked if the empire has picked another T1 or T2
				# Completed main perk
					#tec_has_psionic_ascension_path = yes
					tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
					tec_has_synthetic_ascension_path = yes
				# /
				# Completed evolved perk
					# Psionics
						has_ascension_perk = ap_tec_psionic_ascendance
						#has_ascension_perk = ap_tec_
					# Genetics
						has_ascension_perk = ap_tec_genetic_perfection
						#has_ascension_perk = ap_tec_
					# Cybernetics
						#has_ascension_perk = ap_tec_cybernetic_revolution
						#has_ascension_perk = ap_tec_
					# Synthetics
						has_ascension_perk = ap_tec_synthetic_singularity
						#has_ascension_perk = ap_tec_
				# /
				# Completed mixed path
					#has_ascension_perk = ap_tec_replicant
					has_ascension_perk = ap_tec_biopsionic
					#has_ascension_perk = ap_tec_cyberpsionic
				# /
			}
		}
		custom_tooltip = {
			fail_text = crisis_cant_pick_ap
			is_crisis_faction = no
		}
	}

	on_enabled = {
		if = {	# Notify Biohives
			limit = {
				tec_is_biohive = yes
			}
			custom_tooltip = "ap_tec_flesh_is_weak_change_biohive_into_cyberhive"
		}
		if = {	# Notify Hives
			limit = {
				tec_is_regular_hive = yes
			}
			custom_tooltip = "ap_tec_flesh_is_weak_can_change_hive_into_cyberhive"
		}
		if = {	# Notify Non Cyborgs
			limit = {
				NOR = {
					tec_has_cybernetic_ascension_path = yes
					tec_is_cyberhive = yes
					has_valid_civic = civic_machine_assimilator
				}
			}
			custom_tooltip = "ap_tec_the_flesh_is_weak_regular_tooltip"
			custom_tooltip = "ap_tec_block_ai_uprising_tooltip"
		}
		if = {	# Notify Already Cyborgs
			limit = {
				OR = {
					tec_has_cybernetic_ascension_path = yes
					tec_is_cyberhive = yes
					has_valid_civic = civic_machine_assimilator
				}
			}
			custom_tooltip = "ap_tec_the_flesh_is_weak_cyborg_tooltip"
			custom_tooltip = "ap_tec_block_ai_uprising_cyborg_tooltip"
		}
		
		hidden_effect = {
			# Global controller
				event_target:global_event_country = {
					change_variable = {
						which = tec_number_of_cyberascended_empires
						value = 1
					}
				}
			# /
			# Effects
				if = {
					limit = {
						has_country_flag = tec_advanced_ascension
					}
					tec_give_cyb_t1_ap_effect = yes
				}
				else = {
					country_event = {
						id = tec_cybernetic_path.100
					}
				}
			# /
		}
		if = { # Pre-steps - Neuro Quantum Links
			limit = {
				NOT = {
					has_technology = tech_neuro_quantum_links
				}
			}
			custom_tooltip = tec_ap_unlock_cyborg_quantum_tech
			hidden_effect = {
				add_research_option = tech_neuro_quantum_links
			}
		}
		custom_tooltip = tec_ap_unlock_cybernetic_basic_tradition
		custom_tooltip = ap_the_flesh_is_weak_steps
	}

	ai_weight = {
		factor = 200
		# Ethic
			modifier = {
				factor = 0.75
				NOR = {
					is_industrialist = yes
					is_materialist = yes
					has_valid_civic = civic_machine_assimilator
					has_authority = auth_tec_hive_cybernetic
					AND = {
						is_spiritualist = yes
						tec_is_robot_lover_spiritualist = yes
					}
				}
			}
			modifier = {
				factor = 1.25
				OR = {
					is_industrialist = yes
					is_materialist = yes
					has_valid_civic = civic_machine_assimilator
					has_authority = auth_tec_hive_cybernetic
					AND = {
						is_spiritualist = yes
						tec_is_robot_lover_spiritualist = yes
					}
				}
			}
		# /
		# Overlord
			modifier = {
				factor = 2
				is_subject = yes
				overlord = {
					tec_has_cybernetic_ascension_path = yes
				}
			}
		# /
		# Pop types
			modifier = {
				factor = 1.5
				pop_percentage = {
					percentage >= 0.20
					limit = {
						has_trait = "trait_mechanical"
					}
				}
			}
		# /
		# Ascension Controller
			# Note: This affect mixed paths
			# Global checker
			modifier = {
				factor = 0.75
				event_target:global_event_country = {
					check_variable = {
						which = tec_number_of_cyberascended_empires
						value >= 2
					}
				}
			}
			modifier = {
				factor = 0.5
				event_target:global_event_country = {
					check_variable = {
						which = tec_number_of_cyberascended_empires
						value >= 3
					}
				}
			}
			modifier = {
				factor = 0.25
				event_target:global_event_country = {
					check_variable = {
						which = tec_number_of_cyberascended_empires
						value >= 4
					}
				}
			}
			# Picked ascensions
			#Avoid confusion for ais, better standard paths
			modifier = {
				factor = 0
				OR = {
					tec_has_psionic_ascension_path = yes
					tec_has_genetic_ascension_path = yes
					#tec_has_cybernetic_ascension_path = yes
					tec_has_synthetic_ascension_path = yes
				}
			}
		# /
		# Other factors
			modifier = {
				factor = 0
				#Avoid confusion for ais, better standard paths
				is_ai = yes
				has_country_flag = tec_desires_to_be_pure
			}
		# /
	}
}

ap_tec_cybernetic_revolution = {	# Cybernetics Tier II
	
	potential = {
		# has_ascension_perk = ap_tec_cybernetic_fascination
		has_utopia = yes
		NOR = {
			#selfperk
			has_ascension_perk = ap_tec_cybernetic_revolution
			
			#auth
			is_machine_empire = yes
			AND = {
				is_hive_empire = yes
				NOT = {
					tec_is_cyberhive = yes
				}
			}

			# Blocked if you have completed a path
			has_ascension_perk = ap_tec_genetic_perfection			# perfect bio			
			has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
			has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
			#has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
			has_ascension_perk = ap_tec_replicant					# biorobot
			has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
			has_ascension_perk = ap_tec_biopsionic					# biopsi

			has_ascension_perk = ap_tec_hive_psionic_3		# hivepsi good
			has_ascension_perk = ap_tec_hive_psionic_shatter			# hivepsi bad
			# Blocked if you have started other main path
			has_ascension_perk = ap_engineered_evolution
			has_ascension_perk = ap_mind_over_matter
			#has_ascension_perk = ap_the_flesh_is_weak
			has_ascension_perk = ap_synthetic_evolution

			# PD
			has_origin = @origin_techno_world
		}
		is_mechanical_empire = no
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_3"
			num_ascension_perks > 2
		}
		custom_tooltip = {	# Tradition
			fail_text = "ap_tec_cybernetic_revolution_requirements_path"
			has_tradition = tr_cybernetics_finish
		}
		custom_tooltip = {	# Situation
			fail_text = "ap_tec_cybernetic_revolution_requirements_situation"
			has_country_flag = tec_cybernetics_gate_completed
		}
		custom_tooltip = {
			fail_text = "synthetic_empire_synthetic_ascension"
			NOT = { has_trait = trait_mechanical }
		}
		custom_tooltip = {
			fail_text = "requires_technology_droid_workers_hive"
			OR = {
				has_technology = tech_droid_workers
				has_valid_civic = civic_tec_mecha_perfectionists
			}
		}
		custom_tooltip = {
			fail_text = "requires_not_shroudwalker_apprentice"
			NOT = { has_origin = origin_shroudwalker_apprentice }
		}
		custom_tooltip = {
			fail_text = "hive_mind_biological_ascension_only2"
			NAND = {
				is_hive_empire = yes
				NOT = {
					tec_is_cyberhive = yes
				}
			}
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# if two tier 1 or a tier 2 is reached, the path is blocked
				# mixed
				AND = {	# Replicants
					tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				AND = { # Purity
					tec_has_genetic_ascension_path = yes
					tec_has_psionic_ascension_path = yes
				}
				AND = {	# Purity hive
					tec_has_genetic_ascension_path = yes
					has_ascension_perk = ap_tec_hive_psionic_1
				}
				AND = {	# Infused
					tec_has_psionic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				# pure
				has_ascension_perk = ap_evolutionary_mastery
				has_ascension_perk = ap_synthetic_evolution
				#has_ascension_perk = ap_tec_cybernetic_fascination
				has_ascension_perk = ap_transcendence

				has_ascension_perk = ap_tec_hive_psionic_2
			}
		}
	}

	modifier = {
		modify_species_cost_mult = @ap_evolutionary_mastery_COST_MULT
	}

	on_enabled = {
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = tec_advanced_ascension
				}
				tec_give_cyb_t2_ap_effect = yes
			}
			else = {
				country_event = {
					id = tec_cybernetic_path.300
				}
			}
		}
		custom_tooltip = ap_tec_cybernetic_revolution_tooltip
		custom_tooltip = tec_ap_unlock_cybernetic_revolution_tradition
		custom_tooltip = ap_tec_cybernetic_revolution_steps
	}

	ai_weight = {
		factor = 20000
	}
}

# ------------------------------------------------- Synthetics
ap_synthetic_evolution = {			# Synthetics Tier I
	
	potential = {

		# has_ascension_perk = ap_the_flesh_is_weak
		has_utopia = yes
		NOR = {
			#selfperk
			tec_has_synthetic_ascension_path = yes
		
			#auth
			is_machine_empire = yes
			is_hive_empire = yes
			# Blocked if you have another path started
				has_ascension_perk = ap_mind_over_matter
				has_ascension_perk = ap_engineered_evolution
				has_ascension_perk = ap_the_flesh_is_weak
				#has_ascension_perk = ap_synthetic_evolution
			# Blocked if you have completed a path
				has_ascension_perk = ap_tec_genetic_perfection			# perfect bio			
				has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
				has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
				has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
				has_ascension_perk = ap_tec_replicant					# biorobot
				has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
				has_ascension_perk = ap_tec_biopsionic					# biopsi

				has_ascension_perk = ap_tec_hive_psionic_3				# hivepsi good
				has_ascension_perk = ap_tec_hive_psionic_shatter		# hivepsi bad
			# /
			# PD
			has_origin = @origin_techno_world
		}
		is_mechanical_empire = no
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_1"
			num_ascension_perks > 0
		}
		custom_tooltip = {
			fail_text = "tec_ap_require_droids_tech"
			has_technology = tech_droid_workers
		}
		custom_tooltip = {
			fail_text = "requires_not_shroudwalker_apprentice"
			NOT = { has_origin = origin_shroudwalker_apprentice }
		}
		custom_tooltip = {
			fail_text = "synthetic_empire_synthetic_ascension"
			NOT = { has_trait = trait_mechanical }
		}
		custom_tooltip = {
			fail_text = "hive_mind_biological_ascension_only2"
			NOT = { is_hive_empire = yes }
		}
		custom_tooltip = {
			fail_text = "requires_free_tradition_tree"
			num_tradition_categories < @tec_max_tradition_slots
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# Completed main perk
					tec_has_psionic_ascension_path = yes
					tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
					#tec_has_synthetic_ascension_path = yes
				# /
			}
		}
	}

	modifier = {
		ROBOT_species_trait_points_add = 2
	}

	on_enabled = {
		if = {
			limit = {
				has_country_flag = synthetic_empire
				tec_has_synthetic_ascension_origin = yes
			}
			custom_tooltip = "ap_synthetic_evolution_tooltip_machine"
		}
		else = {
			custom_tooltip = "ap_synthetic_evolution_tooltip_regular"
		}
		hidden_effect = {
			# Global controller
				event_target:global_event_country = {
					change_variable = {
						which = tec_number_of_cyberascended_empires
						value = 1
					}
				}
			# /
			# Effects
				#country_event = { id = utopia.2600 }
				if = {
					limit = {
						has_country_flag = tec_advanced_ascension
					}
					tec_give_synth_t1_ap_effect = yes
				}
				else = {
					country_event = {
						id = tec_synth_path.100
					}
				}
			# /	
		}
		if = {	# Pre-steps - Synths
			limit = {
				NOR = {
					has_technology = tech_synthetic_workers
					has_tech_option = tech_synthetic_workers
				}
			}
			custom_tooltip = tec_ap_unlock_synth_tech
			hidden_effect = {
				add_research_option = tech_synthetic_workers
			}
		}
		if = {	# Pre-steps - Synth leaders
			limit = {
				NOR = {
					has_technology = tech_synthetic_leaders
					has_tech_option = tech_synthetic_leaders
				}
			}
			custom_tooltip = tec_ap_unlock_synthleaders_tech
			hidden_effect = {
				add_research_option = tech_synthetic_leaders
			}
		}
		if = {	# Pre-steps - Synths
			limit = {
				NOR = {
					has_technology = tech_synthetic_workers
					has_technology = tech_synthetic_leaders
				}
			}
			custom_tooltip = tec_ap_synthproject_stopped
		}	
		custom_tooltip = tec_ap_unlock_synthetics_tradition
		if = {	# Notify Necrophages
			limit = {
				has_origin = origin_necrophage
				has_trait = trait_necrophage
			}
			custom_tooltip = disables_necrophage_features
		}
		if = {	# Notify Clone Army
			limit = {
				has_origin = origin_clone_army
				OR = {
					has_trait = trait_clone_soldier_infertile
					has_trait = trait_clone_soldier_infertile_full_potential
					has_trait = trait_clone_soldier_fertile
				}
			}
			custom_tooltip = disables_clone_army_origin_features
		}
		if = {	# Notify Overtuned
			limit = {
				has_origin = origin_overtuned
			}
			custom_tooltip = disables_overtuned_features
		}
		if = {	# Notify Idyllic
			limit = {
				OR = {
					has_valid_civic = civic_idyllic_bloom
					has_valid_civic = civic_hive_idyllic_bloom
				}
			}
			custom_tooltip = disables_idyllic_bloom
		}

		custom_tooltip = ap_synthetic_evolution_steps
	}

	ai_weight = {
		#not as common, ais are bad at being bots
		modifier = {
			factor = 0.1
			NOR = {
				OR = {
					has_ethic = ethic_materialist
					has_ethic = ethic_fanatic_materialist
				}
				OR = {
					has_ethic = ethic_industrial
					has_ethic = ethic_fanatic_industrial
				}
			}
		}
	}
}

ap_tec_synthetic_singularity = {	# Synthetics Tier II

	potential = {
		# has_ascension_perk = ap_synthetic_evolution
		has_utopia = yes
		NOR = {
			#selfperk
			has_ascension_perk = ap_tec_synthetic_singularity
		
			#auth
			is_machine_empire = yes
			is_hive_empire = yes

			# Blocked if you have completed a path
			has_ascension_perk = ap_tec_genetic_perfection			# perfect bio			
			has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
		#	has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
			has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
			has_ascension_perk = ap_tec_replicant					# biorobot
			has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
			has_ascension_perk = ap_tec_biopsionic					# biopsi

			has_ascension_perk = ap_tec_hive_psionic_3		# hivepsi good
			has_ascension_perk = ap_tec_hive_psionic_shatter			# hivepsi bad
			# Blocked if you have started other main path
			has_ascension_perk = ap_engineered_evolution
			has_ascension_perk = ap_mind_over_matter
			has_ascension_perk = ap_the_flesh_is_weak
			#has_ascension_perk = ap_synthetic_evolution
			# PD
			has_origin = @origin_techno_world
		}
		#is_mechanical_empire = yes
	}

	possible = {
		custom_tooltip = {
			fail_text = "TEMPORARILY DISABLED"
			always = no
		}
		custom_tooltip = {
			fail_text = "requires_ascension_perks_3"
			num_ascension_perks > 2
		}
		custom_tooltip = {	# Tradition
			fail_text = "ap_tec_synthetic_singularity_requirements_path"
			has_tradition = tr_synthetics_finish
		}
		custom_tooltip = {	# Situation
			fail_text = "ap_tec_synthetic_singularity_requirements_situation"
			has_country_flag = tec_synthetics_gate_completed
		}
		custom_tooltip = {
			fail_text = "tec_pure_robot_project_requirements"
			NOT = { has_special_project = SYNTHETIC_EVOLUTION_PROJECT }
		}
		custom_tooltip = {
			fail_text = "hive_mind_biological_ascension_only2"
			NOT = { is_hive_empire = yes }
		}
		custom_tooltip = {
			fail_text = "requires_not_shroudwalker_apprentice"
			NOT = { has_origin = origin_shroudwalker_apprentice }
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# if two tier 1 or a tier 2 is reached, the path is blocked
				# mixed
				AND = {	# Replicants
					tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				AND = { # Purity
					tec_has_genetic_ascension_path = yes
					tec_has_psionic_ascension_path = yes
				}
				AND = {	# Purity hive
					tec_has_genetic_ascension_path = yes
					has_ascension_perk = ap_tec_hive_psionic_1
				}
				AND = {	# Infused
					tec_has_psionic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				# pure
				has_ascension_perk = ap_evolutionary_mastery
			#	has_ascension_perk = ap_synthetic_evolution
				has_ascension_perk = ap_tec_cybernetic_fascination
				has_ascension_perk = ap_transcendence

				has_ascension_perk = ap_tec_hive_psionic_2
			}
		}
	}

	on_enabled = {
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = tec_advanced_ascension
				}
				tec_give_synth_t2_ap_effect = yes
			}
			else = {
				country_event = {
					id = tec_synth_path.300
				}
			}
		}
		custom_tooltip = ap_tec_synthetic_singularity_tooltip
		custom_tooltip = tec_ap_unlock_singularity_tradition
		custom_tooltip = ap_tec_synthetic_singularity_steps
	}
	ai_weight = {
		factor = 10000
	}
}

# ------------------------------------------------- Mixed
ap_tec_replicant = {				# Biologic + Machine regular
	
	potential = {
		#OR = {
		#	tec_has_genetic_ascension_path = yes
		#	has_ascension_perk = ap_tec_cybernetic_fascination
		#}
		has_utopia = yes
		NOR = {
			#selfperk
			has_ascension_perk = ap_tec_replicant
		
			#auth
			is_machine_empire = yes
			is_hive_empire = yes

			# Blocked if you have completed a path
			has_ascension_perk = ap_tec_genetic_perfection			# perfect bio			
			has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
			has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
			has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
		#	has_ascension_perk = ap_tec_replicant					# biorobot
			has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
			has_ascension_perk = ap_tec_biopsionic					# biopsi

			has_ascension_perk = ap_tec_hive_psionic_3		# hivepsi good
			has_ascension_perk = ap_tec_hive_psionic_shatter			# hivepsi bad
			# PD
			has_origin = @origin_techno_world
		}
		is_mechanical_empire = no
		is_synthetic_empire = no
	}

	possible = {
		custom_tooltip = {
			fail_text = "TEMPORARILY DISABLED"
			always = no
		}
		custom_tooltip = {
			fail_text = "requires_ascension_perks_3"
			num_ascension_perks > 2
		}
		custom_tooltip = {
			fail_text = "tec_replicant_requirements"
			tec_has_genetic_ascension_path = yes
			tec_has_cybernetic_ascension_path = yes
		}
		custom_tooltip = {
			fail_text = "synthetic_empire_biological_ascension"
			NOT = { has_trait = trait_mechanical }
		}
		custom_tooltip = {
			fail_text = "requires_not_shroudwalker_apprentice"
			NOT = { has_origin = origin_shroudwalker_apprentice }
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# if two tier 1 or a tier 2 is reached, the path is blocked
				# mixed
			#	AND = {	# Replicants
			#		tec_has_genetic_ascension_path = yes
			#		tec_has_cybernetic_ascension_path = yes
			#	}
				AND = { # Purity
					tec_has_genetic_ascension_path = yes
					tec_has_psionic_ascension_path = yes
				}
				AND = {	# Purity hive
					tec_has_genetic_ascension_path = yes
					has_ascension_perk = ap_tec_hive_psionic_1
				}
				AND = {	# Infused
					tec_has_psionic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				# pure
				has_ascension_perk = ap_evolutionary_mastery
				has_ascension_perk = ap_synthetic_evolution
				has_ascension_perk = ap_tec_cybernetic_fascination
				has_ascension_perk = ap_transcendence

				has_ascension_perk = ap_tec_hive_psionic_2
			}
		}
	}

	modifier = {
		description = ap_tec_replicant_modifier_desc
		description_parameters = {
			POINTS = @ap_evolutionary_mastery_POINTS
		}

		BIOLOGICAL_species_trait_points_add = @ap_evolutionary_mastery_POINTS
		#	REPLICANT_species_trait_points_add = 2	# see ya space cowboy
		modify_species_cost_mult = @ap_evolutionary_mastery_COST_MULT
	}

	on_enabled = {
		custom_tooltip = "ap_tec_replicant_tooltip"
		if = {
			limit = {
				has_origin = origin_necrophage
				has_trait = trait_necrophage
			}
			custom_tooltip = disables_necrophage_features
		}
		hidden_effect = {
			set_country_flag = tec_allow_t3_replitraits
			if = {
				limit = {
					has_country_flag = tec_advanced_ascension
				}
				tec_give_replicant_ap_effect = yes
			}
			else = {
				country_event = { id = tec_replicant_path.300 }
			}
		}

		custom_tooltip = ap_tec_replicant_steps
	}

	ai_weight = {
		#not as common, ais are bad at being bots
		factor = 100
	}
}

ap_tec_biopsionic = {				# Biologic + Psionic regular

	potential = {
		#OR = {
		#	tec_has_genetic_ascension_path = yes
		#	has_ascension_perk = ap_mind_over_matter
		#}
		has_utopia = yes
		NOR = {
			#selfperk
			has_ascension_perk = ap_tec_biopsionic
		
			#auth
			is_machine_empire = yes

			# Blocked if you have completed a path
			has_ascension_perk = ap_tec_genetic_perfection			# perfect bio			
			has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
			has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
			has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
			has_ascension_perk = ap_tec_replicant					# biorobot
			has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
		#	has_ascension_perk = ap_tec_biopsionic					# biopsi

			has_ascension_perk = ap_tec_hive_psionic_3		# hivepsi good
			has_ascension_perk = ap_tec_hive_psionic_shatter			# hivepsi bad

			# PD 
			has_origin = @origin_techno_world
		}
		is_mechanical_empire = no
		is_synthetic_empire = no
	}

	possible = {
		custom_tooltip = {
			fail_text = "TEMPORARILY DISABLED"
			always = no
		}
		custom_tooltip = {
			fail_text = "requires_ascension_perks_3"
			num_ascension_perks > 2
		}
		custom_tooltip = {
			fail_text = "tec_biopsionic_requirements"
			tec_has_genetic_ascension_path = yes
			tec_has_psionic_ascension_path = yes
		}
		custom_tooltip = {
			fail_text = "synthetic_empire_biological_ascension"
			NOT = { has_trait = trait_mechanical }
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# if two tier 1 or a tier 2 is reached, the path is blocked
				# mixed
				AND = {	# Replicants
					tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
			#	AND = { # Purity
			#		tec_has_genetic_ascension_path = yes
			#		has_ascension_perk = ap_mind_over_matter
			#	}
				AND = {	# Purity hive
					tec_has_genetic_ascension_path = yes
					has_ascension_perk = ap_tec_hive_psionic_1
				}
				AND = {	# Infused
					tec_has_psionic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				# pure
				has_ascension_perk = ap_evolutionary_mastery
				has_ascension_perk = ap_synthetic_evolution
				has_ascension_perk = ap_tec_cybernetic_fascination
				has_ascension_perk = ap_transcendence

				has_ascension_perk = ap_tec_hive_psionic_2
				}
		}
	}

	modifier = {
		BIOLOGICAL_species_trait_points_add = @ap_evolutionary_mastery_POINTS
	}

	on_enabled = {
		hidden_effect = {
			set_country_flag = tec_allow_t2_biotraits
			if = {
				limit = {
					has_country_flag = tec_advanced_ascension
				}
				tec_give_biopsionic_ap_effect = yes
			}
			else = {
				country_event = {
					id = tec_biopsionic_path.300
				}
			}
		}

		custom_tooltip = ap_tec_biopsionic_steps
	}

	ai_weight = {
		factor = 1000
	}
}

ap_tec_cyberpsionic = {				# Machine + Psionic regular

	potential = {
		#OR = {
		#	has_ascension_perk = ap_tec_cybernetic_fascination
		#	has_ascension_perk = ap_mind_over_matter
		#}
		has_utopia = yes
		NOR = {
			#selfperk
			has_ascension_perk = ap_tec_cyberpsionic
		
			#auth
			is_machine_empire = yes
			is_hive_empire = yes

			# Blocked if you have completed a path
			has_ascension_perk = ap_tec_genetic_perfection			# perfect bio			
			has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
			has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
			has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
			has_ascension_perk = ap_tec_replicant					# biorobot
		#	has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
			has_ascension_perk = ap_tec_biopsionic					# biopsi

			has_ascension_perk = ap_tec_hive_psionic_3		# hivepsi good
			has_ascension_perk = ap_tec_hive_psionic_shatter			# hivepsi bad

			# PD
			has_origin = @origin_techno_world
		}
		is_mechanical_empire = no
		is_synthetic_empire = no
	}

	possible = {
		custom_tooltip = {
			fail_text = "TEMPORARILY DISABLED"
			always = no
		}
		custom_tooltip = {
			fail_text = "requires_ascension_perks_3"
			num_ascension_perks > 2
		}
		custom_tooltip = {
			fail_text = "tec_cyberpsionic_requirements"
			tec_has_cybernetic_ascension_path = yes
			tec_has_psionic_ascension_path = yes
		}
		custom_tooltip = {
			fail_text = "synthetic_empire_psionic_ascension"
			NOT = { has_trait = trait_mechanical }
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# if two tier 1 or a tier 2 is reached, the path is blocked
				# mixed
				AND = {	# Replicants
					tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				AND = { # Purity
					tec_has_genetic_ascension_path = yes
					tec_has_psionic_ascension_path = yes
				}
				AND = {	# Purity hive
					tec_has_genetic_ascension_path = yes
					has_ascension_perk = ap_tec_hive_psionic_1
				}
				#	AND = {	# Infused
				#		tec_has_psionic_ascension_path = yes
				#		tec_has_cybernetic_ascension_path = yes
				#	}
				# pure
				has_ascension_perk = ap_evolutionary_mastery
				has_ascension_perk = ap_synthetic_evolution
				has_ascension_perk = ap_tec_cybernetic_fascination
				has_ascension_perk = ap_transcendence

				has_ascension_perk = ap_tec_hive_psionic_2
				}
		}
	}

	on_enabled = {
		hidden_effect = {
			set_country_flag = tec_allow_t1_cybernetics
			if = {
				limit = {
					has_country_flag = tec_advanced_ascension
				}
				tec_give_cyberpsionic_ap_effect = yes
			}
			else = {
				country_event = {
					id = tec_cyberpsionic_path.300
				}
			}
		}
		custom_tooltip = ap_tec_cyberpsionic_tooltip
		custom_tooltip = ap_tec_cyberpsionic_steps
	}

	ai_weight = {
		factor = 1000
	}
}

# ------------------------------------------------- Machine
ap_synthetic_age = {				# Mechanical Tier I
	modifier = {
		MACHINE_species_trait_points_add = 2
		modify_species_cost_mult = -0.25
	}

	potential = {
		always = no
		has_synthethic_dawn = yes
		is_machine_empire = yes
		NOT = {
			has_ascension_perk = ap_synthetic_age
		}
	}

	possible = {
		custom_tooltip = {
			fail_text = "TEMPORARILY DISABLED"
			always = no
		}
		custom_tooltip = {
			fail_text = "requires_ascension_perks_1"
			num_ascension_perks > 0
		}
		custom_tooltip = {
			fail_text = "requires_free_tradition_tree"
			num_tradition_categories < @tec_max_tradition_slots
		}
	}

	on_enabled = {
		if = {
			limit = {
				NOT = {
					has_technology = tech_robomodding_m
				}
			}
			custom_tooltip = "tec_ap_provides_mechaedit_tech"
			hidden_effect = {
				add_research_option = tech_robomodding_m
			}
		}
		custom_tooltip = ap_synthetic_age_steps
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = tec_advanced_ascension
				}
				tec_give_machine_cyb_t1_ap_effect = yes
			}
			else = {
				country_event = {
					id = tec_machine_main_path.100
				}
			}
		}
	}
	ai_weight = {
		factor = 1000
	}
}

ap_tec_machine_mechanic_3 = {		# Mechanical Tier II
	modifier = {
		MACHINE_species_trait_points_add = 4
	}

	potential = {
		always = no
		has_synthethic_dawn = yes
		is_machine_empire = yes
		#has_ascension_perk = ap_tec_machine_mechanic_2
		NOT = {
			has_ascension_perk = ap_tec_machine_mechanic_3
		}
	}

	possible = {
		custom_tooltip = {
			fail_text = "TEMPORARILY DISABLED"
			always = no
		}
		custom_tooltip = {
			fail_text = "requires_ascension_perks_3"
			num_ascension_perks > 2
		}
		custom_tooltip = {
			fail_text = "tec_machine_t3_requirements"
			has_ascension_perk = ap_tec_machine_mechanic_2
		}
	}

	on_enabled = {
		custom_tooltip = "tec_jumptext"
		custom_tooltip = "ap_tec_machine_mechanic_3_tooltip"
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = tec_advanced_ascension
				}
				tec_give_machine_cyb_t2_ap_effect = yes
			}
			else = {
				country_event = {
					id = tec_machine_main_path.300
				}
			}
		}

		custom_tooltip = ap_tec_machine_mechanic_3_steps
	}
	


	ai_weight = {
		factor = 1000
	}
}

# Psionic T1

# Psionic T2

# Psionic T3


# BIO T2 - T1 is mechanical T1

# BIO T3 good

# BIO T3 bad

# ------------------------------------------------- Hive
ap_tec_hive_psionic_1 = {		# Psionic T1
	potential = {
		always = no
	}
	possible = {
		always = no
	}
	ai_weight = {
		factor = 0
	}

	on_enabled = {
		custom_tooltip = ap_tec_hive_psionic_1_tooltip
		custom_tooltip = ap_tec_hive_psionic_1_steps
	}
}

ap_tec_hive_psionic_3 = {		# Psionic TII
	potential = {
		always = no
	}
	possible = {
		always = no
	}
	ai_weight = {
		factor = 0
	}

	on_enabled = {
		custom_tooltip = ap_tec_hive_psionic_3_tooltip
		custom_tooltip = ap_tec_hive_psionic_3_steps
	}
}

# Psionic T3 bad
ap_tec_hive_psionic_shatter = {
	potential = {
		always = no
	}
	possible = {
		always = no
	}
	ai_weight = {
		factor = 0
	}

	on_enabled = {
		
		custom_tooltip = ap_tec_hive_psionic_shatter_steps
	}
}

# Discarded but kept for convenience
# -----------------------------------------
#Psionic tier II
ap_transcendence = {

	potential = {
		always = no
		has_utopia = yes
		NOR = {
			#selfperk
			has_ascension_perk = ap_transcendence
		
			#auth
			is_machine_empire = yes
			is_hive_empire = yes

			# Blocked if you have completed a path
			has_ascension_perk = ap_tec_genetic_perfection			# perfect bio			
			has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
			has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
			has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
			has_ascension_perk = ap_tec_replicant					# biorobot
			has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
			has_ascension_perk = ap_tec_biopsionic					# biopsi

			has_ascension_perk = ap_tec_hive_psionic_3		# hivepsi good
			has_ascension_perk = ap_tec_hive_psionic_shatter			# hivepsi bad

			# PD
			has_origin = @origin_techno_world
		}
		is_mechanical_empire = no
		is_synthetic_empire = no
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_2"
			num_ascension_perks > 1
		}
		custom_tooltip = {
			fail_text = "requires_technology_psionic_theory"
			has_technology = tech_psionic_theory
		}
		custom_tooltip = {
			fail_text = "requires_ap_mind_over_matter"
			tec_has_psionic_ascension_path = yes
		}
		custom_tooltip = {
			fail_text = "synthetic_empire_psionic_ascension"
			NOT = { has_trait = trait_mechanical }
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# if two tier 1 or a tier 2 is reached, the path is blocked
				# mixed
				AND = {	# Replicants
					tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				AND = { # Purity
					tec_has_genetic_ascension_path = yes
					tec_has_psionic_ascension_path = yes
				}
				AND = {	# Purity hive
					tec_has_genetic_ascension_path = yes
					has_ascension_perk = ap_tec_hive_psionic_1
				}
				AND = {	# Infused
					tec_has_psionic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				# pure
				has_ascension_perk = ap_evolutionary_mastery
				has_ascension_perk = ap_synthetic_evolution
				has_ascension_perk = ap_tec_cybernetic_fascination
			#	has_ascension_perk = ap_transcendence

				has_ascension_perk = ap_tec_hive_psionic_2
			}
		}
		custom_tooltip = {
			fail_text = crisis_cant_pick_ap
			is_crisis_faction = no
		}
	}

	on_enabled = {
		custom_tooltip = "transcendence_tooltip"
		hidden_effect = {
			set_country_flag = tec_psionic_assimilation
			if = {
				limit = {
					has_country_flag = tec_advanced_ascension
				}
				tec_give_psi_t2_ap_effect = yes
			}
			else = {
				country_event = { 	# Announce
					id = tec_psionic_path.120
				}
				country_event = {	# Random traits
					id = tec_psionic_path.200
					days = 360
					random = 60
				}
				country_event = {	# Enclave
					id = enclave.7000
					days = 360
					random = 720
				}
			}
		}

		custom_tooltip = ap_transcendence_steps
	}

	ai_weight = {
		factor = 20000
	}
}

#Biologic tier II
ap_evolutionary_mastery = {
	
	potential = {
		always = no
		#tec_has_genetic_ascension_path = yes
		has_utopia = yes
		NOR = {
			#selfperk
			has_ascension_perk = ap_evolutionary_mastery
		
			#auth
			is_machine_empire = yes

			# Blocked if you have completed a path
			has_ascension_perk = ap_tec_genetic_perfection			# perfect bio			
			has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
			has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
			has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
			has_ascension_perk = ap_tec_replicant					# biorobot
			has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
			has_ascension_perk = ap_tec_biopsionic					# biopsi

			has_ascension_perk = ap_tec_hive_psionic_3		# hivepsi good
			has_ascension_perk = ap_tec_hive_psionic_shatter			# hivepsi bad

			# PD
			
			has_origin = @origin_techno_world
		}
		is_mechanical_empire = no
		is_synthetic_empire = no
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_2"
			num_ascension_perks > 1
		}
		custom_tooltip = {
			fail_text = "requires_technology_glandular_acclimation"
			has_technology = tech_glandular_acclimation
		}
		custom_tooltip = {
			fail_text = "requires_ap_engineered_evolution"
			tec_has_genetic_ascension_path = yes
		}
		custom_tooltip = {
			fail_text = "synthetic_empire_biological_ascension"
			NOT = { has_trait = trait_mechanical }
		}
		custom_tooltip = {
			fail_text = "requires_not_shroudwalker_apprentice"
			NOT = { has_origin = origin_shroudwalker_apprentice }
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# if two tier 1 or a tier 2 is reached, the path is blocked
				# mixed
				AND = {	# Replicants
					tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				AND = { # Purity
					tec_has_genetic_ascension_path = yes
					tec_has_psionic_ascension_path = yes
				}
				AND = {	# Purity hive
					tec_has_genetic_ascension_path = yes
					has_ascension_perk = ap_tec_hive_psionic_1
				}
				AND = {	# Infused
					tec_has_psionic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				# pure
				#has_ascension_perk = ap_evolutionary_mastery
				has_ascension_perk = ap_synthetic_evolution
				has_ascension_perk = ap_tec_cybernetic_fascination
				has_ascension_perk = ap_transcendence

				has_ascension_perk = ap_tec_hive_psionic_2
			}
		}
	}

	modifier = {
		description = ap_evolutionary_mastery_modifier_desc
		description_parameters = {
			POINTS = @ap_evolutionary_mastery_POINTS
			COST_MULT = @ap_evolutionary_mastery_COST_MULT
		}

		BIOLOGICAL_species_trait_points_add = @ap_evolutionary_mastery_POINTS
		BIOSERVANT_species_trait_points_add = @ap_evolutionary_mastery_POINTS

		modify_species_cost_mult = @ap_evolutionary_mastery_COST_MULT
	}

	on_enabled = {
		hidden_effect = {
			set_country_flag = tec_allow_t2_biotraits
			if = {
				limit = {
					has_country_flag = tec_advanced_ascension
				}
				tec_give_gene_t2_ap_effect = yes
			}
			else = {
				#country_event = { id = tec_gene_path.200 }
			}
		}
		if = {
			limit = {
				has_origin = origin_clone_army
				OR = {
					has_trait = trait_clone_soldier_infertile
					has_trait = trait_clone_soldier_infertile_full_potential
				}
			}
			custom_tooltip = clone_soldier_locked_genes
		}

		custom_tooltip = ap_evolutionary_mastery_steps
	}

	ai_weight = {
		factor = 20000
	}
}

#Robotics tier IIB
ap_tec_cybernetic_fascination = {
	
	potential = {
		always = no
		# has_ascension_perk = ap_the_flesh_is_weak
		has_utopia = yes
		NOR = {
			#selfperk
			has_ascension_perk = ap_tec_cybernetic_fascination
		
			#auth
			is_machine_empire = yes

			# Blocked if you have completed a path
			has_ascension_perk = ap_tec_genetic_perfection			# perfect bio			
			has_ascension_perk = ap_tec_psionic_ascendance				# perfect psi
			has_ascension_perk = ap_tec_synthetic_singularity		# perfect synth
			has_ascension_perk = ap_tec_cybernetic_revolution		# perfect cyborg
			has_ascension_perk = ap_tec_replicant					# biorobot
			has_ascension_perk = ap_tec_cyberpsionic				# psiorobot
			has_ascension_perk = ap_tec_biopsionic					# biopsi

			has_ascension_perk = ap_tec_hive_psionic_3		# hivepsi good
			has_ascension_perk = ap_tec_hive_psionic_shatter			# hivepsi bad

			# PD
			
			has_origin = @origin_techno_world
		}
		is_mechanical_empire = no
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_2"
			num_ascension_perks > 1
		}
		custom_tooltip = {
			fail_text = "requires_technology_droid_workers_hive"
			OR = {
				has_technology = tech_droid_workers
				has_valid_civic = civic_tec_mecha_perfectionists
			}
		}
		custom_tooltip = {
			fail_text = "requires_ap_the_flesh_is_weak"
			tec_has_cybernetic_ascension_path = yes
		}
		custom_tooltip = {
			fail_text = "synthetic_empire_synthetic_ascension"
			NOT = { has_trait = trait_mechanical }
		}
		custom_tooltip = {
			fail_text = "tec_blocked_path"
			NOR = {
				# if two tier 1 or a tier 2 is reached, the path is blocked
				# mixed
				AND = {	# Replicants
					tec_has_genetic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				AND = { # Purity
					tec_has_genetic_ascension_path = yes
					tec_has_psionic_ascension_path = yes
				}
				AND = {	# Purity hive
					tec_has_genetic_ascension_path = yes
					has_ascension_perk = ap_tec_hive_psionic_1
				}
				AND = {	# Infused
					tec_has_psionic_ascension_path = yes
					tec_has_cybernetic_ascension_path = yes
				}
				# pure
				has_ascension_perk = ap_evolutionary_mastery
				has_ascension_perk = ap_synthetic_evolution
			#	has_ascension_perk = ap_tec_cybernetic_fascination
				has_ascension_perk = ap_transcendence

				has_ascension_perk = ap_tec_hive_psionic_2
				}
		}
	}

	on_enabled = {
		custom_tooltip = ap_tec_cybernetic_fascination_tooltip
		hidden_effect = {
			set_country_flag = tec_allow_t1_cybernetics
			if = {
				limit = {
					has_country_flag = tec_advanced_ascension
				}
				tec_give_cyb_t2_ap_effect = yes
			}
			else = {
				country_event = {
					id = tec_cybernetic_path.200
				}
			}
		}

		custom_tooltip = ap_tec_cybernetic_fascination_steps
	}

	modifier = {
		description = ap_tec_replicant_modifier_desc
		description_parameters = {
			POINTS = 2
		}
		BIOLOGICAL_species_trait_points_add = 2
		planet_pops_tec_cybernetics_upkeep_mult = -0.10
	}

	ai_weight = {
		#not as common, ais are bad at being bots
		factor = 20000
	}
}

# Mechanical T2
ap_tec_machine_mechanic_2 = {
	modifier = {
		MACHINE_species_trait_points_add = 2
		modify_species_cost_mult = -0.25
	}

	potential = {
		always = no
		has_synthethic_dawn = yes
		is_machine_empire = yes
		#has_ascension_perk = ap_synthetic_age
		NOT = {
			has_ascension_perk = ap_tec_machine_mechanic_2
		}
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_2"
			num_ascension_perks > 1
		}
		custom_tooltip = {
			fail_text = "tec_machine_t2_requirements"
			has_ascension_perk = ap_synthetic_age
		}
	}

	on_enabled = {
		custom_tooltip = "tec_jumptext"
		custom_tooltip = "ap_tec_machine_mechanic_2_tooltip"
		custom_tooltip = "tec_jumptext"
		if = {
			limit = {
				NOR = {
					has_ethic = ethic_gestalt_empathy
					has_valid_civic = civic_machine_servitor
					has_valid_civic = civic_machine_assimilator
				}
			}
			custom_tooltip = "tec_ap_provides_machine_assimilation_mechanic"
			hidden_effect = {
				set_country_flag = tec_machine_encasing
			}
		}
		if = {
			limit = {
				has_ethic = ethic_gestalt_apathy
				OR = {
					has_valid_civic = civic_machine_servitor
					has_valid_civic = civic_machine_assimilator
				}
			}
			custom_tooltip = "tec_ap_provides_machine_assimilation_servitor"
			hidden_effect = {
				set_country_flag = tec_machine_encasing
			}
		}
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = tec_advanced_ascension
				}
				tec_give_machine_cyb_t2_ap_effect = yes
			}
			else = {
				country_event = {
					id = tec_machine_main_path.200
				}
			}
		}

		custom_tooltip = ap_tec_machine_mechanic_2_steps
	}

	ai_weight = {
		factor = 1000
	}
}

# Psionic T2
ap_tec_hive_psionic_2 = {
	potential = {
		always = no
	}
	possible = {
		always = no
	}
	ai_weight = {
		factor = 0
	}

	on_enabled = {
		custom_tooltip = ap_tec_hive_psionic_2_tooltip
		custom_tooltip = ap_tec_hive_psionic_2_steps
	}
}

# -----------------------------------------
# NEW SECONDARY PATHS
# -----------------------------------------


# - Empire path
	# Manifested Will
			# The next level
			# Arcane Heritage		
			
# - Territory Path
	# Castling
			# Eternal vigilance
			# Grasp the void

# - Megastructures
	# Voidborne
			# Void Architects

# - Additional APs
	# Biogenesis

# Technology path
	# Technological ascendancy
			# Innovative Perfection
			# Technological adaptation
	
# Ethic perks
							#	- Vanilla ethics - 
	# Xenophile - Empathy
			# Embrace Diversity
			# A Future Together
	# Xenophobe - Apathy
			# Suffer not the xeno
			# Superiority of our own
	# Pacifist
			# Age of Prosperity
			# In Perfect Harmony
	# Militarist
			# Art of War
			# Power overwhelming
	# Materialist
			# 
			# Imperative efficiency
	# Spiritualist
			# Motivational Creeds
			# Undeniable Faith
	# Egalitarian - Liberal
			# Political Prowess
			# Revolutionary Ideals
	# Autoritarian
			# Iron fist ruling
			# Represed Thoughts
							#	- new ethics - 
	# Industrialist - Overconsumption
			# Accelerated Manufacture
			# Planetary Fracking
	# Ecological - Preservation
			# Terrenal Symbiosis
			# Planetary Preservation
	# Competitive - Capitalism
			# Economic venture
			# Market Dominance
	# Cooperative - Socialism
			# Social Synergy
			# Capital Nullification
	# Elitist
			# Elite Corps
			# Phoenix Project
	# Extrospective
			
	# Introspective
		#	- Governments - 


# REMOVED
ap_organo_machine_interfacing = {	# Why 3 variants of the same ap?
	potential = {
		always = no
	}
	possible = {
		always = no
	}
}
ap_organo_machine_interfacing_assimilator = {	# Why 3 variants of the same ap?
	potential = {
		always = no
	}
	possible = {
		always = no
	}
}