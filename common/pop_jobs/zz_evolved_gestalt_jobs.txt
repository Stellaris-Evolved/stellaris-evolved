# ----------------------------------
# "Ruler" Jobs
# ----------------------------------
# ------------ Brood drones ---------------
tec_broodqueen_drone = {
	category = tec_brood_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_hive_major_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_robot_pop = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		species = {
			is_same_species = root.owner	
		}
	}

	resources = {
		category = planet_jobs
		upkeep = {
			trigger = {
				is_lithoid = no
			}
			food = 10
		}
		upkeep = {
			trigger = {
				is_lithoid = yes
			}
			minerals = 10
		}
		produces = {
			unity = 10
		}
	}

	# Assembly interactions
	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 0
				}
				tec_has_assembly_buildings = no
			}
		}
		planet_jobs_unity_produces_mult = 0.05
		planet_pop_assembly_organic_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 1
				}
				tec_has_assembly_buildings = no
			}
		}
		planet_jobs_unity_produces_mult = 0.06
		planet_pop_assembly_organic_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 2
				}
				tec_has_assembly_buildings = no
			}
		}
		planet_jobs_unity_produces_mult = 0.07
		planet_pop_assembly_organic_add = 3
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 3
				}
				tec_has_assembly_buildings = no
			}
		}
		planet_jobs_unity_produces_mult = 0.08
		planet_pop_assembly_organic_add = 4
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 4
				}
				tec_has_assembly_buildings = no
			}
		}
		planet_jobs_unity_produces_mult = 0.09
		planet_pop_assembly_organic_add = 5
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 5
				}
				tec_has_assembly_buildings = no
			}
		}
		planet_jobs_unity_produces_mult = 0.10
		planet_pop_assembly_organic_add = 6
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 6
				}
				tec_has_assembly_buildings = no
			}
		}
		planet_jobs_unity_produces_mult = 0.10
		planet_pop_assembly_organic_add = 7
	}
	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value > 6
				}
				tec_has_assembly_buildings = no
			}
		}
		planet_jobs_unity_produces_mult = 0.12
		planet_pop_assembly_organic_add = 7
	}

	# has assemblies -----------------------------------------
	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 0
				}
				tec_has_assembly_buildings = yes
			}
		}
		pop_growth_speed = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 1
				}
				tec_has_assembly_buildings = yes
			}
		}
		planet_jobs_unity_produces_mult = 0.05
		pop_growth_speed = 0.15
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 2
				}
				tec_has_assembly_buildings = yes
			}
		}
		planet_jobs_unity_produces_mult = 0.06
		pop_growth_speed = 0.2
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 3
				}
				tec_has_assembly_buildings = yes
			}
		}
		planet_jobs_unity_produces_mult = 0.07
		pop_growth_speed = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 4
				}
				tec_has_assembly_buildings = yes
			}
		}
		planet_jobs_unity_produces_mult = 0.08
		pop_growth_speed = 0.3
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 5
				}
				tec_has_assembly_buildings = yes
			}
		}
		planet_jobs_unity_produces_mult = 0.09
		pop_growth_speed = 0.35
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value = 6
				}
				tec_has_assembly_buildings = yes
			}
		}
		planet_jobs_unity_produces_mult = 0.1
		pop_growth_speed = 0.4
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				num_assigned_jobs = {
					job = tec_broodlord_drone
					value > 6
				}
				tec_has_assembly_buildings = yes
			}
		}
		planet_jobs_unity_produces_mult = 0.15
		pop_growth_speed = 0.4
	}

	weight = {
		weight = @spawner_drone_job_weight
		factor = 10
		modifier = {
			factor = 100
			species = {
				is_same_value = owner_main_species 
			}
		}
		modifier = {
			factor = 0.5 # job is less useful if pop control is active, but still gives amenities
			planet = {
				has_modifier = planet_population_control_gestalt
			}
		}
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				tec_control_crisis_country = yes
			}
		}
	}
}

tec_broodlord_drone = {
	category = tec_brood_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_hive_major_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_robot_pop = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		species = {
			is_same_species = root.owner	
		}
	}

	resources = {
		category = planet_jobs
		upkeep = {
			trigger = {
				is_lithoid = no
			}
			food = 2
		}
		upkeep = {
			trigger = {
				is_lithoid = yes
			}
			minerals = 2
		}
	}

	planet_modifier = {
		planet_stability_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 5
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	pop_modifier = {
		pop_defense_armies_add = 2
	}

	weight = {
		weight = @spawner_drone_job_weight
		factor = 2
		modifier = {
			factor = 100
			species = {
				is_same_value = owner_main_species 
			}
		}
		modifier = {
			factor = 50
			planet = { planet_crime > 22 }
		}
		modifier = {
			weight = 20
			exists = owner
			owner = { is_at_war = yes }
		}
		modifier = {
			factor = 1.2
			tec_is_cyborg_species = yes
		}
	}
}

tec_overmind_drone = {
	category = tec_brood_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_hive_major_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_robot_pop = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		species = {
			is_same_species = root.owner	
		}
	}

	resources = {
		category = planet_jobs
		upkeep = {
			trigger = {
				is_lithoid = no
			}
			food = 2
		}
		upkeep = {
			trigger = {
				is_lithoid = yes
			}
			minerals = 2
		}
	}

	planet_modifier = {
		planet_stability_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 5
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	pop_modifier = {
		pop_defense_armies_add = 2
	}

	weight = {
		weight = @spawner_drone_job_weight
	}
}

tec_zealot_drone = {
	category = tec_brood_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_hive_major_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_robot_pop = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		species = {
			is_same_species = root.owner	
		}
	}

	resources = {
		category = planet_jobs
		upkeep = {
			trigger = {
				is_lithoid = no
			}
			food = 2
		}
		upkeep = {
			trigger = {
				is_lithoid = yes
			}
			minerals = 2
		}
	}

	planet_modifier = {
		planet_stability_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 5
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	pop_modifier = {
		pop_defense_armies_add = 2
	}

	weight = {
		weight = @spawner_drone_job_weight
	}
}

# ------------ Prime drones ---------------
tec_prime_drone = {
	category = tec_prime_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_machine_galactic_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}
	
	possible_precalc = can_fill_drone_job
	possible = {
		species = {
			tec_is_machine_unit = yes
		}
	}

	resources = {
		category = planet_coordinators
		produces = {
			unity = 5
		}
		upkeep = {
			energy = 5
		}
	}

	planet_modifier = {
		planet_stability_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 5
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	weight = {
		weight = 10000
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				tec_control_crisis_country = yes
			}
		}
	}
}

tec_performance_drone = {
	category = tec_prime_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_machine_galactic_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		species = {
			tec_is_machine_unit = yes
		}
	}

	resources = {
		category = planet_coordinators
		produces = {
			unity = 2
		}
		upkeep = {
			energy = 10
		}
	}

	planet_modifier = {
		planet_jobs_productive_upkeep_mult = 0.05
		planet_jobs_productive_produces_mult = 0.05
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 5
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}
		
	weight = {
		weight = 10000
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				tec_control_crisis_country = yes
			}
		}
	}
}

tec_hypercluster_drone = {
	category = tec_prime_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_machine_galactic_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		species = {
			tec_is_machine_unit = yes
		}
	}

	resources = {
		category = planet_researchers
		produces = {
			physics_research = 4
			engineering_research = 4
			society_research = 4
		}
		produces = {
			trigger = {
				planet = {
					has_upgraded_capital = yes
				}
			}
			physics_research = 1
			engineering_research = 1
			society_research = 1
		}
		produces = {
			trigger = {
				planet = {
					has_fully_upgraded_capital = yes
				}
			}
			physics_research = 1
			engineering_research = 1
			society_research = 1
		}
		upkeep = {
			energy = 5
		}
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 3
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	weight = {
		weight = 10000
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				tec_control_crisis_country = yes
			}
		}
	}
}

tec_reimaginator_drone = {
	category = tec_prime_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_machine_galactic_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		species = {
			tec_is_machine_unit = yes
		}
	}

	resources = {
		category = planet_pop_assemblers
		produces = {
			engineering_research = 3
		}
		produces = {
			trigger = {
				planet = {
					has_upgraded_capital = yes
				}
			}
			physics_research = 1
			engineering_research = 1
			society_research = 1
		}
		produces = {
			trigger = {
				planet = {
					has_fully_upgraded_capital = yes
				}
			}
			physics_research = 1
			engineering_research = 1
			society_research = 1
		}
		upkeep = {
			energy = 10
			alloys = 3
		}
	}

	planet_modifier = {
		planet_pop_assembly_add = 3
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 5
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				exists = assembling_species
				assembling_species = {
					is_robotic_species = no
				}
			}
		}
		planet_pop_assembly_add = -3
		planet_pop_assembly_organic_add = 3
	}

	# Assembly normal
		triggered_planet_modifier = { # 3
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = no
					tec_has_t1_capital = yes
				}
			}
			planet_pop_assembly_add = 0
		}
		triggered_planet_modifier = { # 4
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = no
					tec_has_t2_capital = yes
				}
			}
			planet_pop_assembly_add = 1
		}
		triggered_planet_modifier = { # 5
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = no
					tec_has_t3_capital = yes
				}
			}
			planet_pop_assembly_add = 2
		}
		triggered_planet_modifier = { # 6
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = no
					tec_has_t4_capital = yes
				}
			}
			planet_pop_assembly_add = 3
		}
		triggered_planet_modifier = { # 8
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = no
					tec_has_t5_capital = yes
				}
			}
			planet_pop_assembly_add = 5
		}
		triggered_planet_modifier = { # 10
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = no
					has_building = building_imperial_machine_capital
				}
			}
			planet_pop_assembly_add = 7
		}
	# /

	# Assembly Replicant
		triggered_planet_modifier = {
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = no
					planet = {
						exists = assembling_species
						assembling_species = {
							is_robotic_species = no
						}
					}
					tec_has_t1_capital = yes
				}
			}
			planet_pop_assembly_organic_add = 0
		}
		triggered_planet_modifier = {
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = no
					planet = {
						exists = assembling_species
						assembling_species = {
							is_robotic_species = no
						}
					}
					tec_has_t2_capital = yes
				}
			}
			planet_pop_assembly_organic_add = 1
		}
		triggered_planet_modifier = {
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = no
					planet = {
						exists = assembling_species
						assembling_species = {
							is_robotic_species = no
						}
					}
					tec_has_t3_capital = yes
				}
			}
			planet_pop_assembly_organic_add = 2
		}
		triggered_planet_modifier = {
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = no
					planet = {
						exists = assembling_species
						assembling_species = {
							is_robotic_species = no
						}
					}
					tec_has_t4_capital = yes
				}
			}
			planet_pop_assembly_organic_add = 3
		}
		triggered_planet_modifier = {
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = no
					planet = {
						exists = assembling_species
						assembling_species = {
							is_robotic_species = no
						}
					}
					tec_has_t5_capital = yes
				}
			}
			planet_pop_assembly_organic_add = 5
		}
		triggered_planet_modifier = {
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = no
					planet = {
						exists = assembling_species
						assembling_species = {
							is_robotic_species = no
						}
					}
					has_building = building_imperial_machine_capital
				}
			}
			planet_pop_assembly_organic_add = 7
		}
	# /

	# Assembly Cloning
		triggered_planet_modifier = {
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = yes
					tec_has_t1_capital = yes
				}
			}
			planet_pop_assembly_organic_add = -1
		}
		triggered_planet_modifier = {
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = yes
					tec_has_t2_capital = yes
				}
			}
			planet_pop_assembly_organic_add = 0
		}
		triggered_planet_modifier = {
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = yes
					tec_has_t3_capital = yes
				}
			}
			planet_pop_assembly_organic_add = 1
		}
		triggered_planet_modifier = {
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = yes
					tec_has_t4_capital = yes
				}
			}
			planet_pop_assembly_organic_add = 2
		}
		triggered_planet_modifier = {
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = yes
					tec_has_t5_capital = yes
				}
			}
			planet_pop_assembly_organic_add = 4
		}
		triggered_planet_modifier = {
			potential = {
				exists = planet
				planet = {
					tec_has_cloning_buildings = yes
					has_building = building_imperial_machine_capital
				}
			}
			planet_pop_assembly_organic_add = 6
		}
	# /

	weight = {
		weight = 10000
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				tec_control_crisis_country = yes
			}
		}
	}
}

tec_debugger_drone = {
	category = tec_prime_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_machine_galactic_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		species = {
			tec_is_machine_unit = yes
		}
	}

	resources = {
		category = planet_enforcers
		produces = {
			unity = 6
		}
		upkeep = {
			energy = 5
		}
	}

	planet_modifier = {
		planet_crime_no_happiness_add = -15
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 5
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	triggered_planet_modifier = {
		potential = {
			has_trait = @trait_tec_cyberpsio_control
		}
		planet_jobs_produces_mult = 0.01
	}
		
	weight = {
		weight = 10000
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				tec_control_crisis_country = yes
			}
		}
	}
}

tec_warform_drone = {
	category = tec_prime_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_machine_galactic_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		species = {
			tec_is_machine_unit = yes
		}
	}

	resources = {
		category = planet_soldiers
		upkeep = {
			energy = 5
		}
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 5
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	pop_modifier = {
		pop_defense_armies_add = 4
	}

	country_modifier = {
		country_naval_cap_add = 5
	}
	
	weight = {
		weight = 10000
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				tec_control_crisis_country = yes
			}
		}
	}
}

# ---------------------------------------------------
# New complex hive jobs
# ---------------------------------------------------
# ------------ Dread drones ---------------
tec_pherodrone_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_machine_galactic_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_robot_pop = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		species = {
			is_same_species = root.owner	
		}
	}

	resources = {
		category = planet_jobs
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					is_lithoid_empire = no
				}
			}
			food = 5
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					is_lithoid_empire = yes
				}
			}
			minerals = 5
		}
	}

	
	planet_modifier = {
		planet_stability_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 5
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	pop_modifier = {
		pop_defense_armies_add = 2
	}
	
	weight = {
		weight = 10000
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				tec_control_crisis_country = yes
			}
		}
	}
}
# ------------ Harmony drones ---------------
tec_resonance_drone = {
	icon = synapse_drone
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_hive_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_robot_pop = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		drone_individual_pop_check_trigger = no	#prevents free individuals
	}

	resources = {
		category = planet_administrators
		produces = {
			unity = 4
		}
		upkeep = {
			trigger = {
				owner = {
					has_valid_civic = civic_tec_hive_neuraxial
				}
			}
			physics_research = 1
			society_research = 1
			engineering_research = 1
		}
		upkeep = {
			trigger = {
				is_lithoid = no
			}
			food = 2
			energy = 2
		}
		upkeep = {
			trigger = {
				is_lithoid = yes
			}
			minerals = 2
			energy = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_jobs_simple_drone_produces_mult = 0.01
	}

	triggered_country_modifier = {
		potential = {
			always = yes
		}
		country_edict_fund_add = 2
		mult = value:job_total_output_modifier|JOB|bureaucrat|RESOURCE|unity|
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				has_building = building_tec_hive_sapling
			}
			owner = {
				has_tradition = tr_tec_outreach_1
			}
		}
		planet_stability_add = 5
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_tradition = tr_tec_statecraft_4
			}
		}
		planet_amenities_no_happiness_add = 2
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_tec_hive_node
			}
		}
		planet_stability_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			planet = { has_modifier = planet_artifact_relays_hivemind }
		}
		modifier = {
			planet_stability_add = 2
			planet_jobs_simple_drone_produces_mult = 0.01
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_synchronicity_instinctive_synchronization }
		}
		planet_amenities_no_happiness_add = 2
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_tec_hive_neuraxial
			}
		}
		planet_researchers_produces_mult = 0.02
	}

	weight = {
		weight = @synapse_drone_job_weight
		mult = value:job_weights_modifier|JOB|tec_resonance_drone|RESOURCE|unity|
		mult = value:scripted_modifier_job_weight_mult|MODIFIER|pop_job_amenities_mult|
		modifier = {
			factor = 1.5
			has_job = tec_resonance_drone
		}
		# Robots can't get this job
		modifier = {
			factor = 0
			has_trait = trait_mechanical
		}
	}
}

tec_podtender_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_spawning_pool

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_robot_pop = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		drone_individual_pop_check_trigger = no	#prevents free individuals
	}

	planet_modifier = {
		planet_pop_assembly_organic_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 5
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	resources = {
		category = planet_jobs
		upkeep = {
			trigger = {
				is_lithoid = no
			}
			food = 10
		}
		upkeep = {
			trigger = {
				is_lithoid = yes
			}
			minerals = 10
		}
	}

	weight = {
		weight = 10000
		modifier = {
			factor = 0.01 # job is less useful if pop control is active, but still gives amenities
			planet = {
				has_modifier = planet_population_control_gestalt
			}
		}
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				tec_control_crisis_country = yes
			}
		}

		# Robots can't get this job
		modifier = {
			factor = 0
			has_trait = trait_mechanical
		}
	}
}


# ------------ Cybernetic drones ---------------
tec_network_drone = {
	icon = coordinator
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_tec_cyberhive_node

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		drone_individual_pop_check_trigger = no	#prevents free individuals
	}

	resources = {
		category = planet_administrators
		produces = {
			trigger = {
				exists = owner
			}
			unity = 4
		}
		produces = {
			trigger = {
				owner = {
					OR = {
						has_civic = civic_tec_hive_neuraxial
						has_civic = civic_tec_hive_neuraxial_cyborg
					}
				}
			}
			unity = -0.5
		}
		upkeep = {
			physics_research = 2
			society_research = 2
			engineering_research = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_jobs_simple_drone_produces_mult = 0.01
	}

	triggered_country_modifier = {
		potential = {
			always = yes
		}
		country_edict_fund_add = 2
		mult = value:job_total_output_modifier|JOB|bureaucrat|RESOURCE|unity|
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_tradition = tr_tec_statecraft_4
			}
		}
		planet_amenities_no_happiness_add = 2
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	triggered_planet_modifier = {
		potential = {
			planet = { has_modifier = planet_artifact_relays_hivemind }
		}
		modifier = {
			planet_stability_add = 2
			planet_jobs_simple_drone_produces_mult = 0.01
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_tec_hive_node_cyborg
			}
		}
		planet_jobs_complex_drone_produces_mult = 0.005
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_synchronicity_instinctive_synchronization }
		}
		planet_amenities_no_happiness_add = 2
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				OR = {
					has_civic = civic_tec_hive_cybernetwork
				}
			}
		}
		planet_stability_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				has_building = building_tec_cyberhive_sapling
			}
			owner = {
				has_tradition = tr_tec_outreach_1
			}
		}
		planet_stability_add = 5
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_tec_hive_neuraxial_cyborg
			}
		}
		planet_amenities_no_happiness_add = 1
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	weight = {
		weight = @synapse_drone_job_weight
		mult = value:job_weights_modifier|JOB|tec_network_drone|RESOURCE|unity|
		mult = value:scripted_modifier_job_weight_mult|MODIFIER|pop_job_amenities_mult|
		modifier = {
			factor = 5
			has_job = tec_network_drone
		}
		# Robots can't get this job
		modifier = {
			factor = 0
			has_trait = trait_mechanical
		}
	}
}

tec_development_drone = {			# Unused
	icon = evaluator
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_tec_cyberhive_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		drone_individual_pop_check_trigger = no	#prevents free individuals
	}

	resources = {
		category = planet_administrators
		produces = {
			unity = 4
		}
		produces = {
			trigger = {
				owner = {
					OR = {
						has_civic = civic_tec_hive_neuraxial
						has_civic = civic_tec_hive_neuraxial_cyborg
					}
				}
			}
			unity = -0.5
		}
		upkeep = {
			trigger = {
				is_lithoid = no
				is_robot_pop = no
			}
			food = 1
			energy = 2
		}
		upkeep = {
			trigger = {
				is_lithoid = yes
			}
			minerals = 1
			energy = 2
		}
		upkeep = {
			trigger = {
				is_robot_pop = yes
			}
			energy = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				has_building = building_tec_cyberhive_sapling
			}
			owner = {
				has_tradition = tr_tec_outreach_1
			}
		}
		planet_stability_add = 5
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				OR = {
					has_civic = civic_tec_hive_neuraxial
					has_civic = civic_tec_hive_neuraxial_cyborg
				}
			}
		}
		planet_researchers_produces_mult = 0.02
	}

	triggered_country_modifier = {
		potential = {
			always = yes
		}
		country_edict_fund_add = 2
		mult = value:job_total_output_modifier|JOB|bureaucrat|RESOURCE|unity|
	}

	weight = {
		weight = @synapse_drone_job_weight
		mult = value:job_weights_modifier|JOB|tec_development_drone|RESOURCE|unity|
		mult = value:scripted_modifier_job_weight_mult|MODIFIER|pop_job_amenities_mult|
		# Robots can't get this job, unless droid
		modifier = {
			factor = 0
			tec_is_non_advanced_robot = yes
		}
	}
}

tec_spareparts_drone = {
	icon = maintenance_drone
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_tec_gestalt_parts_1

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		if = {
			limit = {
				exists = owner
				owner = {
					NAND = {
						has_valid_civic = civic_tec_se_elders
						has_ethic = ethic_gestalt_empathy
					}
				}
			}
			drone_individual_pop_check_trigger = no	#prevents free individuals
		}
	}
	
	resources = {
		category = planet_maintenancedrones
		upkeep = {
			trigger = {
				owner = {
					is_machine_empire = yes
				}
			}
			alloys = 2
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					is_hive_empire = yes
				}
			}
			alloys = 2
		}
		produces = {
			trigger = {
				exists = owner
				owner = {
					has_valid_civic = civic_tec_machine_digitalization
				}
			}
			energy = 1
		}
		produces = {
			trigger = {
				exists = owner
				owner = { tec_is_bioarch_empire = yes }
			}
			food = 1
		}
		produces = {
			trigger = {
				exists = owner
				owner = {
					has_valid_civic = civic_machine_maintenance_protocols
				}
			}
			unity = 1
		}
		produces = {
			trigger = {
				exists = owner
				owner = {
					tec_is_cyberhive = yes
				}
			}
			energy = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 10
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	triggered_planet_modifier = {
		potential = {
			exists = planet.orbital_defence
			planet.orbital_defence = {
				exists = starbase
				starbase = {
					has_starbase_building = ring_maintenance_hub
				}
			}
		}
		planet_amenities_no_happiness_add = 1
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}
		
	weight = {
		weight = @synapse_drone_job_weight 	# amenities = good
		
		modifier = {
			factor = 1.1
			exists = owner
			years_passed < 1
			owner = {
				has_valid_civic = civic_machine_assimilator 
			}
			tec_is_cyborg_species = yes
		}

		modifier = {
			factor = 10
			planet = {
				free_amenities < 20
			}
		}

		# Robots can't get this job, unless droid
		modifier = {
			factor = 0
			tec_is_non_advanced_robot = yes
		}
	}
}

# ------------ Assembly drones ---------------
tec_replicator_drone = {
	icon = roboticist
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_robot_assembly_plant

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}
	
	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		if = {
			limit = {
				exists = owner
				owner = {
					NAND = {
						has_valid_civic = civic_tec_se_elders
						has_ethic = ethic_gestalt_empathy
					}
				}
			}
			drone_individual_pop_check_trigger = no	#prevents free individuals
		}
	}

	resources = {
		category = planet_pop_assemblers
		produces = {
			engineering_research = 5

		}
		upkeep = {
			alloys = 2
		}
	}

	triggered_planet_modifier = {
		planet_amenities_no_happiness_add = 5
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	planet_modifier = {
		planet_pop_assembly_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				exists = assembling_species
				assembling_species = {
					is_robotic_species = no
				}
			}
		}
		planet_pop_assembly_add = -1
		planet_pop_assembly_organic_add = 1
	}

	weight = {
		weight = 50000
		# prio job, right?
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				tec_control_crisis_country = yes
			}
		}
		# Robots can't get this job, unless droid
		modifier = {
			factor = 0
			tec_is_non_advanced_robot = yes
		}
	}
}

tec_cloner_drone = {
	icon = tec_cloner
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_clone_vats_2
	clothes_texture_index = 3
		
	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}
	
	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		if = {
			limit = {
				exists = owner
				owner = {
					NAND = {
						has_valid_civic = civic_tec_se_elders
						has_ethic = ethic_gestalt_empathy
					}
				}
			}
			drone_individual_pop_check_trigger = no	#prevents free individuals
		}
	}

	resources = {
		category = planet_pop_assemblers
		upkeep = {
			trigger = {
				planet = {
					exists = assembling_species
					assembling_species = {
						is_lithoid = no
					}
				}
			}
			food = 8
			unity = 2
		}
		upkeep = {
			trigger = {
				planet = {
					exists = assembling_species
					assembling_species = {
						is_lithoid = yes
					}
				}
			}
			minerals = 8
			unity = 2
		}
		# This is for displaying the job upkeep on the building construction part
		upkeep = {
			trigger = {
				owner = {
					is_lithoid = no
				}
				planet = {
					NOT = {
						exists = assembling_species
					}
				}
			}
			food = 8
			unity = 2
		}
		upkeep = {
			trigger = {
				owner = {
					is_lithoid = yes
				}
				planet = {
					NOT = {
						exists = assembling_species
					}
				}
			}
			minerals = 8
			unity = 2
		}
	}

	planet_modifier = {
		planet_pop_assembly_organic_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_tradition = tr_genetics_efficient_cloning
			}
		}
		planet_pop_assembly_organic_add = 1
	}

	weight = {
		weight = 50000
		# prio job, right?
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				tec_control_crisis_country = yes
			}
		}
		# Robots can't get this job, unless droid
		modifier = {
			factor = 0
			tec_is_non_advanced_robot = yes
		}
	}
}

tec_bioengineer_drone = {
	icon = tec_bioengineer
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_tec_bioservant_plant_1
	clothes_texture_index = 3
		
	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}
	
	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		if = {
			limit = {
				exists = owner
				owner = {
					NAND = {
						has_valid_civic = civic_tec_se_elders
						has_ethic = ethic_gestalt_empathy
					}
				}
			}
			drone_individual_pop_check_trigger = no	#prevents free individuals
		}
	}
	
	planet_modifier = {
		planet_pop_assembly_organic_add = 2
	}

	resources = {
		category = planet_pop_assemblers
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					is_lithoid_empire = no
				}
			}
			food = 10
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					is_lithoid_empire = yes
				}
			}
			minerals = 10
		}
	}

	weight = {
		weight = 50000
		# prio job, right?
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				tec_control_crisis_country = yes
			}
		}
		# Robots can't get this job, unless droid
		modifier = {
			factor = 0
			tec_is_non_advanced_robot = yes
		}
	}
}

# ------------ Maintenance drones ---------------
tec_nurturer_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_maintenance_depot

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}
	
	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		drone_individual_pop_check_trigger = no	#prevents free individuals
	}

	resources = {
		category = planet_maintenancedrones
		produces = {
			trigger = {
				exists = owner
				owner = { tec_is_bioarch_empire = yes }
			}
			food = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 10
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	triggered_planet_modifier = {
		potential = {
			exists = planet.orbital_defence
			planet.orbital_defence = {
				exists = starbase
				starbase = {
					has_starbase_building = ring_maintenance_hub
				}
			}
		}
		planet_amenities_no_happiness_add = 1
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	weight = {
		weight = 1
		
		# Robots can't get this job, unless droid
		modifier = {
			factor = 0
			tec_is_non_advanced_robot = yes
		}
	}
}

# ------------ Ethic drones ---------------
tec_ecoresearcher_drone = {
	icon = xenobiologist
	category = complex_drone 
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_executive_retreat

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		if = {
			limit = {
				exists = owner
				owner = {
					NAND = {
						has_valid_civic = civic_tec_se_elders
						has_ethic = ethic_gestalt_empathy
					}
				}
			}
			drone_individual_pop_check_trigger = no	#prevents free individuals
		}
	}

	resources = {
		category = planet_researchers
		produces = {
			physics_research = 2
			engineering_research = 6
			society_research = 6
		}
		produces = {
			trigger = {
				owner = {
					OR = {
						has_civic = civic_tec_hive_neuraxial
						has_civic = civic_tec_hive_neuraxial_cyborg
					}
				}
			}
			physics_research = -0.2
			engineering_research = -0.2
			society_research = -0.2
			unity = 0.5
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					NOT = {
						tec_is_cyberhive = yes
					}
					is_lithoid_empire = no
					is_machine_empire = no
				}
			}
			food = 4
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					NOT = {
						tec_is_cyberhive = yes
					}
					is_lithoid_empire = yes
					is_machine_empire = no
				}
			}
			minerals = 4
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					OR = {
						tec_is_cyberhive = yes
						is_machine_empire = yes
					}
				}
			}
			energy = 4
		}
	}

	weight = {
		weight = @complex_drone_job_weight
		mult = value:job_weights_research_modifier|JOB|tec_ecoresearcher_drone|
		factor = 1.1
		modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			tec_is_cyborg_species = yes
		}

		# Robots can't get this job, unless droid
		modifier = {
			factor = 0
			tec_is_non_advanced_robot = yes
		}
	}
}

# ------------ Special Resource drones ---------------
tec_nanite_researcher_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_research_lab_1

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		drone_individual_pop_check_trigger = no	#prevents free individuals
	}

	resources = {
		category = planet_researchers
		produces = {
			physics_research = 5
			engineering_research = 5
			society_research = 5
			nanites = 0.5
		}
		upkeep = {
			minerals = 6
		}
	}

	weight = {
		weight = @complex_drone_job_weight
		mult = value:job_weights_research_modifier|JOB|brain_drone|
		factor = 1.5
		modifier = {
			factor = 1.5
			has_job = tec_nanite_researcher_drone
		}
		

		# Living standard weight
		modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			tec_is_cyborg_species = yes
		}

		# Robots can't get this job, unless droid
		modifier = {
			factor = 0
			tec_is_non_advanced_robot = yes
		}
	}
}

# ------------ Combat drones ---------------
tec_shipyard_technician_drone = {
	icon = tec_shipyard_technician
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_research_lab_1
	clothes_texture_index = 3

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		drone_individual_pop_check_trigger = no	#prevents free individuals
	}

	resources = {
		category = planet_soldiers
		upkeep = {
			alloys = 2
		}
	}

	pop_modifier = {
		pop_defense_armies_add = 2
	}

	country_modifier = {
		country_naval_cap_add = 6
		starbase_shipyard_build_speed_mult = 0.005
	}
	
	triggered_country_modifier = {
		potential = {
			planet = {
				exists = owner 
				owner = { has_technology = "tech_ground_defense_planning" }
			}
		}
		modifier = {
			country_naval_cap_add = 2
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			planet = {
				OR = {
					has_modifier = compliance_protocols
					has_modifier = hunter_killer_drones
				}
			}
		}
		modifier = {
			planet_stability_add = 5
		}
	}
	
	weight = {
		weight = @soldier_job_weight
		factor = 6 # Cooler job
		modifier = {
			factor = 1.5
			has_job = tec_shipyard_engineer
		}
		modifier = {
			factor = 0
			species = {
				can_be_soldier = no
			}
		}

		modifier = {
			factor = 0.1
			is_enslaved = yes
			NOT = { has_slavery_type = { type = slavery_military } }
		}
		modifier = {
			factor = 10
			is_enslaved = yes
			has_slavery_type = { type = slavery_military }
		}
		modifier = {
			factor = 0.1
			can_take_servant_job = yes
		}

		# Produce armies
		modifier = {
			factor = 2
			tec_greatly_boost_armies = yes
		}
		modifier = {
			factor = 1.5
			tec_boost_armies = yes
		}
		modifier = {
			factor = 0.5
			tec_reduces_armies = yes
		}
		modifier = {
			factor = 0.25
			tec_greatly_reduces_armies = yes
		}
		
		# Robots can't get this job, unless droid
		modifier = {
			factor = 0
			tec_is_non_advanced_robot = yes
		}
	}
}

tec_shipyard_engineer_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_research_lab_1
	icon = tec_shipyard_engineer
	clothes_texture_index = 3

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		drone_individual_pop_check_trigger = no	#prevents free individuals
	}

	resources = {
		category = planet_researchers
		produces = {
			engineering_research = 6
		}
		upkeep = {
			alloys = 2
		}
	}

	country_modifier = {
		country_naval_cap_add = 4
	}
		
	weight = {
		weight = @soldier_job_weight
		factor = 5 # Cool job
		modifier = {
			weight = 100
			exists = owner
			owner = { is_at_war = yes }
		}
				
		modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			tec_is_cyborg_species = yes
		}
		modifier = {
			factor = 0
			planet = { count_owned_pop = { limit = { }count < 12 } }
			owner = { is_ai = yes }
		}
		modifier = {
			factor = 0.1
			can_take_servant_job = yes
		}
		
		# Robots can't get this job, unless droid
		modifier = {
			factor = 0
			tec_is_non_advanced_robot = yes
		}
	}
}

tec_cadet_drone = {
	icon = tec_cadet
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_stronghold

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	resources = {
		category = planet_soldiers
	}
	
	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		if = {
			limit = {
				exists = owner
				owner = {
					NAND = {
						has_valid_civic = civic_tec_se_elders
						has_ethic = ethic_gestalt_empathy
					}
				}
			}
			drone_individual_pop_check_trigger = no	#prevents free individuals
		}
	}

	country_modifier = {
		country_naval_cap_add = 5
	}

	triggered_pop_modifier = {
		potential = {
			exists = owner
			owner = {
				has_tradition = tr_tec_might_final_3
			}
		}
		modifier = {
			pop_defense_armies_add = 1
		}
	}

	triggered_country_modifier = {
		potential = {
			planet = {
				exists = owner
				owner = { has_technology = "tech_ground_defense_planning" }
			}
		}
		modifier = {
			country_naval_cap_add = 2
		}
	}

	triggered_country_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_tec_machine_warform
			}
		}
		modifier = {
			country_naval_cap_add = 1
		}
	}

	pop_modifier = {
		pop_defense_armies_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				OR = {
					has_modifier = compliance_protocols
					has_modifier = hunter_killer_drones
				}
			}
		}
		modifier = {
			planet_stability_add = 5
		}
	}

	# Specialized ecu thing
		triggered_country_modifier = {
			potential = {
				planet = {
					has_planet_flag = tec_ecumenopolis_militarized_navy
				}
			}
			modifier = {
				country_naval_cap_add = 2
			}
		}

		triggered_pop_modifier = {
			potential = {
				planet = {
					has_planet_flag = tec_ecumenopolis_militarized_army
				}
			}
			modifier = {
				pop_defense_armies_add = 1
			}
		}
	# /

	weight = {
		weight = @soldier_job_weight
		factor = 2 # Cool job
		modifier = {
			factor = 0
			species = {
				can_be_soldier = no
			}
		}
		modifier = {
			factor = 1.5
			has_job = tec_cadet_drone
		}

		modifier = {
			weight = 100
			exists = owner
			owner = { is_at_war = yes }
		}

		modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			tec_is_cyborg_species = yes
		}
		
		# Crafted pops modifier
		modifier = {
			factor = 2
			tec_is_crafted_sentient_pop = yes
		}

		# Produce armies
		modifier = {
			factor = 2
			tec_greatly_boost_armies = yes
		}
		modifier = {
			factor = 1.5
			tec_boost_armies = yes
		}
		modifier = {
			factor = 0.5
			tec_reduces_armies = yes
		}
		modifier = {
			factor = 0.25
			tec_greatly_reduces_armies = yes
		}

		# Robots can't get this job, unless droid
		modifier = {
			factor = 0
			tec_is_non_advanced_robot = yes
			has_military_service_type = {
				type = military_service_limited
			}
		}
	}
}

# ------------ Trade drones ---------------
tec_trade_drone = {
	icon = tec_trade_specialist
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_galactic_stock_exchange

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		if = {
			limit = {
				exists = owner
				owner = {
					NAND = {
						has_valid_civic = civic_tec_se_elders
						has_ethic = ethic_gestalt_empathy
					}
				}
			}
			drone_individual_pop_check_trigger = no	#prevents free individuals
		}
	}

	resources = {
		category = planet_jobs
		upkeep = {
			energy = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		trade_value_add = 12
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_trade_mult|
	}

	weight = {
		weight = @complex_drone_job_weight
		mult = value:scripted_modifier_job_weight_mult|MODIFIER|pop_job_trade_mult|

		modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			tec_is_cyborg_species = yes
		}

		#Resource
		modifier = {
			factor = 0
			planet = {
				owner = {
					is_ai = yes
					has_resource = { type = energy amount < 500 }
					has_monthly_income = {
						resource = energy
						value < 25
					}
				}
			}
		}
		# Robots can't get this job, unless droid
		modifier = {
			factor = 0
			tec_is_non_advanced_robot = yes
		}
	}
}

# ------------ Statecraft jobs ---------------
tec_hive_admin_drone = {
	icon = administrator
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_imperial_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_robot_pop = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		drone_individual_pop_check_trigger = no	#prevents free individuals
	}

	resources = {
		category = planet_maintenancedrones
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 5
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	# Playstyle
		triggered_planet_modifier = {	# Regular hiv
			potential = {
				exists = owner
				owner = {
					is_hive_empire = yes
					tec_is_cyberhive = no
					tec_is_biohive = no
				}
			}
			modifier = {
				planet_crime_no_happiness_add = -0.25
			}
		}
		triggered_planet_modifier = {	# Cyberhiv
			potential = {
				exists = owner
				owner = {
					is_hive_empire = yes
					tec_is_cyberhive = yes
					tec_is_biohive = no
				}
			}
			modifier = {
				planet_cyborg_jobs_produces_mult = 0.025
			}
		}
		triggered_planet_modifier = {	# BioHiv
			potential = {
				exists = owner
				owner = {
					is_hive_empire = yes
					tec_is_cyberhive = no
					tec_is_biohive = yes
				}
			}
			modifier = {
				planet_jobs_food_produces_mult = 0.05
			}
		}
	# /
	# Ethics
		triggered_planet_modifier = {	# Extro
			potential = {
				exists = owner
				owner = {
					has_ethic = ethic_gestalt_extrospective
				}
			}
			modifier = {
				planet_researchers_produces_mult = 0.025
			}
		}
		triggered_planet_modifier = {	# Intro
			potential = {
				exists = owner
				owner = {
					has_ethic = ethic_gestalt_introspective
				}
			}
			modifier = {
				planet_jobs_unity_produces_mult = 0.05
			}
		}

		triggered_planet_modifier = {	# Apa
			potential = {
				exists = owner
				owner = {
					has_ethic = ethic_gestalt_apathy
				}
			}
			modifier = {
				planet_orbital_bombardment_damage = -0.05
			}
		}
		triggered_planet_modifier = {	# Empa
			potential = {
				exists = owner
				owner = {
					has_ethic = ethic_gestalt_introspective
				}
			}
			modifier = {
				planet_pops_upkeep_mult = -0.05
			}
		}

		triggered_planet_modifier = {	# Pres
			potential = {
				exists = owner
				owner = {
					has_ethic = ethic_gestalt_preservation
				}
			}
			modifier = {
				planet_districts_upkeep_mult = -0.05
			}
		}
		triggered_planet_modifier = {	# Dis
			potential = {
				exists = owner
				owner = {
					has_ethic = ethic_gestalt_disregard
				}
			}
			modifier = {
				planet_buildings_upkeep_mult = -0.05
			}
		}
	# /
	
	triggered_planet_modifier = {
		potential = {
			exists = planet.orbital_defence
			planet.orbital_defence = {
				exists = starbase
				starbase = {
					has_starbase_building = ring_maintenance_hub
				}
			}
		}
		planet_amenities_no_happiness_add = 1
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	weight = {
		weight = @ruler_job_weight
		mult = value:job_weights_modifier|JOB|tec_hive_admin_drone|RESOURCE|unity|
		mult = value:scripted_modifier_job_weight_mult|MODIFIER|pop_job_amenities_mult|
		modifier = {
			factor = 5
			has_job = tec_hive_admin_drone
		}

		# Robots can't get this job
		modifier = {
			factor = 0
			has_trait = trait_mechanical
		}
	}
}

tec_machine_admin_drone = {
	icon = administrator
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_machine_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		drone_individual_pop_check_trigger = no	#prevents free individuals
	}
	resources = {
		category = planet_maintenancedrones
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 5
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	# Playstyle
		triggered_planet_modifier = {	# Regular hiv
			potential = {
				exists = owner
				owner = {
					is_hive_empire = yes
					tec_is_cyberhive = no
					tec_is_biohive = no
				}
			}
			modifier = {
				planet_crime_no_happiness_add = -0.25
			}
		}
		triggered_planet_modifier = {	# Cyberhiv
			potential = {
				exists = owner
				owner = {
					is_hive_empire = yes
					tec_is_cyberhive = yes
					tec_is_biohive = no
				}
			}
			modifier = {
				planet_cyborg_jobs_produces_mult = 0.025
			}
		}
		triggered_planet_modifier = {	# BioHiv
			potential = {
				exists = owner
				owner = {
					is_hive_empire = yes
					tec_is_cyberhive = no
					tec_is_biohive = yes
				}
			}
			modifier = {
				planet_jobs_food_produces_mult = 0.05
			}
		}
	# /
	# Ethics
		triggered_planet_modifier = {	# Extro
			potential = {
				exists = owner
				owner = {
					has_ethic = ethic_gestalt_extrospective
				}
			}
			modifier = {
				planet_researchers_produces_mult = 0.025
			}
		}
		triggered_planet_modifier = {	# Intro
			potential = {
				exists = owner
				owner = {
					has_ethic = ethic_gestalt_introspective
				}
			}
			modifier = {
				planet_jobs_unity_produces_mult = 0.05
			}
		}

		triggered_planet_modifier = {	# Apa
			potential = {
				exists = owner
				owner = {
					has_ethic = ethic_gestalt_apathy
				}
			}
			modifier = {
				planet_orbital_bombardment_damage = -0.05
			}
		}
		triggered_planet_modifier = {	# Empa
			potential = {
				exists = owner
				owner = {
					has_ethic = ethic_gestalt_introspective
				}
			}
			modifier = {
				planet_pops_upkeep_mult = -0.05
			}
		}

		triggered_planet_modifier = {	# Pres
			potential = {
				exists = owner
				owner = {
					has_ethic = ethic_gestalt_preservation
				}
			}
			modifier = {
				planet_districts_upkeep_mult = -0.05
			}
		}
		triggered_planet_modifier = {	# Dis
			potential = {
				exists = owner
				owner = {
					has_ethic = ethic_gestalt_disregard
				}
			}
			modifier = {
				planet_buildings_upkeep_mult = -0.05
			}
		}
	# /

	triggered_planet_modifier = {
		potential = {
			exists = planet.orbital_defence
			planet.orbital_defence = {
				exists = starbase
				starbase = {
					has_starbase_building = ring_maintenance_hub
				}
			}
		}
		planet_amenities_no_happiness_add = 1
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	weight = {
		weight = @ruler_job_weight
		mult = value:job_weights_modifier|JOB|tec_machine_admin_drone|RESOURCE|unity|
		mult = value:scripted_modifier_job_weight_mult|MODIFIER|pop_job_amenities_mult|
		modifier = {
			factor = 5
			has_job = tec_machine_admin_drone
		}

		# Robots can't get this job
		modifier = {
			factor = 0
			has_trait = trait_mechanical
		}
	}
}

# ---------------------------------------------------
# New simple hive jobs
# ---------------------------------------------------
# ------------ Ringworld drones ---------------
tec_matterminer_drone = {
	icon = geoengineer
	category = simple_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_mineral_purification_hub

	possible_pre_triggers = {
		has_owner = yes
		#is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
	}

	resources = {
		category = planet_miners
		produces = {
			minerals = 6
		}
		upkeep = {
			energy = 2
		}
		# Species bonuses/maluses
			#produces = {
			#	trigger = {
			#		is_lithoid = yes
			#	}
			#	minerals = 1
			#}
		# /
		produces = {
			trigger = {
				planet = {
					has_planet_flag = has_material_requisitorium
				}
			}
			minerals = @requisitorium_minerals_reduction
		}
	}

	overlord_resources = {
		category = planet_requisitioned_minerals
		produces = {
			trigger = {
				planet = {
					has_planet_flag = has_material_requisitorium
				}
			}
			minerals = @requisitorium_minerals_overlord
		}
	}

	weight = {
		weight = @simple_drone_job_weight
		mult = value:job_weights_modifier|JOB|tec_matterminer|RESOURCE|minerals|
		modifier = {
			factor = 1.2
			has_job = tec_matterminer_drone
		}

		modifier = {
			factor = 1.1
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			tec_is_cyborg_species = yes
		}
		
		# Crafted pops modifier
		modifier = {
			factor = 2
			tec_is_crafted_sentient_pop = yes
		}
		modifier = {
			factor = 200
			tec_is_crafted_nonsapient_pop = yes
		}

		#Prioritize serving species
		modifier = {
			factor = 3
			OR = {
				tec_has_stapled_trait = yes
			}
		}

		modifier = {
			factor = 0.9
			owner = {
				has_monthly_income = {
					resource = minerals
					value > 85
				}
			}
		}
		# low energy
		modifier = {
			factor = 0.5
			owner = {
				has_monthly_income = {
					resource = minerals
					value < 0
				}
			}
		}
	}
}

# ------------ Aquatic worlds ---------------
tec_hydrorelay_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_energy_grid

	possible_pre_triggers = {
		has_owner = yes
		#is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
		drone_individual_pop_check_trigger = no	#prevents free individuals
	}

	resources = {
		category = planet_researchers
		produces = {
			physics_research = 6
		}
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 4
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	triggered_planet_modifier = {	# Exception just because
		potential = {
			exists = owner
			owner = {
				tec_is_quantum_alloys_empire = yes
			}
			planet = {
				NOR = {
					has_active_building = building_coordinated_fulfillment_center_1
					has_active_building = building_coordinated_fulfillment_center_2
				}
			}
		}
		planet_metallurgists_produces_mult = @tec_quantum_technician
	}

	weight = {
		weight = @complex_drone_job_weight
		mult = value:job_weights_research_modifier|JOB|tec_hydrorelay_drone|
		mult = value:scripted_modifier_job_weight_mult|MODIFIER|pop_job_amenities_mult|
		modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			tec_is_cyborg_species = yes
		}
	}
}

tec_reef_drone = {
	category = simple_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_mineral_purification_plant

	possible_pre_triggers = {
		has_owner = yes
		#is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
	}

	resources = {
		category = planet_miners
		produces = {
			minerals = 6
		}
		# Species bonuses/maluses
			#produces = {
			#	trigger = {
			#		is_lithoid = yes
			#	}
			#	minerals = 1
			#}
		# /
		produces = {
			trigger = {
				owner = {
					is_lithoid_empire = yes
					has_valid_civic = civic_tec_hive_menial
				}
			}
			minerals = 0.5
		}
		produces = {
			trigger = {
				planet = {
					has_planet_flag = has_material_requisitorium
				}
			}
			minerals = @requisitorium_minerals_reduction
		}
	}

	overlord_resources = {
		category = planet_requisitioned_minerals
		produces = {
			trigger = {
				planet = {
					has_planet_flag = has_material_requisitorium
				}
			}
			minerals = @requisitorium_minerals_overlord
		}
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 2
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_lithoid_empire = yes
				has_valid_civic = civic_tec_hive_menial
			}
		}
		planet_amenities_no_happiness_add = 1
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	weight = {
		weight = @simple_drone_job_weight
		mult = value:job_weights_modifier|JOB|tec_reef_drone|RESOURCE|minerals|
		mult = value:scripted_modifier_job_weight_mult|MODIFIER|pop_job_amenities_mult|
		modifier = {
			factor = 1.2
			has_job = mining_drone
		}

		modifier = {
			factor = 1.1
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			tec_is_cyborg_species = yes
		}
		
		# Crafted pops modifier
		modifier = {
			factor = 2
			tec_is_crafted_sentient_pop = yes
		}
		modifier = {
			factor = 200
			tec_is_crafted_nonsapient_pop = yes
		}

		#Prioritize serving species
		modifier = {
			factor = 3
			OR = {
				tec_has_stapled_trait = yes
			}
		}

		modifier = {
			factor = 0.9
			NOT = { has_job = tec_reef_drone }
			owner = {
				has_monthly_income = {
					resource = minerals
					value > 85
				}
			}
		}
	}
}

tec_aqua_drone = {
	icon = angler
	category = simple_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_food_processing_facility

	possible_pre_triggers = {
		has_owner = yes
		#is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
	}

	resources = {
		category = planet_farmers
		produces = {
			food = 8
		}
		# Species bonuses/maluses
			#produces = {
			#	trigger = {
			#		is_lithoid = no
			#		is_robotic_species = no
			#	}
			#	food = 1
			#}
			#produces = {
			#	trigger = {
			#		exists = owner
			#		owner = {
			#			is_robot_empire = yes
			#		}
			#	}
			#	food = -1
			#}
		# /
		produces = {
			trigger = {
				exists = owner
				owner = {
					is_lithoid_empire = no
					has_valid_civic = civic_tec_hive_menial
				}
			}
			food = 0.5
		}
		produces = {
			trigger = {
				exists = owner
				owner = {
					is_robot_empire = yes
				}
			}
			food = -1
		}
		produces = {
			trigger = {
				planet = {
					has_planet_flag = has_produce_requisitorium
				}
			}
			food = @requisitorium_food_reduction
		}
	}
	overlord_resources = {
		category = planet_requisitioned_food
		produces = {
			trigger = {
				planet = {
					has_planet_flag = has_produce_requisitorium
				}
			}
			food = @requisitorium_food_overlord
		}
	}

	triggered_planet_modifier = {
		potential = {
			always = yes
		}
		planet_amenities_no_happiness_add = 3
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_lithoid_empire = no
				has_valid_civic = civic_tec_hive_menial
			}
		}
		planet_amenities_no_happiness_add = 1
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	weight = {
		weight = @simple_drone_job_weight
		mult = value:job_weights_modifier|JOB|tec_aqua_drone|RESOURCE|food|
		mult = value:scripted_modifier_job_weight_mult|MODIFIER|pop_job_amenities_mult|
		modifier = {
			factor = 1.2
			has_job = agri_drone
		}
				
		modifier = {
			factor = 0.9
			owner = {
				is_robot_empire = yes
			}
		}
		modifier = {
			factor = 1.1
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			tec_is_cyborg_species = yes
		}

		modifier = {
			factor = 0.5
			has_trait = trait_lithoid

			owner = {
				is_lithoid_empire = yes
				has_monthly_income = {
					resource = food
					value >= 0
				}
			}
		}

		# Crafted pops modifier
		modifier = {
			factor = 2
			tec_is_crafted_sentient_pop = yes
		}
		modifier = {
			factor = 200
			tec_is_crafted_nonsapient_pop = yes
		}

		#Prioritize serving species
		modifier = {
			factor = 3
			OR = {
				tec_has_stapled_trait = yes
			}
		}
		modifier = {
			factor = 5
			owner = {
				has_monthly_income = {
					resource = food
					value < 0
				}
			}
		}
		modifier = {
			factor = 0.9
			NOT = { has_job = tec_aqua_drone }
			owner = {
				has_monthly_income = {
					resource = food
					value > 50
				}
			}
		}
	}
}

tec_depth_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_maintenance_depot

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
	}

	resources = {
		category = planet_enforcers
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					is_lithoid_empire = no
				}
			}
			food = 2
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					is_lithoid_empire = yes
				}
			}
			minerals = 2
		}
	}

	planet_modifier = {
		planet_crime_no_happiness_add = -10
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			NOR = {
				owner = {
					has_origin = origin_clone_army
					has_origin = origin_tec_clones
					has_origin = origin_tec_hive_biomorph
					has_valid_civic = civic_tec_hive_eusocial
				}
				owner_main_species = {
					has_trait = trait_tec_lithoid_sedimentary
				}
			}
		}
		pop_growth_speed = 0.025
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			OR = {
				owner = {
					has_origin = origin_clone_army
					has_origin = origin_tec_clones
					has_origin = origin_tec_hive_biomorph
					has_valid_civic = civic_tec_hive_eusocial
				}
				owner_main_species = {
					has_trait = trait_tec_lithoid_sedimentary
				}
			}
		}
		planet_pop_assembly_organic_mult = 0.025
	}


	weight = {
		weight = @high_prio_specialist_job_weight
		modifier = { # Important job that produces growth
			factor = 5
			planet = {
				num_pops < 120
			}
			
		}

		# Produce armies
		modifier = {
			factor = 5
			tec_greatly_boost_armies = yes
		}
		modifier = {
			factor = 3
			tec_boost_armies = yes
		}
		modifier = {
			factor = 0.5
			tec_reduces_armies = yes
		}
		modifier = {
			factor = 0.25
			tec_greatly_reduces_armies = yes
		}

		# Crime autotrigger - Gestalts handle crime in a worse way than regular empires
		modifier = {
			factor = 1
			planet = { planet_crime >= 10 }
		}
		modifier = {
			factor = 5
			planet = { planet_crime >= 15 }
		}
		modifier = {
			factor = 25
			planet = { planet_crime >= 20 }
		}
	}
}

# ------------ Scavengers ---------------
tec_scavenger_drone = {
	category = simple_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_tec_scavenge_center
	icon = miner

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_drone_job
	possible = {
		tec_has_stapled_trait = no
	}

	pop_modifier = {
		pop_upkeep_mult = 0.5
	}

	resources = {
		category = planet_jobs_productive
		produces = {
			# Fallback
			energy = 3
			minerals = 3
			food = 3
		}
		# Energy group
			produces = {
				trigger = {
					planet = {
						is_dry = yes
					}
				}
				energy = 3
				minerals = -3
				food = -3
				volatile_motes = 0.25
			}
			produces = {
				trigger = {
					planet = {
						OR = {
							is_dry = yes
							is_planet_class = pc_relic
							is_planet_class = pc_nuked
						}
						has_active_building = building_energy_grid
					}
				}
				energy = 1
			}
			produces = {
				trigger = {
					planet = {
						OR = {
							is_dry = yes
							is_planet_class = pc_relic
							is_planet_class = pc_nuked
						}
						has_active_building = building_energy_nexus
					}
				}
				energy = 2
			}
			produces = {
				trigger = {
					planet = {
						OR = {
							is_dry = yes
							is_planet_class = pc_relic
							is_planet_class = pc_nuked
						}
						has_active_building = building_energy_complex
					}
				}
				energy = 3
			}
		# /
		# Mineral group
			produces = {
				trigger = {
					planet = {
						is_cold = yes
					}
				}
				energy = -3
				minerals = 3
				food = -3
				rare_crystals = 0.25
			}
			produces = {
				trigger = {
					planet = {
						OR = {
							is_cold = yes
							is_planet_class = pc_relic
							is_planet_class = pc_nuked
						}
						has_active_building = building_mineral_purification_hub
					}
				}
				minerals = 1
			}
			produces = {
				trigger = {
					planet = {
						OR = {
							is_cold = yes
							is_planet_class = pc_relic
							is_planet_class = pc_nuked
						}
						has_active_building = building_mineral_purification_plant
					}
				}
				minerals = 2
			}
			produces = {
				trigger = {
					planet = {
						OR = {
							is_cold = yes
							is_planet_class = pc_relic
							is_planet_class = pc_nuked
						}
						has_active_building = building_mineral_purification_complex
					}
				}
				minerals = 3
			}
		# /
		# Food group
			produces = {
				trigger = {
					planet = {
						is_wet = yes
					}
				}
				food = 3
				energy = -3
				minerals = 3
				exotic_gases = 0.25
			}
			produces = {
				trigger = {
					planet = {
						OR = {
							is_wet = yes
							tec_is_perfect_planet = yes
						}
						has_active_building = building_food_processing_facility
					}
				}
				food = 1
			}
			produces = {
				trigger = {
					planet = {
						OR = {
							is_wet = yes
							tec_is_perfect_planet = yes
						}
						has_active_building = building_food_processing_center
					}
				}
				food = 2
			}
			produces = {
				trigger = {
					planet = {
						OR = {
							is_wet = yes
							tec_is_perfect_planet = yes
						}
						has_active_building = building_food_processing_complex
					}
				}
				food = 3
			}
		# /
		
		# Relic
			produces = {
				trigger = {
					planet = {
						OR = {
							is_planet_class = pc_relic
							is_planet_class = pc_nuked
						}
					}
				}
				minerals = 3
				energy = 3
				food = -3
				#minor_artifacts = 0.1
			}
		# /
		# Artificial	
			produces = {
				trigger = {
					planet = {
						OR = {
							is_artificial = yes
							is_planet_class = pc_machine
						}
						NOT = {
							has_planet_flag = tec_relic_megastructure
						}
					}
				}
				alloys = 3
				energy = 3
				minerals = -3
				food = -3
			}
			# Relic megastructure
			produces = {
				trigger = {
					planet = {
						is_artificial = yes
						has_planet_flag = tec_relic_megastructure
					}
				}
				alloys = 3
				minor_artifacts = 0.1
			}
			produces = {
				trigger = {
					planet = {
						OR = {
							is_artificial = yes
							is_planet_class = pc_machine
						}
						has_active_building = building_foundry_2
					}
				}
				alloys = 0.5
			}
			produces = {
				trigger = {
					planet = {
						OR = {
							is_artificial = yes
							is_planet_class = pc_machine
						}
						has_active_building = building_foundry_3
					}
				}
				alloys = 0.5
			}
		# /
	}

	weight = {
		weight = @complex_drone_job_weight
		modifier = {	# Important job
			factor = 10
		}
		modifier = {
			factor = 1.2
			has_job = tec_scavenger_drone
		}

		modifier = {
			factor = 1.1
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			tec_is_cyborg_species = yes
		}
		
		# Crafted pops modifier
		modifier = {
			factor = 2
			tec_is_crafted_sentient_pop = yes
		}
		modifier = {
			factor = 200
			tec_is_crafted_nonsapient_pop = yes
		}
	}
}

# ---------------------------------------------------
# Biomorph jobs	- Must be reworked
# ---------------------------------------------------