# common\script_values\zz_evolved_trait_script_values.txt

# note count_positive_traits is less flexible than this one (lacks $BASE$)
tec_count_positive_traits = {
	inline_script = {
		script = tec_type_hint
		[[BASE] float = $BASE$ ]
		[[BASE_VALUE] script_value = $BASE_VALUE$ ]
	}

	BASE = 0
	[[BASE]add = $BASE$]
	[[BASE_VALUE]add = value:$BASE_VALUE$]

	complex_trigger_modifier = {
		trigger = num_positive_traits
		trigger_scope = from
		mode = add
	}
}
# Example in the case of the funny invasive trait
# mult = value:tec_count_positive_traits|BASE_VALUE|tec_invasive_count_positive_traits|

# Invasive boogaloo
	tec_invasive_scaling = {
		base = 0
		# Positive traits count as negative / 2
		#subtract = value:tec_count_positive_traits|BASE_VALUE|tec_invasive_count_positive_traits|
		subtract = value:tec_count_positive_traits
		divide = 2
		# Negative traits do count as positive
		add = value:count_negative_traits
		# Plantoid traits do count as positive
		add = value:tec_invasive_count_positive_traits
		min = 0
	}
	# Example species with invasive - rapid breeders - random negative
		# base = 0
		# Substract -1 (rapid breeders)
		# Divide -1/2 = -0.5
		# Add = 1 (random neg) ) 1.5
		# add = 1 (invasive) = 1.5
		# species should have 0.75% bonus
	# /

	tec_invasive_count_positive_traits = {
		# Self-invasive trait
		base = 1
		# Plantoid traits
		modifier = {
			add = 1
			from = {
				has_trait = trait_plantoid_budding
			}
		}
		modifier = {
			add = 1
			from = {
				has_trait = trait_plantoid_radiotrophic
			}
		}
		modifier = {
			add = 1
			from = {
				has_trait = trait_plantoid_phototrophic
			}
		}
	}
# /

# Special evolved traits
	# Dual Gametoids
	tec_dual_gametoids_scaling = {
		base = 7.5
		complex_trigger_modifier = {
			trigger = num_pops
			trigger_scope = $SCOPE|this$
			mode = add
			mult = 0.25
		}
		# 10 pops = 10%
		# 30 pops = 17.5%
		# 80 pops = 30% = cap
		min = 10
		max = 30
	}
	# mult = value:tec_dual_gametoids_scaling|SCOPE|X|

	tec_decomposition_scaling = {
		base = 7.5
		complex_trigger_modifier = {
			trigger = num_pops
			trigger_scope = $SCOPE|this$
			mode = add
			mult = 0.25
		}
		# 10 pops = 7.5+2.5% = 10%
		# 30 pops = 17.5%
		# 80 pops = 30% = cap
		min = 10
		max = 30
	}
	# mult = value:tec_decomposition_scaling|SCOPE|X|
# /