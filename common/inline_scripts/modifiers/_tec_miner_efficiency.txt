# modifiers/_tec_miner_efficiency

inline_script = {
	script = tec_type_hint
	trigger_block = "$trigger$"
	float = $count$
	number_or_value = "$mult$"
	bool = $default$
	localisation = $key$
}

triggered_planet_modifier = {
	potential = {
		OR = {
			AND = {
				is_scope_valid = no
				always = $default$
			}
			AND = {
				exists = owner

				$trigger$

				OR = {
					NOT = { exists = planet }
					planet = {
						tec_has_miner_production_planet_swap = no
					}
				}

				owner = {
					tec_has_miner_production_swap = no
				}
			}
		}
	}
	planet_miners_minerals_produces_add = $count$
	mult = $mult$
	key = $key$
}

triggered_planet_modifier = {
	potential = {
		exists = owner
		OR = {
			NOT = { exists = planet }
			planet = {
				tec_has_scrap_miner = { cached = yes }
			}
		}

		$trigger$
	}

	planet_miners_minerals_produces_add = @[$count$ / 2]
	planet_miners_alloys_produces_add = @[$count$ / 4]
	mult = $mult$
	key = $key$
}

# not swap just add
triggered_planet_modifier = {
	potential = {
		exists = owner
		OR = {
			NOT = { exists = planet }
			planet = {
				tec_has_matter_miner = { cached = yes }
			}
		}

		$trigger$
	}

	planet_miners_energy_upkeep_add = @[$count$ / 4]
	mult = $mult$
	key = $key$
}

inline_script = {
	script = mod_support/tec_inlines_include
	include_script = modifiers/tec_miner_efficiency
	parameters = "
		count = $count$
		mult = $mult$
		trigger = \"\\\"$trigger$\"\\\"
	"
}