# cui/cult/tec_cult_option_button_effect.txt

inline_script = {
    script = tec_type_hint
    country_trigger_block = "$potential$"
    country_trigger_block = "$allow$"
    country_effect_block = "$on_activate$"
    country_effect_block = "$on_deactivate$"
}


tec_cui_cult_$name$_button_effect = {
    potential = {
        from = {
            $potential$
        }
    }

    allow = {
        from = {
            $allow$
        }
    }

    effect = {
        from = {
            if = {
                limit = {
                    NOT = { has_country_flag = tec_cui_cult_$name$ }
                }
                set_country_flag = tec_cui_cult_$name$
                add_modifier = {
                    modifier = tec_cui_cult_$name$_modifier
                    days = -1
                }
                set_country_flag = tec_cui_cult_$name$_last_activated
                $on_activate$
                fire_on_action = {
                    on_action = tec_cult_on_activate
                }
                remove_country_flag = tec_cui_cult_$name$_last_activated
            } else = {
                remove_country_flag = tec_cui_cult_$name$
                remove_modifier = tec_cui_cult_$name$_modifier
                set_country_flag = tec_cui_cult_$name$_last_deactivated
                $on_deactivate$
                fire_on_action = {
                    on_action = tec_cult_on_deactivate
                }
                remove_country_flag = tec_cui_cult_$name$_last_deactivated
            }
        }
    }
}