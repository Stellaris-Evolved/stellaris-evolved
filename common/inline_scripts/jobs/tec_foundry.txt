# jobs/tec_foundry

# Regular
	inline_script = {
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_foundry_planet_swap
				negate = yes
			}
			owner = {
				inline_script = { script = tec_read_cache scope = country trigger = tec_uses_regular_empire_jobs }
				is_catalytic_empire = no
			}
		"
		job = foundry
		count = $count$
		mult = $mult$
		display = $display$
		default_job = $default_job$
		default_job = no
		default_trigger = "$default_trigger$"
		default_trigger = "always = no"
	}

	inline_script = {
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			exists = planet
			planet = {
				has_modifier = penal_colony
			}
			owner = {
				inline_script = { script = tec_read_cache scope = country trigger = tec_uses_regular_empire_jobs }
				is_catalytic_empire = no
			}
		"
		job = foundry_prison_worker
		count = $count$
		mult = $mult$
		display = $display$
		default_job = $default_job$
		default_job = no
		default_trigger = "$default_trigger$"
		default_trigger = "always = no"
	}

	inline_script = {
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_foundry_planet_swap
				negate = yes
			}
			owner = {
				is_hive_empire = yes
				is_catalytic_empire = no
			}
		"
		job = alloy_drone
		count = $count$
		mult = $mult$
		display = $display$
		default_job = $default_job$
		default_job = no
		default_trigger = "$default_trigger$"
		default_trigger = "always = no"
	}

	inline_script = {
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_foundry_planet_swap
				negate = yes
			}
			owner = {
				is_machine_empire = yes
				is_catalytic_empire = no
			}
		"
		job = fabricator
		count = $count$
		mult = $mult$
		display = $display$
		default_job = $default_job$
		default_job = no
		default_trigger = "$default_trigger$"
		default_trigger = "always = no"
	}
# /

# Catalytic
	inline_script = { # Catalytic
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$
			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_foundry_planet_swap
				negate = yes
			}
			owner = {
				inline_script = { script = tec_read_cache scope = country trigger = tec_uses_regular_empire_jobs }
				is_catalytic_empire = yes
			}
		"
		job = catalytic_technician
		count = $count$
		mult = $mult$
		display = $display$
		default_job = $default_job$
		default_job = no
		default_trigger = "$default_trigger$"
		default_trigger = "always = no"
	}

	inline_script = {
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			exists = planet
			planet = {
				has_modifier = penal_colony
			}
			owner = {
				inline_script = { script = tec_read_cache scope = country trigger = tec_uses_regular_empire_jobs }
				is_catalytic_empire = yes
			}
		"
		job = catalytic_technician_prison_worker
		count = $count$
		mult = $mult$
		display = $display$
		default_job = $default_job$
		default_job = no
		default_trigger = "$default_trigger$"
		default_trigger = "always = no"
	}

	inline_script = { # Catalytic gestalt
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			inline_script = {
			 	script = jobs/helper/tec_planet_not_exists_or_job_trigger
			 	trigger = tec_has_foundry_planet_swap
				negate = yes
			}
			owner = {
				is_gestalt = yes
				is_catalytic_empire = yes
			}
		"
		job = catalytic_drone
		count = $count$
		mult = $mult$
		display = $display$
		default_job = $default_job$
		default_job = no
		default_trigger = "$default_trigger$"
		default_trigger = "always = no"
	}
# /

# Extra scrappers
	inline_script = {	# Scrappers
		script = jobs/tec_job
		trigger = "
			exists = owner

			$trigger$

			owner = {
				tec_is_metallurgists_scrapper_empire = yes
				is_gestalt = no
			}
		"
		job = tec_scrapper
		count = $count$
		mult = $mult$
		display = $display$
	}
	
	#count * 2 would lead to too many jobs
# /

inline_script = {
	script = mod_support/tec_inlines_include
	include_script = jobs/tec_foundry
	parameters = "
		count = $count$
		mult = $mult$
		display = $display$
		trigger = \"\\\"$trigger$\"\\\"
		default_job = $default_job$
		default_job = no
		default_trigger = \"\\\"$default_trigger$\"\\\"
		default_trigger = \"\\\"always = no\"\\\"
	"
}