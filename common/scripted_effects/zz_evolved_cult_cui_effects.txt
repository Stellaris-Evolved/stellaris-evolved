tec_reset_cult_cui = {
    set_country_flag = tec_cult_cui_closed
    tec_reset_cult_cui_tabs = yes
}

tec_reset_cult_cui_tabs = {
    remove_country_flag = tec_cui_cult_basic_tab_active
    remove_country_flag = tec_cui_cult_spiritualist_tab_active
    remove_country_flag = tec_cui_cult_special_tab_active
    remove_country_flag = tec_cui_cult_advanced_tab_active
    remove_country_flag = tec_cui_cult_authority_tab_active
}

tec_clear_cult_activate_flag = {
    inline_script = {
        script = cui/cult/tec_cult_declarations
        extra = "_step = clear_activated_flag"
    }
}

tec_clear_cult_deactivate_flag = {
    inline_script = {
        script = cui/cult/tec_cult_declarations
        extra = "_step = clear_deactivated_flag"
    }
}

tec_clear_cults = {
    custom_tooltip = tec_clear_cults
    hidden_effect = {
        inline_script = {
            script = cui/cult/tec_cult_declarations
            extra = "_step = clear_cults"
        }
        set_variable = {
            which = tec_cult_points_used
            value = 0
        }
    }
}

tec_clear_invalid_cults = {
    custom_tooltip = tec_clear_invalid_cults
    hidden_effect = {
        inline_script = {
            script = cui/cult/tec_cult_declarations
            extra = "_step = clear_invalid_cults"
        }
    }
}

tec_recalculate_cult_points = {
    hidden_effect = {
        set_variable = {
            which = tec_cult_points_used
            value = 0
        }
        inline_script = {
            script = iterators/tec_iterate_cult
            code = "
                if = {
                    limit = {
                        tec_has_cult = { cult = \$name\$ }
                    }

                    change_variable = {
                        which = tec_cult_points_used
                        value = value:tec_cult_cost|CULT|\$name\$|
                    }
                }
            "
        }
    }
}

tec_activate_cult = {
    inline_script = {
    	script = tec_type_hint
        tec_cult = $cult$
        [[force] bool = $force$ ]
        [[tooltip] bool = $tooltip$ ]
    }
    if = {
        limit = {
            always = $tooltip|no$
        }
        inline_script = {
            script = cui/cult/tec_cult_declarations

            extra = "
                _step = activate_cult
                _cult = \$cult\$
                _pass = \\\"_force = \$force\$ _tooltip = yes\\\"
            "
            cult = $cult$
            force = $force|no$
        }
    }
    else = {
        custom_tooltip = tec_activate_cult_$cult$
        hidden_effect = {
            inline_script = {
                script = cui/cult/tec_cult_declarations
                extra = "
                    _step = activate_cult
                    _cult = \$cult\$
                    _pass = \\\"_force = \$force\$ _tooltip = no\\\"
                "
                cult = $cult$
                force = $force|no$
            }
        }
    }
}

tec_deactivate_cult = {
    inline_script = {
        script = tec_type_hint
        tec_cult = $cult$
        [[tooltip] bool = $tooltip$ ]
    }
    if = {
        limit = {
            always = $tooltip|no$
        }
        inline_script = {
            script = cui/cult/tec_cult_declarations
            extra = "
                    _step = deactivate_cult
                    _cult = \$cult\$
                    _pass = \\\"_tooltip = yes\\\"
                "
            cult = $cult$
            tooltip = yes
        }
    } else = {
        custom_tooltip = tec_deactivate_cult_$cult$
        hidden_effect = {
            inline_script = {
                script = cui/cult/tec_cult_declarations
                extra = "
                    _step = deactivate_cult
                    _cult = \$cult\$
                    _pass = \\\"_tooltip = no\\\"
                "
                cult = $cult$
            }
        }
    }
}

tec_internal_cult_activate_confirmation = {
    inline_script = {
        script = tec_type_hint
        tec_cult = $cult$
    }
    hidden_effect = {
        set_country_flag = tec_cui_cult_decision_pending
        set_country_flag = tec_cui_cult_queue_$cult$
        country_event = {
            id = tec_cult_cui.2
        }
    }
}

tec_internal_cult_deactivate_confirmation = {
    inline_script = {
        script = tec_type_hint
        tec_cult = $cult$
    }
    hidden_effect = {
        set_country_flag = tec_cui_cult_decision_pending
        set_country_flag = tec_cui_cult_queue_$cult$
        country_event = {
            id = tec_cult_cui.3
        }
    }
}

tec_internal_cult_points_available_alarm = {
    if = {
        limit = {
            is_ai = no
        }
        hidden_effect = {
            country_event = {
                id = tec_cult_cui.5
            }
        }
    }
}

tec_internal_cult_new_cult_alarm = {
    if = {
        limit = {
            is_ai = no
        }
        hidden_effect = {
            country_event = {
                id = tec_cult_cui.7
            }
        }
    }
}