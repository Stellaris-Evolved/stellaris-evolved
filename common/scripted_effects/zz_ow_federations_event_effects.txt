# common\scripted_effects\zz_ow_paragon_effect.txt

# TODO 3.11 adjust to evolved features - custom script for them?
generate_lost_colony_parent_colony_1 = { # Industry
	# Industry	
	while = {
		count = 2
		add_district_and_planet_size_if_needed_effect = {
			district = district_industrial
		}
	}
	if = {
		limit = {
			owner = {
				is_gestalt = no
			}
		}
		add_district_and_planet_size_if_needed_effect = {
			district = district_city
		}
	}
	else_if = {
		limit = {
			owner = {
				is_hive_empire = yes
			}
		}
		add_district_and_planet_size_if_needed_effect = {
			district = district_hive
		}
	}
	else_if = {
		limit = {
			owner = {
				is_machine_empire = yes
			}
		}
		add_district_and_planet_size_if_needed_effect = {
			district = district_nexus
		}
	}
	while = {
		limit = {
			num_pops < 7
		}
		create_pop = {
			species = owner_main_species
			ethos = random
		}
	}
	if = {
		limit = {
			owner = {
				is_hive_empire = yes
			}
		}
		if = {
			limit = {
				owner = {
					has_origin = origin_progenitor_hive
				}
			}
			add_building = building_spawning_pool
			add_building = building_offspring_nest
		}
		else = {
			add_building = building_spawning_pool
		}
	}
	if = {
		limit = {
			owner = {
				is_machine_empire = yes
			}
		}
		add_building = building_machine_assembly_plant
	}
	if = {
		limit = {
			owner = {
				has_valid_civic = civic_permanent_employment
			}
			free_building_slots > 0
		}
		add_building = building_posthumous_employment_center
	}
	if = {
		limit = {
			owner = {
				has_valid_civic = civic_environmentalist
			}
			free_building_slots > 0
		}
		add_building = building_ranger_lodge
		add_blocker = {
			type = d_big_nature_preserve_blocker
		}
	}
	if = {
		limit = {
			owner = {
				is_relentless_industrialist_empire = yes
			}
			free_building_slots > 0
		}
		add_building = building_coordinated_fulfillment_center_1
	}
	if = {
		limit = {
			owner = {
				has_valid_civic = civic_permanent_employment
			}
			free_building_slots > 0
		}
		add_building = building_posthumous_employment_center
	}
	# Evolved
	validate_and_repair_planet_buildings_and_districts = yes
}

# TODO 3.11
generate_lost_colony_parent_colony_2 = {
	# Research
	while = {
		count = 2
		if = {
			limit = {
				owner = {
					is_gestalt = no
				}
			}
			add_district_and_planet_size_if_needed_effect = {
				district = district_city
			}
		}
		else_if = {
			limit = {
				owner = {
					is_hive_empire = yes
				}
			}
			add_district_and_planet_size_if_needed_effect = {
				district = district_hive
			}
		}
		else_if = {
			limit = {
				owner = {
					is_machine_empire = yes
				}
			}
			add_district_and_planet_size_if_needed_effect = {
				district = district_nexus
			}
		}
		add_building = building_research_lab_1
	}
	while = {
		limit = {
			num_pops < 7
		}
		create_pop = {
			species = owner_main_species
			ethos = random
		}
	}
	if = {
		limit = {
			owner = {
				is_hive_empire = yes
			}
		}
		if = {
			limit = {
				owner = {
					has_origin = origin_progenitor_hive
				}
			}
			add_building = building_spawning_pool
			add_building = building_offspring_nest
		}
		else = {
			add_building = building_spawning_pool
		}
	}
	if = {
		limit = {
			owner = {
				is_machine_empire = yes
			}
		}
		add_building = building_machine_assembly_plant
	}
	if = {
		limit = {
			owner = {
				has_valid_civic = civic_permanent_employment
			}
			free_building_slots > 0
		}
		add_building = building_posthumous_employment_center
	}
	if = {
		limit = {
			owner = {
				has_valid_civic = civic_environmentalist
			}
			free_building_slots > 0
		}
		add_building = building_ranger_lodge
		add_blocker = {
			type = d_big_nature_preserve_blocker
		}
	}
	if = {
		limit = {
			owner = {
				is_relentless_industrialist_empire = yes
			}
			free_building_slots > 0
		}
		add_building = building_coordinated_fulfillment_center_1
	}
	if = {
		limit = {
			owner = {
				has_valid_civic = civic_permanent_employment
			}
			free_building_slots > 0
		}
		add_building = building_posthumous_employment_center
	}
	set_colony_type = col_research
	# Evolved
	validate_and_repair_planet_buildings_and_districts = yes
}
