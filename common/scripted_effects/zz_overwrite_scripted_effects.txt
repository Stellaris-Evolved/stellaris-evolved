
# O V E R W R I T E 
#00_scripted_effects

wipe_pop_ethos = {
	if = {
		limit = { pop_has_ethic = ethic_fanatic_egalitarian }
		pop_remove_ethic = ethic_fanatic_egalitarian
	}
	if = {
		limit = { pop_has_ethic = ethic_fanatic_authoritarian }
		pop_remove_ethic = ethic_fanatic_authoritarian
	}
	if = {
		limit = { pop_has_ethic = ethic_fanatic_pacifist }
		pop_remove_ethic = ethic_fanatic_pacifist
	}
	if = {
		limit = { pop_has_ethic = ethic_fanatic_militarist }
		pop_remove_ethic = ethic_fanatic_militarist
	}
	if = {
		limit = { pop_has_ethic = ethic_fanatic_xenophobe }
		pop_remove_ethic = ethic_fanatic_xenophobe
	}
	if = {
		limit = { pop_has_ethic = ethic_fanatic_xenophile }
		pop_remove_ethic = ethic_fanatic_xenophile
	}
	if = {
		limit = { pop_has_ethic = ethic_fanatic_materialist }
		pop_remove_ethic = ethic_fanatic_materialist
	}
	if = {
		limit = { pop_has_ethic = ethic_fanatic_spiritualist }
		pop_remove_ethic = ethic_fanatic_spiritualist
	}
	if = {
		limit = { pop_has_ethic = ethic_egalitarian }
		pop_remove_ethic = ethic_egalitarian
	}
	if = {
		limit = { pop_has_ethic = ethic_authoritarian }
		pop_remove_ethic = ethic_authoritarian
	}
	if = {
		limit = { pop_has_ethic = ethic_pacifist }
		pop_remove_ethic = ethic_pacifist
	}
	if = {
		limit = { pop_has_ethic = ethic_militarist }
		pop_remove_ethic = ethic_militarist
	}
	if = {
		limit = { pop_has_ethic = ethic_xenophobe }
		pop_remove_ethic = ethic_xenophobe
	}
	if = {
		limit = { pop_has_ethic = ethic_xenophile }
		pop_remove_ethic = ethic_xenophile
	}
	if = {
		limit = { pop_has_ethic = ethic_materialist }
		pop_remove_ethic = ethic_materialist
	}
	if = {
		limit = { pop_has_ethic = ethic_spiritualist }
		pop_remove_ethic = ethic_spiritualist
	}
 #new
	if = {
		limit = { pop_has_ethic = ethic_green }
		pop_remove_ethic = ethic_green
	}
	if = {
		limit = { pop_has_ethic = ethic_fanatic_green }
		pop_remove_ethic = ethic_fanatic_green
	}
	if = {
		limit = { pop_has_ethic = ethic_industrial }
		pop_remove_ethic = ethic_industrial
	}
	if = {
		limit = { pop_has_ethic = ethic_fanatic_industrial }
		pop_remove_ethic = ethic_fanatic_industrial
	}
	if = {
		limit = { pop_has_ethic = ethic_capitalism }
		pop_remove_ethic = ethic_capitalism
	}
	if = {
		limit = { pop_has_ethic = ethic_fanatic_capitalism }
		pop_remove_ethic = ethic_fanatic_capitalism
	}
	if = {
		limit = { pop_has_ethic = ethic_socialism }
		pop_remove_ethic = ethic_socialism
	}
	if = {
		limit = { pop_has_ethic = ethic_fanatic_socialism }
		pop_remove_ethic = ethic_fanatic_socialism
	}
	if = {
		limit = { pop_has_ethic = ethic_pluralist }
		pop_remove_ethic = ethic_pluralist
	}
	if = {
		limit = { pop_has_ethic = ethic_fanatic_pluralist }
		pop_remove_ethic = ethic_fanatic_pluralist
	}
	if = {
		limit = { pop_has_ethic = ethic_elitist }
		pop_remove_ethic = ethic_elitist
	}
	if = {
		limit = { pop_has_ethic = ethic_fanatic_elitist }
		pop_remove_ethic = ethic_fanatic_elitist
	}
}

pop_diverge_ethic = {
	if = {
		limit = {
			has_ethic = ethic_militarist
			has_pop_flag = ethic_diverge_from_militarist
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_remove_ethic = ethic_militarist
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			NOT = {
				has_ethic = ethic_militarist
			}
			has_pop_flag = ethic_diverge_from_militarist
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_change_ethic = ethic_pacifist
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			has_ethic = ethic_pacifist
			has_pop_flag = ethic_diverge_from_pacifist
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_remove_ethic = ethic_pacifist
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			NOT = {
				has_ethic = ethic_pacifist
			}
			has_pop_flag = ethic_diverge_from_pacifist
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_change_ethic = ethic_militarist
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			has_ethic = ethic_materialist
			has_pop_flag = ethic_diverge_from_materialist
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_remove_ethic = ethic_materialist
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			NOT = {
				has_ethic = ethic_materialist
			}
			has_pop_flag = ethic_diverge_from_materialist
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_change_ethic = ethic_pacifist
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			has_ethic = ethic_spiritualist
			has_pop_flag = ethic_diverge_from_spiritualist
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_remove_ethic = ethic_spiritualist
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			NOT = {
				has_ethic = ethic_spiritualist
			}
			has_pop_flag = ethic_diverge_from_spiritualist
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_change_ethic = ethic_militarist
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			has_ethic = ethic_authoritarian
			has_pop_flag = ethic_diverge_from_authoritarian
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_remove_ethic = ethic_authoritarian
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			NOT = {
				has_ethic = ethic_authoritarian
			}
			has_pop_flag = ethic_diverge_from_authoritarian
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_change_ethic = ethic_egalitarian
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			has_ethic = ethic_egalitarian
			has_pop_flag = ethic_diverge_from_egalitarian
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_remove_ethic = ethic_egalitarian
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			NOT = {
				has_ethic = ethic_egalitarian
			}
			has_pop_flag = ethic_diverge_from_egalitarian
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_change_ethic = ethic_authoritarian
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			has_ethic = ethic_green
			has_pop_flag = ethic_diverge_from_green
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_remove_ethic = ethic_green
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			NOT = {
				has_ethic = ethic_green
			}
			has_pop_flag = ethic_diverge_from_green
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_change_ethic = ethic_industrial
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			has_ethic = ethic_industrial
			has_pop_flag = ethic_diverge_from_industrial
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_remove_ethic = ethic_industrial
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			NOT = {
				has_ethic = ethic_industrial
			}
			has_pop_flag = ethic_diverge_from_industrial
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_change_ethic = ethic_green
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			has_ethic = ethic_socialism
			has_pop_flag = ethic_diverge_from_socialism
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_remove_ethic = ethic_socialism
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			NOT = {
				has_ethic = ethic_socialism
			}
			has_pop_flag = ethic_diverge_from_socialism
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_change_ethic = ethic_capitalism
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			has_ethic = ethic_capitalism
			has_pop_flag = ethic_diverge_from_capitalism
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_remove_ethic = ethic_capitalism
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			NOT = {
				has_ethic = ethic_capitalism
			}
			has_pop_flag = ethic_diverge_from_capitalism
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_change_ethic = ethic_socialism
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			has_ethic = ethic_pluralist
			has_pop_flag = ethic_diverge_from_pluralist
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_remove_ethic = ethic_pluralist
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			NOT = {
				has_ethic = ethic_pluralist
			}
			has_pop_flag = ethic_diverge_from_pluralist
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_change_ethic = ethic_elitist
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			has_ethic = ethic_elitist
			has_pop_flag = ethic_diverge_from_elitist
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_remove_ethic = ethic_elitist
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {
		limit = {
			NOT = {
				has_ethic = ethic_elitist
			}
			has_pop_flag = ethic_diverge_from_elitist
			NOT = { has_pop_flag = pop_changed_ethics }
		}
		pop_change_ethic = ethic_pluralist
		set_timed_pop_flag = { flag = pop_changed_ethics days = 7 }
	}
	if = {	# this will never happen and i include it to avoid the errors
		limit = {
			pop_has_ethic = ethic_gestalt_consciousness
		}
		set_pop_flag = ethic_diverge_from_xenophile
		set_pop_flag = ethic_diverge_from_xenophobe
		set_pop_flag = ethic_diverge_from_militarist
		set_pop_flag = ethic_diverge_from_pacifist
		set_pop_flag = ethic_diverge_from_materialist
		set_pop_flag = ethic_diverge_from_spiritualist
		set_pop_flag = ethic_diverge_from_authoritarian
		set_pop_flag = ethic_diverge_from_egalitarian
		set_pop_flag = ethic_diverge_from_green
		set_pop_flag = ethic_diverge_from_industrial
		set_pop_flag = ethic_diverge_from_socialism
		set_pop_flag = ethic_diverge_from_capitalism
		set_pop_flag = ethic_diverge_from_pluralist
		set_pop_flag = ethic_diverge_from_elitist
	}
}

# Adds a trait to a leader
add_random_leader_trait = {
	if = { #Is a science ship commander
		limit = {
			leader_class = scientist
			NOR = {
				is_researching_area = society
				is_researching_area = engineering
				is_researching_area = physics
			}
		}
		while = {
			limit = {
				NOT = { has_leader_flag = has_gained_trait }
			}
			random_list = {
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_adaptable }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_adaptable
						set_timed_leader_flag = { flag = gained_leader_trait_adaptable days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_resilient }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_resilient
						set_timed_leader_flag = { flag = gained_leader_trait_resilient days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_stubborn
								has_trait = leader_trait_rigid_programming
								owner = { is_hive_empire = yes }
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_stubborn
							set_timed_leader_flag = { flag = gained_leader_trait_stubborn days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_rigid_programming
							set_timed_leader_flag = { flag = gained_leader_trait_rigid_programming days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_substance_abuser }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_substance_abuser
						set_timed_leader_flag = { flag = gained_leader_trait_substance_abuser days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_arrested_development }
							NOR = {
								owner = {
									OR = {
										has_valid_civic = "civic_hive_one_mind"
										has_ethic = ethic_elitist
										has_ethic = ethic_fanatic_elitist
									}
								}
							}
						}
						add_trait = leader_trait_arrested_development
						set_timed_leader_flag = { flag = gained_leader_trait_arrested_development days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_meticulous }
						}
						add_trait = leader_trait_meticulous
						set_timed_leader_flag = { flag = gained_leader_trait_meticulous days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_spark_of_genius }
						}
						add_trait = leader_trait_spark_of_genius
						set_timed_leader_flag = { flag = gained_leader_trait_spark_of_genius days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_carefree }
						}
						add_trait = leader_trait_carefree
						set_timed_leader_flag = { flag = gained_leader_trait_carefree days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_roamer
								has_trait = leader_trait_cataloger
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_roamer
							set_timed_leader_flag = { flag = gained_leader_trait_roamer days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_cataloger
							set_timed_leader_flag = { flag = gained_leader_trait_cataloger days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_archaeologist
								has_trait = leader_trait_archaeologist_ancrel
							}
						}
						if = {
							limit = {
								owner = { has_ancrel = yes }
							}
							add_trait = leader_trait_archaeologist_ancrel
							set_timed_leader_flag = { flag = leader_trait_archaeologist_ancrel days = 7 }
						}
						if = {
							limit = {
								owner = { has_ancrel = no }
							}
							add_trait = leader_trait_archaeologist
							set_timed_leader_flag = { flag = leader_trait_archaeologist days = 7 }
						}

						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_maniacal }
						}
						add_trait = leader_trait_maniacal
						set_timed_leader_flag = { flag = gained_leader_trait_maniacal days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_custom_AI_assistant }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_custom_AI_assistant
						set_timed_leader_flag = { flag = gained_leader_trait_custom_AI_assistant days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_materials }
						}
						add_trait = leader_trait_expertise_materials
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_materials days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_propulsion }
						}
						add_trait = leader_trait_expertise_propulsion
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_propulsion days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_voidcraft }
						}
						add_trait = leader_trait_expertise_voidcraft
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_voidcraft days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_industry }
						}
						add_trait = leader_trait_expertise_industry
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_industry days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_field_manipulation }
						}
						add_trait = leader_trait_expertise_field_manipulation
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_field_manipulation days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_particles }
						}
						add_trait = leader_trait_expertise_particles
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_particles days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_computing }
						}
						add_trait = leader_trait_expertise_computing
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_computing days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_expertise_psionics
								owner = { has_ethic = ethic_gestalt_consciousness }
								species = { has_trait = trait_mechanical }
							}
						}
						add_trait = leader_trait_expertise_psionics
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_psionics days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_new_worlds }
						}
						add_trait = leader_trait_expertise_new_worlds
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_new_worlds days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_statecraft }
						}
						add_trait = leader_trait_expertise_statecraft
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_statecraft days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_biology }
						}
						add_trait = leader_trait_expertise_biology
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_biology days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					modifier = {
						factor = 0
						OR = {
							is_researching_area = engineering
							is_researching_area = physics
						}
					}
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_archaeostudies }
						}
						add_trait = leader_trait_expertise_archaeostudies
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_archaeostudies days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_military_theory }
						}
						add_trait = leader_trait_expertise_military_theory
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_military_theory days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_paranoid }
							NOT = {
								owner = {
									OR = {
										has_valid_civic = "civic_hive_one_mind"
										has_ethic = ethic_elitist
										has_ethic = ethic_fanatic_elitist
									}
								}
							}
						}
						add_trait = leader_trait_paranoid
						set_timed_leader_flag = { flag = gained_leader_trait_paranoid days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
		}
		# Patronage additional chance
		if = {
			limit = {
				owner = {
					has_valid_civic = civic_tec_patronage
				}
			}
			random_list = {
				7 = {
					
				}
				3 = {
					if = {
						limit = {
							NOT = {
								has_trait = leader_trait_scientist_tec_prodigy
							}
							owner = {
								has_valid_civic = civic_tec_patronage
							}
						}
						add_trait = leader_trait_scientist_tec_prodigy
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_research days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
						
					}
				}
			}
			# Country event should come here
		}
		owner = { country_event = { id = leader.21 } }
	}
	if = {
		limit = {
			leader_class = admiral
		}
		while = {
			limit = {
				NOT = { has_leader_flag = has_gained_trait }
			}
			random_list = {
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_adaptable }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_adaptable
						set_timed_leader_flag = { flag = gained_leader_trait_adaptable days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_resilient
								owner = { has_ethic = ethic_gestalt_consciousness }
								species = { has_trait = trait_mechanical }
							}
						}
						add_trait = leader_trait_resilient
						set_timed_leader_flag = { flag = gained_leader_trait_resilient days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_stubborn
								has_trait = leader_trait_rigid_programming
								owner = { is_hive_empire = yes }
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_stubborn
							set_timed_leader_flag = { flag = gained_leader_trait_stubborn days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_rigid_programming
							set_timed_leader_flag = { flag = gained_leader_trait_rigid_programming days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_substance_abuser }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_substance_abuser
						set_timed_leader_flag = { flag = gained_leader_trait_substance_abuser days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_arrested_development }
							NOT = {
								owner = {
									OR = {
										has_valid_civic = "civic_hive_one_mind"
										has_ethic = ethic_elitist
										has_ethic = ethic_fanatic_elitist
									}
								}
							}
						}
						add_trait = leader_trait_arrested_development
						set_timed_leader_flag = { flag = gained_leader_trait_arrested_development days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_trickster }
						}
						add_trait = leader_trait_trickster
						set_timed_leader_flag = { flag = gained_leader_trait_trickster days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
					modifier = {
						factor = 0
						has_first_contact_dlc = yes
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_trickster_fircon }
						}
						add_trait = leader_trait_trickster_fircon
						set_timed_leader_flag = { flag = gained_leader_trait_trickster_fircon days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
					modifier = {
						factor = 0
						has_first_contact_dlc = no
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_fleet_logistician
								has_trait = leader_trait_maintenance_loop
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_fleet_logistician
							set_timed_leader_flag = { flag = gained_leader_trait_fleet_logistician days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_maintenance_loop
							set_timed_leader_flag = { flag = gained_leader_trait_maintenance_loop days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_engineer }
						}
						add_trait = leader_trait_engineer
						set_timed_leader_flag = { flag = gained_leader_trait_engineer days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_aggressive }
						}
						add_trait = leader_trait_aggressive
						set_timed_leader_flag = { flag = gained_leader_trait_aggressive days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_cautious }
						}
						add_trait = leader_trait_cautious
						set_timed_leader_flag = { flag = gained_leader_trait_cautious days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_scout }
						}
						add_trait = leader_trait_scout
						set_timed_leader_flag = { flag = gained_leader_trait_scout days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_unyielding }
						}
						add_trait = leader_trait_unyielding
						set_timed_leader_flag = { flag = gained_leader_trait_unyielding days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_gale_speed }
						}
						add_trait = leader_trait_gale_speed
						set_timed_leader_flag = { flag = gained_leader_trait_gale_speed days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_lethargic }
							NOT = {
								owner = {
									OR = {
										has_valid_civic = "civic_hive_one_mind"
										has_ethic = ethic_elitist
										has_ethic = ethic_fanatic_elitist
									}
								}
							}
						}
						add_trait = leader_trait_lethargic
						set_timed_leader_flag = { flag = gained_leader_trait_lethargic days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
		}
		# Patronage additional chance
		if = {
			limit = {
				owner = {
					has_valid_civic = civic_tec_patronage
				}
			}
			random_list = {
				7 = {
					
				}
				2 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_admiral_tec_prodigy_move
								has_trait = leader_trait_admiral_tec_prodigy_emulators
							}
							owner = {
								has_valid_civic = civic_tec_patronage
							}
						}
						add_trait = leader_trait_admiral_tec_prodigy_move
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_move days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				2 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_admiral_tec_prodigy_move
								has_trait = leader_trait_admiral_tec_prodigy_emulators
							}
							owner = {
								has_valid_civic = civic_tec_patronage
							}
						}
						add_trait = leader_trait_admiral_tec_prodigy_emulators
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_emulators days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
			# Country event should come here
		}
		
		owner = { country_event = { id = leader.22 } }
	}
	if = {
		limit = {
			leader_class = governor
		}
		while = {
			limit = {
				NOT = { has_leader_flag = has_gained_trait }
			}
			random_list = {
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_adaptable }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_adaptable
						set_timed_leader_flag = { flag = gained_leader_trait_adaptable days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_resilient }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_resilient
						set_timed_leader_flag = { flag = gained_leader_trait_resilient days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_stubborn
								has_trait = leader_trait_rigid_programming
								owner = { is_hive_empire = yes }
								owner = { has_civic = "civic_philosopher_king" }
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_stubborn
							set_timed_leader_flag = { flag = gained_leader_trait_stubborn days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_rigid_programming
							set_timed_leader_flag = { flag = gained_leader_trait_rigid_programming days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_substance_abuser }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
							NOT = { owner = { has_civic = "civic_philosopher_king" } }
						}
						add_trait = leader_trait_substance_abuser
						set_timed_leader_flag = { flag = gained_leader_trait_substance_abuser days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_righteous
								has_trait = leader_trait_corrupt
							}
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
							NOT = { owner = { has_civic = "civic_philosopher_king" } }
						}
						add_trait = leader_trait_corrupt
						set_timed_leader_flag = { flag = gained_leader_trait_corrupt days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_righteous
								has_trait = leader_trait_corrupt
							}
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_righteous
						set_timed_leader_flag = { flag = gained_leader_trait_righteous days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_arrested_development
								owner = {
									OR = {
										has_civic = "civic_philosopher_king"
										has_valid_civic = "civic_hive_one_mind"
										has_ethic = ethic_fanatic_elitist
										has_tradition = tr_tec_control_1
									}
								}
							}
						}
						add_trait = leader_trait_arrested_development
						set_timed_leader_flag = { flag = gained_leader_trait_arrested_development days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_iron_fist
								owner = { allows_slavery = no }
								owner = { is_machine_empire = yes }
							}
						}
						add_trait = leader_trait_iron_fist
						set_timed_leader_flag = { flag = gained_leader_trait_iron_fist days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_architectural_interest }
						}
						add_trait = leader_trait_architectural_interest
						set_timed_leader_flag = { flag = gained_leader_trait_architectural_interest days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_intellectual
								has_trait = leader_trait_analytical
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_intellectual
							set_timed_leader_flag = { flag = gained_leader_trait_intellectual days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_analytical
							set_timed_leader_flag = { flag = gained_leader_trait_analytical days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_environmental_engineer
								has_trait = leader_trait_bulldozer
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_environmental_engineer
							set_timed_leader_flag = { flag = gained_leader_trait_environmental_engineer days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_bulldozer
							set_timed_leader_flag = { flag = gained_leader_trait_bulldozer days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
		}
		# Patronage additional chance
		if = {
			limit = {
				owner = {
					has_valid_civic = civic_tec_patronage
				}
			}
			random_list = {
				7 = {
					
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_governor_tec_prodigy_arts
								has_trait = leader_trait_governor_tec_prodigy_cg
								has_trait = leader_trait_governor_tec_prodigy_forge
								has_trait = leader_trait_governor_tec_prodigy_research
							}
						}
						add_trait = leader_trait_governor_tec_prodigy_arts
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_arts days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_governor_tec_prodigy_arts
								has_trait = leader_trait_governor_tec_prodigy_cg
								has_trait = leader_trait_governor_tec_prodigy_forge
								has_trait = leader_trait_governor_tec_prodigy_research
							}
						}
						add_trait = leader_trait_governor_tec_prodigy_cg
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_cg days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_governor_tec_prodigy_arts
								has_trait = leader_trait_governor_tec_prodigy_cg
								has_trait = leader_trait_governor_tec_prodigy_forge
								has_trait = leader_trait_governor_tec_prodigy_research
							}
						}
						add_trait = leader_trait_governor_tec_prodigy_forge
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_forge days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_governor_tec_prodigy_arts
								has_trait = leader_trait_governor_tec_prodigy_cg
								has_trait = leader_trait_governor_tec_prodigy_forge
								has_trait = leader_trait_governor_tec_prodigy_research
							}
						}
						add_trait = leader_trait_governor_tec_prodigy_research
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_research days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
			# Country event should come here
		}
		owner = { country_event = { id = leader.23 } }
	}
	if = {
		limit = {
			leader_class = general
		}
		while = {
			limit = {
				NOT = { has_leader_flag = has_gained_trait }
			}
			random_list = {
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_adaptable }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_adaptable
						set_timed_leader_flag = { flag = gained_leader_trait_adaptable days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_resilient }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_resilient
						set_timed_leader_flag = { flag = gained_leader_trait_resilient days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_stubborn
								has_trait = leader_trait_rigid_programming
								owner = { is_hive_empire = yes }
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_stubborn
							set_timed_leader_flag = { flag = gained_leader_trait_stubborn days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_rigid_programming
							set_timed_leader_flag = { flag = gained_leader_trait_rigid_programming days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_substance_abuser }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_substance_abuser
						set_timed_leader_flag = { flag = gained_leader_trait_substance_abuser days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_arrested_development }
							NOT = {
								owner = {
									OR = {
										has_valid_civic = "civic_hive_one_mind"
										has_ethic = ethic_fanatic_elitist
									}
								}
							}
						}
						add_trait = leader_trait_arrested_development
						set_timed_leader_flag = { flag = gained_leader_trait_arrested_development days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							owner = {
								NOT = { is_machine_empire = yes }
							}
							NOT = { has_trait = leader_trait_butcher }
							NOT = { has_trait = leader_trait_restrained }
						}
						add_trait = leader_trait_restrained
						set_timed_leader_flag = { flag = gained_leader_trait_restrained days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_charismatic
								has_trait = leader_trait_demoralizer
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_charismatic
							set_timed_leader_flag = { flag = gained_leader_trait_charismatic days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_demoralizer
							set_timed_leader_flag = { flag = gained_leader_trait_demoralizer days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_butcher }
							NOT = { has_trait = leader_trait_restrained }
						}
						add_trait = leader_trait_butcher
						set_timed_leader_flag = { flag = gained_leader_trait_butcher days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_glory_seeker
								has_trait = leader_trait_demoralizer
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_glory_seeker
							set_timed_leader_flag = { flag = gained_leader_trait_glory_seeker days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_demoralizer
							set_timed_leader_flag = { flag = gained_leader_trait_demoralizer days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_armchair_commander
								has_trait = leader_trait_erratic_morality_core
							}
							NOT = {
								owner = {
									OR = {
										has_valid_civic = "civic_hive_one_mind"
										has_ethic = ethic_fanatic_elitist
									}
								}
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_armchair_commander
							set_timed_leader_flag = { flag = gained_leader_trait_armchair_commander days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_erratic_morality_core
							set_timed_leader_flag = { flag = gained_leader_trait_erratic_morality_core days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_army_logistician
								has_trait = leader_trait_parts_cannibalizer
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_army_logistician
							set_timed_leader_flag = { flag = gained_leader_trait_army_logistician days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_parts_cannibalizer
							set_timed_leader_flag = { flag = gained_leader_trait_parts_cannibalizer days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
		}
		# Patronage additional chance
		if = {
			limit = {
				owner = {
					has_valid_civic = civic_tec_patronage
				}
			}
			random_list = {
				7 = {
					
				}
				3 = {
					if = {
						limit = {
							NOT = {
								has_trait = leader_trait_general_tec_prodigy_tactical
							}
						}
						add_trait = leader_trait_general_tec_prodigy_tactical
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_tactical days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }

					}
				}
			}
			# Country event should come here
		}
		
		owner = { country_event = { id = leader.24 } }
	}
	if = {
		limit = {
			leader_class = ruler
		}
		while = {
			limit = {
				NOT = { has_leader_flag = has_gained_trait }
			}
			random_list = {
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_adaptable }
						}
						add_trait = leader_trait_adaptable
						set_timed_leader_flag = { flag = gained_leader_trait_adaptable days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_resilient }
						}
						add_trait = leader_trait_resilient
						set_timed_leader_flag = { flag = gained_leader_trait_resilient days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_stubborn
								has_trait = leader_trait_rigid_programming
								owner = { is_hive_empire = yes }
								owner = { has_civic = "civic_philosopher_king" }
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_stubborn
							set_timed_leader_flag = { flag = gained_leader_trait_stubborn days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_rigid_programming
							set_timed_leader_flag = { flag = gained_leader_trait_rigid_programming days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_substance_abuser }
							NOT = { owner = { has_civic = "civic_philosopher_king" } }
							NOT = {
								owner = {
									OR = {
										has_valid_civic = "civic_hive_one_mind"
										has_ethic = ethic_fanatic_elitist
									}
								}
							}
						}
						add_trait = leader_trait_substance_abuser
						set_timed_leader_flag = { flag = gained_leader_trait_substance_abuser days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_arrested_development
								owner = {
									OR = {
										has_civic = "civic_philosopher_king"
										has_valid_civic = "civic_hive_one_mind"
										has_ethic = ethic_fanatic_elitist
										has_tradition = tr_tec_control_1
									}
								}
							}
						}
						add_trait = leader_trait_arrested_development
						set_timed_leader_flag = { flag = gained_leader_trait_arrested_development days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = trait_ruler_corvette_focus
								has_trait = trait_ruler_destroyer_focus
								has_trait = trait_ruler_cruiser_focus
								has_trait = trait_ruler_battleship_focus
							}
							owner = { has_technology = "tech_destroyers" }
						}
						add_trait = trait_ruler_corvette_focus
						set_timed_leader_flag = { flag = gained_trait_ruler_corvette_focus days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = trait_ruler_corvette_focus
								has_trait = trait_ruler_destroyer_focus
								has_trait = trait_ruler_cruiser_focus
								has_trait = trait_ruler_battleship_focus
							}
							owner = { has_technology = "tech_destroyers" }
						}
						add_trait = trait_ruler_destroyer_focus
						set_timed_leader_flag = { flag = gained_trait_ruler_destroyer_focus days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = trait_ruler_corvette_focus
								has_trait = trait_ruler_destroyer_focus
								has_trait = trait_ruler_cruiser_focus
								has_trait = trait_ruler_battleship_focus
							}
							owner = { has_technology = "tech_cruisers" }
						}
						add_trait = trait_ruler_cruiser_focus
						set_timed_leader_flag = { flag = gained_trait_ruler_cruiser_focus days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = trait_ruler_corvette_focus
								has_trait = trait_ruler_destroyer_focus
								has_trait = trait_ruler_cruiser_focus
								has_trait = trait_ruler_battleship_focus
							}
							owner = { has_technology = "tech_battleships" }
						}
						add_trait = trait_ruler_battleship_focus
						set_timed_leader_flag = { flag = gained_trait_ruler_battleship_focus days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_recruiter }
						}
						add_trait = trait_ruler_recruiter
						set_timed_leader_flag = { flag = gained_trait_ruler_recruiter days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_fortifier }
						}
						add_trait = trait_ruler_fortifier
						set_timed_leader_flag = { flag = gained_trait_ruler_fortifier days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_logistic_understanding }
						}
						add_trait = trait_ruler_logistic_understanding
						set_timed_leader_flag = { flag = gained_trait_ruler_logistic_understanding days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_military_pioneer }
						}
						add_trait = trait_ruler_military_pioneer
						set_timed_leader_flag = { flag = gained_trait_ruler_military_pioneer days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_warlike }
						}
						add_trait = trait_ruler_warlike
						set_timed_leader_flag = { flag = gained_trait_ruler_warlike days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_architectural_sense }
						}
						add_trait = trait_ruler_architectural_sense
						set_timed_leader_flag = { flag = gained_trait_ruler_architectural_sense days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_frontier_spirit }
						}
						add_trait = trait_ruler_frontier_spirit
						set_timed_leader_flag = { flag = gained_trait_ruler_frontier_spirit days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_world_shaper }
						}
						add_trait = trait_ruler_world_shaper
						set_timed_leader_flag = { flag = gained_trait_ruler_world_shaper days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_home_in_the_sky }
						}
						add_trait = trait_ruler_home_in_the_sky
						set_timed_leader_flag = { flag = gained_trait_ruler_home_in_the_sky days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_industrialist }
						}
						add_trait = trait_ruler_industrialist
						set_timed_leader_flag = { flag = gained_trait_ruler_industrialist days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				100 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_eye_for_talent }
						}
						add_trait = trait_ruler_eye_for_talent
						set_timed_leader_flag = { flag = gained_trait_ruler_eye_for_talent days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_deep_connections }
						}
						add_trait = trait_ruler_deep_connections
						set_timed_leader_flag = { flag = gained_trait_ruler_deep_connections days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_champion_of_the_people }
						}
						add_trait = trait_ruler_champion_of_the_people
						set_timed_leader_flag = { flag = gained_trait_ruler_champion_of_the_people days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_expansionist }
						}
						add_trait = trait_ruler_expansionist
						set_timed_leader_flag = { flag = gained_trait_ruler_expansionist days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_fertility_preacher }
						}
						add_trait = trait_ruler_fertility_preacher
						set_timed_leader_flag = { flag = gained_trait_ruler_fertility_preacher days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_investor }
						}
						add_trait = trait_ruler_investor
						set_timed_leader_flag = { flag = gained_trait_ruler_investor days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_explorer }
						}
						add_trait = trait_ruler_explorer
						set_timed_leader_flag = { flag = gained_trait_ruler_explorer days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_charismatic }
						}
						add_trait = trait_ruler_charismatic
						set_timed_leader_flag = { flag = gained_trait_ruler_charismatic days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_fleet_organizer }
						}
						add_trait = leader_trait_fleet_organizer
						set_timed_leader_flag = { flag = gained_leader_trait_fleet_organizer days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
		}
		# Patronage additional chance
		if = {
			limit = {
				owner = {
					has_valid_civic = civic_tec_patronage
				}
			}
			random_list = {
				7 = {
					
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_ruler_tec_prodigy_dexter
								has_trait = leader_trait_ruler_tec_prodigy_solidarity
								has_trait = leader_trait_ruler_tec_prodigy_unity
							}
						}
						add_trait = leader_trait_ruler_tec_prodigy_dexter
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_dexter days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_ruler_tec_prodigy_dexter
								has_trait = leader_trait_ruler_tec_prodigy_solidarity
								has_trait = leader_trait_ruler_tec_prodigy_unity
							}
						}
						add_trait = leader_trait_ruler_tec_prodigy_solidarity
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_solidarity days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_ruler_tec_prodigy_dexter
								has_trait = leader_trait_ruler_tec_prodigy_solidarity
								has_trait = leader_trait_ruler_tec_prodigy_unity
							}
						}
						add_trait = leader_trait_ruler_tec_prodigy_unity
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_unity days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
			# Country event should come here
		}
		owner = { country_event = { id = leader.25 } }
	}
	if = {
		limit = {
			owner = {
				has_tradition = tr_tec_balance_1
			}
		}
		random = {
			chance = 25
			remove_leader_flag = has_gained_trait
			add_random_positive_leader_trait = yes
		}
	}
}

# Positive only handler
add_random_positive_leader_trait = {
	if = { #Is a science ship commander
		limit = {
			leader_class = scientist
			NOR = {
				is_researching_area = society
				is_researching_area = engineering
				is_researching_area = physics
			}
		}
		while = {
			limit = {
				NOT = { has_leader_flag = has_gained_trait }
			}
			random_list = {
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_adaptable }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_adaptable
						set_timed_leader_flag = { flag = gained_leader_trait_adaptable days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_resilient }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_resilient
						set_timed_leader_flag = { flag = gained_leader_trait_resilient days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_meticulous }
						}
						add_trait = leader_trait_meticulous
						set_timed_leader_flag = { flag = gained_leader_trait_meticulous days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_spark_of_genius }
						}
						add_trait = leader_trait_spark_of_genius
						set_timed_leader_flag = { flag = gained_leader_trait_spark_of_genius days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_carefree }
						}
						add_trait = leader_trait_carefree
						set_timed_leader_flag = { flag = gained_leader_trait_carefree days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_roamer
								has_trait = leader_trait_cataloger
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_roamer
							set_timed_leader_flag = { flag = gained_leader_trait_roamer days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_cataloger
							set_timed_leader_flag = { flag = gained_leader_trait_cataloger days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_archaeologist
								has_trait = leader_trait_archaeologist_ancrel
							}
						}
						if = {
							limit = {
								owner = { has_ancrel = yes }
							}
							add_trait = leader_trait_archaeologist_ancrel
							set_timed_leader_flag = { flag = leader_trait_archaeologist_ancrel days = 7 }
						}
						if = {
							limit = {
								owner = { has_ancrel = no }
							}
							add_trait = leader_trait_archaeologist
							set_timed_leader_flag = { flag = leader_trait_archaeologist days = 7 }
						}

						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_maniacal }
						}
						add_trait = leader_trait_maniacal
						set_timed_leader_flag = { flag = gained_leader_trait_maniacal days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_custom_AI_assistant }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_custom_AI_assistant
						set_timed_leader_flag = { flag = gained_leader_trait_custom_AI_assistant days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_materials }
						}
						add_trait = leader_trait_expertise_materials
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_materials days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_propulsion }
						}
						add_trait = leader_trait_expertise_propulsion
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_propulsion days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_voidcraft }
						}
						add_trait = leader_trait_expertise_voidcraft
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_voidcraft days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_industry }
						}
						add_trait = leader_trait_expertise_industry
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_industry days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_field_manipulation }
						}
						add_trait = leader_trait_expertise_field_manipulation
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_field_manipulation days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_particles }
						}
						add_trait = leader_trait_expertise_particles
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_particles days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_computing }
						}
						add_trait = leader_trait_expertise_computing
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_computing days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_expertise_psionics
								owner = { has_ethic = ethic_gestalt_consciousness }
								species = { has_trait = trait_mechanical }
							}
						}
						add_trait = leader_trait_expertise_psionics
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_psionics days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_new_worlds }
						}
						add_trait = leader_trait_expertise_new_worlds
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_new_worlds days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_statecraft }
						}
						add_trait = leader_trait_expertise_statecraft
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_statecraft days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_biology }
						}
						add_trait = leader_trait_expertise_biology
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_biology days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					modifier = {
						factor = 0
						OR = {
							is_researching_area = engineering
							is_researching_area = physics
						}
					}
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_archaeostudies }
						}
						add_trait = leader_trait_expertise_archaeostudies
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_archaeostudies days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_expertise_military_theory }
						}
						add_trait = leader_trait_expertise_military_theory
						set_timed_leader_flag = { flag = gained_leader_trait_expertise_military_theory days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
		}
		# EVOLVED - Patronage additional chance
		if = {
			limit = {
				owner = {
					has_valid_civic = civic_tec_patronage
				}
			}
			random_list = {
				7 = {					
				}
				3 = {
					if = {
						limit = {
							NOT = {
								has_trait = leader_trait_scientist_tec_prodigy
							}
							owner = {
								has_valid_civic = civic_tec_patronage
							}
						}
						add_trait = leader_trait_scientist_tec_prodigy
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_research days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
						
					}
				}
			}
			# Country event should come here
		}
		owner = { country_event = { id = leader.21 } }
	}
	if = {
		limit = {
			leader_class = admiral
		}
		while = {
			limit = {
				NOT = { has_leader_flag = has_gained_trait }
			}
			random_list = {
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_adaptable }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_adaptable
						set_timed_leader_flag = { flag = gained_leader_trait_adaptable days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_resilient
								owner = { has_ethic = ethic_gestalt_consciousness }
								species = { has_trait = trait_mechanical }
							}
						}
						add_trait = leader_trait_resilient
						set_timed_leader_flag = { flag = gained_leader_trait_resilient days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_trickster }
						}
						add_trait = leader_trait_trickster
						set_timed_leader_flag = { flag = gained_leader_trait_trickster days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
					modifier = {
						factor = 0
						has_first_contact_dlc = yes
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_trickster_fircon }
						}
						add_trait = leader_trait_trickster_fircon
						set_timed_leader_flag = { flag = gained_leader_trait_trickster_fircon days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
					modifier = {
						factor = 0
						has_first_contact_dlc = no
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_fleet_logistician
								has_trait = leader_trait_maintenance_loop
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_fleet_logistician
							set_timed_leader_flag = { flag = gained_leader_trait_fleet_logistician days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_maintenance_loop
							set_timed_leader_flag = { flag = gained_leader_trait_maintenance_loop days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_engineer }
						}
						add_trait = leader_trait_engineer
						set_timed_leader_flag = { flag = gained_leader_trait_engineer days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_aggressive }
						}
						add_trait = leader_trait_aggressive
						set_timed_leader_flag = { flag = gained_leader_trait_aggressive days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_cautious }
						}
						add_trait = leader_trait_cautious
						set_timed_leader_flag = { flag = gained_leader_trait_cautious days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_scout }
						}
						add_trait = leader_trait_scout
						set_timed_leader_flag = { flag = gained_leader_trait_scout days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_unyielding }
						}
						add_trait = leader_trait_unyielding
						set_timed_leader_flag = { flag = gained_leader_trait_unyielding days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_gale_speed }
						}
						add_trait = leader_trait_gale_speed
						set_timed_leader_flag = { flag = gained_leader_trait_gale_speed days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
		}
		# Patronage additional chance
		if = {
			limit = {
				owner = {
					has_valid_civic = civic_tec_patronage
				}
			}
			random_list = {
				8 = {				
				}
				2 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_admiral_tec_prodigy_move
								has_trait = leader_trait_admiral_tec_prodigy_emulators
							}
							owner = {
								has_valid_civic = civic_tec_patronage
							}
						}
						add_trait = leader_trait_admiral_tec_prodigy_move
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_move days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				2 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_admiral_tec_prodigy_move
								has_trait = leader_trait_admiral_tec_prodigy_emulators
							}
							owner = {
								has_valid_civic = civic_tec_patronage
							}
						}
						add_trait = leader_trait_admiral_tec_prodigy_emulators
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_emulators days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
			# Country event should come here
		}
		owner = { country_event = { id = leader.22 } }
	}
	if = {
		limit = {
			leader_class = governor
		}
		while = {
			limit = {
				NOT = { has_leader_flag = has_gained_trait }
			}
			random_list = {
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_adaptable }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_adaptable
						set_timed_leader_flag = { flag = gained_leader_trait_adaptable days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_resilient }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_resilient
						set_timed_leader_flag = { flag = gained_leader_trait_resilient days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_righteous
								has_trait = leader_trait_corrupt
							}
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_righteous
						set_timed_leader_flag = { flag = gained_leader_trait_righteous days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_iron_fist
								owner = { allows_slavery = no }
								owner = { is_machine_empire = yes }
							}
						}
						add_trait = leader_trait_iron_fist
						set_timed_leader_flag = { flag = gained_leader_trait_iron_fist days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_architectural_interest }
						}
						add_trait = leader_trait_architectural_interest
						set_timed_leader_flag = { flag = gained_leader_trait_architectural_interest days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_intellectual
								has_trait = leader_trait_analytical
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_intellectual
							set_timed_leader_flag = { flag = gained_leader_trait_intellectual days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_analytical
							set_timed_leader_flag = { flag = gained_leader_trait_analytical days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_environmental_engineer
								has_trait = leader_trait_bulldozer
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_environmental_engineer
							set_timed_leader_flag = { flag = gained_leader_trait_environmental_engineer days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_bulldozer
							set_timed_leader_flag = { flag = gained_leader_trait_bulldozer days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
		}
		# Patronage additional chance
		if = {
			limit = {
				owner = {
					has_valid_civic = civic_tec_patronage
				}
			}
			random_list = {
				7 = {
					
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_governor_tec_prodigy_arts
								has_trait = leader_trait_governor_tec_prodigy_cg
								has_trait = leader_trait_governor_tec_prodigy_forge
								has_trait = leader_trait_governor_tec_prodigy_research
							}
						}
						add_trait = leader_trait_governor_tec_prodigy_arts
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_arts days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_governor_tec_prodigy_arts
								has_trait = leader_trait_governor_tec_prodigy_cg
								has_trait = leader_trait_governor_tec_prodigy_forge
								has_trait = leader_trait_governor_tec_prodigy_research
							}
						}
						add_trait = leader_trait_governor_tec_prodigy_cg
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_cg days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_governor_tec_prodigy_arts
								has_trait = leader_trait_governor_tec_prodigy_cg
								has_trait = leader_trait_governor_tec_prodigy_forge
								has_trait = leader_trait_governor_tec_prodigy_research
							}
						}
						add_trait = leader_trait_governor_tec_prodigy_forge
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_forge days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_governor_tec_prodigy_arts
								has_trait = leader_trait_governor_tec_prodigy_cg
								has_trait = leader_trait_governor_tec_prodigy_forge
								has_trait = leader_trait_governor_tec_prodigy_research
							}
						}
						add_trait = leader_trait_governor_tec_prodigy_research
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_research days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
			# Country event should come here
		}
		owner = { country_event = { id = leader.23 } }
	}
	if = {
		limit = {
			leader_class = general
		}
		while = {
			limit = {
				NOT = { has_leader_flag = has_gained_trait }
			}
			random_list = {
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_adaptable }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_adaptable
						set_timed_leader_flag = { flag = gained_leader_trait_adaptable days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_resilient }
							NOT = { owner = { has_ethic = "ethic_gestalt_consciousness" } }
						}
						add_trait = leader_trait_resilient
						set_timed_leader_flag = { flag = gained_leader_trait_resilient days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				
				5 = {
					if = {
						limit = {
							owner = {
								NOT = { is_machine_empire = yes }
							}
							NOT = { has_trait = leader_trait_butcher }
							NOT = { has_trait = leader_trait_restrained }
						}
						add_trait = leader_trait_restrained
						set_timed_leader_flag = { flag = gained_leader_trait_restrained days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_charismatic
								has_trait = leader_trait_demoralizer
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_charismatic
							set_timed_leader_flag = { flag = gained_leader_trait_charismatic days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_demoralizer
							set_timed_leader_flag = { flag = gained_leader_trait_demoralizer days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_butcher }
							NOT = { has_trait = leader_trait_restrained }
						}
						add_trait = leader_trait_butcher
						set_timed_leader_flag = { flag = gained_leader_trait_butcher days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_glory_seeker
								has_trait = leader_trait_demoralizer
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_glory_seeker
							set_timed_leader_flag = { flag = gained_leader_trait_glory_seeker days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_demoralizer
							set_timed_leader_flag = { flag = gained_leader_trait_demoralizer days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_army_logistician
								has_trait = leader_trait_parts_cannibalizer
							}
						}
						if = {
							limit = {
								owner = {
									NOT = { is_machine_empire = yes }
								}
							}
							add_trait = leader_trait_army_logistician
							set_timed_leader_flag = { flag = gained_leader_trait_army_logistician days = 7 }
						}
						if = {
							limit = {
								owner = { is_machine_empire = yes }
							}
							add_trait = leader_trait_parts_cannibalizer
							set_timed_leader_flag = { flag = gained_leader_trait_parts_cannibalizer days = 7 }
						}
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
		}
		# Patronage additional chance
		if = {
			limit = {
				owner = {
					has_valid_civic = civic_tec_patronage
				}
			}
			random_list = {
				7 = {
					
				}
				3 = {
					if = {
						limit = {
							NOT = {
								has_trait = leader_trait_general_tec_prodigy_tactical
							}
						}
						add_trait = leader_trait_general_tec_prodigy_tactical
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_tactical days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }

					}
				}
			}
			# Country event should come here
		}
		
		owner = { country_event = { id = leader.24 } }
	}
	if = {
		limit = {
			leader_class = ruler
		}
		while = {
			limit = {
				NOT = { has_leader_flag = has_gained_trait }
			}
			random_list = {
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_adaptable }
						}
						add_trait = leader_trait_adaptable
						set_timed_leader_flag = { flag = gained_leader_trait_adaptable days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_resilient }
						}
						add_trait = leader_trait_resilient
						set_timed_leader_flag = { flag = gained_leader_trait_resilient days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = trait_ruler_corvette_focus
								has_trait = trait_ruler_destroyer_focus
								has_trait = trait_ruler_cruiser_focus
								has_trait = trait_ruler_battleship_focus
							}
							owner = { has_technology = "tech_destroyers" }
						}
						add_trait = trait_ruler_corvette_focus
						set_timed_leader_flag = { flag = gained_trait_ruler_corvette_focus days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = trait_ruler_corvette_focus
								has_trait = trait_ruler_destroyer_focus
								has_trait = trait_ruler_cruiser_focus
								has_trait = trait_ruler_battleship_focus
							}
							owner = { has_technology = "tech_destroyers" }
						}
						add_trait = trait_ruler_destroyer_focus
						set_timed_leader_flag = { flag = gained_trait_ruler_destroyer_focus days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = trait_ruler_corvette_focus
								has_trait = trait_ruler_destroyer_focus
								has_trait = trait_ruler_cruiser_focus
								has_trait = trait_ruler_battleship_focus
							}
							owner = { has_technology = "tech_cruisers" }
						}
						add_trait = trait_ruler_cruiser_focus
						set_timed_leader_flag = { flag = gained_trait_ruler_cruiser_focus days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOR = {
								has_trait = trait_ruler_corvette_focus
								has_trait = trait_ruler_destroyer_focus
								has_trait = trait_ruler_cruiser_focus
								has_trait = trait_ruler_battleship_focus
							}
							owner = { has_technology = "tech_battleships" }
						}
						add_trait = trait_ruler_battleship_focus
						set_timed_leader_flag = { flag = gained_trait_ruler_battleship_focus days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_recruiter }
						}
						add_trait = trait_ruler_recruiter
						set_timed_leader_flag = { flag = gained_trait_ruler_recruiter days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_fortifier }
						}
						add_trait = trait_ruler_fortifier
						set_timed_leader_flag = { flag = gained_trait_ruler_fortifier days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_logistic_understanding }
						}
						add_trait = trait_ruler_logistic_understanding
						set_timed_leader_flag = { flag = gained_trait_ruler_logistic_understanding days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_military_pioneer }
						}
						add_trait = trait_ruler_military_pioneer
						set_timed_leader_flag = { flag = gained_trait_ruler_military_pioneer days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_warlike }
						}
						add_trait = trait_ruler_warlike
						set_timed_leader_flag = { flag = gained_trait_ruler_warlike days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_architectural_sense }
						}
						add_trait = trait_ruler_architectural_sense
						set_timed_leader_flag = { flag = gained_trait_ruler_architectural_sense days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_frontier_spirit }
						}
						add_trait = trait_ruler_frontier_spirit
						set_timed_leader_flag = { flag = gained_trait_ruler_frontier_spirit days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_world_shaper }
						}
						add_trait = trait_ruler_world_shaper
						set_timed_leader_flag = { flag = gained_trait_ruler_world_shaper days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_home_in_the_sky }
						}
						add_trait = trait_ruler_home_in_the_sky
						set_timed_leader_flag = { flag = gained_trait_ruler_home_in_the_sky days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_industrialist }
						}
						add_trait = trait_ruler_industrialist
						set_timed_leader_flag = { flag = gained_trait_ruler_industrialist days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				100 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_eye_for_talent }
						}
						add_trait = trait_ruler_eye_for_talent
						set_timed_leader_flag = { flag = gained_trait_ruler_eye_for_talent days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_deep_connections }
						}
						add_trait = trait_ruler_deep_connections
						set_timed_leader_flag = { flag = gained_trait_ruler_deep_connections days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_champion_of_the_people }
						}
						add_trait = trait_ruler_champion_of_the_people
						set_timed_leader_flag = { flag = gained_trait_ruler_champion_of_the_people days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_expansionist }
						}
						add_trait = trait_ruler_expansionist
						set_timed_leader_flag = { flag = gained_trait_ruler_expansionist days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_fertility_preacher }
						}
						add_trait = trait_ruler_fertility_preacher
						set_timed_leader_flag = { flag = gained_trait_ruler_fertility_preacher days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_investor }
						}
						add_trait = trait_ruler_investor
						set_timed_leader_flag = { flag = gained_trait_ruler_investor days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_explorer }
						}
						add_trait = trait_ruler_explorer
						set_timed_leader_flag = { flag = gained_trait_ruler_explorer days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = trait_ruler_charismatic }
						}
						add_trait = trait_ruler_charismatic
						set_timed_leader_flag = { flag = gained_trait_ruler_charismatic days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				5 = {
					if = {
						limit = {
							NOT = { has_trait = leader_trait_fleet_organizer }
						}
						add_trait = leader_trait_fleet_organizer
						set_timed_leader_flag = { flag = gained_leader_trait_fleet_organizer days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
		}
		# Patronage additional chance
		if = {
			limit = {
				owner = {
					has_valid_civic = civic_tec_patronage
				}
			}
			random_list = {
				7 = {
					
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_ruler_tec_prodigy_dexter
								has_trait = leader_trait_ruler_tec_prodigy_solidarity
								has_trait = leader_trait_ruler_tec_prodigy_unity
							}
						}
						add_trait = leader_trait_ruler_tec_prodigy_dexter
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_dexter days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_ruler_tec_prodigy_dexter
								has_trait = leader_trait_ruler_tec_prodigy_solidarity
								has_trait = leader_trait_ruler_tec_prodigy_unity
							}
						}
						add_trait = leader_trait_ruler_tec_prodigy_solidarity
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_solidarity days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
				1 = {
					if = {
						limit = {
							NOR = {
								has_trait = leader_trait_ruler_tec_prodigy_dexter
								has_trait = leader_trait_ruler_tec_prodigy_solidarity
								has_trait = leader_trait_ruler_tec_prodigy_unity
							}
						}
						add_trait = leader_trait_ruler_tec_prodigy_unity
						set_timed_leader_flag = { flag = gained_leader_trait_patronage_unity days = 7 }
						set_timed_leader_flag = { flag = has_gained_trait days = 7 }
					}
				}
			}
			# Country event should come here
		}
		owner = { country_event = { id = leader.25 } }
	}
}


# R E M I N D E R - other traits are handled by other events
	# events = {
	# 	utopia.2509 # New Leaders Get Erudite Trait
	# 	utopia.2510	# New Leaders Get Cyborg Trait
	# 	utopia.2560	# New Leaders Get Synthetic Trait
	# 	utopia.2651	# New Leaders Get Psionic Trait
	# 	utopia.6000 # hive mind ruler gets hive mind trait to make them immortal
	# 	syndaw.1050 # Machine Intelligence ruler gets trait
	# 	distar.173 # New Leaders Get Brainslug Trait
	# }
#
#TRAIT HANDLER
add_leader_traits_after_modification = {
	# Erudite
	if = {
		limit = {
			species = {
				has_trait = trait_erudite
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_erudite }
			}
			add_trait = leader_trait_admiral_erudite
			add_ruler_trait = leader_trait_ruler_erudite
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_erudite }
			}
			add_trait = leader_trait_general_erudite
			add_ruler_trait = leader_trait_ruler_erudite
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_erudite }
			}
			add_trait = leader_trait_governor_erudite
			add_ruler_trait = leader_trait_ruler_erudite
		}
		if = {
			limit = {
				leader_class = scientist
				NOT = { has_trait = leader_trait_scientist_erudite }
			}
			add_trait = leader_trait_scientist_erudite
			add_ruler_trait = leader_trait_ruler_erudite
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_erudite }
			}
			add_trait = leader_trait_ruler_erudite
			add_ruler_trait = leader_trait_ruler_erudite

		}
	}

	# ----------------------------------------------------------------------
	# PU Mutualistic parasite
	if = {
		limit = {
			species = {
				has_trait = @trait_tec_pu_neuroslug
			}
			owner = {
				has_valid_civic = civic_tec_pu_neuroslug
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_pu_neuroslug }
			}
			add_trait = leader_trait_admiral_tec_pu_neuroslug
			add_ruler_trait = leader_trait_ruler_tec_pu_neuroslug
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_pu_neuroslug }
			}
			add_trait = leader_trait_general_tec_pu_neuroslug
			add_ruler_trait = leader_trait_ruler_tec_pu_neuroslug
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_pu_neuroslug }
			}
			add_trait = leader_trait_governor_tec_pu_neuroslug
			add_ruler_trait = leader_trait_ruler_tec_pu_neuroslug
		}
		if = {
			limit = {
				leader_class = scientist
				NOT = { has_trait = leader_trait_scientist_tec_pu_neuroslug }
			}
			add_trait = leader_trait_scientist_tec_pu_neuroslug
			add_ruler_trait = leader_trait_ruler_tec_pu_neuroslug
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_tec_pu_neuroslug }
			}
			add_trait = leader_trait_ruler_tec_pu_neuroslug
			add_ruler_trait = leader_trait_ruler_tec_pu_neuroslug

		}
	}

	# ----------------------------------------------------------------------
	# Clone Origin
	if = {
		limit = {
			species = {
				has_trait = @trait_tec_clone_origin
			}
			owner = {
				has_origin = origin_tec_clones
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_clone_origin }
			}
			add_trait = leader_trait_admiral_tec_clone_origin
			add_ruler_trait = leader_trait_ruler_tec_clone_origin
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_clone_origin }
			}
			add_trait = leader_trait_general_tec_clone_origin
			add_ruler_trait = leader_trait_ruler_tec_clone_origin
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_clone_origin }
			}
			add_trait = leader_trait_governor_tec_clone_origin
			add_ruler_trait = leader_trait_ruler_tec_clone_origin
		}
		if = {
			limit = {
				leader_class = scientist
				NOT = { has_trait = leader_trait_scientist_tec_clone_origin }
			}
			add_trait = leader_trait_scientist_tec_clone_origin
			add_ruler_trait = leader_trait_ruler_tec_clone_origin
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_tec_clone_origin }
			}
			add_trait = leader_trait_ruler_tec_clone_origin
			add_ruler_trait = leader_trait_ruler_tec_clone_origin

		}
	}

	# ----------------------------------------------------------------------
	# Genetic 
		#t3 ERUDITE - tec_gene_brain - all leaders
	if = {
		limit = {
			species = {
				OR = {
					has_trait = @trait_tec_gene_perfection
					has_trait = @trait_pc_tec_gene_preference
				}
				has_trait = @trait_tec_gene_brain
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_gene_brain }
			}
			add_trait = leader_trait_admiral_tec_gene_brain
			add_ruler_trait = leader_trait_ruler_tec_gene_brain
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_gene_brain }
			}
			add_trait = leader_trait_general_tec_gene_brain
			add_ruler_trait = leader_trait_ruler_tec_gene_brain
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_gene_brain }
			}
			add_trait = leader_trait_governor_tec_gene_brain
			add_ruler_trait = leader_trait_ruler_tec_gene_brain
		}
		if = {
			limit = {
				leader_class = scientist
				NOT = { has_trait = leader_trait_scientist_tec_gene_brain }
			}
			add_trait = leader_trait_scientist_tec_gene_brain
			add_ruler_trait = leader_trait_ruler_tec_gene_brain
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_tec_gene_brain }
			}
			add_trait = leader_trait_ruler_tec_gene_brain
			add_ruler_trait = leader_trait_ruler_tec_gene_brain

		}
	}
		#t3 FERTILE - tec_gene_fertile - gov ruler only
	if = {
		limit = {
			species = {
				OR = {
					has_trait = @trait_tec_gene_perfection
					has_trait = @trait_pc_tec_gene_preference
				}
				has_trait = @trait_tec_gene_fertile
			}
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_gene_fertile }
			}
			add_trait = leader_trait_governor_tec_gene_fertile
			add_ruler_trait = leader_trait_ruler_tec_gene_fertile
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_tec_gene_fertile }
			}
			add_trait = leader_trait_ruler_tec_gene_fertile
			add_ruler_trait = leader_trait_ruler_tec_gene_fertile
		}
	}
		#t3 WILL - tec_gene_will - gov ruler only
	if = {
		limit = {
			species = {
				OR = {
					has_trait = @trait_tec_gene_perfection
					has_trait = @trait_pc_tec_gene_preference
				}
				has_trait = @trait_tec_gene_will
			}
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_gene_will }
			}
			add_trait = leader_trait_governor_tec_gene_will
			add_ruler_trait = leader_trait_ruler_tec_gene_will
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_tec_gene_will }
			}
			add_trait = leader_trait_ruler_tec_gene_will
			add_ruler_trait = leader_trait_ruler_tec_gene_will

		}
	}
		#t3 ROBUST - tec_gene_robust - admiral and generals
	if = {
		limit = {
			species = {
				OR = {
					has_trait = @trait_tec_gene_perfection
					has_trait = @trait_pc_tec_gene_preference
				}
				has_trait = @trait_tec_gene_robust
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_gene_robust }
			}
			add_trait = leader_trait_admiral_tec_gene_robust
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_gene_robust }
			}
			add_trait = leader_trait_general_tec_gene_robust
		}
	}
		#t3 AUDACIOUS - tec_gene_audacious - admirals and generals
	if = {
		limit = {
			species = {
				OR = {
					has_trait = @trait_tec_gene_perfection
					has_trait = @trait_pc_tec_gene_preference
				}
				has_trait = @trait_tec_gene_audacious
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_gene_audacious }
			}
			add_trait = leader_trait_admiral_tec_gene_audacious
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_gene_audacious }
			}
			add_trait = leader_trait_general_tec_gene_audacious
		}
	}
	
	# ----------------------------------------------------------------------
	# Replicant
	if = {
		limit = {
			species = {
				has_trait = @trait_tec_replicant_standard
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_replicant }
			}
			add_trait = leader_trait_admiral_tec_replicant 
			add_ruler_trait = leader_trait_ruler_tec_replicant
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_replicant }
			}
			add_trait = leader_trait_general_tec_replicant
			add_ruler_trait = leader_trait_ruler_tec_replicant
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_replicant }
			}
			add_trait = leader_trait_governor_tec_replicant
			add_ruler_trait = leader_trait_ruler_tec_replicant
		}
		if = {
			limit = {
				leader_class = scientist
				NOT = { has_trait = leader_trait_scientist_tec_replicant }
			}
			add_trait = leader_trait_scientist_tec_replicant
			add_ruler_trait = leader_trait_ruler_tec_replicant
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_tec_replicant }
			}
			add_trait = leader_trait_ruler_tec_replicant
			add_ruler_trait = leader_trait_ruler_tec_replicant

		}
	}

	# ----------------------------------------------------------------------
	# T1 CYBORG
	if = {
		limit = {
			species = {
				has_trait = trait_cybernetic
			}
			exists = owner
			owner = {
				if = {
					limit = {
						tec_has_cybernetic_ascension_path_exception = yes
					}
					tec_has_cybernetic_ascension_path = yes
				}
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_cyborg }
			}
			add_trait = leader_trait_admiral_cyborg
			add_ruler_trait = leader_trait_ruler_cyborg
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_cyborg }
			}
			add_trait = leader_trait_general_cyborg
			add_ruler_trait = leader_trait_ruler_cyborg
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_cyborg }
			}
			add_trait = leader_trait_governor_cyborg
			add_ruler_trait = leader_trait_ruler_cyborg
		}
		if = {
			limit = {
				leader_class = scientist
				NOT = { has_trait = leader_trait_scientist_cyborg }
			}
			add_trait = leader_trait_scientist_cyborg
			add_ruler_trait = leader_trait_ruler_cyborg
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_cyborg }
			}
			add_trait = leader_trait_ruler_cyborg
			add_ruler_trait = leader_trait_ruler_cyborg

		}
	}

	# T2 CYBORG
	if = {
		limit = {
			species = {
				has_trait = @trait_tec_advanced_cyborg
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_advanced_cyborg }
			}
			add_trait = leader_trait_admiral_tec_advanced_cyborg
			add_ruler_trait = leader_trait_ruler_tec_advanced_cyborg
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_advanced_cyborg }
			}
			add_trait = leader_trait_general_tec_advanced_cyborg
			add_ruler_trait = leader_trait_ruler_tec_advanced_cyborg
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_advanced_cyborg }
			}
			add_trait = leader_trait_governor_tec_advanced_cyborg
			add_ruler_trait = leader_trait_ruler_tec_advanced_cyborg
		}
		if = {
			limit = {
				leader_class = scientist
				NOT = { has_trait = leader_trait_scientist_tec_advanced_cyborg }
			}
			add_trait = leader_trait_scientist_tec_advanced_cyborg
			add_ruler_trait = leader_trait_ruler_tec_advanced_cyborg
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_tec_advanced_cyborg }
			}
			add_trait = leader_trait_ruler_tec_advanced_cyborg
			add_ruler_trait = leader_trait_ruler_tec_advanced_cyborg

		}
	}

	# CYBERPSIONIC
	if = {
		limit = {
			species = {
				has_trait = @trait_tec_cyberpsionic
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_cyberpsionic }
			}
			add_trait = leader_trait_admiral_tec_cyberpsionic
			add_ruler_trait = leader_trait_ruler_tec_cyberpsionic
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_cyberpsionic }
			}
			add_trait = leader_trait_general_tec_cyberpsionic
			add_ruler_trait = leader_trait_ruler_tec_cyberpsionic
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_cyberpsionic }
			}
			add_trait = leader_trait_governor_tec_cyberpsionic
			add_ruler_trait = leader_trait_ruler_tec_cyberpsionic
		}
		if = {
			limit = {
				leader_class = scientist
				NOT = { has_trait = leader_trait_scientist_tec_cyberpsionic }
			}
			add_trait = leader_trait_scientist_tec_cyberpsionic
			add_ruler_trait = leader_trait_ruler_tec_cyberpsionic
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_tec_cyberpsionic }
			}
			add_trait = leader_trait_ruler_tec_cyberpsionic
			add_ruler_trait = leader_trait_ruler_tec_cyberpsionic

		}
	}

	# ----------------------------------------------------------------------
	# Machine T3 traits
	if = {
		limit = {
			species = {
				has_trait = @trait_tec_robot_megaform
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_robot_megaform }
			}
			add_trait = leader_trait_admiral_tec_robot_megaform
			add_ruler_trait = leader_trait_ruler_tec_robot_megaform
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_robot_megaform }
			}
			add_trait = leader_trait_general_tec_robot_megaform
			add_ruler_trait = leader_trait_ruler_tec_robot_megaform
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_robot_megaform }
			}
			add_trait = leader_trait_governor_tec_robot_megaform
			add_ruler_trait = leader_trait_ruler_tec_robot_megaform
		}
		if = {
			limit = {
				leader_class = scientist
				NOT = { has_trait = leader_trait_scientist_tec_robot_megaform }
			}
			add_trait = leader_trait_scientist_tec_robot_megaform
			add_ruler_trait = leader_trait_ruler_tec_robot_megaform
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_tec_robot_megaform }
			}
			add_trait = leader_trait_ruler_tec_robot_megaform
			add_ruler_trait = leader_trait_ruler_tec_robot_megaform

		}
	}
		#transmorpher - tec_robot_transmorpher- admirals and generals
	if = {
		limit = {
			species = {
				has_trait = @trait_tec_robot_transmorpher
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_robot_transmorpher }
			}
			add_trait = leader_trait_admiral_tec_robot_transmorpher
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_robot_transmorpher }
			}
			add_trait = leader_trait_general_tec_robot_transmorpher
		}
	}

	# ----------------------------------------------------------------------
	# Psi mechanic shroud processor trait
	if = {
		limit = {
			species = {
				has_trait = @trait_tec_robot_shroud
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_robot_shroud }
			}
			add_trait = leader_trait_admiral_tec_robot_shroud
			add_ruler_trait = leader_trait_ruler_tec_robot_shroud
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_robot_shroud }
			}
			add_trait = leader_trait_general_tec_robot_shroud
			add_ruler_trait = leader_trait_ruler_tec_robot_shroud
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_robot_shroud }
			}
			add_trait = leader_trait_governor_tec_robot_shroud
			add_ruler_trait = leader_trait_ruler_tec_robot_shroud
		}
		if = {
			limit = {
				leader_class = scientist
				NOT = { has_trait = leader_trait_scientist_tec_robot_shroud }
			}
			add_trait = leader_trait_scientist_tec_robot_shroud
			add_ruler_trait = leader_trait_ruler_tec_robot_shroud
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_tec_robot_shroud }
			}
			add_trait = leader_trait_ruler_tec_robot_shroud
			add_ruler_trait = leader_trait_ruler_tec_robot_shroud

		}
	}

	# ----------------------------------------------------------------------
	# Purity of form trait
	if = {
		limit = {
			species = {
				has_trait = @trait_tec_biopsionic
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_biopsionic }
			}
			add_trait = leader_trait_admiral_tec_biopsionic
			add_ruler_trait = leader_trait_ruler_tec_biopsionic
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_biopsionic }
			}
			add_trait = leader_trait_general_tec_biopsionic
			add_ruler_trait = leader_trait_ruler_tec_biopsionic
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_biopsionic }
			}
			add_trait = leader_trait_governor_tec_biopsionic
			add_ruler_trait = leader_trait_ruler_tec_biopsionic
		}
		if = {
			limit = {
				leader_class = scientist
				NOT = { has_trait = leader_trait_scientist_tec_biopsionic }
			}
			add_trait = leader_trait_scientist_tec_biopsionic
			add_ruler_trait = leader_trait_ruler_tec_biopsionic
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_tec_biopsionic }
			}
			add_trait = leader_trait_ruler_tec_biopsionic
			add_ruler_trait = leader_trait_ruler_tec_biopsionic

		}
	}

	# ----------------------------------------------------------------------
	# Psionic rare traits (uff)
		# psionic mind - tec_psionic_brain - researchers
	if = {
		limit = {
			species = {
				tec_is_any_psionic_species = yes
				has_trait = @trait_tec_psionic_mind
			}
		}
		if = {
			limit = {
				leader_class = scientist
				NOT = { has_trait = leader_trait_scientist_tec_psionic_mind }
			}
			random = {
				chance = 10
				add_trait = leader_trait_scientist_tec_psionic_mind
			}
		}
	}
		# psionic body - tec_psionic_body- generals
	if = {
		limit = {
			species = {
				tec_is_any_psionic_species = yes
				has_trait = @trait_tec_psionic_body
			}
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_psionic_body }
			}
			random = {
				chance = 10
				add_trait = leader_trait_general_tec_psionic_body
			}
		}
		
	}

		# Hypercognition - tec_psionic_unity- generals&admirals&gov
	if = {
		limit = {
			species = {
				tec_is_any_psionic_species = yes
				has_trait = @trait_tec_psionic_unity
			}
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_psionic_unity }
			}
			random = {
				chance = 10
				add_trait = leader_trait_general_tec_psionic_unity
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_psionic_unity }
			}
			random = {
				chance = 10
				add_trait = leader_trait_admiral_tec_psionic_unity
			}
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_psionic_unity }
			}
			random = {
				chance = 10
				add_trait = leader_trait_governor_tec_psionic_unity
			}
		}
		
	}

		# Psionic energy - tec_psionic_energy- generals&admirals&ruler
	if = {
		limit = {
			species = {
				tec_is_any_psionic_species = yes
				has_trait = @trait_tec_psionic_energy
			}
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_psionic_energy }
			}
			random = {
				chance = 10
				add_trait = leader_trait_general_tec_psionic_energy
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_psionic_energy }
			}
			random = {
				chance = 10
				add_trait = leader_trait_admiral_tec_psionic_energy
			}
		}
		if = {
			limit = {
				leader_class = ruler
				NOT = { has_trait = leader_trait_ruler_tec_psionic_energy }
			}
			random = {
				chance = 10
				add_trait = leader_trait_ruler_tec_psionic_energy
			}
		}
		
	}

		# Psionic telekinesis - tec_psionic_telekinesis - generals
	if = {
		limit = {
			species = {
				tec_is_any_psionic_species = yes
				has_trait = @trait_tec_psionic_telekinesis
			}
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_psionic_telekinesis }
			}
			random = {
				chance = 10
				add_trait = leader_trait_general_tec_psionic_telekinesis
			}
		}
		
	}

		# Teleport - tec_psionic_teleport - generals&admirals&gov
	if = {
		limit = {
			species = {
				tec_is_any_psionic_species = yes
				has_trait = @trait_tec_psionic_teleport
			}
		}
		if = {
			limit = {
				leader_class = general
				NOT = { has_trait = leader_trait_general_tec_psionic_teleport }
			}
			random = {
				chance = 10
				add_trait = leader_trait_general_tec_psionic_teleport
			}
		}
		if = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = leader_trait_admiral_tec_psionic_teleport }
			}
			random = {
				chance = 10
				add_trait = leader_trait_admiral_tec_psionic_teleport
			}
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_psionic_teleport }
			}
			random = {
				chance = 10
				add_trait = leader_trait_governor_tec_psionic_teleport
			}
		}
		
	}


	# Cyberpsio equilibrium
	if = {
		limit = {
			species = {
				has_trait = @trait_tec_cyberpsionic_equilibrium
			}
		}
		if = {
			limit = {
				leader_class = governor
				NOT = { has_trait = leader_trait_governor_tec_cyberpsionic_equilibrium }
			}
			random = {
				chance = 100
				add_trait = leader_trait_governor_tec_cyberpsionic_equilibrium
			}
		}
		
	}



}

remove_leader_traits_after_modification = {
	# Erudite
	if = {
		limit = {
			species = {
				NOT = {
					has_trait = trait_erudite 
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_erudite
			}
			remove_trait = leader_trait_admiral_erudite
			remove_ruler_trait = leader_trait_ruler_erudite
		}
		if = {
			limit = {
				has_trait = leader_trait_general_erudite
			}
			remove_trait = leader_trait_general_erudite
			remove_ruler_trait = leader_trait_ruler_erudite
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_erudite
			}
			remove_trait = leader_trait_governor_erudite
			remove_ruler_trait = leader_trait_ruler_erudite
		}
		if = {
			limit = {
				has_trait = leader_trait_scientist_erudite
			}
			remove_trait = leader_trait_scientist_erudite
			remove_ruler_trait = leader_trait_ruler_erudite
		}
		if = {
			limit = {
				has_trait = leader_trait_ruler_erudite
			}
			remove_trait = leader_trait_ruler_erudite
			remove_ruler_trait = leader_trait_ruler_erudite
		}
	}

	# ----------------------------------------------------------------------
	# Clone origin
	if = {
		limit = {
			species = {
				NOT = { has_trait = @trait_tec_clone_origin }
			}
			owner = {
				NOT = {
					has_origin = origin_tec_clones
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_clone_origin
			}
			remove_trait = leader_trait_admiral_tec_clone_origin
			remove_ruler_trait = leader_trait_ruler_tec_clone_origin
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_clone_origin
			}
			remove_trait = leader_trait_general_tec_clone_origin
			remove_ruler_trait = leader_trait_ruler_tec_clone_origin
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_tec_clone_origin
			}
			remove_trait = leader_trait_governor_tec_clone_origin
			remove_ruler_trait = leader_trait_ruler_tec_clone_origin
		}
		if = {
			limit = {
				has_trait = leader_trait_scientist_tec_clone_origin
			}
			remove_trait = leader_trait_scientist_tec_clone_origin
			remove_ruler_trait = leader_trait_ruler_tec_clone_origin
		}
		if = {
			limit = {
				has_trait = leader_trait_ruler_tec_clone_origin
			}
			remove_trait = leader_trait_ruler_tec_clone_origin
			remove_ruler_trait = leader_trait_ruler_tec_clone_origin
		}
	}

	# ----------------------------------------------------------------------
	# Genetic 
		#t3 ERUDITE - tec_gene_brain - all leaders
	if = {
		limit = {
			species = {
				NOT = {
					has_trait = @trait_tec_gene_brain
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_gene_brain
			}
			remove_trait = leader_trait_admiral_tec_gene_brain
			remove_ruler_trait = leader_trait_ruler_tec_gene_brain
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_gene_brain
			}
			remove_trait = leader_trait_general_tec_gene_brain
			remove_ruler_trait = leader_trait_ruler_tec_gene_brain
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_tec_gene_brain
			}
			remove_trait = leader_trait_governor_tec_gene_brain
			remove_ruler_trait = leader_trait_ruler_tec_gene_brain
		}
		if = {
			limit = {
				has_trait = leader_trait_scientist_tec_gene_brain
			}
			remove_trait = leader_trait_scientist_tec_gene_brain
			remove_ruler_trait = leader_trait_ruler_tec_gene_brain
		}
		if = {
			limit = {
				has_trait = leader_trait_ruler_tec_gene_brain
			}
			remove_trait = leader_trait_ruler_tec_gene_brain
			remove_ruler_trait = leader_trait_ruler_tec_gene_brain
		}
	}
		#t3 FERTILE - tec_gene_fertile - gov ruler only
	if = {
		limit = {
			species = {
				NOT = {
					has_trait = @trait_tec_gene_fertile
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_tec_gene_fertile
			}
			remove_trait = leader_trait_governor_tec_gene_fertile
			remove_ruler_trait = leader_trait_ruler_tec_gene_fertile
		}
		if = {
			limit = {
				has_trait = leader_trait_ruler_tec_gene_fertile
			}
			remove_trait = leader_trait_ruler_tec_gene_fertile
			remove_ruler_trait = leader_trait_ruler_tec_gene_fertile
		}
	}
		#t3 WILL - tec_gene_will - gov ruler only
	if = {
		limit = {
			species = {
				NOT = {
					has_trait = @trait_tec_gene_will
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_tec_gene_will
			}
			remove_trait = leader_trait_governor_tec_gene_will
			remove_ruler_trait = leader_trait_ruler_tec_gene_will
		}
		if = {
			limit = {
				has_trait = leader_trait_ruler_tec_gene_will
			}
			remove_trait = leader_trait_ruler_tec_gene_will
			remove_ruler_trait = leader_trait_ruler_tec_gene_will
		}
	}
		#t3 ROBUST - tec_gene_robust - admiral and generals
	if = {
		limit = {
			species = {
				NOT = {
					has_trait = @trait_tec_gene_robust
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_gene_robust
			}
			remove_trait = leader_trait_admiral_tec_gene_robust
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_gene_robust
			}
			remove_trait = leader_trait_general_tec_gene_robust
		}
	}
		#t3 AUDACIOUS - tec_gene_audacious - admirals and generals
	if = {
		limit = {
			species = {
				NOT = {
					has_trait = @trait_tec_gene_audacious
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_gene_audacious
			}
			remove_trait = leader_trait_admiral_tec_gene_audacious
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_gene_audacious
			}
			remove_trait = leader_trait_general_tec_gene_audacious
		}
	}

	# ----------------------------------------------------------------------
	# Replicant
	if = {
		limit = {
			species = {
				NOT = {
					has_trait = @trait_tec_replicant_standard
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_replicant
			}
			remove_trait = leader_trait_admiral_tec_replicant
			remove_ruler_trait = leader_trait_ruler_tec_replicant
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_replicant
			}
			remove_trait = leader_trait_general_tec_replicant
			remove_ruler_trait = leader_trait_ruler_tec_replicant
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_tec_replicant
			}
			remove_trait = leader_trait_governor_tec_replicant
			remove_ruler_trait = leader_trait_ruler_tec_replicant
		}
		if = {
			limit = {
				has_trait = leader_trait_scientist_tec_replicant
			}
			remove_trait = leader_trait_scientist_tec_replicant
			remove_ruler_trait = leader_trait_ruler_tec_replicant
		}
		if = {
			limit = {
				has_trait = leader_trait_ruler_tec_replicant
			}
			remove_trait = leader_trait_ruler_tec_replicant
			remove_ruler_trait = leader_trait_ruler_tec_replicant
		}
	}

	# ----------------------------------------------------------------------
		# Cybernetics T1
	if = {
		limit = {
			species = {
				NOT = {
					has_trait = trait_cybernetic
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_cyborg
			}
			remove_trait = leader_trait_admiral_cyborg
			remove_ruler_trait = leader_trait_ruler_cyborg
		}
		if = {
			limit = {
				has_trait = leader_trait_general_cyborg
			}
			remove_trait = leader_trait_general_cyborg
			remove_ruler_trait = leader_trait_ruler_cyborg
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_cyborg
			}
			remove_trait = leader_trait_governor_cyborg
			remove_ruler_trait = leader_trait_ruler_cyborg
		}
		if = {
			limit = {
				has_trait = leader_trait_scientist_cyborg
			}
			remove_trait = leader_trait_scientist_cyborg
			remove_ruler_trait = leader_trait_ruler_cyborg
		}
		if = {
			limit = {
				has_trait = leader_trait_ruler_cyborg
			}
			remove_trait = leader_trait_ruler_cyborg
			remove_ruler_trait = leader_trait_ruler_cyborg
		}
	}

	# Cybernetics T2
	if = {
		limit = {
			species = {
				NOT = {
					has_trait = @trait_tec_advanced_cyborg
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_advanced_cyborg
			}
			remove_trait = leader_trait_admiral_tec_advanced_cyborg
			remove_ruler_trait = leader_trait_ruler_tec_advanced_cyborg
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_advanced_cyborg
			}
			remove_trait = leader_trait_general_tec_advanced_cyborg
			remove_ruler_trait = leader_trait_ruler_tec_advanced_cyborg
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_tec_advanced_cyborg
			}
			remove_trait = leader_trait_governor_tec_advanced_cyborg
			remove_ruler_trait = leader_trait_ruler_tec_advanced_cyborg
		}
		if = {
			limit = {
				has_trait = leader_trait_scientist_tec_advanced_cyborg
			}
			remove_trait = leader_trait_scientist_tec_advanced_cyborg
			remove_ruler_trait = leader_trait_ruler_tec_advanced_cyborg
		}
		if = {
			limit = {
				has_trait = leader_trait_ruler_tec_advanced_cyborg
			}
			remove_trait = leader_trait_ruler_tec_advanced_cyborg
			remove_ruler_trait = leader_trait_ruler_tec_advanced_cyborg
		}
	}

	# Cyberpsionic
	if = {
		limit = {
			species = {
				NOT = {
					has_trait = @trait_tec_cyberpsionic
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_cyberpsionic
			}
			remove_trait = leader_trait_admiral_tec_cyberpsionic
			remove_ruler_trait = leader_trait_ruler_tec_cyberpsionic
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_cyberpsionic
			}
			remove_trait = leader_trait_general_tec_cyberpsionic
			remove_ruler_trait = leader_trait_ruler_tec_cyberpsionic
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_tec_cyberpsionic
			}
			remove_trait = leader_trait_governor_tec_cyberpsionic
			remove_ruler_trait = leader_trait_ruler_tec_cyberpsionic
		}
		if = {
			limit = {
				has_trait = leader_trait_scientist_tec_cyberpsionic
			}
			remove_trait = leader_trait_scientist_tec_cyberpsionic
			remove_ruler_trait = leader_trait_ruler_tec_cyberpsionic
		}
		if = {
			limit = {
				has_trait = leader_trait_ruler_tec_cyberpsionic
			}
			remove_trait = leader_trait_ruler_tec_cyberpsionic
			remove_ruler_trait = leader_trait_ruler_tec_cyberpsionic
		}
	}

	# ----------------------------------------------------------------------
	# Machine T3 traits
		#megaform - tec_robot_megaform - all leaders
	if = {
		limit = {
			species = {
				NOT = {
					has_trait = @trait_tec_robot_megaform
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_robot_megaform
			}
			remove_trait = leader_trait_admiral_tec_robot_megaform
			remove_ruler_trait = leader_trait_ruler_tec_robot_megaform
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_robot_megaform
			}
			remove_trait = leader_trait_general_tec_robot_megaform
			remove_ruler_trait = leader_trait_ruler_tec_robot_megaform
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_tec_robot_megaform
			}
			remove_trait = leader_trait_governor_tec_robot_megaform
			remove_ruler_trait = leader_trait_ruler_tec_robot_megaform
		}
		if = {
			limit = {
				has_trait = leader_trait_scientist_tec_robot_megaform
			}
			remove_trait = leader_trait_scientist_tec_robot_megaform
			remove_ruler_trait = leader_trait_ruler_tec_robot_megaform
		}
		if = {
			limit = {
				has_trait = leader_trait_ruler_tec_robot_megaform
			}
			remove_trait = leader_trait_ruler_tec_robot_megaform
			remove_ruler_trait = leader_trait_ruler_tec_robot_megaform
		}
	}
		#transmorpher - tec_robot_transmorpher- admirals and generals
	if = {
		limit = {
			species = {
				NOT = {
					has_trait = @trait_tec_robot_transmorpher
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_robot_transmorpher
			}
			remove_trait = leader_trait_admiral_tec_robot_transmorpher
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_robot_transmorpher
			}
			remove_trait = leader_trait_general_tec_robot_transmorpher
		}
	}

	# ----------------------------------------------------------------------
	# Psi mechanic shroud processor trait
	if = {
		limit = {
			species = {
				NOT = {
					has_trait = @trait_tec_robot_shroud
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_robot_shroud
			}
			remove_trait = leader_trait_admiral_tec_robot_shroud
			remove_ruler_trait = leader_trait_ruler_tec_robot_shroud
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_robot_shroud
			}
			remove_trait = leader_trait_general_tec_robot_shroud
			remove_ruler_trait = leader_trait_ruler_tec_robot_shroud
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_tec_robot_shroud
			}
			remove_trait = leader_trait_governor_tec_robot_shroud
			remove_ruler_trait = leader_trait_ruler_tec_robot_shroud
		}
		if = {
			limit = {
				has_trait = leader_trait_scientist_tec_robot_shroud
			}
			remove_trait = leader_trait_scientist_tec_robot_shroud
			remove_ruler_trait = leader_trait_ruler_tec_robot_shroud
		}
		if = {
			limit = {
				has_trait = leader_trait_ruler_tec_robot_shroud
			}
			remove_trait = leader_trait_ruler_tec_robot_shroud
			remove_ruler_trait = leader_trait_ruler_tec_robot_shroud
		}
	}

	# ----------------------------------------------------------------------
	# Purity of form trait
	if = {
		limit = {
			species = {
				NOR = {
					has_trait = @trait_tec_biopsionic
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_biopsionic
			}
			remove_trait = leader_trait_admiral_tec_biopsionic
			remove_ruler_trait = leader_trait_ruler_tec_biopsionic
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_biopsionic
			}
			remove_trait = leader_trait_general_tec_biopsionic
			remove_ruler_trait = leader_trait_ruler_tec_biopsionic
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_tec_biopsionic
			}
			remove_trait = leader_trait_governor_tec_biopsionic
			remove_ruler_trait = leader_trait_ruler_tec_biopsionic
		}
		if = {
			limit = {
				has_trait = leader_trait_scientist_tec_biopsionic
			}
			remove_trait = leader_trait_scientist_tec_biopsionic
			remove_ruler_trait = leader_trait_ruler_tec_biopsionic
		}
		if = {
			limit = {
				has_trait = leader_trait_ruler_tec_biopsionic
			}
			remove_trait = leader_trait_ruler_tec_biopsionic
			remove_ruler_trait = leader_trait_ruler_tec_biopsionic
		}
	}


	# Psionic rare traits (uff)
		# psionic mind - tec_psionic_brain - researchers
	if = {
		limit = {
			species = {
				OR = {
					tec_is_any_psionic_species = no
					NOT = {
						has_trait = @trait_tec_psionic_mind
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_scientist_tec_psionic_mind
			}
			remove_trait = leader_trait_scientist_tec_psionic_mind
		}
	}
		# psionic body - tec_psionic_body- generals
	if = {
		limit = {
			species = {
				OR = {
					tec_is_any_psionic_species = no
					NOT = {
						has_trait = @trait_tec_psionic_body
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_psionic_body
			}
			remove_trait = leader_trait_general_tec_psionic_body
		}
	}
		# Hypercognition - tec_psionic_unity- generals&admirals&gov
	if = {
		limit = {
			species = {
				OR = {
					tec_is_any_psionic_species = no
					NOT = {
						has_trait = @trait_tec_psionic_unity
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_psionic_unity
			}
			remove_trait = leader_trait_general_tec_psionic_unity
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_psionic_unity
			}
			remove_trait = leader_trait_admiral_tec_psionic_unity
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_tec_psionic_unity
			}
			remove_trait = leader_trait_governor_tec_psionic_unity
		}
	}
		# Psionic energy - tec_psionic_energy- generals&admirals&ruler
	if = {
		limit = {
			species = {
				OR = {
					tec_is_any_psionic_species = no
					NOT = {
						has_trait = @trait_tec_psionic_energy
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_psionic_energy
			}
			remove_trait = leader_trait_general_tec_psionic_energy
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_psionic_energy
			}
			remove_trait = leader_trait_admiral_tec_psionic_energy
		}
		if = {
			limit = {
				has_trait = leader_trait_ruler_tec_psionic_energy
			}
			remove_trait = leader_trait_ruler_tec_psionic_energy
		}
	}
		# Psionic telekinesis - tec_psionic_telekinesis - generals
	if = {
		limit = {
			species = {
				OR = {
					tec_is_any_psionic_species = no
					NOT = {
						has_trait = @trait_tec_psionic_telekinesis
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_psionic_telekinesis
			}
			remove_trait = leader_trait_general_tec_psionic_telekinesis
		}
	}
		# Teleport - tec_psionic_teleport - generals&admirals&gov
	if = {
		limit = {
			species = {
				OR = {
					tec_is_any_psionic_species = no
					NOT = {
						has_trait = @trait_tec_psionic_teleport
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_general_tec_psionic_teleport
			}
			remove_trait = leader_trait_general_tec_psionic_teleport
		}
		if = {
			limit = {
				has_trait = leader_trait_admiral_tec_psionic_teleport
			}
			remove_trait = leader_trait_admiral_tec_psionic_teleport
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_tec_psionic_teleport
			}
			remove_trait = leader_trait_governor_tec_psionic_teleport
		}
	}

		# Cyberpsio equilibrium
	if = {
		limit = {
			species = {
				OR = {
					NOT = {
						has_trait = @trait_tec_cyberpsionic_equilibrium
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = leader_trait_governor_tec_cyberpsionic_equilibrium
			}
			remove_trait = leader_trait_governor_tec_cyberpsionic_equilibrium
		}
	}
}


# Given a species, create a mod with trait_cybernetic and apply to all pops, leaders
# and armies that have the original species and the same owner as the scope object.
# Scope: Something that has a species and an owner
create_cybernetic_species_mod = {
	species = {
		create_species = {
			is_mod = yes
			name = this
			plural = this
			class = this
			portrait = this
			traits = this
			can_be_modified = this
			homeworld = this
			namelist = this
			gender = this
			traits = {
				ideal_planet_class = this
				trait = trait_cybernetic
			}
		}
		save_event_target_as = changing_species
	}

	owner = {
		every_owned_pop = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_owned_leader = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_pool_leader = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_envoy = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_owned_army = {
			limit = {
				exists = species
				is_exact_same_species = event_target:changing_species
			}
			change_species = last_created_species
		}
		every_controlled_ship = {
			limit = {
				is_ship_class = shipclass_colonizer
				is_exact_same_species = event_target:changing_species
			}
			change_species = last_created_species
		}
	}
}

# For the future
tec_create_advanced_cybernetic_species_mod = {
	species = {
		create_species = {
			is_mod = yes
			name = this
			plural = this
			class = this
			portrait = this
			traits = this
			can_be_modified = this
			homeworld = this
			namelist = this
			gender = this
			traits = {
				ideal_planet_class = this
				trait = @trait_tec_advanced_cyborg
			}
		}
		save_event_target_as = changing_species
	}

	owner = {
		every_owned_pop = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_owned_leader = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_pool_leader = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_envoy = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_owned_army = {
			limit = {
				exists = species
				is_exact_same_species = event_target:changing_species
			}
			change_species = last_created_species
		}
		every_controlled_ship = {
			limit = {
				is_ship_class = shipclass_colonizer
				is_exact_same_species = event_target:changing_species
			}
			change_species = last_created_species
		}
	}
}


tec_old_create_adv_cybernetic_species_mod = {
	species = {
		create_species = {
			is_mod = yes
			name = this
			plural = this
			class = this
			portrait = this
			traits = this
			can_be_modified = this
			homeworld = this
			namelist = this
			gender = this
			traits = {
				ideal_planet_class = this
				trait = trait_cybernetic
			}
		}
		save_event_target_as = changing_species
	}

	owner = {
		every_owned_pop = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_owned_leader = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_pool_leader = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_envoy = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_owned_army = {
			limit = {
				exists = species
				is_exact_same_species = event_target:changing_species
			}
			change_species = last_created_species
		}
		every_controlled_ship = {
			limit = {
				is_ship_class = shipclass_colonizer
				is_exact_same_species = event_target:changing_species
			}
			change_species = last_created_species
		}
	}
}





# FIRST CONTACT EXOCOLONIST TWEAK
# first_contact scope. Putting here so it's easy to find again
set_first_contact_starting_stage = {
	if = {
		limit = {
			contact_country = {
				is_country_type = dragon_dummy
			}
		}
		custom_tooltip = start_dragon_communications_study
	}
	else = {
		custom_tooltip = start_first_contact
	}
	hidden_effect = {
		owner = {
			set_timed_country_flag = {
				flag = recent_first_contact_process_started
				years = 20
			}
		}
		if = {
			limit = {
				contact_country = {
					tec_is_default_country = yes
				}
			}
			set_first_contact_stage = default_stage_1
		}
		else = { #had to leave default country type out of the switch, because "default" in switches means "fallback" :D
			contact_country = {
				switch = {
					trigger = is_country_type
					enclave = {
						setup_first_contact_path = { TYPE = enclave }
						country_event = { id = leviathans.97 days = 720 random = 360 } #they'll establish contact if you aren't quick enough
					}
					enclave_mercenary = {
						setup_first_contact_path = { TYPE = enclave }
						country_event = { id = leviathans.97 days = 720 random = 360 } #they'll establish contact if you aren't quick enough
					}
					tiyanki = { setup_first_contact_path = { TYPE = tiyanki } }
					tiyanki_garrison = { setup_first_contact_path = { TYPE = tiyanki } }
					amoeba = { setup_first_contact_path = { TYPE = amoeba } }
					amoeba_borderless = { setup_first_contact_path = { TYPE = amoeba } }
					amoeba_garrison = { setup_first_contact_path = { TYPE = amoeba } }
					amoeba_faction = { setup_first_contact_path = { TYPE = amoeba } }
					crystal = { setup_first_contact_path = { TYPE = crystals } }
					crystal_faction = { setup_first_contact_path = { TYPE = crystals } }
					drone = { setup_first_contact_path = { TYPE = drones } }
					drone_faction = { setup_first_contact_path = { TYPE = drones } }
					dormant_marauders = { setup_first_contact_path = { TYPE = marauders } }
					pirate = { setup_first_contact_path = { TYPE = pirates } }
					neutral_faction = { setup_first_contact_path = { TYPE = pirates } }
					caravaneer_fleet = {
						setup_first_contact_path = { TYPE = caravaneers }
						if = {
							limit = {
								exists = event_target:caravaneer_fleet1_country
								is_same_value = event_target:caravaneer_fleet1_country
							}
							root.owner = { country_event = { id = cara.1020 days = 720 random = 360 } }
						}
						else_if = {
							limit = {
								exists = event_target:caravaneer_fleet2_country
								is_same_value = event_target:caravaneer_fleet2_country
							}
							root.owner = { country_event = { id = cara.2020 days = 720 random = 360 } }
						}
						else_if = {
							limit = {
								exists = event_target:caravaneer_fleet3_country
								is_same_value = event_target:caravaneer_fleet3_country
							}
							root.owner = { country_event = { id = cara.3020 days = 720 random = 360 } }
						}
					}
					caravaneer_home = { setup_first_contact_path = { TYPE = caravaneers } }
					cloud = { setup_first_contact_path = { TYPE = void_clouds } }
					nomad = { setup_first_contact_path = { TYPE = nomad } }
					dragon_dummy = { setup_first_contact_path = { TYPE = origin_dragon } }
					default = {
						root = { fire_on_action = { on_action = on_first_contact_stage_1_no_path } }
					#	root = {
					#		log_error = "No valid first contact path for encounter with [This.ContactCountry.GetName] (country type: [This.ContactCountry.GetCountryType])"
					#	}
					}
				}
			}
		}
	}
}


# 3.7
set_merchant_government_effect = {
	if = {
		limit = {
			has_technology = tech_galactic_administration
			has_ascension_perk = ap_future_society
		}
		change_government = {
			authority = auth_oligarchic
			cooldown = no
			remove_invalid_civics = yes
			civics = { civic = civic_merchant_guilds civic = civic_tec_corporate_politics civic = random civic = random civic = random }
		}
	}
	else_if = {
		limit = {
			has_technology = tech_galactic_administration
		}
		change_government = {
			authority = auth_oligarchic
			cooldown = no
			remove_invalid_civics = yes
			civics = { civic = civic_merchant_guilds civic = civic_tec_corporate_politics civic = random civic = random }
		}
	}
	else = {
		change_government = {
			authority = auth_oligarchic
			cooldown = no
			remove_invalid_civics = yes
			civics = { civic = civic_merchant_guilds civic = civic_tec_corporate_politics civic = random }
		}
	}
}

impose_ideology_effect = {
	copy_ethos_and_authority = root
	tec_remove_sovereign_type_civic_effect = yes
	if = {
		limit = {
			root = { is_megacorp = yes }
			is_megacorp = yes
		}
		set_merchant_government_effect = yes
	}
	add_modifier = { modifier = recently_liberated days = 7300 }
	add_opinion_modifier = { modifier = opinion_liberated_us who = root }
	root = {
		add_opinion_modifier = { modifier = opinion_we_liberated who = from }
	}
}