# common\scripted_effects\zz_ow_paragon_effect.txt

#assign_gestalt_ruler_subclass_trait 

set_gestalt_node_portrait_effect = {
	if = {
		limit = {
			is_councilor = yes
		}
		switch = {
			trigger = is_councilor_type
			# Gestalt
				councilor_gestalt_legion = {
					if = {
						limit = { has_skill >= 8 }
						change_leader_portrait = councilor_gestalt_legion_3
					}
					else_if = {
						limit = { has_skill >= 4 }
						change_leader_portrait = councilor_gestalt_legion_2
					}
					else_if = {
						limit = { has_skill >= 1 }
						change_leader_portrait = councilor_gestalt_legion_1
					}
				}
				councilor_gestalt_cognitive = {
					if = {
						limit = { has_skill >= 8 }
						change_leader_portrait = councilor_gestalt_cognitive_3
					}
					else_if = {
						limit = { has_skill >= 4 }
						change_leader_portrait = councilor_gestalt_cognitive_2
					}
					else_if = {
						limit = { has_skill >= 1 }
						change_leader_portrait = councilor_gestalt_cognitive_1
					}
				}
				councilor_gestalt_regulatory = {
					if = {
						limit = { has_skill >= 8 }
						change_leader_portrait = councilor_gestalt_regulatory_3
					}
					else_if = {
						limit = { has_skill >= 4 }
						change_leader_portrait = councilor_gestalt_regulatory_2
					}
					else_if = {
						limit = { has_skill >= 1 }
						change_leader_portrait = councilor_gestalt_regulatory_1
					}
				}
				councilor_gestalt_growth = {
					if = {
						limit = { has_skill >= 8 }
						change_leader_portrait = councilor_gestalt_growth_3
					}
					else_if = {
						limit = { has_skill >= 4 }
						change_leader_portrait = councilor_gestalt_growth_2
					}
					else_if = {
						limit = { has_skill >= 1 }
						change_leader_portrait = councilor_gestalt_growth_1
					}
				}
			# /
			# AIAUTHS
				councilor_tec_aiauth_firewall = {
					if = {
						limit = { has_skill >= 8 }
						change_leader_portrait = councilor_gestalt_legion_3
					}
					else_if = {
						limit = { has_skill >= 4 }
						change_leader_portrait = councilor_gestalt_legion_2
					}
					else_if = {
						limit = { has_skill >= 1 }
						change_leader_portrait = councilor_gestalt_legion_1
					}
				}
				councilor_tec_aiauth_development = {
					if = {
						limit = { has_skill >= 8 }
						change_leader_portrait = councilor_gestalt_cognitive_3
					}
					else_if = {
						limit = { has_skill >= 4 }
						change_leader_portrait = councilor_gestalt_cognitive_2
					}
					else_if = {
						limit = { has_skill >= 1 }
						change_leader_portrait = councilor_gestalt_cognitive_1
					}
				}
				councilor_tec_aiauth_manager = {
					if = {
						limit = { has_skill >= 8 }
						change_leader_portrait = councilor_gestalt_regulatory_3
					}
					else_if = {
						limit = { has_skill >= 4 }
						change_leader_portrait = councilor_gestalt_regulatory_2
					}
					else_if = {
						limit = { has_skill >= 1 }
						change_leader_portrait = councilor_gestalt_regulatory_1
					}
				}
				# For now...
				councilor_inwards_perfection = {
					if = {
						limit = { has_skill >= 8 }
						change_leader_portrait = councilor_gestalt_legion_3
					}
					else_if = {
						limit = { has_skill >= 4 }
						change_leader_portrait = councilor_gestalt_legion_2
					}
					else_if = {
						limit = { has_skill >= 1 }
						change_leader_portrait = councilor_gestalt_legion_1
					}
				}
				councilor_fanatic_purifiers = {
					if = {
						limit = { has_skill >= 8 }
						change_leader_portrait = councilor_gestalt_legion_3
					}
					else_if = {
						limit = { has_skill >= 4 }
						change_leader_portrait = councilor_gestalt_legion_2
					}
					else_if = {
						limit = { has_skill >= 1 }
						change_leader_portrait = councilor_gestalt_legion_1
					}
				}
			# /
		}
	}
	else = {
		switch = {
			trigger = leader_class
			# Gestalt
				commander = {
					if = {
						limit = { has_skill >= 8 }
						change_leader_portrait = councilor_gestalt_legion_3
					}
					else_if = {
						limit = { has_skill >= 4 }
						change_leader_portrait = councilor_gestalt_legion_2
					}
					else_if = {
						limit = { has_skill >= 1 }
						change_leader_portrait = councilor_gestalt_legion_1
					}
				}
				scientist = {
					if = {
						limit = { has_skill >= 8 }
						change_leader_portrait = councilor_gestalt_cognitive_3
					}
					else_if = {
						limit = { has_skill >= 4 }
						change_leader_portrait = councilor_gestalt_cognitive_2
					}
					else_if = {
						limit = { has_skill >= 1 }
						change_leader_portrait = councilor_gestalt_cognitive_1
					}
				}
				official = {
					if = {
						limit = { has_skill >= 8 }
						change_leader_portrait = councilor_gestalt_regulatory_3
					}
					else_if = {
						limit = { has_skill >= 4 }
						change_leader_portrait = councilor_gestalt_regulatory_2
					}
					else_if = {
						limit = { has_skill >= 1 }
						change_leader_portrait = councilor_gestalt_regulatory_1
					}
				}
			# /
		}	
	}
}

#assign_governor_effect

set_starting_governor_effect = {
	if = {
		limit = {
			exists = capital_scope
		}
		capital_scope = {
			if = {
				limit = {
					exists = leader
					leader = {
						leader_class = $GOVERNOR$
						is_councilor = yes
					}
				}
				# Do nothing, leader matches chosen class.
			}
			else = {
				if = {
					limit = {
						exists = leader
					}
					kill_leader = {
						show_notification = no
					}
				}
				root = {
					if = {
						limit = {
							is_gestalt = no
							# Evolved
								tec_is_aiauth_empire = no
							# /
							any_owned_leader = {
								leader_class =  $GOVERNOR$
								is_councilor = yes
								is_idle = yes
								is_ruler = no
							}
						}
						random_owned_leader = {
							limit = {
								leader_class =  $GOVERNOR$
								is_councilor = yes
								is_idle = yes
								is_ruler = no
							}
							save_event_target_as = governor_leader
						}
					}
					else = {
						create_leader = {
							class = $GOVERNOR$
							name = random
							species = owner_main_species
						}
						last_created_leader = {
							save_event_target_as = governor_leader
							if = {
								limit = {
									has_skill > 1
									num_traits = 0
								}
								add_trait_no_notify = random_common
							}
						}
					}

				}
				assign_leader = event_target:governor_leader
			}
		}
	}
}