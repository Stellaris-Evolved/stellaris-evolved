# common\leader_classes\zz_evolved_base_classes.txt

@leader_unity_upkeep = 2
@tec_leader_cg_upkeep = 0.5
@base_leader_cap = 3

official = {
	name = official
	name_plural = official_plural
	description = official_description
	can_govern_planet = yes
	max_trait_points = 1
	can_have_traits = yes
	can_be_assigned_to_federation = yes
	can_be_assigned_to_galactic_community = yes
	leader_capacity = @base_leader_cap
	resources = {
		category = leader_officials
		cost = {
			unity = 1
			mult = value:leader_cost
		}
		# Upkeeps
			#inline_script = "paragon/leader_base_upkeep"
			# Moved to my own inline for better control
			inline_script = leaders/tec_leader_base_upkeep
		# /
		# Production
			produces = {
				trigger = {
					exists = owner
					owner = {
						has_tradition = tr_politics_adopt
					}
					OR = {
						is_assigned_to_galcom = yes
						is_strengthing_imperial_authority = yes
						is_undermining_imperial_authority = yes
					}
				}
				influence = 0.1
				mult = trigger:has_skill
			}

			produces = {
				trigger = {
					is_idle = no
					exists = owner
					owner = {
						tec_produces_energy_from_officials = yes
					}
				}
				energy = 2
				multiplier = value:tec_leader_official_production|MULT|1|
			}
			produces = {
				trigger = {
					is_idle = no
					exists = owner
					owner = {
						tec_produces_unity_from_officials = yes
					}
				}
				unity = 2
				multiplier = value:tec_leader_official_production|MULT|1|
			}
			produces = {
				trigger = {
					is_idle = no
					exists = owner
					owner = {
						tec_produces_research_from_officials = yes
					}
				}
				physics_research = 2
				society_research = 2
				engineering_research = 2
				multiplier = value:tec_leader_official_production|MULT|1|
			}
		# /
	}

	ai_weight = {
		modifier = {
			factor = 2
			or = {
				is_pacifist = yes
				is_egalitarian = yes
				is_pluralist = yes
				is_cooperative = yes
			}
		}
	}

	ai_location_weight = {
		modifier = {
			add = 10
			exists = FROM
			from = {
				is_scope_type = planet
			}
		}
		complex_trigger_modifier = {
			potential = {
				exists = FROM
				from = {
					is_scope_type = planet
				}
			}
			trigger = num_pops
			trigger_scope = from
			mode = add
			mult = 0.25
		}
		modifier = {
			exists = FROM
			from = {
				is_scope_type = planet
			}
			add = from.value:mining_combined_value|CACHED|yes|
		}
		modifier = {
			exists = FROM
			from = {
				is_scope_type = planet
			}
			add = from.value:farming_combined_value|CACHED|yes|
		}
		modifier = {
			exists = FROM
			from = {
				is_scope_type = planet
			}
			add = from.value:generator_combined_value|CACHED|yes|
		}
		modifier = {
			exists = FROM
			from = {
				is_scope_type = planet
			}
			add = from.value:industrial_districts_value
		}
		modifier = {
			exists = FROM
			from = {
				is_scope_type = planet
			}
			add = from.value:refinery_combined_value|CACHED|yes|
		}

		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = planet
			MODIFIER = planet
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = federation
			MODIFIER = federation
		}


		modifier = {
			exists = FROM
			FROM = {
				is_scope_type = planet
				OR = {
					has_rural_designation = yes
					has_generator_designation = yes
					has_mining_designation = yes
					has_farming_designation = yes
					has_industrial_designation = yes
					has_foundry_designation = yes
					has_factory_designation = yes
					has_refinery_designation = yes
				}
			}
			mult = 1.5
		}

		inline_script = paragon/tec_leader_all_weights
	}

	replaces_old_class = "governor"

	leader_background_job_weight = {
		high_priest = 100
		politician = 100
		noble = 100
		merchant = 100
		executive = 100
		colonist = 100
		priest = 100
		culture_worker = 100
		bureaucrat = 100
		unifier = 100
		manager = 100
		entertainer = 100
		death_chronicler = 100
		artisan = 100
		reassigner = 100
		clerk = 100
		miner = 100
		crystal_miner = 100
		farmer = 100
		preacher = 100
		scrap_miner = 100
		angler = 100
	}
	icon = 4
	paragon_background_selector = "paragon_background_selector"
}

commander = {
	name = commander
	name_plural = commander_plural
	description = commander_description
	can_lead_navy = yes
	can_lead_army = yes
	can_govern_planet = yes
	max_trait_points = 1
	can_have_traits = yes
	leader_capacity = @base_leader_cap
	resources = {
		category = leader_commanders
		cost = {
			unity = 1
			mult = value:leader_cost
		}
		# Upkeeps
			#inline_script = "paragon/leader_base_upkeep"
			# Moved to my own inline for better control
			inline_script = leaders/tec_leader_base_upkeep
		# /
		# Production
			# Static
			produces = {
				trigger = {
					is_idle = no
					exists = owner
					owner = {
						tec_produces_energy_from_commanders = yes
					}
				}
				energy = 2
				multiplier = value:tec_leader_scripted_production|BASE|1|
			}
			# Scaled
			produces = {	# Scaled unity
				trigger = {
					is_idle = no
					exists = owner
					owner = {
						tec_produces_scaled_unity_from_commanders = yes
					}
				}
				unity = 1
				multiplier = value:tec_leader_commander_production|MULT|1|
				# 1 * 15 size fleet * 1 * 1.2 (level 2) = 18 res
				# 1 * 100 fleet size * 1 * 1.5 (level 5) = 150 res
			}
			produces = {	# Scaled research
				trigger = {
					is_idle = no
					exists = owner
					owner = {
						tec_produces_scaled_research_from_commanders = yes
					}
				}
				physics_research = 1
				society_research = 1
				engineering_research = 1
				multiplier = value:tec_leader_commander_production|MULT|1|
				# 1 * 15 size fleet * 1 * 1.2 (level 2) = 18 res
				# 1 * 100 fleet size * 1 * 1.5 (level 5) = 150 res
			}
		# /
	}

	ai_weight = {
		modifier = {
			factor = 2
			or = {
				is_militarist = yes
				is_authoritarian = yes
			}
		}
	}
	ai_location_weight = {
		modifier = {
			add = 10
			exists = FROM
			from = {
				is_scope_type = fleet
				is_civilian = no
			}
		}
		complex_trigger_modifier = {
			potential = {
				exists = FROM
				from = {
					is_scope_type = fleet
					is_civilian = no
				}
			}
			trigger = num_ships
			trigger_scope = from
			mode = add
			mult = 1
		}
		modifier = {
			add = 5
			exists = FROM
			from = {
				is_scope_type = planet
				planet_stability <= 10
			}
		}
		modifier = {
			add = 5
			exists = FROM
			from = {
				is_scope_type = planet
				planet_crime >= 25
			}
		}
		complex_trigger_modifier = {
			potential = {
				exists = FROM
				from = {
					is_scope_type = planet
					OR = {
						planet_stability <= 10
						planet_crime >= 25
					}
				}
			}
			trigger = num_pops
			trigger_scope = from
			mode = add
			mult = 1
		}
		complex_trigger_modifier = {
			potential = {
				exists = FROM
				from = {
					is_scope_type = planet
				}
			}
			trigger = count_owned_pop
			trigger_scope = from
			parameters = {
				limit = {
					is_enslaved = yes
				}
			}
			mode = add
			mult = 0.25
		}
		modifier = {
			exists = FROM
			from = {
				is_scope_type = planet
			}
			add = from.value:mining_combined_value|CACHED|yes|FACTOR|0.5|
		}
		modifier = {
			exists = FROM
			from = {
				is_scope_type = planet
			}
			add = from.value:farming_combined_value|CACHED|yes|FACTOR|0.5|
		}
		modifier = {
			exists = FROM
			from = {
				is_scope_type = planet
			}
			add = from.value:generator_combined_value|CACHED|yes|FACTOR|0.5|
		}

		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = planet
			MODIFIER = planet
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = fleet
			MODIFIER = fleet
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = army
			MODIFIER = army
		}
		modifier = {
			exists = FROM
			FROM = {
				is_scope_type = planet
				has_fortress_designation = yes
			}
			mult = 1.5
		}
		modifier = {
			exists = FROM
			FROM = {
				is_scope_type = planet
				owner = {
					any_situation = {
						is_situation_type = situation_planetary_revolt
						target = {
							is_same_value = prevprev
						}
					}
				}
			}
			mult = 10
		}
		inline_script = paragon/tec_leader_all_weights
	}

	replaces_old_class = "admiral"
	replaces_old_class = "general"

	leader_background_job_weight = {
		noble = 100
		knight_commander = 100
		death_priest = 100
		duelist = 100
		knight = 100
		ranger = 100
		squire = 100
	}
	icon = 1
	paragon_background_selector = "paragon_background_selector"
}

scientist = {
	name = scientist
	name_plural = scientist_plural
	description = scientist_description
	can_research_tech = yes
	can_research_special_projects = yes
	can_crew_science_ship = yes
	can_research_anomalies = yes
	can_survey = yes
	can_boost_cloaking_detection = yes
	can_research_archaeology_site = yes
	can_explore_rifts = yes
	can_conduct_active_reconnaissance = yes
	can_govern_planet = yes
	max_trait_points = 1
	can_have_traits = yes
	leader_capacity = @base_leader_cap
	resources = {
		category = leader_scientists
		cost = {
			unity = 1
			mult = value:leader_cost
		}
		# Upkeeps
			#inline_script = "paragon/leader_base_upkeep"
			# Moved to my own inline for better control
			inline_script = leaders/tec_leader_base_upkeep
		# /
		# Production
			# Vanilla production
			# Static production
			# Unused
				produces = {
					trigger = {
						#is_idle = no
						# Note for future me: gestalt nodes are idle... xD
						tec_is_head_researcher = yes
						exists = owner
						owner = {
							tec_produces_energy_from_scientists = yes
						}
					}
					energy = 2
					multiplier = value:tec_leader_scripted_production|BASE|1|
				}
				produces = {
					trigger = {
						#is_idle = no
						# Note for future me: gestalt nodes are idle... xD
						tec_is_head_researcher = yes
						exists = owner
						owner = {
							tec_produces_unity_from_scientists = yes
						}
					}
					unity = 2
					multiplier = value:tec_leader_scientist_production|MULT|1|
					# 2 * 1 * level 2 leader = 4
				}
				produces = {
					trigger = {
						#is_idle = no
						# Note for future me: gestalt nodes are idle... xD
						tec_is_head_researcher = yes
						exists = owner
						owner = {
							tec_produces_research_from_scientists = yes
						}
					}
					physics_research = 2
					society_research = 2
					engineering_research = 2
					multiplier = value:tec_leader_scientist_production|MULT|1|
				}
			# /
			# Scaled production
			produces = {	# Scaled unity
				trigger = {
					tec_is_head_researcher = yes
					exists = owner
					owner = {
						tec_produces_scaled_unity_from_scientists = yes
					}
				}
				# Note: unity boosted to 3 due to the unification of research leaders
				unity = 3
				multiplier = value:tec_leader_scientist_production|MULT|1|
				# 1 * 10 techs*value * 1.2 (level 2) = 6 r
				# 1 * 100 techs*value * 1.5 (level 5) = 75 r
				# 1 * 200 techs*value * 1.8 (level 8) = 180 r
			}
			produces = {	# Scaled research
				trigger = {
					tec_is_head_researcher = yes
					exists = owner
					owner = {
						tec_produces_scaled_research_from_scientists = yes
					}
				}
				physics_research = 1
				multiplier = value:tec_leader_scientist_production|MULT|1|
				# 1 * 10 techs*value * 1.2 (level 2) = 6 r
				# 1 * 100 techs*value * 1.5 (level 5) = 75 r
				# 1 * 200 techs*value * 1.8 (level 8) = 180 r
			}
			produces = {
				trigger = {
					tec_is_head_researcher = yes
					exists = owner
					owner = {
						tec_produces_scaled_research_from_scientists = yes
					}
				}
				society_research = 1
				multiplier = value:tec_leader_scientist_production|MULT|1|
				# 1 * 10 techs*value * 1.2 (level 2) = 6 r
				# 1 * 100 techs*value * 1.5 (level 5) = 75 r
				# 1 * 200 techs*value * 1.8 (level 8) = 180 r
			}
			produces = {
				trigger = {
					tec_is_head_researcher = yes
					exists = owner
					owner = {
						tec_produces_scaled_research_from_scientists = yes
					}
				}
				engineering_research = 1
				multiplier = value:tec_leader_scientist_production|MULT|1|
				# 1 * 10 techs*value * 1.2 (level 2) = 6 r
				# 1 * 100 techs*value * 1.5 (level 5) = 75 r
				# 1 * 200 techs*value * 1.8 (level 8) = 180 r
			}
		# /
	}

	ai_weight = {
		base = 50
	}
	ai_location_weight = {
		modifier = {
			add = 10
			exists = FROM
			FROM = {
				is_scope_type = ship
				is_ship_class = shipclass_science_ship
			}
		}
		modifier = {
			add = 1
			exists = FROM
			FROM = {
				is_scope_type = planet
			}
		}
		modifier = {
			mult = 10
			exists = FROM
			FROM = {
				is_scope_type = planet
				exists = owner
				owner = {
					OR = {
						has_valid_civic = civic_technocracy
						has_valid_civic = civic_tec_regular_science_directorate
						has_valid_civic = civic_tec_corporate_innovative
					}
				}
			}
		}
		complex_trigger_modifier = {
			potential = {
				exists = FROM
				from = {
					is_scope_type = planet
				}
			}
			trigger = num_pops
			trigger_scope = from
			mode = add
			mult = 0.125
		}

		modifier = {
			exists = FROM
			from = {
				is_scope_type = planet
			}
			add = from.value:research_combined_value|CACHED|yes|FACTOR|1.5|
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = planet
			MODIFIER = planet
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = fleet
			MODIFIER = self
		}
		inline_script = {
			script = paragon/num_traits_with_modifier
			SCOPE = fleet
			MODIFIER = fleet
		}
		modifier = {
			exists = FROM
			FROM = {
				is_scope_type = planet
				has_research_designation = yes
			}
			mult = 2.5
		}
		inline_script = paragon/tec_leader_all_weights
	}
	minimum_ai_target = 3
	leader_background_job_weight = {
		head_researcher = 100
		noble = 100
		colonist = 100
		researcher = 100
		xeno_zoo_keeper = 100
		telepath = 100
		chemist = 100
		translucer = 100
		gas_refiner = 100
		roboticist = 100
		healthcare = 100
		bluelotus_technician = 100
		foundry = 100
		catalytic_technician = 100
		artificer = 100
		technician = 100
		gas_extractor = 100
		mote_harvester = 100
		puddle_technician = 100
	}
	icon = 3
	paragon_background_selector = "paragon_background_selector"
}

envoy = {
	name = envoy
	name_plural = envoy_plural
	description = envoy_description
	can_be_envoy = yes
	default_category = envoy
	assignment_cooldown = 360
	can_have_traits = no
	recruitable = no
	can_rule_empire = no
	can_be_assigned_to_federation = no
	can_be_assigned_to_galactic_community = no
	icon = 5
	paragon_background_selector = "paragon_background_selector"
}
