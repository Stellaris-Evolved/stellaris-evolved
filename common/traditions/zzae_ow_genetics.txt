# common\traditions\zzae_ow_genetics.txt

# 1
# 2	  4
# 3	  5

tr_genetics_adopt = {
	possible = {
		if = {
			limit = {
				tec_has_genetic_ascension_origin = yes
			}
			has_technology = tech_genome_mapping
		} 
		else = {
			custom_tooltip = {
				text = tr_tec_genetics_path_unlocked
				OR = {
					has_country_flag = tec_unlocks_tradition_genetics
				}
			}
		}
	}
	unlocks_agenda = agenda_genetic_pursuit
	# custom_tooltip = tr_genetics_adopt_tooltip
	# Evolved note - clone vats are handled as basegame so...
	modifier = {
		modify_species_cost_mult = -0.25
	}

	ai_weight = {
		factor = 1000
	}
}

tr_genetics_finish = {
	modifier = {
		modify_species_cost_mult = -0.25
		ascension_perks_add = 1
	}

	on_enabled = {
		# T2 Gate
		hidden_effect = {
			# Fear of the Dark Separatists - Outraged
				if = {
					limit = {
						any_planet_within_border = {
							has_planet_flag = fotd_seperatist_planet@root
							owner = {
								has_country_flag = fotd_seperatist_country@root
							}
						}
					}
					country_event = { id = origin.6120 days = 10 random = 10 }
				}
			# /
			# Luminary does its thing
				if = {
					limit = {
						OR = {
							has_origin = origin_legendary_leader_dictatorial
							AND = {
								has_country_flag = paragon_origin_reformists_gone
								has_origin = origin_legendary_leader_imperial
							}
						}
						NOT = { has_country_flag = luminary_ascension_path }
						exists = ruler
						ruler = { has_leader_flag = paragon_origin_legendary_leader }
					}
					country_event = {
						id = paragon.5201 days = 3600 random = 7200
					}
				}
			# /
			# EVOLVED Gate for t2s
				country_event = {
					id = tec_gene_path.150
					days = 360
				}
			# /
		}
	}

	ai_weight = {
		factor = 1000
	}

	tradition_swap = {
		name = tr_genetics_finish_extra_traits
		inherit_icon = yes
		inherit_name = yes
		trigger = {
			has_genetic_dlc = yes
		}

		custom_tooltip_with_modifiers = tr_genetics_finish_extra_traits_tooltip
		modifier = {
			modify_species_cost_mult = -0.25
			ascension_perks_add = 1
		}

		on_enabled = {
			hidden_effect = {
				# EVOLVED Gate for t2s
					country_event = {
						id = tec_gene_path.150
						days = 360
					}
				# /
			}
		}
	}
}

tr_genetics_resequencing = {
	custom_tooltip = tr_genetics_resequencing_tooltip
	on_enabled = {
		hidden_effect = {
			# Can add negative traits
			# Can remove positive traits
			set_country_flag = can_resequence
			# ^ failsafe
		}
	}
	ai_weight = {
		factor = 1000
	}
}

tr_genetics_creation = {
	possible = {
		has_tradition = tr_genetics_resequencing
	}

	# Can alter organic pop appearance within the same archtype
	# Unlocks Assimilation to add or remove the Hive-Minded trait.
	custom_tooltip = tr_genetics_creation_tooltip

	on_enabled = {
		hidden_effect = {
			# Can modify organic portraits
			set_country_flag = can_modify_organic_portraits
			# ^ failsafe
		}
	}

	ai_weight = {
		factor = 1000
	}
}

tr_genetics_enhanced_expression = {
	possible = {
		has_tradition = tr_genetics_creation
	}
	custom_tooltip_with_modifiers = tr_genetics_enhanced_expression_tooltip
	modifier = {
		BIOLOGICAL_species_trait_picks_add = 2
		BIOLOGICAL_species_trait_points_add = 6
		# BIOSERVANT_species_trait_picks_add = 1
		# REPLICANT_species_trait_picks_add = 1
		# These are not needed to to inherit_trait_points
	}
	on_enabled = {
		hidden_effect = {
			# Can add advanced traits
			set_country_flag = can_add_advanced_traits
			# ^ failsafe
		}
	}
	ai_weight = {
		factor = 1000
	}
}

tr_genetics_retrovirus = {
	modifier = {
		pop_environment_tolerance = 0.10
	}
	ai_weight = {
		factor = 1000
	}
}

tr_genetics_efficient_cloning = {
	possible = {
		has_tradition = tr_genetics_retrovirus
	}
	custom_tooltip = tr_genetics_efficient_cloning_tooltip
	ai_weight = {
		factor = 1000
	}
}

