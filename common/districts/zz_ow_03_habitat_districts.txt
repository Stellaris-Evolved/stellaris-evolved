# common\districts\zz_ow_03_habitat_districts.txt

# NOTE: District sorting
	# qualities
	# potential/possible
	# allow
	# destroy/convert to, etc
	# resource
	# Modifiers
		# Standard
		# /
		# Technologies
		# /
		# Traditions
		# /
		# Origins
		# /
		# Civics
		# /
	# /
	# Jobs
		# Regular
		# /
		# Hive
		# /
		# Machine
		# /
		# FE
		# /
	# /
# /

# --------------- Habitation
district_hab_housing = {
	base_buildtime = @hab_time
	is_capped_by_modifier = no
	exempt_from_ai_planet_specialization = yes
	ai_estimate_without_unemployment = yes

	show_on_uncolonized = {
		NOR = {
			has_planet_flag = toxic_knights_habitat
			has_building = building_order_castle
		}
		tec_uses_habitat_districts = yes
		tec_is_arcology_habitat = no
	}

	potential = {
		NAND = {
			exists = owner
			owner = { has_origin = origin_toxic_knights }
			OR = {
				has_planet_flag = toxic_knights_habitat
				has_building = building_order_castle
			}
		}
		tec_uses_habitat_districts = yes
		tec_is_arcology_habitat = no
	}

	allow = {
		tec_ai_allow_housing_district = {
			housing = 2
			has_building_slots = "
				always = yes
			"
			use_for_jobs = "
				tec_ai_allow_city_district_for_jobs = yes
			"
		}
	}

	conversion_ratio = 0.75
	inline_script = districts/convert_to/tec_housing_districts

	resources = {
		category = planet_districts_cities

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}
	}

	# Modifiers
		planet_modifier = {
			planet_housing_add = 6
			planet_max_buildings_add = 0.5
		}
		# Planet
			triggered_planet_modifier = {
				potential = {
					planet = {
						tec_is_upgraded_habitat = yes
					}
				}
				planet_housing_add = 2
			}
			triggered_planet_modifier = {
				potential = {
					planet = {
						tec_is_fully_upgraded_habitat = yes
					}
				}
				planet_housing_add = 2
			}
		# /
	# /
	# Effect Types
		inline_script = {
			script = districts/type/tec_housing_generic
			scale = 1
			secondary_scale = 2
			trigger = ""
		}
		inline_script = {
			script = districts/type/tec_housing_habitat
			scale = 1
			secondary_scale = 2
			trigger = ""
		}
	# /

	# Jobs
		# Regular
			inline_script = {
				script = jobs/tec_clerk
				count = 1
				secondary_count = 1
				mult = value:tec_hab_void_dweller_jobs|BASE|2|
				display = with_desc
				trigger = ""
				default_job = clerk
			}
		# /
		# Gestalt
			inline_script = {
				script = jobs/tec_maintenance_drone
				count = 1
				mult = value:tec_hab_void_dweller_jobs|BASE|2|
				display = with_desc
				trigger = ""
			}
		# /
	# /

	inline_script = {
		script = districts/tec_aibait_housing
		has_building_slots = "
			always = yes
		"
	}
}

# --------------- Industrial
district_hab_industrial = {
	icon = district_arcology_arms_industry
	base_buildtime = @hab_time
	is_capped_by_modifier = no

	prerequisites = {
		tech_basic_industry
	}

	show_on_uncolonized = {
		tec_uses_habitat_districts = yes
		tec_is_arcology_habitat = no
	}
	
	potential = {
		tec_uses_habitat_districts = yes
		tec_is_arcology_habitat = no
	}
	
	#allow = {
	#	tec_ai_force_research_habitat_district = no
	#}

	#destroy_trigger = {
	#	OR = {
	#		tec_ai_force_research_habitat_district = yes
	#	}
	#}

	conversion_ratio = 0.5
	inline_script = districts/convert_to/tec_industrial_districts
	inline_script = districts/convert_to/tec_factory_districts
	
	resources = {
		category = planet_districts_hab_industrial

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}

		inline_script = districts/resources/tec_unleashed_industrialization_resources
		inline_script = districts/resources/tec_industrial_maintenance_upkeep
	}
	
	# Standard
		planet_modifier = {
			planet_housing_add = 2
			planet_max_buildings_add = 0.25
		}
		triggered_planet_modifier = {
			planet_housing_add = 1
			mult = modifier:habitat_districts_housing_add
		}
	# /

	inline_script = {
		script = districts/tec_industrial_district_modifiers
		housing_scale = 1
		building_slot_scale = 1
		amenities_scale = 1
	}
	# /
	# Civics
		inline_script = districts/effects/tec_unleashed_industrialization
	# /
	# Edicts
		inline_script = districts/effects/tec_industrial_maintenance
	# /

	# Note: 2 jobs, vd gets 3
	inline_script = {
		script = jobs/tec_foundry
		count = 1
		mult = value:tec_hab_void_dweller_jobs|BASE|2|INDUSTRIAL|yes|
		trigger = ""
		display = with_desc
		default_job = foundry
	}

	inline_script = districts/tec_aibait_habitat_district
}

district_tec_hab_factory = {
	icon = district_arcology_civilian_industry
	base_buildtime = @hab_time
	is_capped_by_modifier = no

	prerequisites = {
		tech_basic_industry
	}

	show_on_uncolonized = {
		exists = from
		from = {
			country_uses_consumer_goods = yes
		}
		tec_uses_habitat_districts = yes
		tec_is_arcology_habitat = no
	}
	
	potential = {
		exists = owner
		owner = {
			country_uses_consumer_goods = yes
		}
		tec_uses_habitat_districts = yes
		tec_is_arcology_habitat = no
	}
	
	#allow = {
	#	tec_ai_force_research_habitat_district = no
	#}

	#destroy_trigger = {
	#	OR = {
	#		tec_ai_force_research_habitat_district = yes
	#	}
	#}

	conversion_ratio = 0.5
	inline_script = districts/convert_to/tec_industrial_districts
	inline_script = districts/convert_to/tec_factory_districts
	
	resources = {
		category = planet_districts_hab_industrial

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}

		inline_script = districts/resources/tec_unleashed_industrialization_resources
		inline_script = districts/resources/tec_industrial_maintenance_upkeep
	}
	
	# Standard
		planet_modifier = {
			planet_housing_add = 2
			planet_max_buildings_add = 0.25
		}
		triggered_planet_modifier = {
			planet_housing_add = 1
			mult = modifier:habitat_districts_housing_add
		}
	# /
	inline_script = {
		script = districts/tec_industrial_district_modifiers
		housing_scale = 1
		building_slot_scale = 1
		amenities_scale = 1
	}
	# /
	# Civics
		inline_script = districts/effects/tec_unleashed_industrialization
	# /
	# Edicts
		inline_script = districts/effects/tec_industrial_maintenance
	# /

	# Note: 2 jobs, vd gets 3
	inline_script = {
		script = jobs/tec_artisan
		count = 1
		mult = value:tec_hab_void_dweller_jobs|BASE|2|INDUSTRIAL|yes|
		trigger = ""
		display = with_desc
		default_job = artisan
	}

	inline_script = districts/tec_aibait_habitat_district
}

district_tec_hab_logistic = {
	#icon = district_arcology_civilian_industry
	base_buildtime = @hab_time
	is_capped_by_modifier = no

	prerequisites = {
		tech_basic_industry
	}

	show_on_uncolonized = {
		tec_uses_habitat_districts = yes
	}
	
	potential = {
		tec_uses_habitat_districts = yes
	}
	
	#allow = {
	#	tec_ai_force_research_habitat_district = no
	#}

	#destroy_trigger = {
	#	OR = {
	#		tec_ai_force_research_habitat_district = yes
	#	}
	#}

	conversion_ratio = 0.5
	inline_script = districts/convert_to/tec_industrial_districts
	inline_script = districts/convert_to/tec_factory_districts
	
	resources = {
		category = planet_districts_hab_industrial

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}
	}

	# Loc
		triggered_desc = {
			text = district_tec_hab_logistic_effect
		}
		triggered_desc = {
			text = district_tec_hab_logistic_effect_subhabitats
		}
	# /
	
	# Standard
		planet_modifier = {
			planet_housing_add = 2
			planet_max_buildings_add = 0.25
		}
		triggered_planet_modifier = {
			planet_housing_add = 1
			mult = modifier:habitat_districts_housing_add
		}
	# /
	# Note: 2 jobs, vd gets 3
	inline_script = {
		script = jobs/tec_megastructure_logistician
		count = 1
		mult = value:tec_hab_void_dweller_jobs|BASE|2|
		trigger = ""
		display = with_desc
		default_job = tec_megastructure_logistician
	}
	inline_script = {	# 2 extra for arcology
		script = jobs/tec_megastructure_logistician
		count = 2
		mult = 1
		trigger = "
			has_planet_flag = tec_arcology_habitat
		"
		display = no_desc
	}

	inline_script = districts/tec_aibait_habitat_district
}

# --------------- Menial
district_hab_energy = {
	base_buildtime = @hab_time
	is_capped_by_modifier = no

	show_on_uncolonized = {
		tec_uses_habitat_districts = yes
		#has_planet_flag = energy_habitat
		check_modifier_value = {
			modifier = district_hab_energy_max
			value > 0
		}
		tec_is_arcology_habitat = no
	}

	potential = {
		tec_uses_habitat_districts = yes
		#has_planet_flag = energy_habitat
		check_modifier_value = {
			modifier = district_hab_energy_max
			value > 0
		}
		tec_is_arcology_habitat = no
	}

	allow = {
		tec_ai_allow_generator_district = yes
	}

	destroy_trigger = {
		OR = {
			tec_ai_allow_generator_district = no
		}
	}

	conversion_ratio = 0.5
	inline_script = districts/convert_to/tec_generator_districts
	inline_script = districts/convert_to/tec_trade_districts

	resources = {
		category = planet_districts_hab_energy

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}

		# New production
			#inline_script = {
			#	script = districts/resources/tec_hab_automation_energy
			#	trigger = "
			#		always = yes
			#	"
			#	base = 0
			#	mult = 0.5
			#}
		# /
		inline_script = {
			script = districts/resources/tec_generate_basic_resources
			resource = energy
		}
		# Improved Technician Empire Upkeep
		inline_script = districts/resources/tec_improved_technician_empire_upkeep
	}
	# overlord_resources = {
		#category = planet_requisitioned_energy
		#produces = {
		#	trigger = {
		#		planet = {
		#			has_planet_flag = has_energy_requisitorium
		#		}
		#	}
		#	energy = @requisitorium_energy_overlord
		#}
	# }

	# Modifiers
		inline_script = {
			script = districts/tec_habitat_scaling_district
			district = district_hab_energy
			type = generator
		}

		# Improved Technician Empire Modifier
		inline_script = districts/effects/tec_improved_technician_empire_bonus
	# /

	# Jobs
		inline_script = {
			script = jobs/tec_technician
			regular_count = 1
			regular_secondary_count = 1
			hive_count = 1
			hive_secondary_count = 1
			machine_count = 1
			machine_secondary_count = 1
			mult = value:tec_hab_void_dweller_jobs|BASE|2|TYPE|generator|
			secondary_mult = value:tec_hab_void_dweller_jobs|BASE|2|TYPE|generator|MULT|0.67|
			display = with_desc
			trigger = ""
			default_job = technician
		}

		inline_script = {
			script = jobs/tec_technician_secondary
			regular_count = 1
			hive_count = 1
			machine_count = 1
			mult = value:tec_hab_void_dweller_jobs|BASE|2|TYPE|generator|MULT|0.34|
			display = with_desc
			trigger = ""
		}
	# /		

	# Starnet
	inline_script = {
		script = districts/compat/tec_starnet_generator_district
		count = 1
	}

	inline_script = districts/tec_aibait_habitat_district
}

district_hab_mining = {
	base_buildtime = @hab_time
	is_capped_by_modifier = no

	show_on_uncolonized = {
		tec_uses_habitat_districts = yes
		#has_planet_flag = mining_habitat
		check_modifier_value = {
			modifier = district_hab_mining_max
			value > 0
		}
		tec_is_arcology_habitat = no
	}

	potential = {
		tec_uses_habitat_districts = yes
		#has_planet_flag = mining_habitat
		check_modifier_value = {
			modifier = district_hab_mining_max
			value > 0
		}
		tec_is_arcology_habitat = no
	}

	conversion_ratio = 0.5
	inline_script = districts/convert_to/tec_industrial_districts
	inline_script = districts/convert_to/tec_mining_districts

	resources = {
		category = planet_districts_hab_mining

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}

		inline_script = {
			script = districts/resources/tec_generate_basic_resources
			resource = minerals
		}
		# Improved Mining Empire Upkeep
		inline_script = districts/resources/tec_improved_mining_empire_upkeep
	}
	# overlord_resources = {
		#category = planet_requisitioned_minerals
		#produces = {
		#	trigger = {
		#		planet = {
		#			has_planet_flag = has_material_requisitorium
		#		}
		#	}
		#	minerals = @requisitorium_minerals_overlord
		#}
	# }

	# Modifiers
		inline_script = {
			script = districts/tec_habitat_scaling_district
			district = district_hab_mining
			type = mining
		}

		# Improved Mining Empire Modifier
		inline_script = districts/effects/tec_improved_mining_empire_bonus
	# /

	# Jobs
		inline_script = {
			script = jobs/tec_miner
			regular_count = 1
			regular_secondary_count = 1
			hive_count = 1
			hive_secondary_count = 1
			machine_count = 1
			machine_secondary_count = 1
			mult = value:tec_hab_void_dweller_jobs|BASE|2|TYPE|mining|
			secondary_mult = value:tec_hab_void_dweller_jobs|BASE|2|TYPE|mining|MULT|0.67|
			display = with_desc
			trigger = ""
			default_job = miner
		}

		inline_script = {
			script = jobs/tec_miner_secondary
			regular_count = 1
			hive_count = 1
			machine_count = 1
			mult = value:tec_hab_void_dweller_jobs|BASE|2|TYPE|mining|MULT|0.34|
			display = with_desc
			trigger = ""
		}
	# /

	# Starnet
		inline_script = {
			script = districts/compat/tec_starnet_mining_district
			count = 1
		}
	# /

	# AI
		inline_script = districts/tec_aibait_habitat_district
	# /
}

district_tec_hab_food = {		# Evolved
	base_buildtime = @hab_time
	is_capped_by_modifier = no

	show_on_uncolonized = {
		tec_uses_habitat_districts = yes
		#has_planet_flag = tec_food_habitat
		check_modifier_value = {
			modifier = district_tec_hab_food_max
			value > 0
		}
		tec_is_arcology_habitat = no
	}

	potential = {
		tec_uses_habitat_districts = yes
		#has_planet_flag = tec_food_habitat
		check_modifier_value = {
			modifier = district_tec_hab_food_max
			value > 0
		}
		tec_is_arcology_habitat = no
	}

	allow = {
		tec_ai_allow_farming_district = yes
	}

	destroy_trigger = {
		OR = {
			tec_ai_allow_farming_district = no
		}
	}

	conversion_ratio = 0.5
	inline_script = districts/convert_to/tec_farming_districts
	inline_script = districts/convert_to/tec_industrial_districts

	resources = {
		category = planet_districts_hab_food

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}

		inline_script = {
			script = districts/resources/tec_generate_basic_resources
			resource = food
		}
		# Improved Farming Empire Upkeep
		inline_script = districts/resources/tec_improved_farming_empire_upkeep
	}
	# overlord_resources = {
	# 	category = planet_requisitioned_food
	# 	produces = {
	# 		trigger = {
	# 			planet = {
	# 				has_planet_flag = has_produce_requisitorium
	# 			}
	# 		}
	# 		food = @requisitorium_food_overlord
	# 	}
	# }
	
	# Modifiers
		inline_script = {
			script = districts/tec_habitat_scaling_district
			district = district_tec_hab_food
			type = farming
		}

		# Improved Farming Empire Modifier
		inline_script = districts/effects/tec_improved_farming_empire_bonus
	# /

	# Jobs
		inline_script = {
			script = jobs/tec_farmer
			regular_count = 1
			regular_secondary_count = 1
			hive_count = 1
			hive_secondary_count = 1
			machine_count = 1
			machine_secondary_count = 1
			mult = value:tec_hab_void_dweller_jobs|BASE|2|TYPE|farming|
			secondary_mult = value:tec_hab_void_dweller_jobs|BASE|2|TYPE|farming|MULT|0.67|
			display = with_desc
			trigger = ""
			default_job = farmer
		}

		inline_script = {
			script = jobs/tec_farmer_secondary
			regular_count = 1
			hive_count = 1
			machine_count = 1
			mult = value:tec_hab_void_dweller_jobs|BASE|2|TYPE|farming|MULT|0.34|
			display = with_desc
			trigger = ""
		}
	# /

	# Starnet
		inline_script = {
			script = districts/compat/tec_starnet_farming_district
			count = 1
		}
	# /

	# AI
		inline_script = districts/tec_aibait_habitat_district
	# /
}

# --------------- Deprecated but maybe reusable

district_hab_science = {
	base_buildtime = @hab_time
	is_capped_by_modifier = no

	prerequisites = {
		tech_basic_science_lab_1
	}

	show_on_uncolonized = {
		always = no
		tec_uses_habitat_districts = yes
		# Specs
			has_planet_flag = research_habitat
			tec_is_arcology_habitat = no
		# /
	}

	potential = {
		always = no
		tec_uses_habitat_districts = yes
		# Specs
			has_planet_flag = research_habitat
			tec_is_arcology_habitat = no
		# /
	}

	allow = {
		tec_allow_research_buildings_and_districts = yes
	}

	conversion_ratio = 0.5
	inline_script = districts/convert_to/tec_research_districts
	inline_script = districts/convert_to/tec_industrial_districts

	resources = {
		category = planet_districts_hab_research

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}

		# Base production
		inline_script = {
			script = districts/resources/tec_hab_automation_research
			trigger = "
				always = yes
			"
			base = 0
			mult = 0.5
		}
	}

	# Standard
		inline_script = {
			script = districts/tec_habitat_scaling_district
			district = district_hab_science
			type = no
		}
	# /

	inline_script = {
		script = districts/type/tec_research
		scale = 0.5
		secondary_scale = 0.5
		mult = owner.value:hab_void_dweller_jobs
		trigger = "
			tec_is_upgraded_habitat = yes
		"
	}

	# Jobs
		inline_script = {
			script = jobs/tec_researcher
			count = 1
			mult = 1
			display = with_desc
			trigger = ""
			default_job = researcher
		}

		inline_script = {
			script = jobs/tec_researcher
			count = 1
			mult = 1
			display = no_desc
			trigger = "
				tec_is_upgraded_habitat = yes
			"
			default_job = researcher
		}
		inline_script = {
			script = jobs/tec_researcher
			count = 1
			mult = 1
			display = no_desc
			trigger = "
				tec_is_fully_upgraded_habitat = yes
			"
			default_job = researcher
		}
	# /

	inline_script = districts/tec_aibait_habitat_district
}


district_tec_hab_extraction = {	# Evolved
	base_buildtime = @hab_time
	is_capped_by_modifier = no

	show_on_uncolonized = {
		always = no
		tec_uses_habitat_districts = yes
		check_variable = {
			which = tec_hab_menial_districts
			value < 3
		}
		tec_is_arcology_habitat = no
	}

	potential = {
		always = no
		tec_uses_habitat_districts = yes
		check_variable = {
			which = tec_hab_menial_districts
			value < 3
		}
		tec_is_arcology_habitat = no
	}

	allow = {
		#This crappy basic district is denied for AI
		#Not in the mood to see them waste precious time and space for 0.5 energy credits
		#Not that players build them at all anyways
		exists = owner
		owner = { is_ai = no }
	}

	destroy_trigger = {
		#Always destroyed if AI
		exists = owner
		owner = { is_ai = yes }
	}

	#They don't convert into anything - decision swaps a part if specced

	resources = {
		category = planet_districts_hab

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep_low
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}

		# Base production
			inline_script = {
				script = districts/resources/tec_hab_automation_energy
				trigger = "
					planet = {
						NOT = {
							has_planet_flag = energy_habitat
						}
					}
				"
				base = 0
				mult = 0.25
			}
			inline_script = {
				script = districts/resources/tec_hab_automation_minerals
				trigger = "
					planet = {
						NOT = {
							has_planet_flag = mining_habitat
						}
					}
				"
				base = 0
				mult = 0.25
			}
			inline_script = {
				script = districts/resources/tec_hab_automation_food
				trigger = "
					planet = {
						NOT = {
							has_planet_flag = tec_food_habitat
						}
					}
				"
				base = 0
				mult = 0.25
			}
		# /
		# Base from districts
			inline_script = {
				script = districts/resources/tec_generate_basic_resources
				resource = energy
			}
			inline_script = {
				script = districts/resources/tec_generate_basic_resources
				resource = minerals
			}
			inline_script = {
				script = districts/resources/tec_generate_basic_resources
				resource = food
			}
		# /
	}
	# overlord_resources = {
		#category = planet_requisitioned_food
		#produces = {
		#	trigger = {
		#		planet = {
		#			has_planet_flag = has_produce_requisitorium
		#		}
		#	}
		#	food = @requisitorium_food_overlord
		#}
	# }

	# Text
		# Indications
		triggered_desc = {
			trigger = {
				always = yes
			}
			text = district_tec_hab_extraction_effect_production
		}
		triggered_desc = {
			trigger = {
				always = yes
			}
			text = district_tec_hab_extraction_effect_buildings
		}
		triggered_desc = {
			trigger = {
				always = yes
			}
			text = district_tec_hab_extraction_effect_swap
		}
		triggered_desc = {
			trigger = {
				always = yes
			}
			text = district_tec_hab_extraction_effect_orbitals
		}
		# Disabled production
		triggered_desc = {
			trigger = {
				has_planet_flag = energy_habitat
			}
			text = district_tec_hab_extraction_no_energy
		}
		triggered_desc = {
			trigger = {
				has_planet_flag = mining_habitat
			}
			text = district_tec_hab_extraction_no_minerals
		}
		triggered_desc = {
			trigger = {
				has_planet_flag = tec_food_habitat
			}
			text = district_tec_hab_extraction_no_food
		}
	# /
	# Modifiers
		# nothing
	# /

	# AI
		inline_script = districts/tec_aibait_habitat_district
	# /
}

district_hab_commercial = {
	base_buildtime = @hab_time
	is_capped_by_modifier = no

	show_on_uncolonized = {
		tec_uses_habitat_districts = yes
		has_planet_flag = commercial_habitat
		tec_is_arcology_habitat = no
	}

	potential = {
		always = no
		tec_uses_habitat_districts = yes
		has_planet_flag = commercial_habitat
		tec_is_arcology_habitat = no
	}

	allow = {
		always = no
		AND = {
			tec_ai_allow_trade_building = yes
		}
	}

	destroy_trigger = {
		OR = {
			AND = {
				tec_ai_allow_trade_building = no
			}
		}
	}

	conversion_ratio = 0.5
	inline_script = districts/convert_to/tec_trade_districts
	inline_script = districts/convert_to/tec_generator_districts

	resources = {
		category = planet_districts_hab_trade

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}
	}

	# Modifiers
		inline_script = {
			script = districts/tec_habitat_scaling_district
			district = district_hab_commercial
			type = no
		}
	# /
	# Effect Types
		inline_script = {
			script = districts/type/tec_trade
			scale = 1
			secondary_scale = 2
			trigger = "
				tec_is_upgraded_habitat = yes
			"
		}
	# /

	# Jobs
		# Regular
			#inline_script = {
			#	script = jobs/tec_clerk
			#	count = 1
			#	secondary_count = 1
			#	mult = value:tec_habitat_district_housing|BASE|1|
			#	display = with_desc
			#	trigger = ""
			#}
			inline_script = {
				script = jobs/tec_clerk
				count = 1
				secondary_count = 1
				mult = 1
				display = with_desc
				trigger = "
					owner = {
						is_gestalt = no
					}
				"
				default_job = clerk
			}
			inline_script = {
				script = jobs/tec_clerk
				count = 1
				secondary_count = 1
				mult = 1
				display = no_desc
				trigger = "
					owner = {
						is_gestalt = no
					}
					tec_is_fully_upgraded_habitat = yes
				"
				default_job = clerk
			}
			inline_script = {
				script = jobs/tec_trader
				count = 1
				mult = 1
				display = with_desc
				trigger = ""
				default_job = trader
			}
		# /

		# Trade Gestalts
			inline_script = {
				script = jobs/tec_job
				job = tec_trade_drone
				count = 1
				mult = 1
				display = with_desc
				trigger = "
					exists = owner
					owner = {
						tec_is_trade_gestalt = yes
					}
				"
			}
			inline_script = {
				script = jobs/tec_maintenance_drone
				count = 1
				mult = 1
				display = with_desc
				trigger = "
					owner = {
						tec_is_trade_gestalt = yes
					}
					tec_is_upgraded_habitat = yes
				"
			}
			inline_script = {
				script = jobs/tec_job
				job = tec_trade_drone
				count = 1
				mult = 1
				display = no_desc
				trigger = "
					exists = owner
					owner = {
						tec_is_trade_gestalt = yes
					}
					tec_is_fully_upgraded_habitat = yes
				"
			}
		# /
	# /
	triggered_desc = {
		trigger = {
			exists = owner
			planet = {
				NOT = { tec_is_upgraded_habitat = yes }
			}
			owner = {
				has_active_tradition = tr_mercantile_commercial_enterprise
			}
		}
		text = tec_mercantile_commercial_enterprise_needs_t2_hab
	}

	triggered_desc = {
		trigger = {
			planet = {
				NOT = { tec_is_upgraded_habitat = yes }
			}
			owner = {
				has_active_tradition = tr_mercantile_commercial_enterprise_gestalt
			}
		}
		text = tec_mercantile_commercial_enterprise_gestalt_needs_t2_hab
	}

	inline_script = districts/tec_aibait_habitat_district
}

district_tec_hab_unity = {	# Evolved
	icon = district_tec_elysium_coordination
	base_buildtime = @hab_time
	is_capped_by_modifier = no

	show_on_uncolonized = {
		always = no
		tec_uses_habitat_districts = yes
		# Specs
			has_planet_flag = tec_unity_habitat
			tec_is_arcology_habitat = no
		# /
	}

	potential = {
		always = no
		tec_uses_habitat_districts = yes
		# Specs
			has_planet_flag = tec_unity_habitat
			tec_is_arcology_habitat = no
		# /
	}

	conversion_ratio = 0.5
	inline_script = districts/convert_to/tec_research_districts
	inline_script = districts/convert_to/tec_industrial_districts

	resources = {
		category = planet_districts_hab

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}
	}

	# Standard
		inline_script = {
			script = districts/tec_habitat_scaling_district
			district = district_tec_hab_unity
			type = no
		}
	# /

	inline_script = {
		script = districts/type/tec_unity
		scale = 0.5
		secondary_scale = 0.5
		mult = owner.value:hab_void_dweller_jobs
		trigger = "
			tec_is_upgraded_habitat = yes
		"
	}

	# Jobs
	 # Regular
		inline_script = {
			script = jobs/tec_bureaucrat
			count = 1
			mult = 1
			display = with_desc
			trigger = ""
			default_job = bureaucrat
		}

		inline_script = {
			script = jobs/tec_bureaucrat
			count = 1
			mult = 1
			display = no_desc
			trigger = "
				tec_is_upgraded_habitat = yes
			"
			default_job = bureaucrat
		}
		inline_script = {
			script = jobs/tec_bureaucrat
			count = 1
			mult = 1
			display = no_desc
			trigger = "
				tec_is_fully_upgraded_habitat = yes
			"
			default_job = bureaucrat
		}
	 # /
	 # Hive
		inline_script = {
			script = jobs/tec_synapse
			count = 1
			mult = 1
			display = with_desc
			trigger = ""
		}
		inline_script = {
			script = jobs/tec_synapse
			count = 1
			mult = 1
			display = no_desc
			trigger = "
				tec_is_upgraded_habitat = yes
			"
		}
		inline_script = {
			script = jobs/tec_synapse
			count = 1
			mult = 1
			display = no_desc
			trigger = "
				tec_is_fully_upgraded_habitat = yes
			"
		}
	 # /
	 # Machine
		inline_script = {
			script = jobs/tec_coordinator
			count = 1
			mult = 1
			display = with_desc
			trigger = ""
		}
		inline_script = {
			script = jobs/tec_coordinator
			count = 1
			mult = 1
			display = no_desc
			trigger = "
				tec_is_upgraded_habitat = yes
			"
		}
		inline_script = {
			script = jobs/tec_coordinator
			count = 1
			mult = 1
			display = no_desc
			trigger = "
				tec_is_fully_upgraded_habitat = yes
			"
		}
	 # /
	# /

	inline_script = districts/tec_aibait_habitat_district
}

district_tec_hab_military = {	# Evolved
	icon = district_tec_elysium_shipyard
	base_buildtime = @hab_time
	is_capped_by_modifier = no

	show_on_uncolonized = {
		always = no
		tec_uses_habitat_districts = yes
		# Specs
			has_planet_flag = tec_military_habitat
			tec_is_arcology_habitat = no
		# /
	}

	potential = {
		always = no
		tec_uses_habitat_districts = yes
		# Specs
			has_planet_flag = tec_military_habitat
			tec_is_arcology_habitat = no
		# /
	}

	conversion_ratio = 0.5
	inline_script = districts/convert_to/tec_research_districts
	inline_script = districts/convert_to/tec_industrial_districts

	resources = {
		category = planet_districts_hab

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}
	}

	# Standard
		inline_script = {
			script = districts/tec_habitat_scaling_district
			district = district_tec_hab_unity
			type = no
		}
	# /

	# Jobs
		inline_script = {
			script = jobs/tec_soldier
			count = 1
			mult = 1
			display = with_desc
			trigger = ""
			default_job = soldier
		}

		inline_script = {
			script = jobs/tec_warrior_drone
			count = 1
			mult = 1
			display = with_desc
			trigger = ""
		}
		# Upgraded
		inline_script = {
			script = jobs/tec_soldier
			count = 1
			mult = 1
			display = no_desc
			trigger = "tec_is_upgraded_habitat = yes"
			default_job = soldier
		}
	
		inline_script = {
			script = jobs/tec_warrior_drone
			count = 1
			mult = 1
			display = no_desc
			trigger = "tec_is_upgraded_habitat = yes"
		}
		# Fully upgraded
		inline_script = {
			script = jobs/tec_naval_operator
			count = 1
			mult = 1
			display = with_desc
			trigger = "tec_is_fully_upgraded_habitat = yes"
			default_job = tec_naval_operator
		}
	# /

	inline_script = districts/tec_aibait_habitat_district
}
# --------------- Utility
district_hab_cultural = {
	base_buildtime = @hab_time
	is_capped_by_modifier = no
	exempt_from_ai_planet_specialization = yes

	desc = {
		trigger = {
			exists = owner
			owner = {
				tec_is_dystopian_empire = no
			}
		}
		text = district_hab_cultural_desc
	}
	desc = {
		trigger = {
			exists = owner
			owner = {
				tec_is_dystopian_empire = yes
			}
		}
		text = district_hab_cultural_dystopian_desc
	}

	show_on_uncolonized = {
		always = no
		tec_uses_habitat_districts = yes

		exists = from
		has_planet_flag = tec_leisure_habitat
		tec_is_arcology_habitat = no
	}

	potential = {
		always = no
		tec_uses_habitat_districts = yes

		exists = owner
		has_planet_flag = tec_leisure_habitat
		tec_is_arcology_habitat = no
	}

	allow = {
		tec_ai_allow_leisure_district = yes
	}

	destroy_trigger = {
		tec_ai_destroy_leisure_district = {
			amenities = 25
		}
	}

	conversion_ratio = 0.5
	inline_script = districts/convert_to/tec_leisure_districts
	inline_script = districts/convert_to/tec_generator_districts

	resources = {
		category = planet_districts_hab_leisure

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}
	}

	# Modifiers
		# Standard
			planet_modifier = {
				planet_housing_add = 2
			}
		# /
	# /

	# Jobs
		inline_script = {
			script = modifiers/tec_amenities
			count = 1
			mult = 1
			trigger = "
				owner = {
					is_gestalt = no
					tec_is_dystopian_empire = yes
				}
			"
			default = no
		}
		inline_script = {
			script = jobs/tec_enforcer
			count = 1
			mult = 1
			display = with_desc
			trigger = "
				owner = {
					is_gestalt = no
					tec_is_dystopian_empire = yes
				}
			"
		}

		inline_script = {
			script = jobs/tec_entertainer
			count = 2
			mult = 1
			display = with_desc
			trigger = "
				owner = {
					is_gestalt = no
					tec_is_dystopian_empire = no
				}
			"
			default_job = entertainer
		}

		inline_script = {
			script = jobs/tec_maintenance_drone
			count = 1
			mult = 1
			display = with_desc
			trigger = "
				owner = {
					is_machine_empire = yes
					has_valid_civic = civic_machine_servitor
				}
			"
		}

		inline_script = {
			script = jobs/tec_job
			job = bio_trophy
			count = 5
			mult = 1
			display = with_desc
			trigger = "
				exists = owner
				owner = {
					is_machine_empire = yes
					has_valid_civic = civic_machine_servitor
				}
			"
		}
		inline_script = {
			script = jobs/tec_maintenance_drone
			count = 3
			mult = 1
			display = with_desc
			trigger = "
				owner = {
					is_gestalt = yes
					NOT = {
						has_valid_civic = civic_machine_servitor
					}
				}
			"
		}
	# /

	inline_script = districts/tec_aibait_habitat_district
}

# --------------- Specs/misc
district_tec_hab_utility = {	# UP TO HERE!!!!
	base_buildtime = @hab_time
	is_capped_by_modifier = no

	show_on_uncolonized = {
		always = no
		tec_uses_habitat_districts = yes
		# Specs
			NOR = {
				# Research
				has_planet_flag = research_habitat
				has_planet_flag = tec_research_habitat
				# Trade
				has_planet_flag = commercial_habitat
				has_planet_flag = tec_trade_habitat
				# Unity
				has_planet_flag = tec_unity_habitat
				# Military
				has_planet_flag = tec_military_habitat
			}
			tec_is_arcology_habitat = no
		# /
	}

	potential = {
		always = no
		tec_uses_habitat_districts = yes
		# Specs
			NOR = {
				# Research
				has_planet_flag = research_habitat
				has_planet_flag = tec_research_habitat
				# Trade
				has_planet_flag = commercial_habitat
				has_planet_flag = tec_trade_habitat
				# Unity
				has_planet_flag = tec_unity_habitat
				# Military
				has_planet_flag = tec_military_habitat
			}
			tec_is_arcology_habitat = no
		# /
	}

	allow = {
		tec_allow_research_buildings_and_districts = yes
	}

	destroy_trigger = {
		#TO DO AI triggers
		#tec_ai_allow_farming_district = no
	}

	#They don't convert into anything - decision swaps a part if specced

	resources = {
		category = planet_districts_hab_research

		inline_script = {
			script = districts/resources/tec_district_resource_cost
			upkeep_trigger = "
				always = yes
			"
			cost = @tec_district_hab_cost
			upkeep = @tec_district_hab_upkeep_low
		}
		upkeep = {
			alloys = @tec_district_hab_upkeep_alloys
		}

		# Base production
		inline_script = {
			script = districts/resources/tec_hab_automation_research
			trigger = "
				always = yes
			"
			base = 0
			mult = 0.5
		}
	# /
	}

	# Text
		# Indications
		triggered_desc = {
			trigger = {
				always = yes
			}
			text = district_tec_hab_utility_effect_production
		}
		triggered_desc = {
			trigger = {
				always = yes
			}
			text = district_tec_hab_utility_effect_buildings
		}
		triggered_desc = {
			trigger = {
				always = yes
			}
			text = district_tec_hab_utility_effect_swap
		}
		triggered_desc = {
			trigger = {
				always = yes
			}
			text = district_tec_hab_utility_effect_orbitals
		}
	# /
	# Modifiers
		# Nothing
	# /

	# AI
		inline_script = districts/tec_aibait_habitat_district
	# /
}

#district_hab_religious

