# common\colony_types\zz_vanilla_colony_types.txt

#root = planet

@stickiness = 10
@stickiness_low = 5

###################################################
###		CAPITAL WORLD DESIGNATIONS				###
###################################################
col_capital = {
	icon = GFX_colony_type_capital

	potential = {
		is_capital = yes
		NAND = {
			exists = owner
			owner = {
				OR = {
					NOT = { tec_is_default_country = yes }
					is_gestalt = yes
				}
			}
		}
	}


	inline_script = colony_types/effects/tec_capital_spec_base

	triggered_planet_modifier = {
		planet_jobs_produces_mult = @tec_capital_designation_output_generic_bonus
	}

	inline_script = colony_types/effects/tec_adaptability_capital
	inline_script = colony_types/effects/tec_ringworld

	# Evolved
	inline_script = colony_types/effects/tec_land_of_plenty_capital
	# /

	weight_modifier = {
		base = 1000
	}
}

col_capital_foundry = {
	icon = GFX_colony_type_capital_foundry

	potential = {
		is_capital = yes
		owner = {
			AND = {
				tec_is_default_country = yes

				OR = {
					is_ai = no
					AND = {
						years_passed > 25
						num_owned_planets >= 5
					}
				}
			}
		}
		if = {
			limit = {
				owner = {
					is_ai = yes
				}
			}
			owner = { # to not cause swings
				any_owned_planet = {
					has_factory_designation = yes
				}
			}
		}
		tec_ai_allow_designation_type = { type = foundry }
	}

	inline_script = colony_types/effects/tec_capital_spec_base
	inline_script = {
		script = colony_types/effects/tec_capital_spec_modifier
		modifier = planet_metallurgists_produces_mult
	}


	inline_script = colony_types/effects/tec_adaptability_capital
	inline_script = colony_types/effects/tec_ringworld

	# Evolved
	inline_script = colony_types/effects/tec_land_of_plenty_capital
	# /

	inline_script = colony_types/tec_foundry_conversion
	custom_tooltip = col_foundry_custom

	weight_modifier = {
		base = 0
	}
}

col_capital_factory = {
	icon = GFX_colony_type_capital_factory

	potential = {
		is_capital = yes
		owner = {
			AND = {
				tec_is_default_country = yes
				country_uses_consumer_goods = yes
				is_ai = no # block ai from being dumb and destroying their alloys
			}
		}

		tec_ai_allow_designation_type = { type = factory }
	}


	inline_script = colony_types/effects/tec_capital_spec_base
	inline_script = {
		script = colony_types/effects/tec_capital_spec_modifier
		modifier = planet_artisans_produces_mult
	}


	inline_script = colony_types/effects/tec_adaptability_capital
	inline_script = colony_types/effects/tec_ringworld

	# Evolved
		inline_script = colony_types/effects/tec_land_of_plenty_capital
	# /



	inline_script = colony_types/tec_factory_conversion
	custom_tooltip = col_factory_custom

	weight_modifier = {
		base = 0
	}
}

col_capital_trade = {
	icon = GFX_colony_type_capital_trade

	potential = {
		is_capital = yes
		owner = {
			AND = {
				tec_is_default_country = yes
				tec_uses_trade_value = yes
				OR = {
					is_ai = no
					AND = {
						years_passed > 25
						num_owned_planets >= 5
					}
				}
			}
		}
		tec_ai_allow_designation_type = { type = trade }
	}

	inline_script = colony_types/effects/tec_capital_spec_base
	inline_script = {
		script = colony_types/effects/tec_capital_spec_modifier
		modifier = trade_value_mult
	}

	inline_script = colony_types/effects/tec_adaptability_capital
	inline_script = colony_types/effects/tec_ringworld

	# Evolved
	inline_script = colony_types/effects/tec_land_of_plenty_capital
	# /

	weight_modifier = {
		base = 0
	}
}

col_capital_extraction = {
	icon = GFX_colony_type_capital_extraction

	potential = {
		is_capital = yes
		owner = {
			AND = {
				tec_is_default_country = yes

				OR = {
					is_ai = no
					AND = {
						years_passed > 25
						num_owned_planets >= 5
					}
				}
			}
		}
		tec_ai_allow_designation_type = { type = rural }

		if = {
			limit = {
				owner = {
					is_ai = yes
				}
			}
			check_variable_arithmetic = {
				which = value:tec_ai_count_productive_worker_pops
				value > value:tec_ai_count_non_worker_pops
			}
		}
	}


	inline_script = colony_types/effects/tec_capital_spec_base
	inline_script = {
		script = colony_types/effects/tec_capital_spec_modifier
		modifier = planet_jobs_worker_produces_mult
	}

	inline_script = colony_types/effects/tec_adaptability_capital
	inline_script = colony_types/effects/tec_ringworld

	# Evolved
	inline_script = colony_types/effects/tec_land_of_plenty_capital
	# /

	weight_modifier = {
		base = 1000
	}
}

# Capital Planet - Hive Mind
col_capital_hive = {
	icon = GFX_colony_type_capital

	potential = {
		is_capital = yes
		exists = owner
		owner = {
			tec_is_default_country = yes
			is_hive_empire = yes
		}
	}


	inline_script = colony_types/effects/tec_capital_spec_base

	triggered_planet_modifier = {
		planet_jobs_produces_mult = @tec_capital_designation_output_generic_bonus
	}

	inline_script = colony_types/effects/tec_adaptability_capital
	inline_script = colony_types/effects/tec_ringworld

	weight_modifier = {
		base = 1000
	}
}

# Capital Planet - Machine Empire
col_capital_machine = {
	icon = GFX_colony_type_capital

	potential = {
		is_capital = yes
		exists = owner
		owner = {
			tec_is_default_country = yes
			is_machine_empire = yes
		}
	}

	inline_script = colony_types/effects/tec_capital_spec_base

	triggered_planet_modifier = {
		planet_jobs_produces_mult = @tec_capital_designation_output_generic_machine_bonus
	}

	inline_script = colony_types/effects/tec_adaptability_capital
	inline_script = colony_types/effects/tec_ringworld

	weight_modifier = {
		base = 1000
	}
}

# Colony
col_default = {
	icon = GFX_colony_type_normal_colony

	potential = {
		exists = owner
		owner = { is_regular_empire = yes }
		has_upgraded_capital = no
		tec_blocks_regular_designations = no
		num_sapient_pops < 5
		is_capital = no
	}

	planet_modifier = {
		planet_stability_add = @tec_capital_designation_and_colony_stability
		planet_amenities_add = @tec_capital_designation_and_colony_amenities
		planet_resettlement_unemployed_destination_mult = @tec_colony_designation_resettlement
		pop_happiness = 0.10
	}

	inline_script = colony_types/effects/tec_adaptability_colony
	inline_script = colony_types/effects/tec_ringworld

	# Evolved
		inline_script = colony_types/effects/tec_land_of_plenty_generic
	# /

	weight_modifier = {
		base = 100
	}
}

# Colony Machine
col_default_machine = {
	icon = GFX_colony_type_normal_colony

	potential = {
		exists = owner
		owner = { is_machine_empire = yes }
		has_upgraded_capital = no
		tec_blocks_regular_designations = no
		num_sapient_pops < 5 # Non-sapient machines are included
		is_capital = no
	}

	planet_modifier = {
		planet_stability_add = @tec_capital_designation_and_colony_stability
		planet_amenities_no_happiness_add = @tec_capital_designation_and_colony_amenities
		planet_resettlement_unemployed_destination_mult = @tec_colony_designation_resettlement
	}

	inline_script = colony_types/effects/tec_ringworld

	weight_modifier = {
		base = 100
	}
}

# Urban Planet
col_city = {
	icon = GFX_colony_type_urban

	potential = {
		exists = owner
		owner = { is_regular_empire = yes }
		tec_blocks_urban_designations = no
		tec_blocks_regular_designations = no
		is_capital = no
	}

	planet_modifier = {
		trade_value_mult = @tec_regular_designation_urban_trade
		planet_structures_upkeep_mult = @tec_regular_designation_urban_upkeep
		planet_building_build_speed_mult = @tec_regular_designation_urban_speed
		planet_decision_enact_speed_mult = @tec_regular_designation_urban_speed
	}

	triggered_planet_modifier = {
		potential = {
			tec_is_ecoworld = no
		}
		modifier = {
			planet_district_city_build_speed_mult = @tec_designation_build_speed
		}
	}

	triggered_planet_modifier = {
		potential = {
			tec_is_ecoworld = yes
		}
		modifier = {
			planet_district_tec_eco_arcology_build_speed_mult =@tec_designation_build_speed
		}
	}

	inline_script = colony_types/effects/tec_adaptability_trade

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_city
		}
		add = value:housing_districts_value
		add = value:tec_trader_jobs_value
	}
}

# Hive Planet/Nest planet
col_hive = {
	icon = GFX_colony_type_urban

	potential = {
		exists = owner
		owner = { is_hive_empire = yes }
		tec_blocks_urban_designations = no
		is_special_colony_type = no
		is_capital = no
	}

	planet_modifier = {
		planet_jobs_complex_drone_produces_mult = @tec_regular_designation_urban_output
		planet_structures_upkeep_mult = @tec_regular_designation_urban_upkeep
		planet_building_build_speed_mult = @tec_regular_designation_urban_speed
		planet_decision_enact_speed_mult = @tec_regular_designation_urban_speed
	}

	inline_script = colony_types/effects/tec_adaptability_gestalt

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_hive
		}
		add = value:housing_districts_value|FACTOR|2|
	}
}

# Nexus Planet
col_nexus = {
	icon = GFX_colony_type_urban

	potential = {
		exists = owner
		owner = { is_machine_empire = yes }
		tec_blocks_urban_designations = no
		tec_blocks_regular_designations = no
		is_capital = no
	}

	planet_modifier = {
		planet_jobs_complex_drone_produces_mult = @tec_regular_designation_urban_output
		planet_structures_upkeep_mult = @tec_regular_designation_urban_upkeep
		planet_building_build_speed_mult = @tec_regular_designation_urban_speed
		planet_decision_enact_speed_mult = @tec_regular_designation_urban_speed
	}

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_nexus
		}
		add = value:housing_districts_value|FACTOR|2|
		#modifier = {
		#add = 5
		#modifier = {
		#	add = 5
		#	check_variable_arithmetic = {
		#		which = value:housing_districts_value
		#		value >= @built_districts_high_threshold
		#	}
		#}
		#}
	}
}

# Mining Planet
col_mining = {
	icon = GFX_colony_type_mine

	potential = {
		exists = owner
		tec_blocks_rural_designations = no
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = mining }
	}

	planet_modifier = {
		planet_miners_produces_mult = @tec_regular_designation_menial_output
		planet_building_tec_stripmine_1_build_speed_mult = @tec_designation_build_speed
	}

	inline_script = {
		script = modifiers/tec_rural_mining_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	inline_script = colony_types/effects/tec_adaptability_mining
	inline_script = colony_types/effects/tec_resolution_greatergood
	# Evolved
		inline_script = colony_types/effects/tec_land_of_plenty_mining

		inline_script = colony_types/effects/tec_planets_t2a_mining
	# /

	weight_modifier = {
		modifier = {
			add = @stickiness_low
			has_designation = col_mining
		}
		add = value:mining_combined_value|FACTOR|2|CACHED|yes|

		complex_trigger_modifier = {
			trigger = num_free_districts
			parameters = {
				type = district_mining
			}
			mode = add
		}
		modifier = {
			add = 10
			tec_has_mineral_processing_buildings = yes
		}
		modifier = {
			add = 5
			OR = {
				has_modifier = asteroid_belt
				has_modifier = mineral_rich
				has_modifier = ultra_rich
				has_modifier = extensive_moon_system
				has_modifier = asteroid_impacts
				has_modifier = carbon_world
			}
		}
		modifier = {
			add = -10
			has_modifier = mineral_poor
		}
	}
}

# Farming Planet
col_farming = {
	icon = GFX_colony_type_farm

	potential = {
		exists = owner
		owner = { country_uses_food = yes }
		NOR = {
			uses_district_set = pdplanethab
			uses_district_set = machine_world
		}
		tec_blocks_rural_designations = no
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = farming }
	}

	planet_modifier = {
		planet_farmers_produces_mult = @tec_regular_designation_menial_output
		planet_building_hydroponics_farm_build_speed_mult = @tec_designation_build_speed
	}

	inline_script = {
		script = modifiers/tec_rural_farming_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	inline_script = colony_types/effects/tec_adaptability_farming
	inline_script = colony_types/effects/tec_resolution_greatergood
	# Evolved
		inline_script = colony_types/effects/tec_land_of_plenty_farming
		inline_script = colony_types/effects/tec_planets_t2a_farming
	# /

	weight_modifier = {
		modifier = {
			add = @stickiness_low
			has_designation = col_farming
		}
		add = value:farming_combined_value|FACTOR|2|CACHED|yes|
		complex_trigger_modifier = {
			trigger = num_free_districts
			parameters = {
				type = district_farming
			}
			mode = add
		}
		#complex_trigger_modifier = {	# Caelum
		#	trigger = num_buildings
		#	parameters = {
		#		type = building_hydroponics_farm
		#	}
		#	mode = add
		#	mult = 2
		#}
		modifier = {
			add = 10
			tec_has_food_processing_buildings = yes
		}
		modifier = {
			add = 5
			has_building = building_baol_organic_plant
		}
		modifier = {
			add = 5
			has_modifier = lush_planet
		}
		modifier = {
			add = -10
			OR = {
				has_modifier = bleak_planet
				has_modifier = unbalanced_ecosystem
				has_modifier = irradiated_planet
			}
		}
	}
}

# Generator Planet
col_generator = {
	icon = GFX_colony_type_generator

	potential = {
		exists = owner
		NOR = {
			AND = {
				owner = {
					tec_uses_trade_value = yes
				}
				uses_district_set = shattered_ring_world
			}
		}
		tec_blocks_rural_designations = no
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = generator }
	}

	planet_modifier = {
		planet_technician_produces_mult = @tec_regular_designation_menial_output
		planet_building_tec_energrid_1_build_speed_mult = @tec_designation_build_speed
	}

	inline_script = colony_types/effects/tec_machine_anglers_generator

	inline_script = {
		script = modifiers/tec_rural_generator_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	inline_script = colony_types/effects/tec_adaptability_generator
	inline_script = colony_types/effects/tec_resolution_greatergood

	# Evolved
		inline_script = colony_types/effects/tec_land_of_plenty_generator
		inline_script = colony_types/effects/tec_planets_t2a_generator
	# /

	weight_modifier = {
		modifier = {
			add = @stickiness_low
			has_designation = col_generator
		}
		add = value:generator_combined_value|FACTOR|2|CACHED|yes|

		complex_trigger_modifier = {
			trigger = num_free_districts
			parameters = {
				type = district_generator
			}
			mode = add
		}
		modifier = {
			add = 10
			tec_has_energy_processing_buildings = yes
		}
		modifier = {
			add = 2
			tec_has_betharian_deposit = yes
		}
		modifier = {
			add = 3
			tec_has_betharian_deposit = yes
			owner = { has_technology = tech_mine_betharian }
		}
		modifier = {
			add = 5
			OR = {
				has_modifier = hazardous_weather
				has_modifier = strong_magnetic_field
			}
		}
		modifier = {
			add = -10
			has_modifier = energy_poor
		}
	}
}

# Rural Planet
col_rural = {
	icon = GFX_colony_type_rural

	potential = {
		exists = owner
		owner = { is_gestalt = no }
		tec_blocks_rural_designations = no
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = rural }
	}

	planet_modifier = {
		planet_jobs_worker_produces_mult = @tec_regular_designation_output
	}

	inline_script = {
		script = modifiers/tec_rural_generator_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	inline_script = {
		script = modifiers/tec_rural_mining_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}


	inline_script = {
		script = modifiers/tec_rural_farming_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	inline_script = colony_types/effects/tec_adaptability_rural
	# Evolved
		inline_script = colony_types/effects/tec_land_of_plenty_generic
	# /

	weight_modifier = {
		modifier = {
			add = @stickiness_low
			has_designation = col_rural
		}
		modifier = {
			add = 5
			OR = {
				tec_has_energy_processing_buildings = yes
				tec_has_mineral_processing_buildings = yes
				tec_has_food_processing_buildings = yes
			}
		}
		modifier = {
			add = 5
			has_building = building_baol_organic_plant
		}
		modifier = {
			add = 2
			tec_has_betharian_deposit = yes
		}
		modifier = {
			add = 3
			tec_has_betharian_deposit = yes
			owner = { has_technology = tech_mine_betharian }
		}
	}
}

# Rural Planet - Gestalt
col_rural_gestalt = {
	icon = GFX_colony_type_fringe

	potential = {
		exists = owner
		owner = { is_gestalt = yes }
		tec_blocks_rural_designations = no
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = rural }
	}

	planet_modifier = {
		planet_jobs_worker_produces_mult = @tec_regular_designation_output
	}

	inline_script = {
		script = modifiers/tec_rural_generator_district_build_speed
		value = 0.25
		mult = 1
		trigger = ""
	}

	inline_script = {
		script = modifiers/tec_rural_mining_district_build_speed
		value = 0.25
		mult = 1
		trigger = ""
	}


	inline_script = {
		script = modifiers/tec_rural_farming_district_build_speed
		value = 0.25
		mult = 1
		trigger = ""
	}

	inline_script = colony_types/effects/tec_adaptability_rural

	weight_modifier = {
		modifier = {
			add = @stickiness_low
			has_designation = col_rural_gestalt
		}
		modifier = {
			add = 5
			OR = {
				tec_has_energy_processing_buildings = yes
				tec_has_mineral_processing_buildings = yes
				tec_has_food_processing_buildings = yes
			}
		}
		modifier = {
			add = 5
			has_building = building_baol_organic_plant
		}
		modifier = {
			add = 2
			tec_has_betharian_deposit = yes
		}
		modifier = {
			add = 3
			tec_has_betharian_deposit = yes
			owner = { has_technology = tech_mine_betharian }
		}
	}
}

col_industrial = {
	icon = GFX_colony_type_industrial

	potential = {
		exists = owner
		owner = { country_uses_consumer_goods = yes }
		tec_blocks_industrial_designations = no
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = industrial }
	}

	planet_modifier = {
		planet_artisans_upkeep_mult = @tec_regular_designation_split_upkeep
		planet_metallurgists_upkeep_mult = @tec_regular_designation_split_upkeep
		planet_artisans_produces_mult = @tec_regular_designation_split_output
		planet_metallurgists_produces_mult = @tec_regular_designation_split_output
	}

	triggered_planet_modifier = {
		potential = {
			tec_is_ecoworld = no
		}
		modifier = {
			planet_district_industrial_build_speed_mult = @tec_designation_build_speed
		}
	}

	inline_script = {
		script = modifiers/tec_rural_mining_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = "tec_is_ecoworld = yes"
	}

	inline_script = {
		script = modifiers/tec_rural_farming_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = "tec_is_ecoworld = yes"
	}

	inline_script = colony_types/effects/tec_adaptability_industrial
	inline_script = colony_types/effects/tec_ringworld
	inline_script = colony_types/effects/tec_resolution_industry_industrial

	weight_modifier = {
		modifier = {
			add = @stickiness_low
			has_designation = col_industrial
		}
		add = value:industrial_districts_value|FACTOR|3|

		modifier = {
			add = 15
			AND = {
				tec_has_alloy_buildings = yes
				tec_has_cg_buildings = yes
			}
		}
		modifier = {
			set = -100
			exists = owner
			owner = { is_ai = yes }
			check_variable_arithmetic = {
				which = value:industrial_districts_value
				value <= 0
			}
		}
	}

}

# Forge Planet
col_foundry = {
	icon = GFX_colony_type_foundry

	potential = {
		exists = owner
		tec_blocks_industrial_designations = no
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = foundry }
	}
	
	inline_script = colony_types/tec_foundry_conversion
	custom_tooltip = col_foundry_custom

	planet_modifier = {
		planet_metallurgists_upkeep_mult = @tec_regular_designation_upkeep
		planet_metallurgists_produces_mult = @tec_regular_designation_output
	}


	triggered_planet_modifier = {
		potential = {
			tec_is_ecoworld = no
		}
		modifier = {
			planet_district_industrial_build_speed_mult = @tec_designation_build_speed
		}
	}

	inline_script = {
		script = modifiers/tec_rural_mining_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = "tec_is_ecoworld = yes"
	}

	inline_script = colony_types/effects/tec_adaptability_foundry
	inline_script = colony_types/effects/tec_ringworld
	inline_script = colony_types/effects/tec_resolution_industry_foundry

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_foundry
		}
		add = value:industrial_districts_value|FACTOR|3|ALLOY_ONLY|yes|

		modifier = {
			add = 10
			tec_has_alloy_buildings = yes
		}
		modifier = {
			add = -5
			tec_has_cg_buildings = yes
		}
		modifier = {
			add = 11
			has_designation = col_factory
			exists = owner
			owner = {
				has_monthly_income = { resource = alloys value < 0 }
				has_monthly_income = { resource = consumer_goods value >= 0 }
			}
		}
		modifier = {
			set = -100
			exists = owner
			owner = { is_ai = yes }
			check_variable_arithmetic = {
				which = value:industrial_districts_value|ALLOY_ONLY|yes|
				value <= 0
			}
		}
	}
}

# Factory Planet
col_factory = {
	icon = GFX_colony_type_factory

	potential = {
		exists = owner
		owner = { country_uses_consumer_goods = yes }
		tec_blocks_industrial_designations = no
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = factory }
	}

	inline_script = colony_types/tec_factory_conversion
	custom_tooltip = col_factory_custom
	planet_modifier = {
		planet_artisans_upkeep_mult = @tec_regular_designation_upkeep
		planet_artisans_produces_mult = @tec_regular_designation_output
	}


	triggered_planet_modifier = {
		potential = {
			tec_is_ecoworld = no
		}
		modifier = {
			planet_district_industrial_build_speed_mult = @tec_designation_build_speed
		}
	}

	inline_script = {
		script = modifiers/tec_rural_farming_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = "tec_is_ecoworld = yes"
	}

	inline_script = colony_types/effects/tec_adaptability_factory
	inline_script = colony_types/effects/tec_resolution_industry_factory

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_factory
		}
		add = value:industrial_districts_value|FACTOR|3|CG_ONLY|yes|

		modifier = {
			add = 10
			tec_has_cg_buildings = yes
		}
		modifier = {
			add = -5
			tec_has_alloy_buildings = yes
		}
		modifier = {
			add = 11
			has_designation = col_foundry
			exists = owner
			owner = {
				has_monthly_income = { resource = consumer_goods value < 0 }
				has_monthly_income = { resource = alloys value >= 0 }
			}
		}
		modifier = {
			set = -100
			exists = owner
			owner = { is_ai = yes }
			check_variable_arithmetic = {
				which = value:industrial_districts_value|CG_ONLY|yes|
				value <= 0
			}
		}
	}
}

# Administrative Center
col_bureau = {
	icon = GFX_colony_type_bureaucratic

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			tec_country_uses_priests_and_temples = no
		}
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = unity }
	}

	planet_modifier = {
		planet_administrators_produces_mult = @tec_regular_designation_output
		planet_administrators_upkeep_mult = @tec_regular_designation_upkeep
	}

	inline_script = colony_types/effects/tec_adaptability_unity
	inline_script = colony_types/effects/tec_ringworld
	inline_script = colony_types/effects/tec_all_the_priests_1

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_bureau
		}
		add = value:unity_combined_value|FACTOR|2|CACHED|yes|
	}
}

col_bureau_spiritualist = {
	icon = GFX_colony_type_bureaucratic

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			tec_country_uses_priests_and_temples = yes
		}
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = unity }
	}

	planet_modifier = {
		planet_administrators_produces_mult = @tec_regular_designation_output
		planet_administrators_upkeep_mult = @tec_regular_designation_upkeep
	}

	inline_script = colony_types/effects/tec_adaptability_unity
	inline_script = colony_types/effects/tec_ringworld
	inline_script = colony_types/effects/tec_all_the_priests_1

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_bureau_spiritualist
		}
		add = value:unity_combined_value|FACTOR|2|CACHED|yes|
	}
}

col_bureau_hive = {
	icon = GFX_colony_type_bureaucratic

	potential = {
		exists = owner
		owner = { is_hive_empire = yes }
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = unity }
	}

	planet_modifier = {
		planet_administrators_produces_mult = @tec_regular_designation_output
		planet_administrators_upkeep_mult = @tec_regular_designation_upkeep
	}

	inline_script = colony_types/effects/tec_adaptability_unity
	inline_script = colony_types/effects/tec_ringworld

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_bureau_hive
		}
		add = value:unity_combined_value|FACTOR|2|CACHED|yes|
	}
}

col_bureau_machine = {
	icon = GFX_colony_type_bureaucratic

	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes
			NOT = { has_valid_civic = civic_machine_servitor }
		}
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = unity }
	}

	planet_modifier = {
		planet_administrators_produces_mult = @tec_regular_designation_output
		planet_administrators_upkeep_mult = @tec_regular_designation_upkeep
	}

	inline_script = colony_types/effects/tec_adaptability_unity
	inline_script = colony_types/effects/tec_ringworld

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_bureau_machine
		}
		add = value:unity_combined_value|FACTOR|2|CACHED|yes|
	}
}

# Refinery Planet
col_refinery = {
	icon = GFX_colony_type_refinery

	potential = {
		exists = owner
		tec_blocks_non_industrial_designations = no
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = refinery }
	}

	planet_modifier = {
		planet_refiners_produces_mult = @tec_regular_designation_refinery_output
		planet_translucers_produces_mult = @tec_regular_designation_refinery_output
		planet_chemists_produces_mult = @tec_regular_designation_refinery_output
		planet_sr_miners_produces_mult = @tec_regular_designation_refinery_output
	}

	inline_script = colony_types/effects/tec_adaptability_refinery
	inline_script = colony_types/effects/tec_ringworld
	inline_script = colony_types/effects/tec_resolution_industry_refinery

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_refinery
		}
		add = value:refinery_combined_value|FACTOR|2|CACHED|yes|
	}
}

# Research Planet
col_research = {
	icon = GFX_colony_type_research

	potential = {
		exists = owner
		inline_script = {
			script = mod_support/tec_pd_present
			code = "
				tec_is_pd_nonconventional_nonresearch_world = no
			"
		}
		tec_blocks_non_industrial_designations = no
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = research }
	}

	planet_modifier = {
		planet_researchers_produces_mult = @tec_regular_designation_output
		planet_researchers_upkeep_mult = @tec_regular_designation_upkeep
		planet_building_research_lab_1_build_speed_mult = @tec_designation_build_speed
	}

	inline_script = {
		script = modifiers/tec_rural_generator_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = "tec_is_ecoworld = yes"
	}

	inline_script = colony_types/effects/tec_adaptability_research

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_research
		}
		add = value:research_combined_value|FACTOR|2|CACHED|yes|

		modifier = {
			add = 5
			OR = {
				has_modifier = wild_storms
				has_modifier = titanic_life
				has_modifier = atmospheric_hallucinogen
				has_modifier = liquid_sands
				has_modifier = dangerous_wildlife
				has_modifier = unstable_tectonics
				has_modifier = society_animal_life
				has_modifier = tamed_nanite_swarm_modifier
				has_deposit = d_central_spire
				has_deposit = d_former_relic_world
			}
		}
	}
}

# Fortress Planet
col_fortress = {
	icon = GFX_colony_type_fortress

	potential = {
		exists = owner
		tec_blocks_non_industrial_designations = no
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = fortress }
	}

	planet_modifier = {
		planet_orbital_bombardment_damage = @tec_fortress_designation_bombardment
		army_damage_mult = @tec_fortress_designation_damage
		planet_army_build_speed_mult = @tec_fortress_designation_speed
	}

	inline_script = {
		script = modifiers/tec_army_building_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	inline_script = {
		script = modifiers/tec_naval_building_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	inline_script = colony_types/effects/tec_adaptability_fortress

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_fortress
		}
		add = value:military_combined_value|FACTOR|2|CACHED|yes|
	}
}


# Habitat
col_habitat = {	# tweaked
	icon = GFX_colony_type_habitat

	potential = {
		exists = owner
		tec_uses_habitat_districts = yes
		OR = {
			num_sapient_pops < 5
			owner = { is_ai = yes }
		}

		is_capital = no
	}

	planet_modifier = {
		planet_stability_add = @tec_capital_designation_and_colony_stability
		planet_amenities_add = @tec_capital_designation_and_colony_amenities
	}

	inline_script = colony_types/effects/tec_adaptability_capital

	weight_modifier = {
		base = 4
	}
}

col_habitat_energy = {	# tweaked
	icon = GFX_colony_type_habitat_energy

	potential = {
		tec_uses_habitat_districts = yes
		exists = owner
		check_modifier_value = {
			modifier = district_hab_energy_max
			value > 0
		}
		is_capital = no
		tec_ai_allow_designation_type = { type = generator }
	}

	planet_modifier = {
		planet_technician_produces_mult = @tec_habitat_designation_menial_output
		planet_building_tec_energrid_1_build_speed_mult = @tec_designation_build_speed
	}


	triggered_planet_modifier = {
		potential = {
			tec_is_arcology_habitat = no
		}
		modifier = {
			planet_district_hab_energy_build_speed_mult = @tec_designation_build_speed
		}
	}

	triggered_planet_modifier = {
		potential = {
			tec_is_arcology_habitat = yes
			owner = { is_gestalt = yes }
		}
		modifier = {
			planet_district_tec_hab_arcology_maintenance_build_speed_mult = @tec_designation_build_speed
		}
	}

	inline_script = colony_types/effects/tec_adaptability_generator
	inline_script = colony_types/effects/tec_resolution_greatergood
	# Evolved
		inline_script = colony_types/effects/tec_land_of_plenty_generator
		inline_script = colony_types/effects/tec_planets_t2a_generator
	# /

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_energy
		}
		modifier = {
			add = 5
			check_modifier_value = {
				modifier = district_hab_energy_max
				value > 0
			}
		}
		modifier = {
			add = 10
			tec_has_energy_processing_buildings = yes
		}
		add = value:generator_combined_value|FACTOR|2|CACHED|yes|
	}
}

col_habitat_mining = {		# tweaked
	icon = GFX_colony_type_habitat_mining

	potential = {
		tec_uses_habitat_districts = yes
		tec_is_arcology_habitat = no
		check_modifier_value = {
			modifier = district_hab_mining_max
			value > 0
		}
		is_capital = no
		tec_ai_allow_designation_type = { type = mining }
	}

	planet_modifier = {
		planet_miners_produces_mult = @tec_habitat_designation_menial_output
		planet_district_hab_mining_build_speed_mult = @tec_designation_build_speed
		planet_building_tec_stripmine_1_build_speed_mult = @tec_designation_build_speed
	}


	inline_script = colony_types/effects/tec_adaptability_mining
	inline_script = colony_types/effects/tec_resolution_greatergood
	# Evolved
		inline_script = colony_types/effects/tec_land_of_plenty_mining
		inline_script = colony_types/effects/tec_planets_t2a_mining
	# /
	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_mining
		}
		modifier = {
			add = 5
			check_modifier_value = {
				modifier = district_hab_mining_max
				value > 0
			}
		}
		modifier = {
			add = 10
			tec_has_mineral_processing_buildings = yes
		}
		add = value:mining_combined_value|FACTOR|2|CACHED|yes|
	}
}

# Habitat Farming
col_habitat_farming = { # Mine better - disabled
	icon = GFX_colony_type_habitat_farming

	potential = {
		always = no
		uses_district_set = habitat
		tec_is_arcology_habitat = no
		is_capital = no
		tec_ai_allow_designation_type = { type = farming }
	}
	#custom_tooltip = col_habitat_farming_custom
	planet_modifier = {
		planet_farmers_produces_mult = @tec_habitat_designation_menial_output
		planet_building_hydroponics_farm_build_speed_mult = @tec_designation_build_speed
	}

	inline_script = colony_types/effects/tec_adaptability_farming
	inline_script = colony_types/effects/tec_resolution_greatergood

	# Evolved
		inline_script = colony_types/effects/tec_land_of_plenty_farming
		inline_script = colony_types/effects/tec_planets_t2a_farming
	# /

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_farming
		}

		modifier = {
			add = 5
			has_planet_flag = tec_food_habitat
		}
		modifier = {
			add = 10
			tec_has_food_processing_buildings = yes
		}
		modifier = {
			add = 5
			has_building = building_baol_organic_plant
		}
		add = value:farming_combined_value|FACTOR|2|CACHED|yes|
	}
}

col_habitat_gestalt_farming = {	# Mine better - disabled
	icon = GFX_colony_type_habitat_farming

	potential = {
		always = no
		uses_district_set = habitat
		exists = owner
		owner = {
			is_gestalt = yes
		}
		tec_is_arcology_habitat = no
		is_capital = no
		tec_ai_allow_designation_type = { type = farming }
	}
	custom_tooltip = col_habitat_farming_gestalt_custom
	planet_modifier = {
		planet_farmers_produces_mult = @tec_habitat_designation_menial_output
		planet_building_hydroponics_farm_build_speed_mult = @tec_designation_build_speed
	}

	inline_script = colony_types/effects/tec_adaptability_farming
	inline_script = colony_types/effects/tec_resolution_greatergood

	# Evolved
		inline_script = colony_types/effects/tec_land_of_plenty_farming
		inline_script = colony_types/effects/tec_planets_t2a_farming
	# /

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_gestalt_farming
		}

		modifier = {
			add = 5
			has_planet_flag = tec_food_habitat
		}
		modifier = {
			add = 10
			tec_has_food_processing_buildings = yes
		}
		modifier = {
			add = 5
			has_building = building_baol_organic_plant
		}
		add = value:farming_combined_value|FACTOR|2|CACHED|yes|
	}
}

col_habitat_trade = {	# tweaked
	icon = GFX_colony_type_habitat_trade

	potential = {
		tec_uses_habitat_districts = yes
		exists = owner
		owner = {
			tec_uses_trade_value = yes
		}
		is_capital = no
		tec_ai_allow_designation_type = { type = trade }
	}

	planet_modifier = {
		trade_value_mult = @tec_habitat_designation_urban_trade
	}

	triggered_planet_modifier = {
		potential = {
			tec_is_arcology_habitat = no
		}
		modifier = {
			planet_district_hab_commercial_build_speed_mult = @tec_designation_build_speed
		}
	}

	triggered_planet_modifier = {
		potential = {
			tec_is_arcology_habitat = yes
		}
		modifier = {
			planet_district_tec_hab_arcology_trade_build_speed_mult = @tec_designation_build_speed
		}
	}

	inline_script = colony_types/effects/tec_adaptability_trade

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_trade
		}
		add = value:tec_trader_jobs_value
	}
}

col_habitat_research = {	# tweaked
	icon = GFX_colony_type_habitat_research

	potential = {
		tec_uses_habitat_districts = yes
		exists = owner
		#OR = {	# Research districts are gone
		#	check_modifier_value = {
		#		modifier = district_hab_science_max
		#		value > 0
		#	}
		#	has_planet_flag = tec_civil_habitat
		#}
		NOT = { has_planet_flag = tec_industrial_habitat }
		is_capital = no
		tec_ai_allow_designation_type = { type = research }
	}

	planet_modifier = {
		planet_researchers_produces_mult = @tec_habitat_designation_output
	}

	triggered_planet_modifier = {
		potential = {
			tec_is_arcology_habitat = no
		}
		modifier = {
			planet_district_hab_science_build_speed_mult = @tec_designation_build_speed
		}
	}

	triggered_planet_modifier = {
		potential = {
			tec_is_arcology_habitat = yes
		}
		modifier = {
			planet_district_tec_hab_arcology_research_build_speed_mult = @tec_designation_build_speed
		}
	}

	inline_script = colony_types/effects/tec_adaptability_research

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_research
		}

		modifier = {
			add = 5
			check_modifier_value = {
				modifier = district_hab_science_max
				value > 0
			}
		}
		add = value:research_combined_value|FACTOR|2|CACHED|yes|
	}
}

col_habitat_fortress = {	# tweaked
	icon = GFX_colony_type_habitat_fortress

	potential = {
		tec_uses_habitat_districts = yes
		is_capital = no
		tec_ai_allow_designation_type = { type = fortress }
	}

	planet_modifier = {
		planet_orbital_bombardment_damage = -0.10
		army_damage_mult = 0.20
		planet_army_build_speed_mult = 0.10
	}


	inline_script = {
		script = modifiers/tec_army_building_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	inline_script = {
		script = modifiers/tec_naval_building_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	inline_script = colony_types/effects/tec_adaptability_fortress
	inline_script = colony_types/effects/tec_knights_order_fortress

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_fortress
		}
		modifier = {
			add = 100
			OR = {
				has_building = building_order_keep
				has_building = building_order_castle
			}
		}
		add = value:military_combined_value|FACTOR|3|CACHED|yes|
	}
}

col_habitat_industrial = {	# tweaked
	icon = GFX_colony_type_hab_industrial

	potential = {
		exists = owner
		owner = { country_uses_consumer_goods = yes }
		tec_uses_habitat_districts = yes
		is_capital = no

		tec_ai_allow_designation_type = { type = industrial }
	}

	planet_modifier = {
		planet_artisans_produces_mult = @tec_habitat_designation_split_output
		planet_metallurgists_produces_mult = @tec_habitat_designation_split_output
	}


	triggered_planet_modifier = {
		potential = {
			tec_is_arcology_habitat = no
		}
		modifier = {
			planet_district_hab_industrial_build_speed_mult = @tec_designation_build_speed
		}
	}

	triggered_planet_modifier = {
		potential = {
			tec_is_arcology_habitat = yes
			has_planet_flag = tec_industrial_habitat
		}
		modifier = {
			planet_district_tec_hab_arcology_foundry_build_speed_mult = 0.15
			planet_district_tec_hab_arcology_industry_build_speed_mult = 0.15
		}
	}

	inline_script = colony_types/effects/tec_adaptability_industrial
	inline_script = colony_types/effects/tec_resolution_industry_industrial

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_industrial
		}
		add = value:industrial_districts_value|FACTOR|3|
		modifier = {
			add = 15
			AND = {
				tec_has_alloy_buildings = yes
				tec_has_cg_buildings = yes
			}
		}
		modifier = {
			set = -100
			exists = owner
			owner = { is_ai = yes }
			check_variable_arithmetic = {
				which = value:industrial_districts_value
				value <= 0
			}
		}
	}
}

col_habitat_foundry = {		# tweaked
	icon = GFX_colony_type_habitat_foundry

	potential = {
		tec_uses_habitat_districts = yes
		is_capital = no

		tec_ai_allow_designation_type = { type = foundry }
	}

	planet_modifier = {
		planet_metallurgists_produces_mult = @tec_habitat_designation_output
	}

	triggered_planet_modifier = {
		potential = {
			tec_is_arcology_habitat = no
		}
		modifier = {
			planet_district_hab_industrial_build_speed_mult = @tec_designation_build_speed
		}
	}

	triggered_planet_modifier = {
		potential = {
			tec_is_arcology_habitat = yes
			has_planet_flag = tec_industrial_habitat
		}
		modifier = {
			planet_district_tec_hab_arcology_foundry_build_speed_mult = @tec_designation_build_speed
		}
	}

	inline_script = colony_types/effects/tec_adaptability_foundry
	inline_script = colony_types/effects/tec_resolution_industry_foundry

	inline_script = colony_types/tec_foundry_conversion
	custom_tooltip = col_habitat_foundry_custom

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_foundry
		}
		add = value:industrial_districts_value|FACTOR|3|ALLOY_ONLY|yes|
		modifier = {
			add = 10
			tec_has_alloy_buildings = yes
		}
		modifier = {
			add = -5
			tec_has_cg_buildings = yes
		}
		modifier = {
			add = 11
			has_designation = col_habitat_factory
			exists = owner
			owner = {
				has_monthly_income = { resource = alloys value < 0 }
				has_monthly_income = { resource = consumer_goods value >= 0 }
			}
		}
		modifier = {
			set = -100
			exists = owner
			owner = { is_ai = yes }
			check_variable_arithmetic = {
				which = value:industrial_districts_value|ALLOY_ONLY|yes|
				value <= 0
			}
		}
	}
}

col_habitat_factory = {		# tweaked
	icon = GFX_colony_type_habitat_factory

	potential = {
		tec_uses_habitat_districts = yes
		exists = owner
		owner = { country_uses_consumer_goods = yes }
		is_capital = no
		tec_ai_allow_designation_type = { type = factory }
	}

	planet_modifier = {
		planet_artisans_produces_mult = @tec_habitat_designation_output
	}


	triggered_planet_modifier = {
		potential = {
			tec_is_arcology_habitat = no
		}
		modifier = {
			planet_district_hab_industrial_build_speed_mult = @tec_designation_build_speed
		}
	}

	triggered_planet_modifier = {
		potential = {
			tec_is_arcology_habitat = yes
			has_planet_flag = tec_industrial_habitat
		}
		modifier = {
			planet_district_tec_hab_arcology_industry_build_speed_mult = @tec_designation_build_speed
		}
	}

	inline_script = colony_types/effects/tec_adaptability_factory
	inline_script = colony_types/effects/tec_resolution_industry_factory

	inline_script = colony_types/tec_factory_conversion
	custom_tooltip = col_habitat_factory_custom
	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_factory
		}
		add = value:industrial_districts_value|FACTOR|3|CG_ONLY|yes|
		modifier = {
			add = -5
			tec_has_alloy_buildings = yes
		}
		modifier = {
			add = 10
			tec_has_cg_buildings = yes
		}
		modifier = {
			add = 11
			has_designation = col_habitat_foundry
			exists = owner
			owner = {
				has_monthly_income = { resource = consumer_goods value < 0 }
				has_monthly_income = { resource = alloys value >= 0 }
			}
		}
		modifier = {
			set = -100
			exists = owner
			owner = { is_ai = yes }
			check_variable_arithmetic = {
				which = value:industrial_districts_value|CG_ONLY|yes|
				value <= 0
			}
		}
	}
}

col_habitat_bureau = {
	icon = GFX_colony_type_hab_bureaucratic

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			tec_country_uses_priests_and_temples = no
		}
		tec_uses_habitat_districts = yes
		is_special_colony_type = no
		is_capital = no

		tec_ai_allow_designation_type = { type = unity }
	}

	planet_modifier = {
		planet_administrators_produces_mult = @tec_habitat_designation_output
	}

	inline_script = colony_types/effects/tec_adaptability_unity
	inline_script = colony_types/effects/tec_all_the_priests_1

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_bureau
		}
		add = value:unity_combined_value|FACTOR|2|CACHED|yes|
	}
}

col_habitat_bureau_spiritualist = {
	icon = GFX_colony_type_hab_bureaucratic

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			is_spiritualist = yes
		}
		tec_uses_habitat_districts = yes
		is_special_colony_type = no
		is_capital = no
		tec_ai_allow_designation_type = { type = unity }
	}

	planet_modifier = {
		planet_administrators_produces_mult = @tec_habitat_designation_output
	}

	inline_script = colony_types/effects/tec_adaptability_unity
	inline_script = colony_types/effects/tec_all_the_priests_1

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_bureau_spiritualist
		}
		add = value:unity_combined_value|FACTOR|2|CACHED|yes|
	}
}

col_habitat_bureau_hive = {
	icon = GFX_colony_type_hab_bureaucratic

	potential = {
		exists = owner
		owner = { is_hive_empire = yes }
		tec_uses_habitat_districts = yes
		is_special_colony_type = no
		is_capital = no
		tec_ai_allow_designation_type = { type = unity }
	}

	planet_modifier = {
		planet_administrators_produces_mult = @tec_habitat_designation_output
	}

	inline_script = colony_types/effects/tec_adaptability_unity

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_bureau_hive
		}
		add = value:unity_combined_value|FACTOR|2|CACHED|yes|
	}
}

col_habitat_bureau_machine = {
	icon = GFX_colony_type_hab_bureaucratic

	potential = {
		exists = owner
		owner = { is_machine_empire = yes }
		tec_uses_habitat_districts = yes
		is_special_colony_type = no
		#is_capital = no	# Strange this is not present
		tec_ai_allow_designation_type = { type = unity }
	}

	planet_modifier = {
		planet_administrators_produces_mult = @tec_habitat_designation_output
	}

	inline_script = colony_types/effects/tec_adaptability_unity

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_bureau_machine
		}
		add = value:unity_combined_value|FACTOR|2|CACHED|yes|
	}
}

col_habitat_refinery = {	# tweaked
	icon = GFX_colony_type_habitat_refinery

	potential = {
		tec_uses_habitat_districts = yes
		is_capital = no
		tec_ai_allow_designation_type = { type = refinery }
	}

	planet_modifier = {
		planet_refiners_produces_mult = @tec_habitat_designation_refinery_output
		planet_translucers_produces_mult = @tec_habitat_designation_refinery_output
		planet_chemists_produces_mult = @tec_habitat_designation_refinery_output
		planet_sr_miners_produces_mult = @tec_habitat_designation_refinery_output
	}

	inline_script = colony_types/effects/tec_adaptability_refinery
	inline_script = colony_types/effects/tec_resolution_industry_refinery

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_habitat_refinery
		}
		add = value:refinery_combined_value|FACTOR|2|CACHED|yes|
	}
}

# Ecumenpolis
col_ecu_mix = {				# tweaked
	icon = GFX_colony_type_urban

	potential = {
		tec_is_city_world = yes
		is_capital = no
	}

	planet_modifier = {
		planet_structures_upkeep_mult = @tec_ecu_designation_urban_upkeep
		planet_building_build_speed_mult = @tec_designation_build_speed
		planet_decision_enact_speed_mult = @tec_designation_build_speed
	}

	inline_script = colony_types/effects/tec_adaptability_capital

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_ecu_mix
		}
		modifier = {
			add = 20
			num_districts = {
				type = any
				value < 5
			}
		}
	}
}

col_ecu_industrial = {
	icon = GFX_colony_type_industrial

	potential = {
		uses_district_set = city_world
		AND = {
			tec_has_cg_district_city_planet = yes
			tec_has_alloy_district_city_planet = yes
		}
		is_capital = no

		tec_ai_allow_designation_type = { type = industrial }
	}

	planet_modifier = {
		planet_artisans_upkeep_mult = @tec_ecu_designation_split_upkeep
		planet_metallurgists_upkeep_mult = @tec_ecu_designation_split_upkeep
		planet_artisans_produces_mult = @tec_ecu_designation_split_output
		planet_metallurgists_produces_mult = @tec_ecu_designation_split_output

		planet_district_arcology_civilian_industry_build_speed_mult = @tec_designation_build_speed
		planet_district_arcology_arms_industry_build_speed_mult = @tec_designation_build_speed
	}

	inline_script = colony_types/effects/tec_adaptability_industrial
	inline_script = colony_types/effects/tec_resolution_industry_industrial

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_ecu_industrial
		}
		add = value:industrial_districts_value|FACTOR|3|
		modifier = {
			add = 8
			tec_has_cg_buildings = yes
		}
		modifier = {
			add = 8
			tec_has_alloy_buildings = yes
		}
		modifier = {
			set = -100
			exists = owner
			owner = { is_ai = yes }
			check_variable_arithmetic = {
				which = value:industrial_districts_value
				value <= 0
			}
		}
	}
}

col_ecu_foundry = {			# tweaked
	icon = GFX_colony_type_foundry

	potential = {
		uses_district_set = city_world
		tec_has_alloy_district_city_planet = yes

		is_capital = no


		tec_ai_allow_designation_type = { type = foundry }
	}

	planet_modifier = {
		planet_metallurgists_upkeep_mult = @tec_ecu_designation_upkeep
		planet_metallurgists_produces_mult = @tec_ecu_designation_output

		planet_building_foundry_1_build_speed_mult = @tec_designation_build_speed
		planet_district_arcology_arms_industry_build_speed_mult = @tec_designation_build_speed
	}

	inline_script = colony_types/effects/tec_adaptability_foundry
	inline_script = colony_types/effects/tec_resolution_industry_foundry

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_ecu_foundry
		}
		add = value:industrial_districts_value|FACTOR|2|ALLOY_ONLY|yes|
		modifier = {
			add = -3
			tec_has_cg_buildings = yes
		}
		modifier = {
			add = 8
			tec_has_alloy_buildings = yes
		}
		modifier = {
			add = 10
			check_variable_arithmetic = {
				which = value:industrial_districts_value|ALLOY_ONLY|yes|
				value > 0
			}
			exists = owner
			owner = {
				OR = {
					country_uses_consumer_goods = no
					has_monthly_income = { resource = consumer_goods value >= 0 }
				}
				resource_revenue_compare = {
					resource = alloys
					value < trigger:years_passed
				}
			}
		}
		modifier = {
			set = -100
			exists = owner
			owner = { is_ai = yes }
			check_variable_arithmetic = {
				which = value:industrial_districts_value|ALLOY_ONLY|yes|
				value <= 0
			}
		}
	}
}

col_ecu_factory = {			# tweaked
	icon = GFX_colony_type_factory

	potential = {
		uses_district_set = city_world
		tec_has_cg_district_city_planet = yes

		is_capital = no

		tec_ai_allow_designation_type = { type = factory }
	}

	planet_modifier = {
		planet_artisans_upkeep_mult = @tec_ecu_designation_upkeep
		planet_artisans_produces_mult = @tec_ecu_designation_output

		planet_building_factory_1_build_speed_mult = @tec_designation_build_speed
		planet_district_arcology_civilian_industry_build_speed_mult = @tec_designation_build_speed
	}

	inline_script = colony_types/effects/tec_adaptability_factory
	inline_script = colony_types/effects/tec_resolution_industry_factory

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_ecu_factory
		}
		add = value:industrial_districts_value|FACTOR|2|CG_ONLY|yes|
		modifier = {
			add = 8
			tec_has_cg_buildings = yes
		}
		modifier = {
			add = -3
			tec_has_alloy_buildings = yes
		}
		modifier = {
			set = -100
			exists = owner
			owner = { is_ai = yes }
			check_variable_arithmetic = {
				which = value:industrial_districts_value|CG_ONLY|yes|
				value <= 0
			}
		}
	}
}

col_ecu_research = {
	icon = GFX_colony_type_research

	potential = {
		uses_district_set = city_world
		OR = {
			tec_is_unspecced_city_planet = yes
			tec_has_research_district_city_planet = yes
		}
		is_capital = no

		tec_ai_allow_designation_type = { type = research }
	}

	planet_modifier = {
		planet_researchers_upkeep_mult = @tec_ecu_designation_upkeep
		planet_researchers_produces_mult = @tec_ecu_designation_output

		planet_building_research_lab_1_build_speed_mult = @tec_designation_build_speed
		planet_district_tec_arcology_research_build_speed_mult = @tec_designation_build_speed
	}

	inline_script = colony_types/effects/tec_adaptability_research

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_ecu_research
		}
		add = value:research_combined_value|FACTOR|3|CACHED|yes|
	}
}

# Ringworld Mixed
col_ring_mix = {
	icon = GFX_colony_type_workers

	potential = {
		tec_uses_ringworld_districts = yes
		is_capital = no
	}

	planet_modifier = {
		planet_immigration_pull_mult = 0.2
		planet_jobs_produces_mult = 0.05
		pop_growth_speed = 0.15
		planet_pop_assembly_mult = 0.15
		planet_pop_assembly_organic_mult = 0.15
	}

	inline_script = colony_types/effects/tec_adaptability_capital

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_ring_mix
		}

		modifier = {
			add = 10
			num_sapient_pops < 15
		}
	}
}

col_ring_research = {
	icon = GFX_colony_type_research

	potential = {
		tec_uses_ringworld_districts = yes
		is_capital = no

		tec_ai_allow_designation_type = { type = research }
	}

	planet_modifier = {
		planet_jobs_engineering_research_produces_mult = @tec_ring_designation_output
		planet_jobs_physics_research_produces_mult = @tec_ring_designation_output
		planet_jobs_society_research_produces_mult = @tec_ring_designation_output
		pop_growth_speed = 0.1
		planet_pop_assembly_mult = 0.1
		planet_pop_assembly_organic_mult = 0.1
	}

	inline_script = colony_types/effects/tec_adaptability_research

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_ring_research
		}
		add = value:research_combined_value|FACTOR|3|CACHED|yes|
	}
}

col_ring_farming = {
	icon = GFX_colony_type_farm

	potential = {
		tec_uses_ringworld_districts = yes
		tec_is_unspecced_ringworld = yes
		is_capital = no

		tec_ai_allow_designation_type = { type = farming }
	}

	planet_modifier = {
		planet_jobs_food_produces_mult = @tec_ring_designation_menial_output
		pop_growth_speed = 0.1
		planet_pop_assembly_mult = 0.1
		planet_pop_assembly_organic_mult = 0.1
	}

	inline_script = colony_types/effects/tec_adaptability_farming
	inline_script = colony_types/effects/tec_resolution_greatergood

	# Evolved
		inline_script = colony_types/effects/tec_land_of_plenty_farming
		inline_script = colony_types/effects/tec_planets_t2a_farming
	# /

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_ring_farming
		}
		add = value:farming_combined_value|FACTOR|2|CACHED|yes|
		modifier = {
			add = 10
			tec_has_food_processing_buildings = yes
		}
		modifier = {
			add = 5
			has_building = building_baol_organic_plant
		}
	}
}

col_ring_trade = {
	icon = GFX_colony_type_urban

	potential = {
		tec_uses_ringworld_districts = yes
		exists = owner
		owner = {
			tec_uses_trade_value = yes
		}
		is_capital = no
		tec_ai_allow_designation_type = { type = trade }
	}

	planet_modifier = {
		trade_value_mult = @tec_ring_designation_trade_output
		pop_growth_speed = 0.1
		planet_pop_assembly_mult = 0.1
		planet_pop_assembly_organic_mult = 0.1
	}

	inline_script = colony_types/effects/tec_adaptability_trade

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_ring_trade
		}
		complex_trigger_modifier = {
			trigger = num_districts
			parameters = {
				type = district_rw_commercial
			}
			mode = add
			mult = 10
		}
		complex_trigger_modifier = {
			trigger = num_districts
			parameters = {
				type = district_tec_rw_trade
			}
			mode = add
			mult = 10
		}
	}
}

col_ring_generator = {
	icon = GFX_colony_type_generator

	potential = {
		tec_uses_ringworld_districts = yes
		tec_is_unspecced_ringworld = yes
		is_capital = no

		tec_ai_allow_designation_type = { type = generator }
	}

	planet_modifier = {
		planet_jobs_energy_produces_mult = @tec_ring_designation_menial_output
		pop_growth_speed = 0.1
		planet_pop_assembly_mult = 0.1
		planet_pop_assembly_organic_mult = 0.1
	}

	inline_script = colony_types/effects/tec_adaptability_generator
	inline_script = colony_types/effects/tec_resolution_greatergood

	# Evolved
		inline_script = colony_types/effects/tec_land_of_plenty_generator
		inline_script = colony_types/effects/tec_planets_t2a_generator
	# /

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_ring_generator
		}
		add = value:generator_combined_value|FACTOR|2|CACHED|yes|
	}
}



# Machine World
col_mac = {
	icon = GFX_colony_type_urban

	potential = {
		uses_district_set = machine_world
		is_capital = no
	}

	planet_modifier = {
		planet_jobs_worker_produces_mult = @tec_machine_designation_menial_output
		planet_district_industrial_build_speed_mult = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
				NOT = { has_valid_civic = civic_machine_servitor }
			}
		}
		modifier = {
			planet_district_machine_coordination_build_speed_mult = 0.25
		}
	}

	inline_script = {
		script = modifiers/tec_rural_generator_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	inline_script = {
		script = modifiers/tec_rural_mining_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	inline_script = colony_types/effects/tec_adaptability_rural

	weight_modifier = {
		modifier = {
			add = @stickiness_low
			has_designation = col_mac
		}
		modifier = {
			add = 10
			num_sapient_pops < 10
		}
	}
}

col_mac_foundry = {
	icon = GFX_colony_type_foundry

	potential = {
		uses_district_set = machine_world
		is_capital = no

		tec_ai_allow_designation_type = { type = foundry }
	}

	planet_modifier = {
		planet_jobs_alloys_produces_mult = @tec_machine_designation_industrial_output
		planet_metallurgists_upkeep_mult = @tec_machine_designation_industrial_upkeep
		planet_district_industrial_build_speed_mult = @tec_designation_build_speed
	}

	custom_tooltip = col_foundry_custom

	inline_script = colony_types/effects/tec_adaptability_foundry
	inline_script = colony_types/effects/tec_resolution_industry_foundry

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_mac_foundry
		}
		add = value:industrial_districts_value|FACTOR|3|ALLOY_ONLY|yes|
		modifier = {
			add = -5
			tec_has_cg_buildings = yes
		}
		modifier = {
			add = 10
			tec_has_alloy_buildings = yes
		}
		modifier = {
			add = 11
			has_designation = col_mac_factory
			exists = owner
			owner = {
				has_monthly_income = { resource = alloys value < 0 }
				has_monthly_income = { resource = consumer_goods value >= 0 }
			}
		}
		modifier = {
			set = -100
			exists = owner
			owner = { is_ai = yes }
			check_variable_arithmetic = {
				which = value:industrial_districts_value|ALLOY_ONLY|yes|
				value <= 0
			}
		}
	}
}

col_mac_factory = {
	icon = GFX_colony_type_factory

	potential = {
		OR = {
			uses_district_set = machine_world
			inline_script = {
				script = mod_support/tec_pd_present
				code = "uses_district_set = @pdmachinefactory"
			}
				# PD
		}
		exists = owner
		owner = { country_uses_consumer_goods = yes }
		is_capital = no

		tec_ai_allow_designation_type = { type = factory }

	}

	custom_tooltip = col_factory_custom
	planet_modifier = {
		planet_jobs_consumer_goods_produces_mult = @tec_machine_designation_industrial_output
		planet_artisans_upkeep_mult = @tec_machine_designation_industrial_upkeep
		planet_district_industrial_build_speed_mult = @tec_designation_build_speed
	}

	inline_script = colony_types/effects/tec_adaptability_factory
	inline_script = colony_types/effects/tec_resolution_industry_factory

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_mac_factory
		}
		add = value:industrial_districts_value|FACTOR|3|CG_ONLY|yes|
		modifier = {
			add = 10
			tec_has_cg_buildings = yes
		}
		modifier = {
			add = -5
			tec_has_alloy_buildings = yes
		}
		modifier = {
			add = 11
			has_designation = col_mac_foundry
			exists = owner
			owner = {
				has_monthly_income = { resource = consumer_goods value < 0 }
				has_monthly_income = { resource = alloys value >= 0 }
			}
		}
		modifier = {
			set = -100
			exists = owner
			owner = { is_ai = yes }
			check_variable_arithmetic = {
				which = value:industrial_districts_value|CG_ONLY|yes|
				value <= 0
			}
		}
	}
}

# Hive World
col_hiv = {
	icon = GFX_colony_type_urban

	potential = {
		uses_district_set = hive_world
		is_capital = no
	}

	planet_modifier = {
		planet_jobs_worker_produces_mult = @tec_hive_designation_menial_output
	}

	inline_script = colony_types/effects/tec_adaptability_rural

	inline_script = {
		script = modifiers/tec_rural_generator_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	inline_script = {
		script = modifiers/tec_rural_mining_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	inline_script = {
		script = modifiers/tec_rural_farming_district_build_speed
		value = @tec_designation_build_speed
		mult = 1
		trigger = ""
	}

	weight_modifier = {
		modifier = {
			add = @stickiness_low
			has_designation = col_hiv
		}
	}
}

col_hiv_foundry = {
	icon = GFX_colony_type_foundry

	potential = {
		uses_district_set = hive_world
		is_capital = no

		tec_ai_allow_designation_type = { type = foundry }
	}

	planet_modifier = {
		planet_jobs_alloys_produces_mult = @tec_hive_designation_industrial_output
		planet_metallurgists_upkeep_mult = @tec_hive_designation_industrial_upkeep
		planet_district_industrial_build_speed_mult = @tec_designation_build_speed
	}

	triggered_planet_modifier = {	# Adaptability
		potential = {
			exists = owner
			owner = { has_tradition = tr_adaptability_finish }
		}
		modifier = {
			planet_jobs_alloys_produces_mult = 0.05
		}
	}

	inline_script = colony_types/effects/tec_resolution_industry_foundry

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_hiv_foundry
		}
		add = value:industrial_districts_value|FACTOR|3|ALLOY_ONLY|yes|
		modifier = {
			add = 10
			tec_has_cg_buildings = yes
		}
		modifier = {
			add = -5
			tec_has_alloy_buildings = yes
		}
		modifier = {
			add = 10
			check_variable_arithmetic = {
				which = value:industrial_districts_value|ALLOY_ONLY|yes|
				value > 0
			}
			exists = owner
			owner = {
				resource_revenue_compare = {
					resource = alloys
					value < trigger:years_passed
				}
			}

		}
		modifier = {
			set = -100
			exists = owner
			owner = { is_ai = yes }
			check_variable_arithmetic = {
				which = value:industrial_districts_value|ALLOY_ONLY|yes|
				value <= 0
			}
		}
	}
}

col_trophy_machine = {
	icon = GFX_colony_type_bureaucratic

	potential = {
		exists = owner
		owner = { has_valid_civic = civic_machine_servitor }
		NOT = {
			uses_district_set = habitat
		}
		tec_blocks_regular_designations = no
		is_capital = no
		tec_ai_allow_designation_type = { type = unity }
	}

	planet_modifier = {
		planet_bio_trophies_produces_mult = @tec_regular_designation_output
		pop_growth_speed = 0.10
		planet_pop_assembly_organic_mult = 0.1
	}

	inline_script = colony_types/effects/tec_ringworld

	weight_modifier = {
		modifier = {
			add = @stickiness
			has_designation = col_trophy_machine
		}
		add = value:unity_combined_value|FACTOR|3|RS_ONLY|yes|
	}
}

# Fallen Empire Capital
#col_fe_capital

# Fallen Empire Colony
#col_fe_colony

# Resort World
#col_resort

# Penal Colony
#col_penal

# Crucible Planet
col_gestation = {
	icon = GFX_colony_type_crucible_world

	potential = {
		has_modifier = gestation_colony
		is_capital = no
	}
	planet_modifier = {
		pop_growth_speed = 0.15
		planet_pop_assembly_organic_mult = 0.15
	}

	inline_script = colony_types/effects/tec_ringworld

	weight_modifier = {
		base = 1000
	}
}

# cosmogenesis world
#col_cosmogenesis_world

# nanotech world
#col_nanotech_world
