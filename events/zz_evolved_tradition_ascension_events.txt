namespace = tec_tradition


# 100 Outreach
# 200 Control
# 300 Artifice
# 400 Balance
# 500 Might
# 600 Statecraft
# 700 Invention

# 1000+ AP events
# Saving
country_event = {
	id = tec_tradition.11
	hide_window = yes
	
	is_triggered_only = yes

	trigger = {
		always = no
	}
}

# ----------- DISCOVERY ---------------
country_event = {	# Discovery
	id = tec_tradition.21
	title = "tec_tradition.21.name"
	desc = "tec_tradition.21.desc"
	picture = GFX_evt_rare_tech_cache
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	trigger = {
		always = no
	}

	option = {
		name = EXCELLENT
		add_random_research_option = {
			add_progress = 33
		}
	}
	option = {
		name = EXCELLENT
		add_random_research_option = {
			add_progress = 33
		}
	}
	option = {
		name = EXCELLENT
		add_random_research_option = {
			add_progress = 33
		}
	}
}

# ----------- OUTREACH ---------------
# Undiscovered Wonders - on colonization (moved to expansion)
planet_event = {
	id = tec_tradition.110
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		owner = {
			OR = {
				has_tradition = tr_expansion_galactic_ambition
				has_active_tradition = tr_expansion_galactic_ambition_vd
			}
		}
		NOT = {
			has_planet_flag = tec_discovered_wonder
		}
	}

	immediate = {
		if = {
			limit = {
				owner = {
					NOT = {
						has_origin = origin_void_dwellers
					}
				}
				tec_is_habitable_regular_planet = yes
			}
			set_planet_flag = tec_discovered_wonder
			while = {
				count = 2
				add_random_non_blocker_deposit = yes
				create_message = {
					type = MESSAGE_TYPE_PLANET_PROSPECTED
					localization = MESSAGE_PLANET_PROSPECTED
					days = 30
					target = this
					variable = {
						type = name
						localization = PLANET
						scope = this
					}
					variable = {
						type = name
						localization = DEPOSIT
						scope = last_added_deposit
					}
				}
			}
		}
		if = {
			limit = {
				owner = {
					has_origin = origin_void_dwellers
				}
				uses_habitat_capitals = yes
			}
			set_planet_flag = tec_discovered_wonder
			if = {
				limit = {
					has_planet_flag = mining_habitat
				}
				add_deposit = d_tec_engineered_mining
			}
			else_if = {
				limit = {
					has_planet_flag = energy_habitat
				}
				add_deposit = d_tec_engineered_generator
			}
			else_if = {
				limit = {
					has_planet_flag = tec_food_habitat
				}
				add_deposit = d_tec_engineered_food
			}
			else_if = {
				limit = {
					NOR = {
						has_planet_flag = mining_habitat
						has_planet_flag = energy_habitat
						has_planet_flag = tec_food_habitat	
					}
				}
				random_list = {
					10 = {
						add_deposit = d_tec_engineered_mining
					}
					10 = {
						add_deposit = d_tec_engineered_generator
					}
					10 = {
						add_deposit = d_tec_engineered_food
					}
				}
			}
			create_message = {
				type = MESSAGE_TYPE_PLANET_PROSPECTED
				localization = MESSAGE_PLANET_PROSPECTED
				days = 30
				target = this
				variable = {
					type = name
					localization = PLANET
					scope = this
				}
				variable = {
					type = name
					localization = DEPOSIT
					scope = last_added_deposit
				}
			}
		}
	}
}

# Preprinted modules - on colonization
planet_event = {
	id = tec_tradition.120
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		owner = {
			has_tradition = tr_tec_outreach_final_1
		}
		NOT = {
			has_modifier = pm_tec_outreach_colony_bonus
		}
		#NOT = {		# Reworked
		#	has_deposit	= d_tec_energy_reserves
		#}
	}

	immediate = {
		if = {
			limit = {
				uses_district_set = standard
			}
			if = {
				limit = {
					exists = owner
					owner = {
						is_hive_empire = yes
					}
				}
				add_district = district_hive
			}
			else_if = {
				limit = {
					exists = owner
					owner = {
						is_machine_empire = yes
					}
				}
				add_district = district_nexus
			}
			else = {
				add_district = district_city
			}
			add_modifier = {
				modifier = pm_tec_outreach_colony_bonus
				years = 5
			}
		}
		if = {
			limit = {
				uses_district_set = habitat
			}
			add_district = district_hab_housing
			add_modifier = {
				modifier = pm_tec_outreach_colony_bonus
				years = 5
			}
		}
		if = {
			limit = {
				uses_district_set = elysium_phase_2
			}
			add_district = district_tec_elysium_arcology
			add_modifier = {
				modifier = pm_tec_outreach_colony_bonus
				years = 5
			}
		}
	}
}

# tr_tec_outreach_2 on ship creation
ship_event = {
	id = tec_tradition.130
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		exists = owner
		owner = {
			has_active_tradition = tr_tec_outreach_2
		}
		OR = {
			is_ship_class = shipclass_colonizer
			is_ship_class = shipclass_constructor
		}
	}

	immediate = {
		add_modifier = {
			modifier = tec_gotta_go_fast_colonizer
			days = -1
		}
	}
}

# tr_tec_outreach_final_2 on colonization
planet_event = {
	id = tec_tradition.140
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		owner = {
			has_tradition = tr_tec_outreach_final_2
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = {
					has_building = building_tec_outreach_platform
				}
			}
			add_building = building_tec_outreach_platform
		}
	}
}

# ----------- BALANCE ---------------
# Forging a Path - Yearly
country_event = {
	id = tec_tradition.410
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_tradition = tr_tec_balance_4
	}

	immediate = {
		every_owned_leader = {
			limit = {
				OR = {
					leader_class = admiral
					leader_class = general
				}
				has_level < 5
			}
			add_experience = 20
		}
		every_owned_leader = {
			limit = {
				OR = {
					leader_class = ruler
					leader_class = governor
				}
				has_level < 5
			}
			add_experience = 30
		}
		every_owned_leader = {
			limit = {
				leader_class = scientist
				has_level < 5
			}
			add_experience = 40
		}
	}
}

# ----------- MIGHT ---------------
# Power overwhelming - on_fleet_destroyed_perp
# This = owner of fleet 1 (combatant)
# From = owner of fleet 2 (destroyed)
# FromFrom = fleet 1
# FromFromFrom = fleet 2
country_event = {
	id = tec_tradition.510
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_tradition = tr_tec_might_4
	}

	immediate = {
	#	if = {
	#		# anticheese
	#		limit = {
	#			fromfromfrom = {
	#				num_ships < 10
	#				num_ships > 5
	#			}
	#		}
	#		this.owner = {
	#			add_resource = {
	#				influence = 5
	#			}
	#		}
	#	}
	#	if = {
	#		limit = {
	#			fromfromfrom = {
	#				num_ships < 20
	#				num_ships >= 10
	#			}
	#		}
	#		this.owner = {
	#			add_resource = {
	#				influence = 10
	#			}
	#		}
	#	}
	#	if = {
	#		limit = {
	#			fromfromfrom = {
	#				num_ships >= 20
	#			}
	#		}
	#		this.owner = {
	#			add_resource = {
	#				influence = 20
	#			}
	#		}
	#	}
		if = {
			limit = {
				fromfromfrom = {
					any_controlled_ship = {
						OR = {
							is_ship_size = juggernaut
							is_ship_size = colossus
						}
					}
				}
			}
			this.owner = {
				add_resource = {
					influence = 100
				}
			}
			break = yes
		}
		if = {
			limit = {
				fromfromfrom = {
					num_ships > 1
					any_controlled_ship = {
						is_ship_size = titan
					}
				}
			}
			this.owner = {
				add_resource = {
					influence = 40
				}
			}
			break = yes
		}
		if = {
			limit = {
				fromfromfrom = {
					num_ships > 2
					any_controlled_ship = {
						is_ship_size = battleship
					}
				}
			}
			this.owner = {
				add_resource = {
					influence = 30
				}
			}
			break = yes
		}
		if = {
			limit = {
				fromfromfrom = {
					num_ships > 2
					any_controlled_ship = {
						is_ship_size = cruiser
					}
				}
			}
			this.owner = {
				add_resource = {
					influence = 20
				}
			}
			break = yes
		}
		if = {
			limit = {
				fromfromfrom = {
					num_ships > 2
					any_controlled_ship = {
						is_ship_size = destroyer
					}
				}
			}
			this.owner = {
				add_resource = {
					influence = 10
				}
			}
			break = yes
		}
		if = {
			limit = {
				fromfromfrom = {
					num_ships > 2
					any_controlled_ship = {
						is_ship_size = corvette
					}
				}
			}
			this.owner = {
				add_resource = {
					influence = 5
				}
			}
			break = yes
		}
	}
}

# tr_tec_might_final_1:0 "Galactic War Engineering" - moved to finisher
country_event = {
	id = tec_tradition.520
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_tradition = tr_tec_might_finish
	}

	immediate = {
		if = {
			limit = {
				has_technology = tech_juggernaut
				has_technology = tech_titans
			}
			random_list = {
				10 = {
					give_technology = {
						tech = tech_repeatable_improved_shield_output
					}
				}

				10 = {
					give_technology = {
						tech = tech_repeatable_weapon_type_energy_damage
					}
				}

				10 = {
					give_technology = {
						tech = tech_repeatable_improved_armor_output
					}
				}

				10 = {
					give_technology = {
						tech = tech_repeatable_weapon_type_explosive_damage
					}
				}

				10 = {
					give_technology = {
						tech = tech_repeatable_weapon_type_kinetic_damage
					}
				}

				10 = {
					give_technology = {
						tech = tech_repeatable_weapon_type_kinetic_damage
					}
				}
			
			}
		}

		else_if = {
			limit = {
				has_technology = tech_juggernaut
				NOT = {
					has_technology = tech_titans
				}
			}
			add_research_option = tech_titans
		}

		else_if = {
			limit = {
				has_technology = tech_titans
				NOT = {
					has_technology = tech_juggernaut
				}
			}
			add_research_option = tech_juggernaut
		}

		else_if = {
			limit = {
				NOR = {
					has_technology = tech_juggernaut
					has_technology = tech_titans
				}
				has_technology = tech_battleships
			}
			random_list = {
				10 = {
					add_research_option = tech_titans
				}
				10 = {
					add_research_option = tech_juggernaut
				}
			}
		}

		else_if = {
			limit = {
				NOT = {
					has_technology = tech_battleships
				}
				has_technology = tech_cruisers
			}
			add_research_option = tech_battleships
		}

		else_if = {
			limit = {
				NOT = {
					has_technology = tech_cruisers
				}
				has_technology = tech_destroyers
			}
			add_research_option = tech_cruisers
		}

		else_if = {
			limit = {
				NOT = {
					has_technology = tech_destroyers
				}
				has_technology = tech_corvettes
			}
			add_research_option = tech_destroyers
		}

	}
}

# tr_tec_might_final_1:0 "Galactic War Engineering" - new effect
ship_event = {
	id = tec_tradition.525
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		exists = owner
		owner = {
			has_tradition = tr_tec_might_final_1
		}
		is_ship_class = shipclass_military
		NOT = {
			is_ship_size = transport
		}
	}

	immediate = {
		if = {
			limit = {
				exists = owner
				is_ship_size = corvette
			}
			owner = {
				add_resource = {
					engineering_research = 20
				}
			}
		}
		else_if = {
			limit = {
				exists = owner
				is_ship_size = destroyer
			}
			owner = {
				add_resource = {
					engineering_research = 30
				}
			}
		}
		else_if = {
			limit = {
				exists = owner
				is_ship_size = cruiser
			}
			owner = {
				add_resource = {
					engineering_research = 50
				}
			}
		}
		else_if = {
			limit = {
				exists = owner
				is_ship_size = battleship
			}
			owner = {
				add_resource = {
					engineering_research = 100
				}
			}
		}
		else_if = {
			limit = {
				exists = owner
				is_ship_size = titan
			}
			owner = {
				add_resource = {
					engineering_research = 200
				}
			}
		}
		else_if = {
			limit = {
				exists = owner
				is_ship_size = juggernaut
			}
			owner = {
				add_resource = {
					engineering_research = 500
				}
			}
		}
		else = {
			owner = {
				add_resource = {
					engineering_research = 25
				}
			}
		}
	}
}

# A war is beginning, executed for every country in the war.
# Root = Country
# From = War
#on_war_beginning = {

#tr_tec_might_final_2:0 "The Art of War"
country_event = {
	id = tec_tradition.530
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		root = {
			has_tradition = tr_tec_might_final_2
		}
	}

	immediate = {
		root = {
			if = {
				limit = {
					is_at_war = yes
				}
				remove_modifier = modifier_tec_art_of_war_war
				remove_modifier = modifier_tec_art_of_war_unity
				add_modifier = {
					modifier = modifier_tec_art_of_war_war
					days = -1
				}
			}
			else = {
				remove_modifier = modifier_tec_art_of_war_unity
				remove_modifier = modifier_tec_art_of_war_war
				add_modifier = {
					modifier = modifier_tec_art_of_war_unity
					days = -1
				}
			}
		}
	}
}

# A war has ended
# Root = Loser
# From = Main Winner
#on_war_ended = {
# war ended
country_event = {
	id = tec_tradition.531
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			root = {	# root is unnecesary but i put it just in case...
				has_tradition = tr_tec_might_final_2
			}
			from = {	# root is unnecesary but i put it just in case...
				has_tradition = tr_tec_might_final_2
			}
		}
	}

	immediate = {
		root = {
			if = {
				limit = {
					has_tradition = tr_tec_might_final_2
					is_at_war = yes
					NOT = {
						has_modifier = modifier_tec_art_of_war_war
					}
				}
				remove_modifier = modifier_tec_art_of_war_unity
				add_modifier = {
					modifier = modifier_tec_art_of_war_war
					days = -1
				}
			}
			if = {
				limit = {
					has_tradition = tr_tec_might_final_2
					is_at_war = no
					NOT = {
						has_modifier = modifier_tec_art_of_war_unity
					}
				}
				remove_modifier = modifier_tec_art_of_war_war
				add_modifier = {
					modifier = modifier_tec_art_of_war_unity
					days = -1
				}
			}
		}

		from = {
			if = {
				limit = {
					has_tradition = tr_tec_might_final_2
					is_at_war = yes
					NOT = {
						has_modifier = modifier_tec_art_of_war_war
					}
				}
				remove_modifier = modifier_tec_art_of_war_unity
				add_modifier = {
					modifier = modifier_tec_art_of_war_war
					days = -1
				}
			}
			if = {
				limit = {
					has_tradition = tr_tec_might_final_2
					is_at_war = no
					NOT = {
						has_modifier = modifier_tec_art_of_war_unity
					}
				}
				remove_modifier = modifier_tec_art_of_war_war
				add_modifier = {
					modifier = modifier_tec_art_of_war_unity
					days = -1
				}
			}
		}
	}
}

# ----------- Discovery ---------------
# tr_discovery_finish
# on tech researched
country_event = {
	id = tec_tradition.705
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			has_tradition = tr_discovery_finish
			has_active_tradition = tr_discovery_federations_finish
		}
		NOT = {
			has_country_flag = tec_discovery_finisher_cd
		}
	}

	immediate = {
		change_variable = {
			which = tec_discovery_finisher
			value = 1
		}
		if = {
			limit = {
				check_variable = {
					which = tec_discovery_finisher
					value >= 5
				}
			}
			change_variable = {
				which = tec_discovery_finisher_roll
				value = 10
			}
			random = {
				chance = tec_discovery_finisher_roll
				set_timed_country_flag = {
					flag = tec_discovery_finisher_cd
					days = 1
				}
				add_random_research_option = {
					add_progress = 0.25
					ignore_prereqs = no
				}
				set_variable = {
					which = tec_discovery_finisher
					value = 0
				}
				set_variable = {
					which = tec_discovery_finisher_roll
					value = 0
				}
			}
		}
	}
}

# ----------- Invention ---------------
# tr_tec_invention_3:0 "Uncovering Possibilities"
# on tech researched
country_event = {
	id = tec_tradition.710
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_tradition = tr_tec_invention_3
	}

	immediate = {
		random_list = {
			10 = {
				add_monthly_resource_mult = {
					resource = energy
					value = 0.2
				}
			}
			10 = {
				add_monthly_resource_mult = {
					resource = minerals
					value = 0.2
				}
			}
			10 = {
				add_monthly_resource_mult = {
					resource = food
					value = 0.2
				}
			}
		}
	}
}

#tr_tec_invention_4:0 "Nuclear Geniality"
country_event = {
	id = tec_tradition.720
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_tradition = tr_tec_invention_4
	}

	immediate = {
		FROM = {
			if = {
				limit = { leader_class = scientist }
				random_list = {
					20 = {
						add_trait = leader_trait_spark_of_genius
					}
					20 = {
						add_trait = leader_trait_maniacal
					}
					60 = {
						break = yes
					}
				}
			}
		}
	}
}

# tr_tec_invention_final_2:0 "Chained Reaction"
# on tech researched
country_event = {
	id = tec_tradition.730
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_tradition = tr_tec_invention_final_2
	}

	immediate = {
		random_list = {
			10 = {
				add_monthly_resource_mult = {
					resource = society_research
					value = 1
					min = 50
					max = 1000
				}
			}
			10 = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = 1
					min = 50
					max = 1000
				}
			}
			10 = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = 1
					min = 50
					max = 1000
				}
			}
		}
	}
}

#tr_tec_invention_final_3:0 "Relativistic Knowledge"
# Initial
country_event = {
	id = tec_tradition.740
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_tradition = tr_tec_invention_final_3
	}

	immediate = {
		add_modifier = {
			modifier = modifier_tec_relativistic_knowledge
			days = -1
		}
	}
}

# on tech researched
country_event = {
	id = tec_tradition.741
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_tradition = tr_tec_invention_final_3
	}

	immediate = {
		if = {
			limit = {
				has_modifier = modifier_tec_relativistic_knowledge
			}
			remove_modifier = modifier_tec_relativistic_knowledge
			add_modifier = {
				modifier = modifier_tec_relativistic_knowledge_1
				days = -1
			}
			break = yes
		}
		else_if = {
			limit = {
				has_modifier = modifier_tec_relativistic_knowledge_1
			}
			remove_modifier = modifier_tec_relativistic_knowledge_1
			add_modifier = {
				modifier = modifier_tec_relativistic_knowledge_2
				days = -1
			}
			break = yes
		}
		else_if = {
			limit = {
				has_modifier = modifier_tec_relativistic_knowledge_2
			}
			remove_modifier = modifier_tec_relativistic_knowledge_2
			add_modifier = {
				modifier = modifier_tec_relativistic_knowledge_3
				days = -1
			}
			break = yes
		}
		else_if = {
			limit = {
				has_modifier = modifier_tec_relativistic_knowledge_3
			}
			remove_modifier = modifier_tec_relativistic_knowledge_3
			add_modifier = {
				modifier = modifier_tec_relativistic_knowledge_4
				days = -1
			}
			break = yes
		}
		else_if = {
			limit = {
				has_modifier = modifier_tec_relativistic_knowledge_4
			}
			remove_modifier = modifier_tec_relativistic_knowledge_4
			add_modifier = {
				modifier = modifier_tec_relativistic_knowledge_5
				days = -1
			}
			break = yes
		}
		else_if = {
			limit = {
				has_modifier = modifier_tec_relativistic_knowledge_5
			}
			remove_modifier = modifier_tec_relativistic_knowledge_5
			add_modifier = {
				modifier = modifier_tec_relativistic_knowledge_6
				days = -1
			}
			break = yes
		}
		else_if = {
			limit = {
				has_modifier = modifier_tec_relativistic_knowledge_6
			}
			remove_modifier = modifier_tec_relativistic_knowledge_6
			add_modifier = {
				modifier = modifier_tec_relativistic_knowledge_7
				days = -1
			}
			break = yes
		}
		else_if = {
			limit = {
				has_modifier = modifier_tec_relativistic_knowledge_7
			}
			remove_modifier = modifier_tec_relativistic_knowledge_7
			add_modifier = {
				modifier = modifier_tec_relativistic_knowledge_2
				days = -1
			}
			break = yes
		}
	}
}

# ----------- AP EVENTS ---------------
# Technological ascendancy - Hidden modifier upon unlock
country_event = {
	id = tec_tradition.1010
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_ascension_perk = ap_technological_ascendancy
	}

	immediate = {
		add_modifier = {
			modifier = tec_technoascendancy_base
			days = -1
		}
	}
}

# Technological ascendancy - Each year it checks changes
country_event = {
	id = tec_tradition.1011
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_ascension_perk = ap_technological_ascendancy
	}

	immediate = {
		if = {	#FAILSAFE
			limit = {
				years_passed < 10
				NOT = {
					has_modifier = tec_technoascendancy_base
				}
			}
			add_modifier = {
				modifier = tec_technoascendancy_base
				days = -1
			}
		}
		else_if = {
			limit = {
				years_passed >= 10
				years_passed < 20
			}
			add_modifier = {
				modifier = tec_technoascendancy_1
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_technoascendancy_base
					has_modifier = tec_technoascendancy_1
				}
				remove_modifier = tec_technoascendancy_base
			}
		}
		else_if = {
			limit = {
				years_passed >= 20
				years_passed < 30
			}
			add_modifier = {
				modifier = tec_technoascendancy_2
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_technoascendancy_1
					has_modifier = tec_technoascendancy_2
				}
				remove_modifier = tec_technoascendancy_base
				remove_modifier = tec_technoascendancy_1
			}
		}
		else_if = {
			limit = {
				years_passed >= 30
				years_passed < 40
			}
			add_modifier = {
				modifier = tec_technoascendancy_3
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_technoascendancy_2
					has_modifier = tec_technoascendancy_3
				}
				remove_modifier = tec_technoascendancy_base
				remove_modifier = tec_technoascendancy_1
				remove_modifier = tec_technoascendancy_2
			}
		}
		else_if = {
			limit = {
				years_passed >= 40
				years_passed < 50
			}
			add_modifier = {
				modifier = tec_technoascendancy_4
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_technoascendancy_3
					has_modifier = tec_technoascendancy_4
				}
				remove_modifier = tec_technoascendancy_base
				remove_modifier = tec_technoascendancy_1
				remove_modifier = tec_technoascendancy_2
				remove_modifier = tec_technoascendancy_3
			}
		}
		else_if = {
			limit = {
				years_passed >= 50
			}
			add_modifier = {
				modifier = tec_technoascendancy_5
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_technoascendancy_4
					has_modifier = tec_technoascendancy_5
				}
				remove_modifier = tec_technoascendancy_base
				remove_modifier = tec_technoascendancy_1
				remove_modifier = tec_technoascendancy_2
				remove_modifier = tec_technoascendancy_3
				remove_modifier = tec_technoascendancy_4
			}
		}
	}
}

# One vision - - NOPE
country_event = {
	id = tec_tradition.1020
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_ascension_perk = ap_one_vision
	}

	immediate = {
		add_modifier = {
			modifier = tec_onevision_base
			days = -1
		}
	}
}

# One Vision - Each year it checks changes
country_event = {
	id = tec_tradition.1021
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_ascension_perk = ap_one_vision
	}

	immediate = {
		if = {	#FAILSAFE
			limit = {
				years_passed < 10
				NOT = {
					has_modifier = tec_onevision_base
				}
			}
			add_modifier = {
				modifier = tec_onevision_base
				days = -1
			}
		}
		else_if = {
			limit = {
				years_passed >= 10
				years_passed < 20
			}
			add_modifier = {
				modifier = tec_onevision_1
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_onevision_base
					has_modifier = tec_onevision_1
				}
				remove_modifier = tec_onevision_base
			}
		}
		else_if = {
			limit = {
				years_passed >= 20
				years_passed < 30
			}
			add_modifier = {
				modifier = tec_onevision_2
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_onevision_1
					has_modifier = tec_onevision_2
				}
				remove_modifier = tec_onevision_base
				remove_modifier = tec_onevision_1
			}
		}
		else_if = {
			limit = {
				years_passed >= 30
				years_passed < 40
			}
			add_modifier = {
				modifier = tec_onevision_3
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_onevision_2
					has_modifier = tec_onevision_3
				}
				remove_modifier = tec_onevision_base
				remove_modifier = tec_onevision_1
				remove_modifier = tec_onevision_2
			}
		}
		else_if = {
			limit = {
				years_passed >= 40
				years_passed < 50
			}
			add_modifier = {
				modifier = tec_onevision_4
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_onevision_3
					has_modifier = tec_onevision_4
				}
				remove_modifier = tec_onevision_base
				remove_modifier = tec_onevision_1
				remove_modifier = tec_onevision_2
				remove_modifier = tec_onevision_3
			}
		}
		else_if = {
			limit = {
				years_passed >= 50
			}
			add_modifier = {
				modifier = tec_onevision_5
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_onevision_4
					has_modifier = tec_onevision_5
				}
				remove_modifier = tec_onevision_base
				remove_modifier = tec_onevision_1
				remove_modifier = tec_onevision_2
				remove_modifier = tec_onevision_3
				remove_modifier = tec_onevision_4
			}
		}
	}
}

# One Mind - Hidden modifier upon unlock - NOPE
country_event = {
	id = tec_tradition.1030
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_ascension_perk = ap_one_vision
	}

	immediate = {
		add_modifier = {
			modifier = tec_onevision_base
			days = -1
		}
	}
}

# One Mind - Each year it checks changes
country_event = {
	id = tec_tradition.1031
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_ascension_perk = ap_tec_one_mind
	}

	immediate = {
		if = {	#FAILSAFE
			limit = {
				years_passed < 10
				NOT = {
					has_modifier = tec_onemind_base
				}
			}
			add_modifier = {
				modifier = tec_onemind_base
				days = -1
			}
		}
		else_if = {
			limit = {
				years_passed >= 10
				years_passed < 20
			}
			add_modifier = {
				modifier = tec_onemind_1
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_onemind_base
					has_modifier = tec_onemind_1
				}
				remove_modifier = tec_onemind_base
			}
		}
		else_if = {
			limit = {
				years_passed >= 20
				years_passed < 30
			}
			add_modifier = {
				modifier = tec_onemind_2
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_onemind_1
					has_modifier = tec_onemind_2
				}
				remove_modifier = tec_onemind_base
				remove_modifier = tec_onemind_1
			}
		}
		else_if = {
			limit = {
				years_passed >= 30
				years_passed < 40
			}
			add_modifier = {
				modifier = tec_onemind_3
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_onemind_2
					has_modifier = tec_onemind_3
				}
				remove_modifier = tec_onemind_base
				remove_modifier = tec_onemind_1
				remove_modifier = tec_onemind_2
			}
		}
		else_if = {
			limit = {
				years_passed >= 40
				years_passed < 50
			}
			add_modifier = {
				modifier = tec_onemind_4
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_onemind_3
					has_modifier = tec_onemind_4
				}
				remove_modifier = tec_onemind_base
				remove_modifier = tec_onemind_1
				remove_modifier = tec_onemind_2
				remove_modifier = tec_onemind_3
			}
		}
		else_if = {
			limit = {
				years_passed >= 50
			}
			add_modifier = {
				modifier = tec_onemind_5
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_onemind_4
					has_modifier = tec_onemind_5
				}
				remove_modifier = tec_onemind_base
				remove_modifier = tec_onemind_1
				remove_modifier = tec_onemind_2
				remove_modifier = tec_onemind_3
				remove_modifier = tec_onemind_4
			}
		}
	}
}

# Influential Knowledge - - NOPE
country_event = {
	id = tec_tradition.1040
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_ascension_perk = ap_tec_influential
	}

	immediate = {
		add_modifier = {
			modifier = tec_influential_base
			days = -1
		}
	}
}

# Influential Knowledge - Each year it checks changes
country_event = {
	id = tec_tradition.1041
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_ascension_perk = ap_tec_influential
	}

	immediate = {
		if = {	#FAILSAFE
			limit = {
				years_passed < 10
				NOT = {
					has_modifier = tec_influential_base
				}
			}
			add_modifier = {
				modifier = tec_influential_base
				days = -1
			}
		}
		else_if = {
			limit = {
				years_passed >= 10
				years_passed < 20
			}
			add_modifier = {
				modifier = tec_influential_1
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_influential_base
				}
				remove_modifier = tec_influential_base
			}
		}
		else_if = {
			limit = {
				years_passed >= 20
				years_passed < 30
			}
			add_modifier = {
				modifier = tec_influential_2
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_influential_base
				}
				remove_modifier = tec_influential_base
			}
			if = {
				limit = {
					has_modifier = tec_influential_1
				}
				remove_modifier = tec_influential_1
			}
		}
		else_if = {
			limit = {
				years_passed >= 30
				years_passed < 40
			}
			add_modifier = {
				modifier = tec_influential_3
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_influential_base
				}
				remove_modifier = tec_influential_base
			}
			if = {
				limit = {
					has_modifier = tec_influential_1
				}
				remove_modifier = tec_influential_1
			}
			if = {
				limit = {
					has_modifier = tec_influential_2
				}
				remove_modifier = tec_influential_2
			}
		}
		else_if = {
			limit = {
				years_passed >= 40
				years_passed < 50
			}
			add_modifier = {
				modifier = tec_influential_4
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_influential_base
				}
				remove_modifier = tec_influential_base
			}
			if = {
				limit = {
					has_modifier = tec_influential_1
				}
				remove_modifier = tec_influential_1
			}
			if = {
				limit = {
					has_modifier = tec_influential_2
				}
				remove_modifier = tec_influential_2
			}
			if = {
				limit = {
					has_modifier = tec_influential_3
				}
				remove_modifier = tec_influential_3
			}
		}
		else_if = {
			limit = {
				years_passed >= 50
			}
			add_modifier = {
				modifier = tec_influential_5
				days = -1
			}
			if = {
				limit = {
					has_modifier = tec_influential_base
				}
				remove_modifier = tec_influential_base
			}
			if = {
				limit = {
					has_modifier = tec_influential_1
				}
				remove_modifier = tec_influential_1
			}
			if = {
				limit = {
					has_modifier = tec_influential_2
				}
				remove_modifier = tec_influential_2
			}
			if = {
				limit = {
					has_modifier = tec_influential_3
				}
				remove_modifier = tec_influential_3
			}
			if = {
				limit = {
					has_modifier = tec_influential_4
				}
				remove_modifier = tec_influential_4
			}
		}
	}
}

# Finisher Announces 
country_event = {	# protoworlds
	id = tec_tradition.10001
	title = "tec_tradition.10001.name"
	desc = "tec_tradition.10001.desc"
	picture = GFX_evt_barren_dig_site
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		custom_tooltip = tec_tradition.10001.a.tooltip
	}
}
	
country_event = {	# Elysiums
	id = tec_tradition.10003
	title = "tec_tradition.10003.name"
	desc = "tec_tradition.10003.desc"
	picture = GFX_evt_ringworld
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		custom_tooltip = tec_tradition.10003.a.tooltip
		add_research_option = tech_elysium_ring
	}
}

country_event = {	# Statecraft
	id = tec_tradition.10006
	title = "tec_tradition.10006.name"
	desc = "tec_tradition.10006.desc"
	picture = GFX_evt_news_room
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		custom_tooltip = tec_tradition.10006.a.tooltip
	}
}

country_event = {	# Breakthroughs
	id = tec_tradition.10007
	title = "tec_tradition.10007.name"
	desc = "tec_tradition.10007.desc"
	picture = GFX_evt_intelligence_report
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	trigger = {
		OR = {
			tec_is_default_country = yes
			# These are just in case
			is_country_type = default_exocolonist
			is_country_type = default_exocolonist_ai
		}
	}

	option = {
		name = EXCELLENT
		custom_tooltip = tec_tradition.10007.a.tooltip
	}

	after = {
		hidden_effect = {
			country_event = {
				id = tec_bt.1
			}
		}
	}
}

# 

# ----------- BREAKTHROUGHS ---------------	ON TEST
namespace = tec_bt
# Controller	- 	Activated via AP, tradition finisher or whatever+
# Storing everything on global event country so its more trackable than global flags

country_event = {	# Triggers the distribution - TEST VERSION
	id = tec_bt.1
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		# Draws a random tech
		random_list = {
			10 = {	# BT 101
				modifier = {
					factor = 0
					event_target:global_event_country = {
						has_country_flag = tec_unlocked_bt_101
					}
				}
				modifier = {
					factor = 1
					event_target:global_event_country = {
						NOT = {
							has_country_flag = tec_unlocked_bt_101
						}
					}
				}
				event_target:global_event_country = {
					set_country_flag = tec_unlocked_bt_101
					set_timed_country_flag = {
						flag = tec_close_spread_off_bt_101
						years = 15
					}
					set_timed_country_flag = {
						flag = tec_mid_spread_off_bt_101
						years = 25
					}
					set_timed_country_flag = {
						flag = tec_high_spread_off_bt_101
						years = 50
					}
				}
				add_research_option = tech_tec_bt_101_test
			}
			10 = {	# BT 102
				modifier = {
					factor = 0
					event_target:global_event_country = {
						has_country_flag = tec_unlocked_bt_102
					}
				}
				modifier = {
					factor = 1
					event_target:global_event_country = {
						NOT = {
							has_country_flag = tec_unlocked_bt_102
						}
					}
				}
				event_target:global_event_country = {
					set_country_flag = tec_unlocked_bt_102
					set_timed_country_flag = {
						flag = tec_close_spread_off_bt_102
						years = 15
					}
					set_timed_country_flag = {
						flag = tec_mid_spread_off_bt_102
						years = 25
					}
					set_timed_country_flag = {
						flag = tec_high_spread_off_bt_102
						years = 50
					}
				}
				add_research_option = tech_tec_bt_102_test
			}
			10 = {	# BT 103
				modifier = {
					factor = 0
					event_target:global_event_country = {
						has_country_flag = tec_unlocked_bt_103
					}
				}
				modifier = {
					factor = 1
					event_target:global_event_country = {
						NOT = {
							has_country_flag = tec_unlocked_bt_103
						}
					}
				}
				event_target:global_event_country = {
					set_country_flag = tec_unlocked_bt_103
					set_timed_country_flag = {
						flag = tec_close_spread_off_bt_103
						years = 15
					}
					set_timed_country_flag = {
						flag = tec_mid_spread_off_bt_103
						years = 25
					}
					set_timed_country_flag = {
						flag = tec_high_spread_off_bt_103
						years = 50
					}
				}
				add_research_option = tech_tec_bt_103_test
			}
			10 = {	# BT 104
				modifier = {
					factor = 0
					event_target:global_event_country = {
						has_country_flag = tec_unlocked_bt_104
					}
				}
				modifier = {
					factor = 1
					event_target:global_event_country = {
						NOT = {
							has_country_flag = tec_unlocked_bt_104
						}
					}
				}
				event_target:global_event_country = {
					set_country_flag = tec_unlocked_bt_104
					set_timed_country_flag = {
						flag = tec_close_spread_off_bt_104
						years = 15
					}
					set_timed_country_flag = {
						flag = tec_mid_spread_off_bt_104
						years = 25
					}
					set_timed_country_flag = {
						flag = tec_high_spread_off_bt_104
						years = 50
					}
				}
				add_research_option = tech_tec_bt_104_test
			}
			10 = {	# BT 105
				modifier = {
					factor = 0
					event_target:global_event_country = {
						has_country_flag = tec_unlocked_bt_105
					}
				}
				modifier = {
					factor = 1
					event_target:global_event_country = {
						NOT = {
							has_country_flag = tec_unlocked_bt_105
						}
					}
				}
				event_target:global_event_country = {
					set_country_flag = tec_unlocked_bt_105
					set_timed_country_flag = {
						flag = tec_close_spread_off_bt_105
						years = 15
					}
					set_timed_country_flag = {
						flag = tec_mid_spread_off_bt_105
						years = 25
					}
					set_timed_country_flag = {
						flag = tec_high_spread_off_bt_105
						years = 50
					}
				}
				add_research_option = tech_tec_bt_105_test
			}
		}

		# If no one ever had a breakthrough, first announcement
		if = {
			limit = {
				event_target:global_event_country = {
					NOT = {
						has_country_flag = tec_bt_mechanic_on
					}
				}
			}
			event_target:global_event_country = {
				set_country_flag = tec_bt_mechanic_on
			}
			every_playable_country = {
				# Announcement event go here
				limit = {
					NOT = {	is_same_value = root }
				}
				country_event = {
					id = tec_bt.10
					days = 60
					random = 30
				}
			}
		}
	}
}
country_event = {	# Common announcement
	id = tec_bt.10
	title = "tec_bt.10.name"
	desc = "tec_bt.10.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_bt.10.a"
		trigger = {
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.10.b"
		trigger = {
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
				has_civic = civic_tec_occultist
			}
		}
	}
	option = {
		name = "tec_bt.10.c"
		trigger = {
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_gestalt_apathy
			}
		}
	}
	option = {
		name = "tec_bt.10.d"
		trigger = {
			OR = {
				has_civic = civic_fanatic_purifiers
				has_civic = civic_hive_devouring_swarm
				has_civic = civic_fanatic_purifiers
			}
		}
	}
}
country_event = {	# Distribution event (to avoid multiple inter-country callings)
	id = tec_bt.500
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		event_target:global_event_country = {
			has_country_flag = tec_bt_mechanic_on
		}
	}

	immediate = {
		if = {	# 101
			limit = {
				event_target:global_event_country = {
					has_country_flag = tec_unlocked_bt_101
				}
				OR = {
					NOT = {
						exists = event_target:tec_bt_101_og
					}
					event_target:tec_bt_101_og = {
						NOT = {
							has_ascension_perk = ap_enigmatic_engineering
						}
					}
				}
				NOR = {
					has_technology = tech_tec_bt_101_test
					is_researching_technology = tech_tec_bt_101_test
					has_tech_option = tech_tec_bt_101_test
				}
			}
			country_event = {
				id = tec_bt.5101
			}
		}
		if = {	# 102
			limit = {
				event_target:global_event_country = {
					has_country_flag = tec_unlocked_bt_102
				}
				OR = {
					NOT = {
						exists = event_target:tec_bt_102_og
					}
					event_target:tec_bt_102_og = {
						NOT = {
							has_ascension_perk = ap_enigmatic_engineering
						}
					}
				}
				NOR = {
					has_technology = tech_tec_bt_102_test
					is_researching_technology = tech_tec_bt_102_test
					has_tech_option = tech_tec_bt_102_test
				}
			}
			country_event = {
				id = tec_bt.5102
			}
		}
		if = {	# 103
			limit = {
				event_target:global_event_country = {
					has_country_flag = tec_unlocked_bt_103
				}
				OR = {
					NOT = {
						exists = event_target:tec_bt_103_og
					}
					event_target:tec_bt_103_og = {
						NOT = {
							has_ascension_perk = ap_enigmatic_engineering
						}
					}
				}
				NOR = {
					has_technology = tech_tec_bt_103_test
					is_researching_technology = tech_tec_bt_103_test
					has_tech_option = tech_tec_bt_103_test
				}
			}
			country_event = {
				id = tec_bt.5103
			}
		}
		if = {	# 104
			limit = {
				event_target:global_event_country = {
					has_country_flag = tec_unlocked_bt_104
				}
				OR = {
					NOT = {
						exists = event_target:tec_bt_104_og
					}
					event_target:tec_bt_104_og = {
						NOT = {
							has_ascension_perk = ap_enigmatic_engineering
						}
					}
				}
				NOR = {
					has_technology = tech_tec_bt_104_test
					is_researching_technology = tech_tec_bt_104_test
					has_tech_option = tech_tec_bt_104_test
				}
			}
			country_event = {
				id = tec_bt.5104
			}
		}
		if = {	# 105
			limit = {
				event_target:global_event_country = {
					has_country_flag = tec_unlocked_bt_105
				}
				OR = {
					NOT = {
						exists = event_target:tec_bt_105_og
					}
					event_target:tec_bt_105_og = {
						NOT = {
							has_ascension_perk = ap_enigmatic_engineering
						}
					}
				}
				NOR = {
					has_technology = tech_tec_bt_105_test
					is_researching_technology = tech_tec_bt_105_test
					has_tech_option = tech_tec_bt_105_test
				}
			}
			country_event = {
				id = tec_bt.5105
			}
		}
	}
}


	# hidden control events
	# ----------------------------------------- bt 101
country_event = {	# Bt 101 researched, only first time
	id = tec_bt.2101
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_technology = tech_tec_bt_101_test
	}

	immediate = {
		save_global_event_target_as = tec_bt_101_og
		event_target:global_event_country = {	# store leader
			create_leader = {
				species = root
				class = scientist
				name = "[root.GetName]" #tec_bt_101_og_name
				skill = 1
				traits = {
					trait = leader_trait_tec_debug_immortal
				}
			}
			last_created_leader = {
				set_name = "[root.GetName]"
				save_global_event_target_as = tec_bt_101_og_backup
			}
		}
		country_event = {
			id = tec_bt.3101
			days = 1
			random = 1
		}
		every_playable_country = {
			limit = {
				OR = {
					has_established_contact = root
					has_communications = root
				}
				NOT = { is_same_value = root }
			}
			country_event = {
				id = tec_bt.4101
				days = 1
				random = 1
			}
		}
	}
}
country_event = {	# Self announcement
	id = tec_bt.3101
	title = "tec_bt.3101.name"
	desc = "tec_bt.3101.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_bt.3101.a"
		custom_tooltip = tec_bt.3101.a.tooltip
	}
}
country_event = {	# Common announcement
	id = tec_bt.4101
	title = "tec_bt.4101.name"
	desc = "tec_bt.4101.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_bt.4101.a"
		trigger = {
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4101.b"
		trigger = {
			opinion_level = {
				who = from
				level > neutral
			}
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4101.c"
		trigger = {
			OR = {
				is_in_federation_with = from
				has_research_agreement = from
			}
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4101.d"
		trigger = {
			OR = {
				is_at_war_with = from
				is_rival = from
				opinion_level = {
					who = from
					level < neutral
				}
			}
		}
	}
}
country_event = {	# Bt 101 each 5 years, controlled by bt.500
	id = tec_bt.5101
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { # Only for close friends
				event_target:global_event_country = {
					has_country_flag = tec_close_spread_off_bt_101
				}
				NOR = {
					has_technology = tech_tec_bt_101_test
					is_researching_technology = tech_tec_bt_101_test
					has_tech_option = tech_tec_bt_101_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_101_og
					has_communications = event_target:tec_bt_101_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_101_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_101_test
								is_researching_technology = tech_tec_bt_101_test
								has_tech_option = tech_tec_bt_101_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_101_og }
				is_neighbor_of = event_target:tec_bt_101_og
				opinion_level = {
					who = event_target:tec_bt_101_og
					level > good
				}
				OR = {
					has_research_agreement = event_target:tec_bt_101_og
					is_in_federation_with = event_target:tec_bt_101_og
					AND = {
						is_galactic_community_member = yes
						event_target:tec_bt_101_og = {
							is_galactic_community_member = yes
						}
					}
				}
			}
			set_country_flag = tec_bt_close_spread_candidate_101
		}
		
		else_if = {	# Only for friendos/fed/galcom if enforced
			limit = {
				event_target:global_event_country = {
					NOT = {
						has_country_flag = tec_close_spread_off_bt_101
					}
					has_country_flag = tec_mid_spread_off_bt_101
				}
				NOR = {
					has_technology = tech_tec_bt_101_test
					is_researching_technology = tech_tec_bt_101_test
					has_tech_option = tech_tec_bt_101_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_101_og
					has_communications = event_target:tec_bt_101_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_101_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_101_test
								is_researching_technology = tech_tec_bt_101_test
								has_tech_option = tech_tec_bt_101_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_101_og }
				OR = {
					AND = {
						opinion_level = {
							who = event_target:tec_bt_101_og 
							level > good
						}
					}
					has_research_agreement = event_target:tec_bt_101_og
					is_in_federation_with = event_target:tec_bt_101_og
					AND = {
						is_galactic_community_member = yes
						event_target:tec_bt_101_og = {
							is_galactic_community_member = yes
						}
						has_global_flag = tec_galcom_force_spread_true
					}
				}
			}
			set_country_flag = tec_bt_mid_spread_candidate_101
		}
		else_if = { # Near everyone has access now
			limit = {
				event_target:global_event_country = {
					NOT = {
						has_country_flag = tec_mid_spread_off_bt_101
					}
					has_country_flag = tec_high_spread_off_bt_101
				}
				NOR = {
					has_technology = tech_tec_bt_101_test
					is_researching_technology = tech_tec_bt_101_test
					has_tech_option = tech_tec_bt_101_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_101_og
					has_communications = event_target:tec_bt_101_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_101_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_101_test
								is_researching_technology = tech_tec_bt_101_test
								has_tech_option = tech_tec_bt_101_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_101_og }
			}
			set_country_flag = tec_bt_high_spread_candidate_101
		}
	}


}
country_event = {	# On tech increased chance calc
	id = tec_bt.6101
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOR = {
			has_technology = tech_tec_bt_101_test
			is_researching_technology = tech_tec_bt_101_test
			has_tech_option = tech_tec_bt_101_test
		}
		OR = {
			has_country_flag = tec_bt_close_spread_candidate_101
			has_country_flag = tec_bt_mid_spread_candidate_101
			has_country_flag = tec_bt_high_spread_candidate_101
		}
	}

	immediate = {
		if = {
			limit = {
				has_country_flag = tec_bt_close_spread_candidate_101
			}
			random = {
				chance = 33
				if = {
					limit = {
						exists = event_target:tec_bt_101_og
					}
					country_event = {
						id = tec_bt.7101
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_101_og
						}
					}
					country_event = {
						id = tec_bt.8101
						days = 30
						random = 30
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = tec_bt_mid_spread_candidate_101
			}
			random = {
				chance = 33
				if = {
					limit = {
						exists = event_target:tec_bt_101_og
					}
					country_event = {
						id = tec_bt.7101
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_101_og
						}
					}
					country_event = {
						id = tec_bt.8101
						days = 30
						random = 30
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = tec_bt_high_spread_candidate_101
			}
			random = {
				chance = 15
				if = {
					limit = {
						exists = event_target:tec_bt_101_og
					}
					country_event = {
						id = tec_bt.7101
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_101_og
						}
					}
					country_event = {
						id = tec_bt.8101
						days = 30
						random = 30
					}
				}
			}
		}
	}
}
country_event = {	# Country still exists
	id = tec_bt.7101
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening
	is_triggered_only = yes

	title = "tec_bt.7101.name"
	desc = {
		text = "tec_bt.7101.friendly.desc"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_101
		}
	}
	desc = {
		text = "tec_bt.7101.semifriendly.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_101
			}
			has_country_flag = tec_bt_mid_spread_candidate_101
		}
	}
	desc = {
		text = "tec_bt.7101.neutral.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_101
			}
			has_country_flag = tec_bt_high_spread_candidate_101
		}
	}

	option = {
		name = "tec_bt.7101.a"
		custom_tooltip = "tec_bt.7101.tooltip"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_101
		}
	}

	option = {
		name = "tec_bt.7101.b"
		custom_tooltip = "tec_bt.7101.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_101
			}
			has_country_flag = tec_bt_mid_spread_candidate_101
		}
	}

	option = {
		name = "tec_bt.7101.c"
		custom_tooltip = "tec_bt.7101.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_101
			}
			has_country_flag = tec_bt_high_spread_candidate_101
		}
	}

	after = {
		hidden_effect = {
			add_research_option = tech_tec_bt_101_test
		}
	}
}
country_event = {	# Country no longer exists
	id = tec_bt.8101
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening
	is_triggered_only = yes

	title = "tec_bt.8101.name"
	desc = {
		text = "tec_bt.8101.friendly.desc"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_101
		}
	}
	desc = {
		text = "tec_bt.8101.semifriendly.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_101
			}
			has_country_flag = tec_bt_mid_spread_candidate_101
		}
	}
	desc = {
		text = "tec_bt.8101.neutral.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_101
			}
			has_country_flag = tec_bt_high_spread_candidate_101
		}
	}

	option = {
		name = "tec_bt.8101.a"
		custom_tooltip = "tec_bt.7101.tooltip"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_101
		}
	}

	option = {
		name = "tec_bt.8101.b"
		custom_tooltip = "tec_bt.7101.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_101
			}
			has_country_flag = tec_bt_mid_spread_candidate_101
		}
	}

	option = {
		name = "tec_bt.8101.c"
		custom_tooltip = "tec_bt.7101.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_101
			}
			has_country_flag = tec_bt_high_spread_candidate_101
		}
	}

	after = {
		hidden_effect = {
			add_research_option = tech_tec_bt_101_test
		}
		# cleanup
		if = {
			limit = {
				has_country_flag = tec_bt_close_spread_candidate_101
			}
			remove_country_flag = tec_bt_close_spread_candidate_101
		}
		if = {
			limit = {
				has_country_flag = tec_bt_mid_spread_candidate_101
			}
			remove_country_flag = tec_bt_mid_spread_candidate_101
		}
		if = {
			limit = {
				has_country_flag = tec_bt_high_spread_candidate_101
			}
			remove_country_flag = tec_bt_high_spread_candidate_101
		}
	}
}

	# ----------------------------------------- bt 102
country_event = {	# Bt 102 researched, only first time
	id = tec_bt.2102
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_technology = tech_tec_bt_102_test
	}

	immediate = {
		save_global_event_target_as = tec_bt_102_og
		event_target:global_event_country = {	# store leader
			create_leader = {
				species = root
				class = scientist
				name = "[root.GetName]" #tec_bt_102_og_name
				skill = 1
				traits = {
					trait = leader_trait_tec_debug_immortal
				}
			}
			last_created_leader = {
				set_name = "[root.GetName]"
				save_global_event_target_as = tec_bt_102_og_backup
			}
		}
		country_event = {
			id = tec_bt.3102
			days = 1
			random = 1
		}
		every_playable_country = {
			limit = {
				OR = {
					has_established_contact = root
					has_communications = root
				}
				NOT = { is_same_value = root }
			}
			country_event = {
				id = tec_bt.4102
				days = 1
				random = 1
			}
		}
	}
}
country_event = {	# Self announcement
	id = tec_bt.3102
	title = "tec_bt.3102.name"
	desc = "tec_bt.3102.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_bt.3102.a"
		custom_tooltip = tec_bt.3102.a.tooltip
	}
}
country_event = {	# Common announcement
	id = tec_bt.4102
	title = "tec_bt.4102.name"
	desc = "tec_bt.4102.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_bt.4102.a"
		trigger = {
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4102.b"
		trigger = {
			opinion_level = {
				who = from
				level > neutral
			}
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4102.c"
		trigger = {
			OR = {
				is_in_federation_with = from
				has_research_agreement = from
			}
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4102.d"
		trigger = {
			OR = {
				is_at_war_with = from
				is_rival = from
				opinion_level = {
					who = from
					level < neutral
				}
			}
		}
	}
}
country_event = {	# Bt 102 each 5 years, controlled by bt.500
	id = tec_bt.5102
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { # Only for close friends
				event_target:global_event_country = {
					has_country_flag = tec_close_spread_off_bt_102
				}
				NOR = {
					has_technology = tech_tec_bt_102_test
					is_researching_technology = tech_tec_bt_102_test
					has_tech_option = tech_tec_bt_102_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_102_og
					has_communications = event_target:tec_bt_102_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_102_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_102_test
								is_researching_technology = tech_tec_bt_102_test
								has_tech_option = tech_tec_bt_102_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_102_og }
				is_neighbor_of = event_target:tec_bt_102_og
				opinion_level = {
					who = event_target:tec_bt_102_og
					level > good
				}
				OR = {
					has_research_agreement = event_target:tec_bt_102_og
					is_in_federation_with = event_target:tec_bt_102_og
					AND = {
						is_galactic_community_member = yes
						event_target:tec_bt_102_og = {
							is_galactic_community_member = yes
						}
					}
				}
			}
			set_country_flag = tec_bt_close_spread_candidate_102
		}
		
		else_if = {	# Only for friendos/fed/galcom if enforced
			limit = {
				event_target:global_event_country = {
					NOT = {
						has_country_flag = tec_close_spread_off_bt_102
					}
					has_country_flag = tec_mid_spread_off_bt_102
				}
				NOR = {
					has_technology = tech_tec_bt_102_test
					is_researching_technology = tech_tec_bt_102_test
					has_tech_option = tech_tec_bt_102_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_102_og
					has_communications = event_target:tec_bt_102_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_102_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_102_test
								is_researching_technology = tech_tec_bt_102_test
								has_tech_option = tech_tec_bt_102_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_102_og }
				OR = {
					AND = {
						opinion_level = {
							who = event_target:tec_bt_102_og 
							level > good
						}
					}
					has_research_agreement = event_target:tec_bt_102_og
					is_in_federation_with = event_target:tec_bt_102_og
					AND = {
						is_galactic_community_member = yes
						event_target:tec_bt_102_og = {
							is_galactic_community_member = yes
						}
						has_global_flag = tec_galcom_force_spread_true
					}
				}
			}
			set_country_flag = tec_bt_mid_spread_candidate_102
		}
		else_if = { # Near everyone has access now
			limit = {
				event_target:global_event_country = {
					NOT = {
						has_country_flag = tec_mid_spread_off_bt_102
					}
					has_country_flag = tec_high_spread_off_bt_102
				}
				NOR = {
					has_technology = tech_tec_bt_102_test
					is_researching_technology = tech_tec_bt_102_test
					has_tech_option = tech_tec_bt_102_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_102_og
					has_communications = event_target:tec_bt_102_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_102_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_102_test
								is_researching_technology = tech_tec_bt_102_test
								has_tech_option = tech_tec_bt_102_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_102_og }
			}
			set_country_flag = tec_bt_high_spread_candidate_102
		}
	}


}
country_event = {	# On tech increased chance calc
	id = tec_bt.6102
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOR = {
			has_technology = tech_tec_bt_102_test
			is_researching_technology = tech_tec_bt_102_test
			has_tech_option = tech_tec_bt_102_test
		}
		OR = {
			has_country_flag = tec_bt_close_spread_candidate_102
			has_country_flag = tec_bt_mid_spread_candidate_102
			has_country_flag = tec_bt_high_spread_candidate_102
		}
	}

	immediate = {
		if = {
			limit = {
				has_country_flag = tec_bt_close_spread_candidate_102
			}
			random = {
				chance = 33
				if = {
					limit = {
						exists = event_target:tec_bt_102_og
					}
					country_event = {
						id = tec_bt.7102
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_102_og
						}
					}
					country_event = {
						id = tec_bt.8102
						days = 30
						random = 30
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = tec_bt_mid_spread_candidate_102
			}
			random = {
				chance = 33
				if = {
					limit = {
						exists = event_target:tec_bt_102_og
					}
					country_event = {
						id = tec_bt.7102
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_102_og
						}
					}
					country_event = {
						id = tec_bt.8102
						days = 30
						random = 30
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = tec_bt_high_spread_candidate_102
			}
			random = {
				chance = 15
				if = {
					limit = {
						exists = event_target:tec_bt_102_og
					}
					country_event = {
						id = tec_bt.7102
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_102_og
						}
					}
					country_event = {
						id = tec_bt.8102
						days = 30
						random = 30
					}
				}
			}
		}
	}
}
country_event = {	# Country still exists
	id = tec_bt.7102
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening
	is_triggered_only = yes

	title = "tec_bt.7102.name"
	desc = {
		text = "tec_bt.7102.friendly.desc"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_102
		}
	}
	desc = {
		text = "tec_bt.7102.semifriendly.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_102
			}
			has_country_flag = tec_bt_mid_spread_candidate_102
		}
	}
	desc = {
		text = "tec_bt.7102.neutral.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_102
			}
			has_country_flag = tec_bt_high_spread_candidate_102
		}
	}

	option = {
		name = "tec_bt.7102.a"
		custom_tooltip = "tec_bt.7102.tooltip"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_102
		}
	}

	option = {
		name = "tec_bt.7102.b"
		custom_tooltip = "tec_bt.7102.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_102
			}
			has_country_flag = tec_bt_mid_spread_candidate_102
		}
	}

	option = {
		name = "tec_bt.7102.c"
		custom_tooltip = "tec_bt.7102.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_102
			}
			has_country_flag = tec_bt_high_spread_candidate_102
		}
	}

	after = {
		hidden_effect = {
			add_research_option = tech_tec_bt_102_test
		}
	}
}
country_event = {	# Country no longer exists
	id = tec_bt.8102
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening
	is_triggered_only = yes

	title = "tec_bt.8102.name"
	desc = {
		text = "tec_bt.8102.friendly.desc"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_102
		}
	}
	desc = {
		text = "tec_bt.8102.semifriendly.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_102
			}
			has_country_flag = tec_bt_mid_spread_candidate_102
		}
	}
	desc = {
		text = "tec_bt.8102.neutral.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_102
			}
			has_country_flag = tec_bt_high_spread_candidate_102
		}
	}

	option = {
		name = "tec_bt.8102.a"
		custom_tooltip = "tec_bt.7102.tooltip"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_102
		}
	}

	option = {
		name = "tec_bt.8102.b"
		custom_tooltip = "tec_bt.7102.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_102
			}
			has_country_flag = tec_bt_mid_spread_candidate_102
		}
	}

	option = {
		name = "tec_bt.8102.c"
		custom_tooltip = "tec_bt.7102.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_102
			}
			has_country_flag = tec_bt_high_spread_candidate_102
		}
	}

	after = {
		hidden_effect = {
			add_research_option = tech_tec_bt_102_test
		}
		# cleanup
		if = {
			limit = {
				has_country_flag = tec_bt_close_spread_candidate_102
			}
			remove_country_flag = tec_bt_close_spread_candidate_102
		}
		if = {
			limit = {
				has_country_flag = tec_bt_mid_spread_candidate_102
			}
			remove_country_flag = tec_bt_mid_spread_candidate_102
		}
		if = {
			limit = {
				has_country_flag = tec_bt_high_spread_candidate_102
			}
			remove_country_flag = tec_bt_high_spread_candidate_102
		}
	}
}

	# ----------------------------------------- bt 103
country_event = {	# Bt 103 researched, only first time
	id = tec_bt.2103
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_technology = tech_tec_bt_103_test
	}

	immediate = {
		save_global_event_target_as = tec_bt_103_og
		event_target:global_event_country = {	# store leader
			create_leader = {
				species = root
				class = scientist
				name = "[root.GetName]" #tec_bt_103_og_name
				skill = 1
				traits = {
					trait = leader_trait_tec_debug_immortal
				}
			}
			last_created_leader = {
				set_name = "[root.GetName]"
				save_global_event_target_as = tec_bt_103_og_backup
			}
		}
		country_event = {
			id = tec_bt.3103
			days = 1
			random = 1
		}
		every_playable_country = {
			limit = {
				OR = {
					has_established_contact = root
					has_communications = root
				}
				NOT = { is_same_value = root }
			}
			country_event = {
				id = tec_bt.4103
				days = 1
				random = 1
			}
		}
	}
}
country_event = {	# Self announcement
	id = tec_bt.3103
	title = "tec_bt.3103.name"
	desc = "tec_bt.3103.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_bt.3103.a"
		custom_tooltip = tec_bt.3103.a.tooltip
	}
}
country_event = {	# Common announcement
	id = tec_bt.4103
	title = "tec_bt.4103.name"
	desc = "tec_bt.4103.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_bt.4103.a"
		trigger = {
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4103.b"
		trigger = {
			opinion_level = {
				who = from
				level > neutral
			}
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4103.c"
		trigger = {
			OR = {
				is_in_federation_with = from
				has_research_agreement = from
			}
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4103.d"
		trigger = {
			OR = {
				is_at_war_with = from
				is_rival = from
				opinion_level = {
					who = from
					level < neutral
				}
			}
		}
	}
}
country_event = {	# Bt 103 each 5 years, controlled by bt.500
	id = tec_bt.5103
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { # Only for close friends
				event_target:global_event_country = {
					has_country_flag = tec_close_spread_off_bt_103
				}
				NOR = {
					has_technology = tech_tec_bt_103_test
					is_researching_technology = tech_tec_bt_103_test
					has_tech_option = tech_tec_bt_103_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_103_og
					has_communications = event_target:tec_bt_103_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_103_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_103_test
								is_researching_technology = tech_tec_bt_103_test
								has_tech_option = tech_tec_bt_103_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_103_og }
				is_neighbor_of = event_target:tec_bt_103_og
				opinion_level = {
					who = event_target:tec_bt_103_og
					level > good
				}
				OR = {
					has_research_agreement = event_target:tec_bt_103_og
					is_in_federation_with = event_target:tec_bt_103_og
					AND = {
						is_galactic_community_member = yes
						event_target:tec_bt_103_og = {
							is_galactic_community_member = yes
						}
					}
				}
			}
			set_country_flag = tec_bt_close_spread_candidate_103
		}
		
		else_if = {	# Only for friendos/fed/galcom if enforced
			limit = {
				event_target:global_event_country = {
					NOT = {
						has_country_flag = tec_close_spread_off_bt_103
					}
					has_country_flag = tec_mid_spread_off_bt_103
				}
				NOR = {
					has_technology = tech_tec_bt_103_test
					is_researching_technology = tech_tec_bt_103_test
					has_tech_option = tech_tec_bt_103_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_103_og
					has_communications = event_target:tec_bt_103_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_103_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_103_test
								is_researching_technology = tech_tec_bt_103_test
								has_tech_option = tech_tec_bt_103_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_103_og }
				OR = {
					AND = {
						opinion_level = {
							who = event_target:tec_bt_103_og 
							level > good
						}
					}
					has_research_agreement = event_target:tec_bt_103_og
					is_in_federation_with = event_target:tec_bt_103_og
					AND = {
						is_galactic_community_member = yes
						event_target:tec_bt_103_og = {
							is_galactic_community_member = yes
						}
						has_global_flag = tec_galcom_force_spread_true
					}
				}
			}
			set_country_flag = tec_bt_mid_spread_candidate_103
		}
		else_if = { # Near everyone has access now
			limit = {
				event_target:global_event_country = {
					NOT = {
						has_country_flag = tec_mid_spread_off_bt_103
					}
					has_country_flag = tec_high_spread_off_bt_103
				}
				NOR = {
					has_technology = tech_tec_bt_103_test
					is_researching_technology = tech_tec_bt_103_test
					has_tech_option = tech_tec_bt_103_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_103_og
					has_communications = event_target:tec_bt_103_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_103_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_103_test
								is_researching_technology = tech_tec_bt_103_test
								has_tech_option = tech_tec_bt_103_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_103_og }
			}
			set_country_flag = tec_bt_high_spread_candidate_103
		}
	}
}
country_event = {	# On tech increased chance calc
	id = tec_bt.6103
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOR = {
			has_technology = tech_tec_bt_103_test
			is_researching_technology = tech_tec_bt_103_test
			has_tech_option = tech_tec_bt_103_test
		}
		OR = {
			has_country_flag = tec_bt_close_spread_candidate_103
			has_country_flag = tec_bt_mid_spread_candidate_103
			has_country_flag = tec_bt_high_spread_candidate_103
		}
	}

	immediate = {
		if = {
			limit = {
				has_country_flag = tec_bt_close_spread_candidate_103
			}
			random = {
				chance = 33
				if = {
					limit = {
						exists = event_target:tec_bt_103_og
					}
					country_event = {
						id = tec_bt.7103
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_103_og
						}
					}
					country_event = {
						id = tec_bt.8103
						days = 30
						random = 30
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = tec_bt_mid_spread_candidate_103
			}
			random = {
				chance = 33
				if = {
					limit = {
						exists = event_target:tec_bt_103_og
					}
					country_event = {
						id = tec_bt.7103
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_103_og
						}
					}
					country_event = {
						id = tec_bt.8103
						days = 30
						random = 30
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = tec_bt_high_spread_candidate_103
			}
			random = {
				chance = 15
				if = {
					limit = {
						exists = event_target:tec_bt_103_og
					}
					country_event = {
						id = tec_bt.7103
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_103_og
						}
					}
					country_event = {
						id = tec_bt.8103
						days = 30
						random = 30
					}
				}
			}
		}
	}
}
country_event = {	# Country still exists
	id = tec_bt.7103
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening
	is_triggered_only = yes

	title = "tec_bt.7103.name"
	desc = {
		text = "tec_bt.7103.friendly.desc"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_103
		}
	}
	desc = {
		text = "tec_bt.7103.semifriendly.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_103
			}
			has_country_flag = tec_bt_mid_spread_candidate_103
		}
	}
	desc = {
		text = "tec_bt.7103.neutral.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_103
			}
			has_country_flag = tec_bt_high_spread_candidate_103
		}
	}

	option = {
		name = "tec_bt.7103.a"
		custom_tooltip = "tec_bt.7103.tooltip"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_103
		}
	}

	option = {
		name = "tec_bt.7103.b"
		custom_tooltip = "tec_bt.7103.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_103
			}
			has_country_flag = tec_bt_mid_spread_candidate_103
		}
	}

	option = {
		name = "tec_bt.7103.c"
		custom_tooltip = "tec_bt.7103.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_103
			}
			has_country_flag = tec_bt_high_spread_candidate_103
		}
	}

	after = {
		hidden_effect = {
			add_research_option = tech_tec_bt_103_test
		}
	}
}
country_event = {	# Country no longer exists
	id = tec_bt.8103
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening
	is_triggered_only = yes

	title = "tec_bt.8103.name"
	desc = {
		text = "tec_bt.8103.friendly.desc"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_103
		}
	}
	desc = {
		text = "tec_bt.8103.semifriendly.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_103
			}
			has_country_flag = tec_bt_mid_spread_candidate_103
		}
	}
	desc = {
		text = "tec_bt.8103.neutral.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_103
			}
			has_country_flag = tec_bt_high_spread_candidate_103
		}
	}

	option = {
		name = "tec_bt.8103.a"
		custom_tooltip = "tec_bt.7103.tooltip"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_103
		}
	}

	option = {
		name = "tec_bt.8103.b"
		custom_tooltip = "tec_bt.7103.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_103
			}
			has_country_flag = tec_bt_mid_spread_candidate_103
		}
	}

	option = {
		name = "tec_bt.8103.c"
		custom_tooltip = "tec_bt.7103.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_103
			}
			has_country_flag = tec_bt_high_spread_candidate_103
		}
	}

	after = {
		hidden_effect = {
			add_research_option = tech_tec_bt_103_test
		}
		# cleanup
		if = {
			limit = {
				has_country_flag = tec_bt_close_spread_candidate_103
			}
			remove_country_flag = tec_bt_close_spread_candidate_103
		}
		if = {
			limit = {
				has_country_flag = tec_bt_mid_spread_candidate_103
			}
			remove_country_flag = tec_bt_mid_spread_candidate_103
		}
		if = {
			limit = {
				has_country_flag = tec_bt_high_spread_candidate_103
			}
			remove_country_flag = tec_bt_high_spread_candidate_103
		}
	}
}

	# ----------------------------------------- bt 104
country_event = {	# Bt 104 researched, only first time
	id = tec_bt.2104
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_technology = tech_tec_bt_104_test
	}

	immediate = {
		save_global_event_target_as = tec_bt_104_og
		event_target:global_event_country = {	# store leader
			create_leader = {
				species = root
				class = scientist
				name = "[root.GetName]" #tec_bt_104_og_name
				skill = 1
				traits = {
					trait = leader_trait_tec_debug_immortal
				}
			}
			last_created_leader = {
				set_name = "[root.GetName]"
				save_global_event_target_as = tec_bt_104_og_backup
			}
		}
		country_event = {
			id = tec_bt.3104
			days = 1
			random = 1
		}
		every_playable_country = {
			limit = {
				OR = {
					has_established_contact = root
					has_communications = root
				}
				NOT = { is_same_value = root }
			}
			country_event = {
				id = tec_bt.4104
				days = 1
				random = 1
			}
		}
	}
}
country_event = {	# Self announcement
	id = tec_bt.3104
	title = "tec_bt.3104.name"
	desc = "tec_bt.3104.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_bt.3104.a"
		custom_tooltip = tec_bt.3104.a.tooltip
	}
}
country_event = {	# Common announcement
	id = tec_bt.4104
	title = "tec_bt.4104.name"
	desc = "tec_bt.4104.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_bt.4104.a"
		trigger = {
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4104.b"
		trigger = {
			opinion_level = {
				who = from
				level > neutral
			}
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4104.c"
		trigger = {
			OR = {
				is_in_federation_with = from
				has_research_agreement = from
			}
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4104.d"
		trigger = {
			OR = {
				is_at_war_with = from
				is_rival = from
				opinion_level = {
					who = from
					level < neutral
				}
			}
		}
	}
}
country_event = {	# Bt 104 each 5 years, controlled by bt.500
	id = tec_bt.5104
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { # Only for close friends
				event_target:global_event_country = {
					has_country_flag = tec_close_spread_off_bt_104
				}
				NOR = {
					has_technology = tech_tec_bt_104_test
					is_researching_technology = tech_tec_bt_104_test
					has_tech_option = tech_tec_bt_104_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_104_og
					has_communications = event_target:tec_bt_104_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_104_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_104_test
								is_researching_technology = tech_tec_bt_104_test
								has_tech_option = tech_tec_bt_104_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_104_og }
				is_neighbor_of = event_target:tec_bt_104_og
				opinion_level = {
					who = event_target:tec_bt_104_og
					level > good
				}
				OR = {
					has_research_agreement = event_target:tec_bt_104_og
					is_in_federation_with = event_target:tec_bt_104_og
					AND = {
						is_galactic_community_member = yes
						event_target:tec_bt_104_og = {
							is_galactic_community_member = yes
						}
					}
				}
			}
			set_country_flag = tec_bt_close_spread_candidate_104
		}
		
		else_if = {	# Only for friendos/fed/galcom if enforced
			limit = {
				event_target:global_event_country = {
					NOT = {
						has_country_flag = tec_close_spread_off_bt_104
					}
					has_country_flag = tec_mid_spread_off_bt_104
				}
				NOR = {
					has_technology = tech_tec_bt_104_test
					is_researching_technology = tech_tec_bt_104_test
					has_tech_option = tech_tec_bt_104_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_104_og
					has_communications = event_target:tec_bt_104_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_104_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_104_test
								is_researching_technology = tech_tec_bt_104_test
								has_tech_option = tech_tec_bt_104_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_104_og }
				OR = {
					AND = {
						opinion_level = {
							who = event_target:tec_bt_104_og 
							level > good
						}
					}
					has_research_agreement = event_target:tec_bt_104_og
					is_in_federation_with = event_target:tec_bt_104_og
					AND = {
						is_galactic_community_member = yes
						event_target:tec_bt_104_og = {
							is_galactic_community_member = yes
						}
						has_global_flag = tec_galcom_force_spread_true
					}
				}
			}
			set_country_flag = tec_bt_mid_spread_candidate_104
		}
		else_if = { # Near everyone has access now
			limit = {
				event_target:global_event_country = {
					NOT = {
						has_country_flag = tec_mid_spread_off_bt_104
					}
					has_country_flag = tec_high_spread_off_bt_104
				}
				NOR = {
					has_technology = tech_tec_bt_104_test
					is_researching_technology = tech_tec_bt_104_test
					has_tech_option = tech_tec_bt_104_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_104_og
					has_communications = event_target:tec_bt_104_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_104_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_104_test
								is_researching_technology = tech_tec_bt_104_test
								has_tech_option = tech_tec_bt_104_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_104_og }
			}
			set_country_flag = tec_bt_high_spread_candidate_104
		}
	}
}
country_event = {	# On tech increased chance calc
	id = tec_bt.6104
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOR = {
			has_technology = tech_tec_bt_104_test
			is_researching_technology = tech_tec_bt_104_test
			has_tech_option = tech_tec_bt_104_test
		}
		OR = {
			has_country_flag = tec_bt_close_spread_candidate_104
			has_country_flag = tec_bt_mid_spread_candidate_104
			has_country_flag = tec_bt_high_spread_candidate_104
		}
	}

	immediate = {
		if = {
			limit = {
				has_country_flag = tec_bt_close_spread_candidate_104
			}
			random = {
				chance = 33
				if = {
					limit = {
						exists = event_target:tec_bt_104_og
					}
					country_event = {
						id = tec_bt.7104
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_104_og
						}
					}
					country_event = {
						id = tec_bt.8104
						days = 30
						random = 30
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = tec_bt_mid_spread_candidate_104
			}
			random = {
				chance = 33
				if = {
					limit = {
						exists = event_target:tec_bt_104_og
					}
					country_event = {
						id = tec_bt.7104
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_104_og
						}
					}
					country_event = {
						id = tec_bt.8104
						days = 30
						random = 30
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = tec_bt_high_spread_candidate_104
			}
			random = {
				chance = 15
				if = {
					limit = {
						exists = event_target:tec_bt_104_og
					}
					country_event = {
						id = tec_bt.7104
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_104_og
						}
					}
					country_event = {
						id = tec_bt.8104
						days = 30
						random = 30
					}
				}
			}
		}
	}
}
country_event = {	# Country still exists
	id = tec_bt.7104
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening
	is_triggered_only = yes

	title = "tec_bt.7104.name"
	desc = {
		text = "tec_bt.7104.friendly.desc"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_104
		}
	}
	desc = {
		text = "tec_bt.7104.semifriendly.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_104
			}
			has_country_flag = tec_bt_mid_spread_candidate_104
		}
	}
	desc = {
		text = "tec_bt.7104.neutral.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_104
			}
			has_country_flag = tec_bt_high_spread_candidate_104
		}
	}

	option = {
		name = "tec_bt.7104.a"
		custom_tooltip = "tec_bt.7104.tooltip"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_104
		}
	}

	option = {
		name = "tec_bt.7104.b"
		custom_tooltip = "tec_bt.7104.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_104
			}
			has_country_flag = tec_bt_mid_spread_candidate_104
		}
	}

	option = {
		name = "tec_bt.7104.c"
		custom_tooltip = "tec_bt.7104.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_104
			}
			has_country_flag = tec_bt_high_spread_candidate_104
		}
	}

	after = {
		hidden_effect = {
			add_research_option = tech_tec_bt_104_test
		}
	}
}
country_event = {	# Country no longer exists
	id = tec_bt.8104
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening
	is_triggered_only = yes

	title = "tec_bt.8104.name"
	desc = {
		text = "tec_bt.8104.friendly.desc"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_104
		}
	}
	desc = {
		text = "tec_bt.8104.semifriendly.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_104
			}
			has_country_flag = tec_bt_mid_spread_candidate_104
		}
	}
	desc = {
		text = "tec_bt.8104.neutral.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_104
			}
			has_country_flag = tec_bt_high_spread_candidate_104
		}
	}

	option = {
		name = "tec_bt.8104.a"
		custom_tooltip = "tec_bt.7104.tooltip"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_104
		}
	}

	option = {
		name = "tec_bt.8104.b"
		custom_tooltip = "tec_bt.7104.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_104
			}
			has_country_flag = tec_bt_mid_spread_candidate_104
		}
	}

	option = {
		name = "tec_bt.8104.c"
		custom_tooltip = "tec_bt.7104.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_104
			}
			has_country_flag = tec_bt_high_spread_candidate_104
		}
	}

	after = {
		hidden_effect = {
			add_research_option = tech_tec_bt_104_test
		}
		# cleanup
		if = {
			limit = {
				has_country_flag = tec_bt_close_spread_candidate_104
			}
			remove_country_flag = tec_bt_close_spread_candidate_104
		}
		if = {
			limit = {
				has_country_flag = tec_bt_mid_spread_candidate_104
			}
			remove_country_flag = tec_bt_mid_spread_candidate_104
		}
		if = {
			limit = {
				has_country_flag = tec_bt_high_spread_candidate_104
			}
			remove_country_flag = tec_bt_high_spread_candidate_104
		}
	}
}

	# ----------------------------------------- bt 105
country_event = {	# Bt 105 researched, only first time
	id = tec_bt.2105
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_technology = tech_tec_bt_105_test
	}

	immediate = {
		save_global_event_target_as = tec_bt_105_og
		event_target:global_event_country = {	# store leader
			create_leader = {
				species = root
				class = scientist
				name = "[root.GetName]" #tec_bt_105_og_name
				skill = 1
				traits = {
					trait = leader_trait_tec_debug_immortal
				}
			}
			last_created_leader = {
				set_name = "[root.GetName]"
				save_global_event_target_as = tec_bt_105_og_backup
			}
		}
		country_event = {
			id = tec_bt.3105
			days = 1
			random = 1
		}
		every_playable_country = {
			limit = {
				OR = {
					has_established_contact = root
					has_communications = root
				}
				NOT = { is_same_value = root }
			}
			country_event = {
				id = tec_bt.4105
				days = 1
				random = 1
			}
		}
	}
}
country_event = {	# Self announcement
	id = tec_bt.3105
	title = "tec_bt.3105.name"
	desc = "tec_bt.3105.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_bt.3105.a"
		custom_tooltip = tec_bt.3105.a.tooltip
	}
}
country_event = {	# Common announcement
	id = tec_bt.4105
	title = "tec_bt.4105.name"
	desc = "tec_bt.4105.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_bt.4105.a"
		trigger = {
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4105.b"
		trigger = {
			opinion_level = {
				who = from
				level > neutral
			}
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4105.c"
		trigger = {
			OR = {
				is_in_federation_with = from
				has_research_agreement = from
			}
			NOR = {
				is_at_war_with = from
				is_rival = from
			}
		}
	}
	option = {
		name = "tec_bt.4105.d"
		trigger = {
			OR = {
				is_at_war_with = from
				is_rival = from
				opinion_level = {
					who = from
					level < neutral
				}
			}
		}
	}
}
country_event = {	# Bt 105 each 5 years, controlled by bt.500
	id = tec_bt.5105
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { # Only for close friends
				event_target:global_event_country = {
					has_country_flag = tec_close_spread_off_bt_105
				}
				NOR = {
					has_technology = tech_tec_bt_105_test
					is_researching_technology = tech_tec_bt_105_test
					has_tech_option = tech_tec_bt_105_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_105_og
					has_communications = event_target:tec_bt_105_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_105_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_105_test
								is_researching_technology = tech_tec_bt_105_test
								has_tech_option = tech_tec_bt_105_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_105_og }
				is_neighbor_of = event_target:tec_bt_105_og
				opinion_level = {
					who = event_target:tec_bt_105_og
					level > good
				}
				OR = {
					has_research_agreement = event_target:tec_bt_105_og
					is_in_federation_with = event_target:tec_bt_105_og
					AND = {
						is_galactic_community_member = yes
						event_target:tec_bt_105_og = {
							is_galactic_community_member = yes
						}
					}
				}
			}
			set_country_flag = tec_bt_close_spread_candidate_105
		}
		
		else_if = {	# Only for friendos/fed/galcom if enforced
			limit = {
				event_target:global_event_country = {
					NOT = {
						has_country_flag = tec_close_spread_off_bt_105
					}
					has_country_flag = tec_mid_spread_off_bt_105
				}
				NOR = {
					has_technology = tech_tec_bt_105_test
					is_researching_technology = tech_tec_bt_105_test
					has_tech_option = tech_tec_bt_105_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_105_og
					has_communications = event_target:tec_bt_105_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_105_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_105_test
								is_researching_technology = tech_tec_bt_105_test
								has_tech_option = tech_tec_bt_105_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_105_og }
				OR = {
					AND = {
						opinion_level = {
							who = event_target:tec_bt_105_og 
							level > good
						}
					}
					has_research_agreement = event_target:tec_bt_105_og
					is_in_federation_with = event_target:tec_bt_105_og
					AND = {
						is_galactic_community_member = yes
						event_target:tec_bt_105_og = {
							is_galactic_community_member = yes
						}
						has_global_flag = tec_galcom_force_spread_true
					}
				}
			}
			set_country_flag = tec_bt_mid_spread_candidate_105
		}
		else_if = { # Near everyone has access now
			limit = {
				event_target:global_event_country = {
					NOT = {
						has_country_flag = tec_mid_spread_off_bt_105
					}
					has_country_flag = tec_high_spread_off_bt_105
				}
				NOR = {
					has_technology = tech_tec_bt_105_test
					is_researching_technology = tech_tec_bt_105_test
					has_tech_option = tech_tec_bt_105_test
				}
				OR = {
					has_established_contact = event_target:tec_bt_105_og
					has_communications = event_target:tec_bt_105_og
					AND = {
						NOT = {
							exists = event_target:tec_bt_105_og
						}
						any_playable_country = {
							OR = {
								has_technology = tech_tec_bt_105_test
								is_researching_technology = tech_tec_bt_105_test
								has_tech_option = tech_tec_bt_105_test
							}
						}
					}
				}
				NOT = { is_same_value = event_target:tec_bt_105_og }
			}
			set_country_flag = tec_bt_high_spread_candidate_105
		}
	}
}
country_event = {	# On tech increased chance calc
	id = tec_bt.6105
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOR = {
			has_technology = tech_tec_bt_105_test
			is_researching_technology = tech_tec_bt_105_test
			has_tech_option = tech_tec_bt_105_test
		}
		OR = {
			has_country_flag = tec_bt_close_spread_candidate_105
			has_country_flag = tec_bt_mid_spread_candidate_105
			has_country_flag = tec_bt_high_spread_candidate_105
		}
	}

	immediate = {
		if = {
			limit = {
				has_country_flag = tec_bt_close_spread_candidate_105
			}
			random = {
				chance = 33
				if = {
					limit = {
						exists = event_target:tec_bt_105_og
					}
					country_event = {
						id = tec_bt.7105
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_105_og
						}
					}
					country_event = {
						id = tec_bt.8105
						days = 30
						random = 30
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = tec_bt_mid_spread_candidate_105
			}
			random = {
				chance = 33
				if = {
					limit = {
						exists = event_target:tec_bt_105_og
					}
					country_event = {
						id = tec_bt.7105
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_105_og
						}
					}
					country_event = {
						id = tec_bt.8105
						days = 30
						random = 30
					}
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = tec_bt_high_spread_candidate_105
			}
			random = {
				chance = 15
				if = {
					limit = {
						exists = event_target:tec_bt_105_og
					}
					country_event = {
						id = tec_bt.7105
						days = 30
						random = 30
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = event_target:tec_bt_105_og
						}
					}
					country_event = {
						id = tec_bt.8105
						days = 30
						random = 30
					}
				}
			}
		}
	}
}
country_event = {	# Country still exists
	id = tec_bt.7105
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening
	is_triggered_only = yes

	title = "tec_bt.7105.name"
	desc = {
		text = "tec_bt.7105.friendly.desc"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_105
		}
	}
	desc = {
		text = "tec_bt.7105.semifriendly.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_105
			}
			has_country_flag = tec_bt_mid_spread_candidate_105
		}
	}
	desc = {
		text = "tec_bt.7105.neutral.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_105
			}
			has_country_flag = tec_bt_high_spread_candidate_105
		}
	}

	option = {
		name = "tec_bt.7105.a"
		custom_tooltip = "tec_bt.7105.tooltip"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_105
		}
	}

	option = {
		name = "tec_bt.7105.b"
		custom_tooltip = "tec_bt.7105.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_105
			}
			has_country_flag = tec_bt_mid_spread_candidate_105
		}
	}

	option = {
		name = "tec_bt.7105.c"
		custom_tooltip = "tec_bt.7105.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_105
			}
			has_country_flag = tec_bt_high_spread_candidate_105
		}
	}

	after = {
		hidden_effect = {
			add_research_option = tech_tec_bt_105_test
		}
	}
}
country_event = {	# Country no longer exists
	id = tec_bt.8105
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening
	is_triggered_only = yes

	title = "tec_bt.8105.name"
	desc = {
		text = "tec_bt.8105.friendly.desc"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_105
		}
	}
	desc = {
		text = "tec_bt.8105.semifriendly.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_105
			}
			has_country_flag = tec_bt_mid_spread_candidate_105
		}
	}
	desc = {
		text = "tec_bt.8105.neutral.desc"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_105
			}
			has_country_flag = tec_bt_high_spread_candidate_105
		}
	}

	option = {
		name = "tec_bt.8105.a"
		custom_tooltip = "tec_bt.7105.tooltip"
		trigger = {
			has_country_flag = tec_bt_close_spread_candidate_105
		}
	}

	option = {
		name = "tec_bt.8105.b"
		custom_tooltip = "tec_bt.7105.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_close_spread_candidate_105
			}
			has_country_flag = tec_bt_mid_spread_candidate_105
		}
	}

	option = {
		name = "tec_bt.8105.c"
		custom_tooltip = "tec_bt.7105.tooltip"
		trigger = {
			NOT = {
				has_country_flag = tec_bt_mid_spread_candidate_105
			}
			has_country_flag = tec_bt_high_spread_candidate_105
		}
	}

	after = {
		hidden_effect = {
			add_research_option = tech_tec_bt_105_test
		}
		# cleanup
		if = {
			limit = {
				has_country_flag = tec_bt_close_spread_candidate_105
			}
			remove_country_flag = tec_bt_close_spread_candidate_105
		}
		if = {
			limit = {
				has_country_flag = tec_bt_mid_spread_candidate_105
			}
			remove_country_flag = tec_bt_mid_spread_candidate_105
		}
		if = {
			limit = {
				has_country_flag = tec_bt_high_spread_candidate_105
			}
			remove_country_flag = tec_bt_high_spread_candidate_105
		}
	}
}


#########################################################################################################
###################################	A S C E N S I O N	E V E N T S ###################################
#########################################################################################################
# list of namespaces
	# Misc									tec_ascension.1-100
	# Main ascensions
		# Biological
			# Bio A								tec_gene_path.xxx
			# Bio B								tec_bio_path.xxx
		# Cybernetics
			# Cyborgs							tec_cybernetic_path.xxx
			# Synths							tec_synth_path.xxx
		# Psionics
			# Psi A								tec_psionic_path.xxx
			# Psi B								tec_psionic_path_B.xxx
	# Specific gestalt paths
		# Hive psionic path					tec_psionic_hive_path.xxx
		# Machine main path					tec_machine_path.xxx
	# Mixed Ascensions
		# Bio-Cyb: Replicant				tec_replicant_path.xxx
		# Cyb-Psi: Cyberpsionic				tec_cyberpsionic_path.xxx
		# Bio-Psi: Purity of form			tec_biopsionic_path.xxx
# /

# Misc Events
# ------------------------------------------------------------ tec_ascension.xxx
# Mostly reserved for mixes or controls
namespace = tec_ascension

# --------------------------------- MAIN ASCENSIONS ---------------------------------
# Biological A
# ------------------------------------------------------------ tec_gene_path.xxx
namespace = tec_gene_path

# Order
	# T1
		# tec_gene_path.100			Picked t1
		# tec_gene_path.10501		T1 notif
		# tec_gene_path.105			T1 project completed
	# /
	# Gating
		# tec_gene_path.20001		Post tradition 5 years
	# /
	# T2

	# /
# /

# --------------- T1
country_event = { # T1 picked
	id = tec_gene_path.100
	title = "tec_gene_path.100.name"
	desc = "tec_gene_path.100.desc"
	picture = GFX_evt_genetic_modification
	show_sound = event_engineered_evolution
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_gene_path.100.a"
		custom_tooltip = "tec_gene_path.100.a.tooltip"
		hidden_effect = {
			save_event_target_as = tec_target_country
			event_target:tec_target_country = {
				start_situation = {
					type = situation_tec_gene_path_t1
					target = event_target:tec_target_country.capital_scope
					effect = {
						save_event_target_as = new_situation
					}
				}
				event_target:new_situation = {
					set_situation_locked = no
					set_situation_approach = situation_approach_tec_gene_path_t1_neutral
				}
			}
		}
	}
}

# Situation
situation_event = { # Gene T1 - 15%
	id = tec_gene_path.10055
	title = "tec_gene_path.10055.name"
	desc = "tec_gene_path.10055.desc"

	picture = GFX_evt_overtuned
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.10055.a
		custom_tooltip = tec_gene_path.10055.a.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
	}
}

situation_event = { # Gene T1 - 45%
	id = tec_gene_path.10070
	title = "tec_gene_path.10070.name"
	desc = "tec_gene_path.10070.desc"

	picture = GFX_evt_overtuned
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.10070.a
		custom_tooltip = tec_gene_path.10070.a.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
	}
}

situation_event = { # Gene T1 - 75%
	id = tec_gene_path.10085
	title = "tec_gene_path.10085.name"
	desc = "tec_gene_path.10085.desc"

	picture = GFX_evt_overtuned
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.10085.a
		custom_tooltip = tec_gene_path.10085.a.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
	}

	option = {
		name = tec_gene_path.10085.b
		custom_tooltip = tec_gene_path.10085.b.tooltip
		allow = {
			always = no
		}
		icon = {
			icon = GFX_situation_approach_tec_genecrank
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		hidden_effect = {
			set_situation_flag = situation_tec_gene_path_t1_unlock_bio
		}
	}
}


# Finished
country_event = { # T1 Situation Completed
	id = tec_gene_path.105
	title = "tec_gene_path.105.name"
	desc = "tec_gene_path.105.desc"
	picture = GFX_evt_tec_cyan_strings
	show_sound = event_engineered_evolution
	trackable = yes

	is_triggered_only = yes

	immediate = {
	}

	option = {
		name = "tec_gene_path.105.a"
		custom_tooltip = "tec_gene_path.105.a.tooltip"
		hidden_effect = {
			# PATH FLAG
			set_country_flag = tec_gene_malleability
			set_country_flag = tec_gene_path_unlocked_tradition_1
			if = {
				limit = {
					NOT = {
						has_country_flag = tec_comm_1st_step
					}
				}
				set_country_flag = tec_comm_1st_step
				every_country = {
					limit = {
						is_ai = no
						NOR = {
							is_same_value = root
							# TO DO policy for muting other empire things 
							has_country_flag = tec_mute_empire_announces
						}
						has_communications = root
					}
					country_event = {
						id = tec_gene_path.10501
						days = 5 
					}
				}
			}
		}
	}
}

country_event = { # T1 Notification to other empires
	id = tec_gene_path.10501
	title = "tec_gene_path.10501.name"
	desc = {
		text = tec_gene_path.10501.desc
	}
	picture = GFX_evt_tec_cyan_strings
	#show_sound = event_engineered_evolution

	is_triggered_only = yes

	option = {
		name = "tec_gene_path.10501.a"
	}

	option = {
		name = "tec_gene_path.10501.b"
	}
	option = {
		name = "tec_gene_path.10501.c"
		trigger = {
			is_machine_empire = yes
			NOR = {
				has_ethic = ethic_gestalt_empathy
				has_civic = civic_machine_assimilator
				has_civic = civic_machine_servitor
			}
		}
	}
	option = {
		name = "tec_gene_path.10501.d"
		trigger = {
			OR = {
				has_authority = auth_tec_hive_cybernetic
				has_civic = civic_machine_assimilator
				has_civic = civic_machine_servitor
				has_ascension_perk = ap_tec_genetic_perfection
			}
		}
	}
}

# --------------- Gating
country_event = { # 5 years after 
	id = tec_gene_path.200
	title = "tec_gene_path.200.name"
	desc = "tec_gene_path.200.desc"
	picture = GFX_evt_tec_cyan_strings
	show_sound = event_evolution_mastery

	is_triggered_only = yes

	trigger = {
		always = yes
	}

	immediate = {
		hidden_effect = {
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}

	option = {
		name = tec_gene_path.200.a
		custom_tooltip = tec_gene_path.200.a.tooltip
		hidden_effect = {
			save_event_target_as = tec_target_country
			event_target:tec_target_country = {
				start_situation = {
					type = situation_tec_gene_path_gate
					target = event_target:tec_target_country.capital_scope
					effect = {
						save_event_target_as = new_situation
					}
				}
				event_target:new_situation = {
					set_situation_locked = no
					set_situation_approach = situation_approach_tec_gene_path_gate_neutral
				}
			}
		}
	}
}

# Situation
situation_event = { # Gene A gate - 25% - Gives the approachs and hints to gene ev
	id = tec_gene_path.20025
	title = "tec_gene_path.20025.name"
	desc = "tec_gene_path.20025.desc"

	picture = GFX_evt_scientific_experiments
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_flag = situation_tec_gene_path_gate_unlock_approachs
			set_situation_locked = yes
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.20025.a
		custom_tooltip = tec_gene_path.20025.a.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
		set_situation_approach = situation_approach_tec_gene_path_gate_slow
	}

	option = {
		name = tec_gene_path.20025.b
		custom_tooltip = tec_gene_path.20025.b.tooltip
		icon = {
			icon = GFX_situation_approach_tec_genecrank
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		set_situation_approach = situation_approach_tec_gene_path_gate_fast
	}
}
situation_event = { # Gene A gate - 50% - Replicant trigger
	id = tec_gene_path.20050
	title = "tec_gene_path.20050.name"
	desc = {
		trigger = {
			current_situation_approach = situation_approach_tec_gene_path_gate_slow
		}
		text = tec_gene_path.20050.desc.good
	}
	desc = {
		trigger = {
			current_situation_approach = situation_approach_tec_gene_path_gate_fast
		}
		text = tec_gene_path.20050.desc.bad
	}

	picture = GFX_evt_scientific_experiments
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.20050.a
		custom_tooltip = tec_gene_path.20050.a.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}
situation_event = { # Gene A gate - 75% - Mind and Body
	id = tec_gene_path.20075
	title = "tec_gene_path.20075.name"
	desc = {
		trigger = {
			current_situation_approach = situation_approach_tec_gene_path_gate_slow
		}
		text = tec_gene_path.20075.desc.good
	}
	desc = {
		trigger = {
			current_situation_approach = situation_approach_tec_gene_path_gate_fast
		}
		text = tec_gene_path.20075.desc.bad
	}

	picture = GFX_evt_scientific_experiments
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.20075.a
		custom_tooltip = tec_gene_path.20075.a.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			set_situation_flag = situation_tec_gene_path_gate_end
		}
	}
}

# Random situation events
situation_event = { # Good 1 A gate - Gives +25% output to 5 pops
	id = tec_gene_path.20011
	title = "tec_gene_path.20011.name"
	desc = "tec_gene_path.20011.desc"

	picture = GFX_evt_society_research
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	situation = this
	location = target

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 0.5
			current_situation_approach = situation_approach_tec_gene_path_gate_fast
		}
		modifier = {
			factor = 1.5
			current_situation_approach = situation_approach_tec_gene_path_gate_slow
		}
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.20011.a
		custom_tooltip = tec_gene_path.20011.a.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress < 95
				}
				add_situation_progress = 5
			}
			event_target:tec_target_planet = {
				while = {
					count = 5
					random_owned_pop = {
						limit = {
							is_same_species = event_target:tec_target_species
							NOT = {
								has_modifier = tec_gene_good_pop
							}
						}
						add_modifier = {
							modifier = tec_gene_good_pop
							years = 1
						}
					}
				}
				
			}
		}
	}
}
situation_event = { # Good 2 A gate- Gives +10% 1 year planet output
	id = tec_gene_path.20012
	title = "tec_gene_path.20012.name"
	desc = "tec_gene_path.20012.desc"

	picture = GFX_evt_society_research
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	situation = this
	location = target

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 0.5
			current_situation_approach = situation_approach_tec_gene_path_gate_fast
		}
		modifier = {
			factor = 1.5
			current_situation_approach = situation_approach_tec_gene_path_gate_slow
		}
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.20012.a
		custom_tooltip = tec_gene_path.20012.a.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress < 95
				}
				add_situation_progress = 5
			}
			event_target:tec_target_planet = {
				add_modifier = {
					modifier = pm_tec_gene_good_planet
					years = 1
				}
			}
		}
	}
}

situation_event = { # Bad 1 A gate- Gives -25% output to 3-5 pops
	id = tec_gene_path.20023
	title = "tec_gene_path.20023.name"
	desc = "tec_gene_path.20023.desc"

	picture = GFX_evt_tec_red_strings
	show_sound = event_vivisection
	is_triggered_only = yes
	situation = this
	location = target

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 0.5
			current_situation_approach = situation_approach_tec_gene_path_gate_slow
		}
		modifier = {
			factor = 1.5
			current_situation_approach = situation_approach_tec_gene_path_gate_fast
		}
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.20023.a
		custom_tooltip = tec_gene_path.20023.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_genecrank
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 5
				}
				add_situation_progress = -5
			}
			event_target:tec_target_planet = {
				add_modifier = {
					modifier = pm_tec_gene_bad_planet
					years = 1
				}
			}
		}
	}
}
situation_event = { # Bad 2 A gate- Gives -10% 1 year planet output
	id = tec_gene_path.20022
	title = "tec_gene_path.20022.name"
	desc = "tec_gene_path.20022.desc"

	picture = GFX_evt_tec_red_strings
	show_sound = event_vivisection
	is_triggered_only = yes
	situation = this
	location = target

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 0.5
			current_situation_approach = situation_approach_tec_gene_path_gate_slow
		}
		modifier = {
			factor = 1.5
			current_situation_approach = situation_approach_tec_gene_path_gate_fast
		}
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.20022.a
		custom_tooltip = tec_gene_path.20022.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_genecrank
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 5
				}
				add_situation_progress = -5
			}
			event_target:tec_target_planet = {
				while = {
					count = 5
					random_list = {
						33 = {
							# Safe i guess?
						}
						66 = {
							random_owned_pop = {
								limit = {
									is_same_species = event_target:tec_target_species
									NOT = {
										has_modifier = tec_gene_bad_pop
									}
								}
								add_modifier = {
									modifier = tec_gene_bad_pop
									years = 1
								}
							}
						}
					}
				}
			}
		}
	}
}
situation_event = { # Bad 3 A gate - Kills 3-5 pops
	id = tec_gene_path.20021
	title = "tec_gene_path.20021.name"
	desc = "tec_gene_path.20021.desc"

	picture = GFX_evt_tec_red_genetics
	show_sound = event_vivisection
	is_triggered_only = yes
	situation = this
	location = target

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 0.5
			current_situation_approach = situation_approach_tec_gene_path_gate_slow
		}
		modifier = {
			factor = 1.5
			current_situation_approach = situation_approach_tec_gene_path_gate_fast
		}
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.20021.a
		custom_tooltip = tec_gene_path.20021.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_genecrank
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 10
				}
				add_situation_progress = -10
			}
			event_target:tec_target_planet = {
				while = {
					count = 5
					random_list = {
						33 = {
							# Safe i guess?
						}
						66 = {
							random_owned_pop = {
								limit = {
									is_same_species = event_target:tec_target_species
								}
								kill_pop = yes
							}
						}
					}
				}
			}
		}
	}
}

country_event = { # Situation finished
	id = tec_gene_path.205
	title = "tec_gene_path.205.name"
	desc = {
		trigger = {
			has_country_flag = tec_gene_good_temp
		}
		text = tec_gene_path.205.desc.good
	}
	desc = {
		trigger = {
			has_country_flag = tec_gene_bad_temp
		}
		text = tec_gene_path.205.desc.bad
	}

	picture = GFX_evt_tec_orange_strings
	show_sound = event_evolution_mastery
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}

	after = {
		hidden_effect = {
			# Gating
			set_country_flag = tec_genetics_gate_completed
			# Caution
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}

	option = {
		name = tec_gene_path.205.a
		custom_tooltip = tec_gene_path.205.a.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_tec_orange
			text = tec_icon_text_good_outcome
		}
		trigger = {
			has_country_flag = tec_gene_good_temp
		}
	}

	option = {
		name = tec_gene_path.205.b
		custom_tooltip = tec_gene_path.205.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_genecrank
			icon_background = GFX_situation_approach_bg_tec_orange
			text = tec_icon_text_good_outcome
		}
		trigger = {
			has_country_flag = tec_gene_bad_temp
		}
	}
}

# --------------- T2
country_event = { # T2A picked
	id = tec_gene_path.300
	title = "tec_gene_path.300.name"
	desc = "tec_gene_path.300.desc"
	picture = GFX_evt_tec_orange_strings
	show_sound = event_evolution_mastery
	trackable = yes

	is_triggered_only = yes

	immediate = {
		owner_main_species = {
			save_event_target_as = tec_target_species
		}
		save_event_target_as = tec_temp_country
		event_target:tec_temp_country = {
			start_situation = {
				type = situation_tec_gene_path_t2
				target = event_target:tec_temp_country.capital_scope
				effect = {
					save_event_target_as = new_situation
					set_situation_locked = yes
				}
			}
		}
	}

	option = {
		name = "tec_gene_path.300.a"
		custom_tooltip = "tec_gene_path.300.a.tooltip"
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
		hidden_effect = {
			event_target:new_situation = {
				set_situation_approach = situation_approach_tec_gene_path_t2_slow
				set_situation_locked = no
			}
		}
	}

	option = {
		name = "tec_gene_path.300.b"
		custom_tooltip = "tec_gene_path.300.b.tooltip"
		icon = {
			icon = GFX_situation_approach_tec_genecrank
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		hidden_effect = {
			event_target:new_situation = {
				set_situation_approach = situation_approach_tec_gene_path_t2_fast
				set_situation_locked = no
			}
		}
	}
}

# Situation 2
situation_event = { # Gene 2A - 25% - Startup
	id = tec_gene_path.30025
	title = "tec_gene_path.30025.name"
	desc = "tec_gene_path.30025.desc"

	picture = GFX_evt_tec_orange_strings
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.30025.a
		custom_tooltip = tec_gene_path.30025.a.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}
situation_event = { # Gene 2A - 50% - Special empire interactions - split
	id = tec_gene_path.30050
	hide_window = yes
	is_triggered_only = yes
	location = target

	immediate = {
		if = {
			limit = {
				exists = owner
				owner = {
					has_origin = origin_necrophage
					has_trait = trait_necrophage
				}
			}
			situation_event = {
				id = tec_gene_path.30056
			}
		}
		else_if = {
			limit = {
				exists = owner
				owner = {
					has_origin = origin_syncretic_evolution
					has_valid_civic = civic_tec_se_elders
				}
			}
			situation_event = {
				id = tec_gene_path.30057
			}
		}
		#if = { Removed for now
		#	limit = {
		#		exists = owner
		#		owner = {
		#			has_origin = origin_clone_army
		#		}
		#	}
		#	situation_event = {
		#		id = tec_gene_path.30058
		#	}
		#}
	}
}
situation_event = { # Gene 2A - 75% - Distributing among the population
	id = tec_gene_path.30075
	title = "tec_gene_path.30075.name"
	desc = "tec_gene_path.30075.desc"

	picture = GFX_evt_tec_orange_strings
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.30075.a
		custom_tooltip = tec_gene_path.30075.a.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}

# Halfway empire situation events
situation_event = { # Necrophages - Tell they will lose the mechanic
	id = tec_gene_path.30056
	title = "tec_gene_path.30056.name"
	desc = "tec_gene_path.30056.desc"

	picture = GFX_evt_necrophage
	is_triggered_only = yes
	situation = this
	location = target

	trigger = {
		owner = {
			has_origin = origin_necrophage
			has_trait = trait_necrophage
		}
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.30056.a
		custom_tooltip = tec_gene_path.30056.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_genecrank
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_gene_necrophage_evolved
			}
		}
	}
	option = {
		name = tec_gene_path.30056.b
		custom_tooltip = tec_gene_path.30056.b.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_reduced_auto_assimilation
			}
		}
	}
}
situation_event = { # Elder guidance - Chose the species
	id = tec_gene_path.30057
	title = "tec_gene_path.30057.name"
	desc = "tec_gene_path.30057.desc"

	picture = GFX_evt_alien_cavemen
	is_triggered_only = yes
	situation = this
	location = target


	trigger = {
		owner = {
			has_origin = origin_syncretic_evolution
			has_valid_civic = civic_tec_se_elders
		}
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				owner_main_species = {
					save_event_target_as = tec_elder_species
				}
				random_owned_species = {
					limit = {
						has_species_flag = syncretic_species@prev
						has_trait = @trait_tec_se_subspecies
					}
					save_event_target_as = tec_illuminated_species
				}
			}

		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.30057.a
		custom_tooltip = tec_gene_path.30057.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_genecrank
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_gene_elder_cured
			}
		}
	}
	option = {
		name = tec_gene_path.30057.b
		custom_tooltip = tec_gene_path.30057.b.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_reduced_auto_assimilation
			}
		}
	}
	option = {
		name = tec_gene_path.30057.c
		custom_tooltip = tec_gene_path.30057.c.tooltip
		icon = {
			icon = GFX_situation_approach_gift
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		trigger = {	# Only if a valid syncretic species exist
			owner = {
				any_owned_species = {
					has_species_flag = syncretic_species@prev
				}
			}
		}
		hidden_effect = {
			owner = {
				random_owned_species = {
					limit = {
						has_species_flag = syncretic_species@prev
					}
					save_event_target_as = tec_new_main_species
				}
				change_dominant_species = {
					species = event_target:tec_new_main_species
				}
			}
		}
	}
}
situation_event = { # Clone army - Get rid of the traits
	id = tec_gene_path.30058
	title = "tec_gene_path.30058.name"
	desc = "tec_gene_path.30058.desc"

	picture = GFX_evt_clones
	is_triggered_only = yes
	situation = this
	location = target


	trigger = {
		owner = {
			has_origin = origin_clone_army
		}
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
		owner = {
			owner_main_species = {
				save_event_target_as = tec_clonearmy_species
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.30058.a
		custom_tooltip = tec_gene_path.30058.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_genecrank
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		allow = {
			always = no
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_gene_elder_cured
			}
		}
	}
	option = {
		name = tec_gene_path.30058.b
		custom_tooltip = tec_gene_path.30058.b.tooltip
		icon = {
			icon = GFX_situation_approach_genetics
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_reduced_auto_assimilation
			}
		}
	}
}

country_event = { # T2A Situation finished
	id = tec_gene_path.305
	title = "tec_gene_path.305.name"
	desc = "tec_gene_path.305.desc"
	picture = GFX_evt_tec_orange_strings
	show_sound = event_evolution_mastery
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_gene_path.305.a"
		custom_tooltip = "tec_gene_path.305.a.tooltip"
		hidden_effect = {
			save_event_target_as = tec_gene_t3_owner
			set_country_flag = tec_genetics_t2_completed
			set_country_flag = tec_biological_assimilation
			tec_create_bioperfect_species_mod = yes
		}
	}

	after = {
		every_country = {
			limit = {
				is_ai = no
				NOT = {
					is_same_value = root
				}
				has_communications = root
			}
			country_event = {
				id = tec_gene_path.30501
				days = 15
			}
		}
		add_modifier = {
			modifier = modifier_tec_free_modification
			days = -1
		}
	}
}

country_event = { # T2A Notification to other empires
	id = tec_gene_path.30501
	title = "tec_gene_path.30501.name"
	desc = {
		text = tec_gene_path.30501.desc
	}
	picture = GFX_evt_tec_orange_strings
	#show_sound = event_engineered_evolution

	is_triggered_only = yes

	option = {
		name = "tec_gene_path.30501.a"
	}

	option = {
		name = "tec_gene_path.30501.b"
	}
	option = {
		name = "tec_gene_path.30501.c"
		trigger = {
			is_machine_empire = yes
			NOR = {
				has_ethic = ethic_gestalt_empathy
				has_civic = civic_machine_assimilator
				has_civic = civic_machine_servitor
			}
		}
	}
	option = {
		name = "tec_gene_path.30501.d"
		trigger = {
			OR = {
				has_civic = civic_machine_assimilator
				has_civic = civic_machine_servitor
				has_ascension_perk = ap_tec_genetic_perfection
			}
		}
	}
}

# Biological B TO DO
# ------------------------------------------------------------ tec_bio_path.xxx
namespace = tec_bio_path

# T2 picked

# T3 picked


# Cybernetic path
# ------------------------------------------------------------ tec_cybernetic_path.xxx
namespace = tec_cybernetic_path

# --------------- T1 pick
country_event = { # Cybernetic T1 Picked - shared with synths
	id = tec_cybernetic_path.100
	title = "tec_cybernetic_path.100.name"
	desc = {
		text = tec_cybernetic_path.100.desc
		trigger = {
			is_hive_empire = no
			is_machine_empire = no
		}
	}
	desc = {
		text = tec_cybernetic_path.100.desc.hive
		trigger = {
			is_hive_empire = yes
			tec_is_cyberhive = no
		}
	}
	desc = {
		text = tec_cybernetic_path.100.desc.cyberhive
		trigger = {
			tec_is_cyberhive = yes
		}
	}
	desc = {
		text = tec_cybernetic_path.100.desc.machine
		trigger = {
			is_machine_empire = yes
		}
	}
	picture = GFX_evt_cybernetics
	show_sound = event_the_flesh_is_weak
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_cybernetic_path.100.a"
		custom_tooltip = "tec_cybernetic_path.100.a.tooltip"
		trigger = {
			NOR = {
				tec_is_cyberhive = yes
				tec_has_cybernetic_ascension_origin = yes
			}
		}
		hidden_effect = { # Gives the situation
			save_event_target_as = tec_temp_country
			event_target:tec_temp_country = {
				start_situation = {
					type = situation_tec_cybernetic_path_t1
					target = event_target:tec_temp_country.capital_scope
					effect = {
						save_event_target_as = new_situation
					}
				}
				event_target:new_situation = {
					set_situation_locked = no
					set_situation_approach = situation_approach_tec_cybernetic_path_t1_slow
				}
			}
		}
	}
	option = {
		name = "tec_cybernetic_path.100.b"
		custom_tooltip = "tec_cybernetic_path.100.b.tooltip"
		trigger = {
			OR = {
				tec_is_cyberhive = yes
				tec_has_cybernetic_ascension_origin = yes
			}
		}
		hidden_effect = { # Gives the situation
			save_event_target_as = tec_temp_country
			event_target:tec_temp_country = {
				start_situation = {
					type = situation_tec_cybernetic_path_t1
					#situation_tec_cybernetic_path_t1_cyborg
					target = event_target:tec_temp_country.capital_scope
					effect = {
						save_event_target_as = new_situation
					}
				}
				event_target:new_situation = {
					set_situation_locked = no
					set_situation_approach = situation_approach_tec_cybernetic_path_t1_slow
					#situation_approach_tec_cybernetic_path_t1_cyborg_slow
				}
			}
		}
	}
}

# --------------- T1 situation
situation_event = { # t1 10%
	id = tec_cybernetic_path.10010
	title = "tec_cybernetic_path.10010.name"
	desc = "tec_cybernetic_path.10010.desc"

	picture = GFX_evt_cybernetics
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			if = {
				limit = {
					has_situation_flag = tec_cyb_t1_unlock_fast
				}
				set_situation_approach = situation_approach_tec_cybernetic_path_t1_fast
			}
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.10010.a
		custom_tooltip = tec_cybernetic_path.10010.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
	}
	option = {
		name = tec_cybernetic_path.10010.b
		custom_tooltip = tec_cybernetic_path.10010.b.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		hidden_effect = {
			set_situation_flag = tec_cyb_t1_unlock_fast
		}
	}
}
situation_event = { # t1 25%
	id = tec_cybernetic_path.10025
	title = "tec_cybernetic_path.10025.name"
	desc = "tec_cybernetic_path.10025.desc"

	picture = GFX_evt_cybernetics
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.10025.a
		custom_tooltip = tec_cybernetic_path.10025.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_neutral_outcome
		}
	}
}
situation_event = { # t1 50%
	id = tec_cybernetic_path.10050
	title = "tec_cybernetic_path.10050.name"
	desc = "tec_cybernetic_path.10050.desc"

	picture = GFX_evt_scientific_experiments
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			# Confirmation
			situation_event = {
				id = tec_cybernetic_path.10051
			}
		}
	}

	option = {
		name = tec_cybernetic_path.10050.a
		custom_tooltip = tec_cybernetic_path.10050.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_cybernetic_module_versatility
			}
		}
	}
	option = {
		name = tec_cybernetic_path.10050.b
		custom_tooltip = tec_cybernetic_path.10050.b.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_cybernetic_module_research
			}
		}
	}
	option = {
		name = tec_cybernetic_path.10050.c
		custom_tooltip = tec_cybernetic_path.10050.c.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_cybernetic_module_industrial
			}
		}
	}
}
situation_event = { # t1 51%
	id = tec_cybernetic_path.10051
	title = "tec_cybernetic_path.10051.name"
	desc = {
		text = "tec_cybernetic_path.10050.desc_versatility"
		trigger = {
			owner = {
				has_country_flag = tec_cybernetic_module_versatility
			}
		}
	}
	desc = {
		text = "tec_cybernetic_path.10050.desc_research"
		trigger = {
			owner = {
				has_country_flag = tec_cybernetic_module_research
			}
		}
	}
	desc = {
		text = "tec_cybernetic_path.10050.desc_industrial"
		trigger = {
			owner = {
				has_country_flag = tec_cybernetic_module_industrial
			}
		}
	}

	picture = GFX_evt_scientific_experiments
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	option = {
		name = tec_cybernetic_path.10051.a
		custom_tooltip = tec_cybernetic_path.10051.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				remove_country_flag = tec_cybernetic_module_versatility
				remove_country_flag = tec_cybernetic_module_research
				remove_country_flag = tec_cybernetic_module_industrial
			}
			situation_event = {
				id = tec_cybernetic_path.10050
			}
		}
	}
	option = {
		name = tec_cybernetic_path.10051.b
		custom_tooltip = tec_cybernetic_path.10051.b.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			set_situation_locked = no
		}
	}
}
situation_event = { # t1 75%
	id = tec_cybernetic_path.10075
	title = "tec_cybernetic_path.10075.name"
	desc = "tec_cybernetic_path.10075.desc"

	picture = GFX_evt_cybernetics
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.10075.a
		custom_tooltip = tec_cybernetic_path.10075.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_neutral_outcome
		}
	}
}
situation_event = { # t1 90%
	id = tec_cybernetic_path.10090
	title = "tec_cybernetic_path.10090.name"
	desc = "tec_cybernetic_path.10090.desc"

	picture = GFX_evt_scientific_experiments
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.10090.a
		custom_tooltip = tec_cybernetic_path.10090.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_cybernetic_submodule_lifespan
			}
		}
	}
	option = {
		name = tec_cybernetic_path.10090.b
		custom_tooltip = tec_cybernetic_path.10090.b.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_cybernetic_submodule_warfare
			}
		}
	}
	option = {
		name = tec_cybernetic_path.10090.c
		custom_tooltip = tec_cybernetic_path.10090.c.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_cybernetic_submodule_survival
			}
		}
	}
	option = {
		name = tec_cybernetic_path.10090.d
		custom_tooltip = tec_cybernetic_path.10090.d.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_cybernetic_submodule_recycling
			}
		}
	}
	option = {
		name = tec_cybernetic_path.10090.e
		custom_tooltip = tec_cybernetic_path.10090.e.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_cybernetic_submodule_construction
			}
		}
	}
	option = {
		name = tec_cybernetic_path.10090.f
		custom_tooltip = tec_cybernetic_path.10090.f.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_cybernetic_submodule_knowledge
			}
		}
	}
}

# --------------- T1 finish
country_event = { # T1 Situation finished - No Hivemind
	id = tec_cybernetic_path.105
	title = "tec_cybernetic_path.105.name"
	desc = {
		text = "tec_cybernetic_path.105.desc"
		trigger = {
			is_regular_empire = yes
			tec_has_cybernetic_ascension_origin = no
		}
	}
	desc = {
		text = "tec_cybernetic_path.105.desc.hive"
		trigger = {
			is_hive_empire = yes
			NOR = {
				tec_is_cyberhive = yes
				tec_has_cybernetic_ascension_origin = yes
			}
		}
	}
	desc = {
		text = "tec_cybernetic_path.105.desc.cyborg"
		trigger = {
			is_regular_empire = yes
			tec_has_cybernetic_ascension_origin = yes
		}
	}
	desc = {
		text = "tec_cybernetic_path.105.desc.cyborg.gestalt"
		trigger = {
			is_regular_empire = no
			OR = {
				has_valid_civic = civic_machine_assimilator
				tec_is_cyberhive = yes
				tec_has_cybernetic_ascension_origin = yes
			}
		}
	}
	picture = GFX_evt_scientific_experiments
	show_sound = event_the_flesh_is_weak
	trackable = yes

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = tec_cybernetic_path_unlocked_tradition_1
			set_country_flag = cyborg_empire
			if = {
				limit = {
					is_machine_empire = no
				}
				tec_create_cybernetic_species = yes
			}
			set_country_flag = tec_cybernetic_t1_assimilation
		}
	}

	after = {
		hidden_effect = {
			if = {
				limit = {
					is_hive_empire = yes
					tec_is_cyberhive = no
				}
				country_event = {
					id = tec_cybernetic_path.10501
				}
			}
			else = {
				every_country = {
					limit = {
						is_ai = no
						NOR = {
							is_same_value = root
							# TO DO policy for muting other empire things 
							has_country_flag = tec_mute_empire_announces
						}
						has_communications = root
					}
					country_event = {
						id = tec_cybernetic_path.10510
						days = 5 
					}
				}
			}
		}
	}
	
	option = {
		name = "tec_cybernetic_path.105.a"
		custom_tooltip = "tec_cybernetic_path.105.a.tooltip"
		hidden_effect = { # Gives the special project
			save_event_target_as = tec_cyber_1_owner
			set_country_flag = tec_cybernetic_path_unlocked_tradition_1
		}
	}
}

country_event = { # T1 Project finished - Hivemind (change of auth)
	id = tec_cybernetic_path.10501
	title = "tec_cybernetic_path.10501.name"
	desc = "tec_cybernetic_path.10501.desc"
	picture = GFX_evt_robot_assembly_plant
	show_sound = event_the_flesh_is_weak
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_cybernetic_path.10501.a"
		custom_tooltip = "tec_cybernetic_path.10501.a.tooltip"
		hidden_effect = {
			change_government = {
				authority = auth_tec_hive_cybernetic
				#remove_invalid_civics = yes
			}
			# Remove invalid effects
			if = {
				limit = {
					has_civic = civic_tec_hive_everevolving
				}
				force_remove_civic = civic_tec_hive_everevolving
				remove_modifier = modifier_tec_everevolving_primal
				remove_modifier = modifier_tec_everevolving_young
				remove_modifier = modifier_tec_everevolving_mature
				remove_modifier = modifier_tec_everevolving_venerable
			}
			if = {
				limit = {
					has_civic = civic_tec_hive_cerebrates
				}
				force_remove_civic = civic_tec_hive_cerebrates
			}
			if = {
				limit = {
					has_civic = civic_tec_hive_necrophage
				}
				force_remove_civic = civic_tec_hive_necrophage
			}
			if = {
				limit = {
					has_civic = civic_tec_hive_splicers
				}
				force_remove_civic = civic_tec_hive_splicers
				force_add_civic = civic_tec_hive_splicers_cyborg
			}
			if = {
				limit = {
					has_civic = civic_tec_hive_parasitic
				}
				force_remove_civic = civic_tec_hive_parasitic
				force_add_civic = civic_tec_hive_parasitic_cyborg
			}
			if = {
				limit = {
					has_civic = civic_tec_hive_frenzy
				}
				force_remove_civic = civic_tec_hive_frenzy
			}
			if = {
				limit = {
					has_civic = civic_tec_hive_genetic
				}
				force_remove_civic = civic_tec_hive_genetic
			}
			if = {
				limit = {
					has_civic = civic_tec_hive_neuraxial
				}
				force_remove_civic = civic_tec_hive_neuraxial
				force_add_civic = civic_tec_hive_neuraxial_cyborg
			}
			if = {
				limit = {
					has_civic = civic_tec_hive_node
				}
				force_remove_civic = civic_tec_hive_node
				force_add_civic = civic_tec_hive_node_cyborg
			}
			if = {
				limit = {
					has_civic = civic_tec_hive_necrophage
				}
				force_remove_civic = civic_tec_hive_necrophage
			}
			change_government = {
				authority = auth_tec_hive_cybernetic
				remove_invalid_civics = yes
			}
		}
	}

	option = {
		name = "tec_cybernetic_path.10501.b"
		custom_tooltip = "tec_cybernetic_path.10501.b.tooltip"
		trigger = { # Biohives are forced to change
			hidden_trigger = {
				tec_is_biohive = no
			}
		}
	}

	after = {
		every_country = {
			limit = {
				is_ai = no
				NOR = {
					is_same_value = root
					# TO DO policy for muting other empire things 
					has_country_flag = tec_mute_empire_announces
				}
				has_communications = root
			}
			set_timed_country_flag = {
				flag = tec_hive_changed_to_cyberhive
				years = 1
			}
			country_event = {
				id = tec_cybernetic_path.10510
				days = 5 
			}
		}

	}
}

country_event = { # T1 Notification for Other Nations
	id = tec_cybernetic_path.10510
	picture = GFX_evt_robot_assembly_plant
	show_sound = event_the_flesh_is_weak
	title = "tec_cybernetic_path.10510.name"
	desc = {
		text = tec_cybernetic_path.10510.desc
		trigger = {
			OR = {
				is_spiritualist = no
				AND = {
					is_spiritualist = yes
					tec_is_robot_lover_spiritualist = yes
				}
			}
			from = {
				is_hive_empire = no
			}
		}
	}
	desc = {
		text = tec_cybernetic_path.10510.spi.desc
		trigger = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
			tec_is_robot_lover_spiritualist = no
			from = {
				is_hive_empire = no
			}
		}
	}
	desc = {
		text = tec_cybernetic_path.10510.hive.desc
		trigger = {
			from = {
				is_hive_empire = yes
				NOT = {
					has_country_flag = tec_hive_changed_to_cyberhive
				}
			}
		}
	}
	desc = {
		text = tec_cybernetic_path.10510.hive.to.cyberhive.desc
		trigger = {
			from = {
				is_hive_empire = yes
				has_country_flag = tec_hive_changed_to_cyberhive
			}
		}
	}

	is_triggered_only = yes

	option = {
		name = "tec_cybernetic_path.10510.a"
	}
	option = {
		name = "tec_cybernetic_path.10510.b"
		trigger = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
			tec_is_robot_lover_spiritualist = no
		}
	}
	option = {
		name = "tec_cybernetic_path.10510.c"
		trigger = {
			OR = {
				is_machine_empire = yes
				is_synthetic_empire = yes
			}
		}
	}
	option = {
		name = "tec_cybernetic_path.10510.d"
		trigger = {
			OR = {
				is_cyborg_empire = yes
				tec_is_cyberhive = yes
			}
		}
	}
	option = {
		name = "tec_cybernetic_path.10510.e"
		trigger = {
			OR = {
				has_valid_civic = civic_tec_machine_cult
				has_valid_civic = civic_tec_occultist
			}
		}
	}
	option = {
		name = "tec_cybernetic_path.10510.f"
		trigger = {
			OR = {
				has_valid_civic = civic_machine_terminator
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_fanatic_purifiers
				is_at_war_with = from
			}
		}
	}
}

# --------------- T2 Gating
country_event = { # Cybernetic T2 Picked - Cybernetic fascination
	id = tec_cybernetic_path.200
	title = "tec_cybernetic_path.200.name"
	desc = {
		text = tec_cybernetic_path.200.desc
		trigger = {
			is_hive_empire = no
			is_machine_empire = no
		}
	}
	desc = {
		text = tec_cybernetic_path.200.desc_hive
		trigger = {
			is_hive_empire = yes
		}
	}
	desc = {
		text = tec_cybernetic_path.200.desc_machine
		trigger = {
			is_machine_empire = yes
		}
	}
	picture = GFX_evt_cybernetics
	show_sound = event_the_flesh_is_weak
	trackable = yes

	is_triggered_only = yes

	immediate = {
		save_event_target_as = tec_temp_country
		event_target:tec_temp_country = {
			start_situation = {
				type = situation_tec_cybernetic_path_gate
				target = event_target:tec_temp_country.capital_scope
				effect = {
					save_event_target_as = new_situation
				}
			}
			event_target:new_situation = {
				set_situation_locked = no
				set_situation_approach = situation_approach_tec_cybernetic_path_gate_standard
			}
		}
	}
	option = {
		name = "tec_cybernetic_path.200.a"
		custom_tooltip = tec_cybernetic_path.200.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_slow_approach
		}
		hidden_effect = {
			event_target:new_situation = {
				set_situation_locked = no
				set_situation_approach = situation_approach_tec_cybernetic_path_gate_slow
			}
		}
	}
	option = {
		name = "tec_cybernetic_path.200.b"
		custom_tooltip = tec_cybernetic_path.200.b.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_approach
		}
		hidden_effect = {
			event_target:new_situation = {
				set_situation_locked = no
				set_situation_approach = situation_approach_tec_cybernetic_path_gate_standard
			}
		}
	}
	option = {
		name = "tec_cybernetic_path.200.c"
		custom_tooltip = tec_cybernetic_path.200.c.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_fast_approach
		}
		hidden_effect = {
			event_target:new_situation = {
				set_situation_locked = no
				set_situation_approach = situation_approach_tec_cybernetic_path_gate_fast
			}
		}
	}
}

situation_event = { # Cyb A - 25% - Main cyb
	id = tec_cybernetic_path.20025
	title = "tec_cybernetic_path.20025.name"
	desc = "tec_cybernetic_path.20025.desc"

	picture = GFX_evt_cybernetics
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.20025.a
		custom_tooltip = tec_cybernetic_path.20025.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}
situation_event = { # Cyb A - 50% - Replicants
	id = tec_cybernetic_path.20050
	title = "tec_cybernetic_path.20050.name"
	desc = "tec_cybernetic_path.20050.desc"

	picture = GFX_evt_cybernetics
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.20050.a
		custom_tooltip = tec_cybernetic_path.20050.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}
situation_event = { # Cyb A - 75% - Cyberpsi
	id = tec_cybernetic_path.20075
	title = "tec_cybernetic_path.20075.name"
	desc = "tec_cybernetic_path.20075.desc"

	picture = GFX_evt_cybernetics
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.20075.a
		custom_tooltip = tec_cybernetic_path.20075.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}

# Halfway empire situation events

# Random situation events
situation_event = { # Good 1 A - Gives +25% output to 5 pops
	id = tec_cybernetic_path.20011
	title = "tec_cybernetic_path.20011.name"
	desc = "tec_cybernetic_path.20011.desc"

	picture = GFX_evt_society_research
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.20011.a
		custom_tooltip = tec_cybernetic_path.20011.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress < 95
				}
				add_situation_progress = 5
			}
			event_target:tec_target_planet = {
				while = {
					count = 5
					random_owned_pop = {
						limit = {
							is_same_species = event_target:tec_target_species
							NOT = {
								has_modifier = tec_cyb_good_pop
							}
						}
						add_modifier = {
							modifier = tec_cyb_good_pop
							years = 1
						}
					}
				}
				
			}
		}
	}
}
situation_event = { # Good 2 A - Gives +10% 1 year planet output
	id = tec_cybernetic_path.20012
	title = "tec_cybernetic_path.20012.name"
	desc = "tec_cybernetic_path.20012.desc"

	picture = GFX_evt_society_research
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.20012.a
		custom_tooltip = tec_cybernetic_path.20012.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress < 95
				}
				add_situation_progress = 5
			}
			event_target:tec_target_planet = {
				add_modifier = {
					modifier = pm_tec_cyb_good_planet
					years = 1
				}
			}
		}
	}
}

situation_event = { # Bad 1 A - Cyb failure kills 1 pop and adds debuff
	id = tec_cybernetic_path.20021
	title = "tec_cybernetic_path.20021.name"
	desc = "tec_cybernetic_path.20021.desc"

	picture = GFX_evt_emergency_workers
	show_sound = event_life_support_fail
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.20021.a
		custom_tooltip = tec_cybernetic_path.20021.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 5
				}
				add_situation_progress = -5
			}
			event_target:tec_target_planet = {
				random_owned_pop = {
					limit = {
						is_same_species = event_target:tec_target_species
					}
					kill_pop = yes
				}
				add_modifier = {
					modifier = pm_tec_cyb_bad_planet
					years = 1
				}
			}
		}
	}
}
situation_event = { # Bad 2 A - Cyb ai failure debuff on pops
	id = tec_cybernetic_path.20022
	title = "tec_cybernetic_path.20022.name"
	desc = "tec_cybernetic_path.20022.desc"

	picture = GFX_evt_scientific_experiments
	show_sound = event_vivisection
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.20022.a
		custom_tooltip = tec_cybernetic_path.20022.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 5
				}
				add_situation_progress = -5
			}
			event_target:tec_target_planet = {
				while = {
					count = 5
					random_list = {
						33 = {
							# Safe i guess?
						}
						66 = {
							random_owned_pop = {
								limit = {
									is_same_species = event_target:tec_target_species
									NOT = {
										has_modifier = tec_cyb_bad_pop
									}
								}
								add_modifier = {
									modifier = tec_cyb_bad_pop
									years = 1
								}
							}
						}
					}
				}
			}
		}
	}
}
situation_event = { # Bad 3 A - Cyb failure bombs planet
	id = tec_cybernetic_path.20023
	title = "tec_cybernetic_path.20023.name"
	desc = "tec_cybernetic_path.20023.desc"

	picture = GFX_evt_nuclear_explosion
	show_sound = event_super_explosion
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.20023.a
		custom_tooltip = tec_cybernetic_path.20023.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_nuke
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 10
				}
				add_situation_progress = -10
			}
			event_target:tec_target_planet = {
				add_planet_devastation = 10
				while = {
					count = 5
					random_list = {
						33 = {
							# Safe i guess?
						}
						66 = {
							random_owned_pop = {
								limit = {
									is_same_species = event_target:tec_target_species
								}
								kill_pop = yes
							}
						}
					}
				}
			}
		}
	}
}

# --------------- T2 gating Finish
country_event = { # Situation finished
	id = tec_cybernetic_path.205
	title = "tec_cybernetic_path.205.name"
	desc = "tec_cybernetic_path.205.desc"

	picture = GFX_evt_cybernetics
	show_sound = event_synthetic_evolution
	is_triggered_only = yes

	option = {
		name = tec_cybernetic_path.205.a
		custom_tooltip = tec_cybernetic_path.205.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			# Gate
			set_country_flag = tec_cybernetics_gate_completed
			# Safe
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}
}

# --------------- T2 Pick
country_event = { # Cybernetic T2 Picked - Cybernetic Revolution
	id = tec_cybernetic_path.300
	title = "tec_cybernetic_path.300.name"
	desc = {
		text = tec_cybernetic_path.300.desc
		trigger = {
			is_hive_empire = no
			is_machine_empire = no
		}
	}
	desc = {
		text = tec_cybernetic_path.300.desc_hive
		trigger = {
			is_hive_empire = yes
		}
	}
	desc = {
		text = tec_cybernetic_path.300.desc_machine
		trigger = {
			is_machine_empire = yes
		}
	}
	picture = GFX_evt_cybernetics
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	immediate = {
		save_event_target_as = tec_temp_country
		event_target:tec_temp_country = {
			start_situation = {
				type = situation_tec_cybernetic_path_t2
				target = event_target:tec_temp_country.capital_scope
				effect = {
					save_event_target_as = new_situation
				}
			}
		}
	}
	option = {
		name = "tec_cybernetic_path.300.a"
		custom_tooltip = tec_cybernetic_path.300.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_slow_approach
		}
		hidden_effect = {
			event_target:new_situation = {
				set_situation_locked = no
				set_situation_approach = situation_approach_tec_cybernetic_path_t2_slow
			}
		}
	}
	option = {
		name = "tec_cybernetic_path.300.c"
		custom_tooltip = tec_cybernetic_path.300.c.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_fast_approach
		}
		hidden_effect = {
			event_target:new_situation = {
				set_situation_locked = no
				set_situation_approach = situation_approach_tec_cybernetic_path_t2_fast
			}
		}
	}
}

# --------------- T2 Situation
situation_event = { # Cyb 2A - 25% - First batch of traits
	id = tec_cybernetic_path.30025
	title = "tec_cybernetic_path.30025.name"
	desc = "tec_cybernetic_path.30025.desc"

	picture = GFX_evt_cybernetics
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.30025.a
		custom_tooltip = tec_cybernetic_path.30025.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}
situation_event = { # Cyb 2A - 50% - 2nd batch of traits
	id = tec_cybernetic_path.30050
	title = "tec_cybernetic_path.30050.name"
	desc = "tec_cybernetic_path.30050.desc"

	picture = GFX_evt_cybernetics
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.30050.a
		custom_tooltip = tec_cybernetic_path.30050.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}
situation_event = { # Cyb 2A - 75% - Second batch of traits
	id = tec_cybernetic_path.30075
	title = "tec_cybernetic_path.30075.name"
	desc = "tec_cybernetic_path.30075.desc"

	picture = GFX_evt_cybernetics
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.30075.a
		custom_tooltip = tec_cybernetic_path.30075.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}
# Random situation events
situation_event = { # Good 1 2A - Improved autoevolution - Increases speed
	id = tec_cybernetic_path.30011
	title = "tec_cybernetic_path.30011.name"
	desc = "tec_cybernetic_path.30011.desc"

	picture = GFX_evt_society_research
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.30011.a
		custom_tooltip = tec_cybernetic_path.30011.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress < 95
				}
				add_situation_progress = 5
			}
			set_timed_situation_flag = {
				flag = tec_situation_bonus_speed
				years = 1
			}
		}
	}
}
situation_event = { # Good 2 2A - 5 pops gain a permanent bonus
	id = tec_cybernetic_path.30012
	title = "tec_cybernetic_path.30012.name"
	desc = "tec_cybernetic_path.30012.desc"

	picture = GFX_evt_society_research
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.30012.a
		custom_tooltip = tec_cybernetic_path.30012.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress < 89
				}
				add_situation_progress = 10
			}
			event_target:tec_target_planet = {
				while = {
					count = 5
					random_owned_pop = {
						limit = {
							is_same_species = event_target:tec_target_species
							NOT = {
								has_modifier = tec_cyb_good_pop
							}
						}
						add_modifier = {
							modifier = tec_cyb_good_pop
						}
					}
				}
			}
		}
	}
}

situation_event = { # Bad 1 2A - Rebels automodifies themselves - add crime
	id = tec_cybernetic_path.30021
	title = "tec_cybernetic_path.30021.name"
	desc = "tec_cybernetic_path.30021.desc"

	picture = GFX_evt_emergency_workers
	show_sound = event_life_support_fail
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.30021.a
		custom_tooltip = tec_cybernetic_path.30021.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 5
				}
				add_situation_progress = -5
			}
			event_target:tec_target_planet = {
				add_modifier = {
					modifier = pm_tec_cyb_rebel_planet
					years = 2
				}
			}
		}
	}
}
situation_event = { # Bad 2 2A - Terrorist attack implants
	id = tec_cybernetic_path.30022
	title = "tec_cybernetic_path.30022.name"
	desc = "tec_cybernetic_path.30022.desc"

	picture = GFX_evt_scientific_experiments
	show_sound = event_vivisection
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_cybernetic_path.30022.a
		custom_tooltip = tec_cybernetic_path.30022.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 10
				}
				add_situation_progress = -10
			}
			event_target:tec_target_planet = {
				add_modifier = {
					modifier = pm_tec_cyb_crime_planet
					years = 1
				}
			}
		}
	}
}
# --------------- T2 Finish
country_event = { # Situation finished
	id = tec_cybernetic_path.305
	title = "tec_cybernetic_path.305.name"
	desc = "tec_cybernetic_path.305.desc"

	picture = GFX_evt_cybernetics
	show_sound = event_synthetic_evolution
	is_triggered_only = yes

	option = {
		name = tec_cybernetic_path.305.a
		custom_tooltip = tec_cybernetic_path.305.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			save_event_target_as = tec_temp_cybernetic_owner
			enable_special_project = {
				name = TEC_FINAL_ADVANCED_CYBERNETIC_PROJECT
				location = capital_scope
				owner = root
			}
		}
	}
}
country_event = {
	id = tec_cybernetic_path.310
	title = "tec_cybernetic_path.310.name"
	desc = "tec_cybernetic_path.310.desc"
	picture = GFX_evt_cybernetics
	show_sound = event_the_flesh_is_weak
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_cybernetic_path.310.a"
		custom_tooltip = "tec_cybernetic_path.310.a.tooltip"
		hidden_effect = {
			every_owned_species = {
				limit = {
					has_trait = trait_cybernetic
					NOT = {
						tec_has_stapled_trait = yes
					}
				}
				tec_create_advanced_cybernetic_species_ap = yes
			}
			set_country_flag = tec_allow_t2_cybernetics
			set_country_flag = tec_cybernetic_t2_assimilation
			set_country_flag = tec_cybernetics_t2_completed
		}
	}
}

# Synth path
# ------------------------------------------------------------ tec_synth_path.xxx
namespace = tec_synth_path

# --------------- T1
country_event = { # T1 picked
	id = tec_synth_path.100
	title = "tec_synth_path.100.name"
	desc = "tec_synth_path.100.desc"
	picture = GFX_evt_tec_synthetic_first
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_synth_path.100.a"
		custom_tooltip = "tec_synth_path.100.a.tooltip"
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_neutral_approach
		}
		hidden_effect = {
			save_event_target_as = tec_temp_country
			event_target:tec_temp_country = {
				start_situation = {
					type = situation_tec_synth_path_t1
					target = event_target:tec_temp_country.capital_scope
					effect = {
						save_event_target_as = new_situation
					}
				}
				event_target:new_situation = {
					set_situation_locked = no
					set_situation_approach = situation_approach_tec_synth_path_t1_standard
				}
			}
		}
	}
}

# T1 situation
	#tec_synth_path.10001
	# SYN2 Situation - 25% - The first prototypes
	#tec_synth_path.10002
	# SYN2 Situation - 50% - Creating the change
	#tec_synth_path.10003
	# SYN2 Situation - 75% - A new form
	#tec_synth_path.10005
	# Random events
	# SYN2 Situation - Bad outcome # 1 - Fear
	#tec_synth_path.10011
	# SYN2 Situation - Bad outcome # 2 - Protests
	#tec_synth_path.10012
	# SYN2 Situation - Bad outcome # 3 - Insurrection
	#tec_synth_path.10013
	# SYN2 Situation - Good outcome # 1 - to do
	#tec_synth_path.10021
	# SYN2 Situation - Good outcome # 2 - to do
	#tec_synth_path.10022
	# SYN2 Situation - Good outcome # 3 - to do
	#tec_synth_path.10023
# /
situation_event = { # Synth 1 - 10% - Pick synths or new bodies
	id = tec_synth_path.10010
	title = "tec_synth_path.10010.name"
	desc = "tec_synth_path.10010.desc"

	picture = GFX_evt_tec_synthetic_first
	is_triggered_only = yes
	situation = this
	location = target

	trigger = {
		owner = {
			any_owned_species = {
				has_trait = trait_mechanical
				OR = {
					has_species_flag = mechanical_species@prev
					has_species_flag = mechanical_species_fake_@prev
				}
			}
		}
	}
	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				random_owned_species = {
					limit = {
						has_trait = trait_mechanical
						OR = {
							has_species_flag = mechanical_species@prev
							has_species_flag = mechanical_species_fake_@prev
						}
					}
					save_event_target_as = tec_robot_unit
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.10010.a
		custom_tooltip = tec_synth_path.10010.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_gear
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_synth_new_bodies
			}
		}
	}
	option = {
		name = tec_synth_path.10010.b
		custom_tooltip = tec_synth_path.10010.b.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_neutral_outcome
		}
		trigger = {
			owner = {
				any_owned_species = {
					has_trait = trait_mechanical
					OR = {
						has_species_flag = mechanical_species@prev
						has_species_flag = mechanical_species_fake_@prev
					}
				}
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_synth_use_robots
				random_owned_species = {
					limit = {
						has_trait = trait_mechanical
						OR = {
							has_species_flag = mechanical_species@prev
							has_species_flag = mechanical_species_fake_@prev
						}
					}
					set_species_flag = tec_synth_host_species_@prev
				}
			}
		}
	}
}
situation_event = { # Synth 1 - 20% - Theseus paradox
	id = tec_synth_path.10020
	title = "tec_synth_path.10020.name"
	desc = "tec_synth_path.10020.desc"

	picture = GFX_evt_tec_synthetic_recognition
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.10020.a
		custom_tooltip = tec_synth_path.10020.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_synth_slow_transition
			}
		}
	}

	option = {
		name = tec_synth_path.10020.b
		custom_tooltip = tec_synth_path.10020.b.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_synth_fast_transition
			}
		}
	}
}
situation_event = { # Synth 1 - 30% - First among our kind
	id = tec_synth_path.10030
	title = "tec_synth_path.10030.name"
	desc = "tec_synth_path.10030.desc"

	picture = GFX_evt_tec_synthetic_first
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.10030.a
		custom_tooltip = tec_synth_path.10030.a.tooltip
		icon = {
			icon = GFX_situation_approach_pop
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_good_path
		}
		hidden_effect = {
			owner = {
				random_owned_species = {
					limit = {
						has_citizenship_type = {
							type = citizenship_full
						}
					}
					save_event_target_as = tec_target_species
				}
				random_owned_pop = {
					limit = {
						is_same_species = event_target:tec_target_species
					}
					kill_pop = yes
				}
				set_country_flag = tec_synth_voluntary_subject
			}
		}
	}
	option = {
		name = tec_synth_path.10030.b
		custom_tooltip = tec_synth_path.10030.b.tooltip
		icon = {
			icon = GFX_situation_approach_kneel
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_bad_path
		}
		trigger = {
			owner = {
				OR = {
					is_authoritarian = yes
					is_xenophobe = yes
					is_elitist = yes
				}
			}
		}
		hidden_effect = {
			owner = {
				random_owned_species = {
					limit = {
						OR = {
							has_citizenship_type = {
								type = citizenship_full
							}
							has_citizenship_type = {
								type = citizenship_limited
							}
						}
					}
					save_event_target_as = tec_target_species
				}
				random_owned_pop = {
					limit = {
						is_same_species = event_target:tec_target_species
					}
					kill_pop = yes
				}
				set_country_flag = tec_synth_forced_subject
			}
		}
	}
	option = {
		name = tec_synth_path.10030.c
		custom_tooltip = tec_synth_path.10030.c.tooltip
		icon = {
			icon = GFX_situation_approach_whip
			icon_background = GFX_situation_approach_bg_tec_orange
			text = tec_icon_text_bad_path
		}
		trigger = {
			owner = {
				any_owned_species = {
					has_citizenship_type = {
						type = citizenship_slavery
					}
				}
			}
		}
		hidden_effect = {
			owner = {
				random_owned_species = {
					limit = {
						has_citizenship_type = {
							type = citizenship_slavery
						}
					}
					save_event_target_as = tec_target_species
				}
				random_owned_pop = {
					limit = {
						is_same_species = event_target:tec_target_species
					}
					kill_pop = yes
				}
				set_country_flag = tec_synth_forced_subject
				set_country_flag = tec_synth_slave_subject
			}
		}
	}
	option = {
		name = tec_synth_path.10030.d
		custom_tooltip = tec_synth_path.10030.d.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_neutral_path
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_synth_digital_subject
			}
		}
	}
}
situation_event = { # Synth 1 - 50% - First outcomes - Sorts subchains
	id = tec_synth_path.10050
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		random_list = {
			33 = {	# Good
				modifier = {
					factor = 0.3
					owner = {
						OR = {
							has_country_flag = tec_synth_use_robots
							has_country_flag = tec_synth_fast_transition
							has_country_flag = tec_synth_forced_subject
						}
					}
				}
				situation_event = {
					id = tec_synth_path.10051
				}
				owner = {
					set_country_flag = tec_synth_good_ending
				}
			}
			33 = {	# Neutral
				situation_event = {
					id = tec_synth_path.10052
				}
				owner = {
					set_country_flag = tec_synth_generic_ending
				}
			}
			33 = {	# Bad
				modifier = {
					factor = 0.3
					owner = {
						OR = {
							has_country_flag = tec_synth_new_bodies
							has_country_flag = tec_synth_slow_transition
							has_country_flag = tec_synth_voluntary_subject
						}
					}
				}
				situation_event = {
					id = tec_synth_path.10053
				}
				owner = {
					set_country_flag = tec_synth_bad_ending
				}
			}
		}
	}
}
situation_event = { # Synth 1 - 75% - Digital Perspective - Abstract of where the thing is going
	id = tec_synth_path.10075
	title = "tec_synth_path.10075.name"
	desc = {
		text = tec_synth_path.10075.desc.generic
		trigger = {
			owner = {
				has_country_flag = tec_synth_generic_ending
			}
		}
	}
	desc = {
		text = tec_synth_path.10075.desc.good
		trigger = {
			owner = {
				has_country_flag = tec_synth_good_ending
			}
		}
	}
	desc = {
		text = tec_synth_path.10075.desc.bad
		trigger = {
			owner = {
				has_country_flag = tec_synth_bad_ending
			}
		}
	}
	picture = GFX_evt_machine_sapience
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.10075.a
		custom_tooltip = tec_synth_path.10075.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}

# Halfway empire situation events
#situation_event = { # Post starting situation - Puppets as masters - 20101
#situation_event = { # Post starting situation - Theseus paradox - 20102

situation_event = { # Post 50% - Eyes in the mirror
	id = tec_synth_path.10051
	title = "tec_synth_path.10051.name"
	desc = "tec_synth_path.10051.desc"

	picture = GFX_evt_tec_synthetic_recognition
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.10051.a
		custom_tooltip = tec_synth_path.10051.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}
situation_event = { # Post 50% - A Ghost In a Shell 
	id = tec_synth_path.10052
	title = "tec_synth_path.10052.name"
	desc = "tec_synth_path.10052.desc"

	picture = GFX_evt_tec_synthetic_recognition
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.10052.a
		custom_tooltip = tec_synth_path.10052.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}
situation_event = { # Post 50% - Synthetic Pychosis 
	id = tec_synth_path.10053
	title = "tec_synth_path.10053.name"
	desc = "tec_synth_path.10053.desc"

	picture = GFX_evt_organic_oppression
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.10053.a
		custom_tooltip = tec_synth_path.10053.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}

# Random situation events
situation_event = { # Good 1 - Volunteers offer themselves (pre 50)
	id = tec_synth_path.10011
	title = "tec_synth_path.10011.name"
	desc = "tec_synth_path.10011.desc"

	picture = GFX_evt_scientific_experiments
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	situation = this
	location = target

	trigger = {
		exists = owner
		owner = {
			has_technology = tech_synthetic_workers
			has_technology = tech_synthetic_leaders
		}
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.10011.a
		custom_tooltip = tec_synth_path.10011.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress < 95
				}
				add_situation_progress = 5
			}
			set_timed_situation_flag = {
				flag = tec_situation_bonus_speed
				years = 1
			}
		}
	}
}
situation_event = { # Good 2 - First prototypes accelerate the process (post 50)
	id = tec_synth_path.10012
	title = "tec_synth_path.10012.name"
	desc = "tec_synth_path.10012.desc"

	picture = GFX_evt_scientific_experiments
	show_sound = event_laboratory_sound
	is_triggered_only = yes
	situation = this
	location = target

	trigger = {
		exists = owner
		owner = {
			has_technology = tech_synthetic_workers
			has_technology = tech_synthetic_leaders
		}
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.10012.a
		custom_tooltip = tec_synth_path.10012.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress < 89
				}
				add_situation_progress = 10
			}
			event_target:tec_target_planet = {
				while = {
					count = 5
					random_owned_pop = {
						limit = {
							is_same_species = event_target:tec_target_species
							NOT = {
								has_modifier = tec_cyb_good_pop
							}
						}
						add_modifier = {
							modifier = tec_cyb_good_pop
						}
					}
				}
			}
		}
	}
}

situation_event = { # Bad 1 - Panic of change (pre 50)
	id = tec_synth_path.10021
	title = "tec_synth_path.10021.name"
	desc = "tec_synth_path.10021.desc"

	picture = GFX_evt_conclave
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes
	situation = this
	location = target

	trigger = {
		exists = owner
		owner = {
			has_technology = tech_synthetic_workers
			has_technology = tech_synthetic_leaders
		}
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.10021.a
		custom_tooltip = tec_synth_path.10021.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 5
				}
				add_situation_progress = -5
			}
			event_target:tec_target_planet = {
				add_modifier = {
					modifier = pm_tec_cyb_rebel_planet
					years = 2
				}
			}
		}
	}
}
situation_event = { # Bad 2 - Sabotage of installations (post 50)
	id = tec_synth_path.10022
	title = "tec_synth_path.10022.name"
	desc = "tec_synth_path.10022.desc"

	picture = GFX_evt_night_raid
	show_sound = event_super_explosion
	is_triggered_only = yes
	situation = this
	location = target

	trigger = {
		exists = owner
		owner = {
			has_technology = tech_synthetic_workers
			has_technology = tech_synthetic_leaders
		}
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.10022.a
		custom_tooltip = tec_synth_path.10022.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 10
				}
				add_situation_progress = -10
			}
			event_target:tec_target_planet = {
				add_modifier = {
					modifier = pm_tec_cyb_crime_planet
					years = 1
				}
			}
		}
	}
}

# Not implemented
situation_event = { # Bad 2 cont - Internal issues
	id = tec_synth_path.10122
	title = "tec_synth_path.10122.name"
	desc = "tec_synth_path.10122.desc"

	picture = GFX_evt_night_raid
	show_sound = event_super_explosion
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.10122.a
		custom_tooltip = tec_synth_path.10122.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 10
				}
				add_situation_progress = -10
			}
			event_target:tec_target_planet = {
				add_modifier = {
					modifier = pm_tec_cyb_crime_planet
					years = 1
				}
			}
		}
	}
}
situation_event = { # Bad 2 cont - Rebels attack planet
	id = tec_synth_path.10222
	title = "tec_synth_path.10222.name"
	desc = "tec_synth_path.10222.desc"

	picture = GFX_evt_night_raid
	show_sound = event_super_explosion
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.10222.a
		custom_tooltip = tec_synth_path.10222.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_cyb
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 10
				}
				add_situation_progress = -10
			}
			event_target:tec_target_planet = {
				add_modifier = {
					modifier = pm_tec_cyb_crime_planet
					years = 1
				}
			}
		}
	}
}


# Situation finished
country_event = { # Synthetic Evolution
	id = tec_synth_path.105
	title = "tec_synth_path.105.name"
	desc = "tec_synth_path.105.desc"

	picture = GFX_evt_tec_synthetic_first
	show_sound = event_synthetic_evolution
	is_triggered_only = yes

	immediate = {
		set_country_flag = synthetic_empire
	}

	option = {
		name = tec_synth_path.105.a
		custom_tooltip = tec_synth_path.105.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			# Access to the tradition path
			set_country_flag = tec_synth_path_unlocked_tradition_1
			# Synths
			tec_create_synth_species = yes
			set_country_flag = tec_synthetic_assimilation
			add_modifier = {
				modifier = modifier_tec_free_modification
				days = -1
			}
			# Avoid cybogs not being assimilable
			remove_country_flag = tec_cybernetic_t1_assimilation
			remove_country_flag = tec_cybernetic_t2_assimilation

			observer_event = { id = observer.4 }
			every_country = {
				limit = {
					is_ai = no
					NOR = {
						is_same_value = root
						# TO DO policy for muting other empire things 
						has_country_flag = tec_mute_empire_announces
					}
					has_communications = root
				}
				country_event = { id = utopia.2555 days = 5 }
				country_event = { id = utopia.2556 days = 10 }
			}
			if = {
				limit = {
					any_country = {
						OR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
						has_ethic = ethic_fanatic_spiritualist
						has_communications = root
						NOT = { is_same_value = root }
					}
				}
				random_country = {
					limit = {
						OR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
						has_ethic = ethic_fanatic_spiritualist
						has_communications = root
						NOT = { is_same_value = root }
					}
					country_event = { id = utopia.2557 days = 15 }
				}
			}
			else = {
				random_country = {
					limit = {
						tec_is_default_country = yes
						has_ethic = ethic_fanatic_spiritualist
						NOT = {
							has_valid_civic = civic_tec_machine_cult
						}
						has_communications = root
						NOT = { is_same_value = root }
					}
					country_event = { id = utopia.2557 days = 15 }
				}
				random_country = {
					limit = {
						tec_is_default_country = yes
						is_spiritualist = yes
						has_valid_civic = civic_tec_machine_cult
						has_communications = root
						NOT = { is_same_value = root }
					}
					country_event = { id = utopia.25571 days = 15 }
				}
			}
		}
	}
}

country_event = { # T1 Notification to other empires
	id = tec_synth_path.10501
	title = "tec_synth_path.10501.name"
	desc = "tec_synth_path.10501.desc"
	picture = GFX_evt_tec_synthetic_first
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_synth_path.10501.a"
	}
}

# --------------- Gating
situation_event = { # Conscious Singularity
	id = tec_synth_path.200
	title = "tec_synth_path.200.name"
	desc = "tec_synth_path.200.desc"

	picture = GFX_evt_tec_synthetic_recognition
	show_sound = event_synthetic_evolution
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			destroy_situation = this
		}
	}

	option = {
		name = tec_synth_path.200.a
		custom_tooltip = tec_synth_path.200.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			owner = {
				#set_country_flag = tec_u_c_mecha
				#set_country_flag = tec_u_c_bioimplants
				#set_country_flag = tec_u_c_worker
				#set_country_flag = tec_u_c_fashion
				#set_country_flag = tec_u_c_brain
				#set_country_flag = tec_u_c_intralink
				#set_country_flag = tec_u_c_mindless
				# Note: Trait unlock has been moved to the end of the chain
				# Safe
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
			}
		}
	}
}

situation_event = { # Synth gate - 20% - T3 gating
	id = tec_synth_path.20020
	title = "tec_synth_path.20020.name"
	desc = "tec_synth_path.20020.desc"

	picture = GFX_evt_cybernetics
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.20020.a
		custom_tooltip = tec_synth_path.20020.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_good_outcome
		}
	}
}
situation_event = { # Synth gate - 40% - Changes of Perspective
	id = tec_synth_path.20040
	title = "tec_synth_path.20040.name"
	desc = "tec_synth_path.20040.desc"

	picture = GFX_evt_tec_synthetic_first
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.20040.a
		custom_tooltip = tec_synth_path.20040.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_good_outcome
		}
	}
}
situation_event = { # Synth gate - 60% - Forced Evolution
	id = tec_synth_path.20060
	title = "tec_synth_path.20060.name"
	desc = "tec_synth_path.20060.desc"

	picture = GFX_evt_tec_synthetic_first
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.20060.desc.a
		custom_tooltip = tec_synth_path.20060.desc.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_good_outcome
		}
	}
}
situation_event = { # Synth gate - 80% - Our Singularity
	id = tec_synth_path.20080
	title = "tec_synth_path.20080.name"
	desc = "tec_synth_path.20080.desc"

	picture = GFX_evt_tec_synthetic_first
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.20080.desc.a
		custom_tooltip = tec_synth_path.20080.desc.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_icon_text_good_outcome
		}
	}
}

# Random situation events
situation_event = { # Good 1 - Ideas Becoming Reality
	id = tec_synth_path.20011
	title = "tec_synth_path.20011.name"
	desc = "tec_synth_path.20011.desc"

	picture = GFX_evt_surreal_visions
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.20011.a
		custom_tooltip = tec_synth_path.20011.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress < 95
				}
				add_situation_progress = 5
			}
			set_timed_situation_flag = {
				flag = tec_situation_bonus_speed
				years = 1
			}
		}
	}
}
situation_event = { # Good 2 - Realities Between Realities
	id = tec_synth_path.10012
	title = "tec_synth_path.10012.name"
	desc = "tec_synth_path.10012.desc"

	picture = GFX_evt_surreal_visions
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.20012.a
		custom_tooltip = tec_synth_path.20012.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress < 89
				}
				add_situation_progress = 10
			}
			event_target:tec_target_planet = {
				while = {
					count = 5
					random_owned_pop = {
						limit = {
							is_same_species = event_target:tec_target_species
							NOT = {
								has_modifier = tec_cyb_good_pop
							}
						}
						add_modifier = {
							modifier = tec_cyb_good_pop
						}
					}
				}
			}
		}
	}
}

situation_event = { # Bad 1 - Fail of Consensus
	id = tec_synth_path.20021
	title = "tec_synth_path.20021.name"
	desc = "tec_synth_path.20021.desc"

	picture = GFX_evt_organic_oppression
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.20021.a
		custom_tooltip = tec_synth_path.20021.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 5
				}
				add_situation_progress = -5
			}
			event_target:tec_target_planet = {
				add_modifier = {
					modifier = pm_tec_cyb_rebel_planet
					years = 2
				}
			}
		}
	}
}
situation_event = { # Bad 2 - Wrong Paths
	id = tec_synth_path.20022
	title = "tec_synth_path.20022.name"
	desc = "tec_synth_path.20022.desc"

	picture = GFX_evt_organic_oppression
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_synth_path.20022.a
		custom_tooltip = tec_synth_path.20022.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 10
				}
				add_situation_progress = -10
			}
			event_target:tec_target_planet = {
				add_modifier = {
					modifier = pm_tec_cyb_crime_planet
					years = 1
				}
			}
		}
	}
}

country_event = { # Synthetic Singularity
	id = tec_synth_path.205
	title = "tec_synth_path.205.name"
	desc = "tec_synth_path.205.desc"

	picture = GFX_evt_tec_synthetic_recognition
	show_sound = event_synthetic_evolution
	is_triggered_only = yes

	option = {
		name = tec_synth_path.205.a
		custom_tooltip = tec_synth_path.205.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_good_outcome
		}
		hidden_effect = {
			# Gate
			set_country_flag = tec_synthetics_gate_completed
			# Safe
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}
}

# Possibility to become machine? mayhaps in the future

	# Empire becomes a machine empire

	# Misc events

	# Notification for other countries

# --------------- T2
country_event = { # T2 picked
	id = tec_synth_path.300
	title = "tec_synth_path.300.name"
	desc = "tec_synth_path.300.desc"
	picture = GFX_evt_machine_sapience
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_synth_path.300.a"
	}
}

# 305
country_event = { # T2 picked
	id = tec_synth_path.305
	title = "tec_synth_path.305.name"
	desc = "tec_synth_path.305.desc"
	picture = GFX_evt_machine_sapience
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = tec_synthetics_t2_completed
		}
	}
	option = {
		name = "tec_synth_path.305.a"
	}
}

# Psionic path A
# ------------------------------------------------------------ tec_psionic_path.xxx
namespace = tec_psionic_path

# Order
	# T1
		# tec_psionic_path.100			Picked t1
		# tec_psionic_path.105			T1 project completed
		# tec_psionic_path.10501		T1 notif
	# /
	# Gating
		# tec_psionic_path.200		Post tradition 5 years
	# /
	# T2

	# /
# /

# --------------- T1
country_event = { # # T1 picked - og utopia.2600
	id = tec_psionic_path.100
	title = "utopia.2600.name"
	desc = "utopia.2600.desc"
	picture = GFX_evt_psionics
	show_sound = event_mind_over_matter

	is_triggered_only = yes

	option = {
		name = "tec_psionic_path.100.a"
		custom_tooltip = "tec_psionic_path.100.a.tooltip"
		icon = {
			icon = GFX_situation_approach_influence
			icon_background = GFX_situation_approach_bg_tec_blue
			text = set_situation_approach_icon_text
		}
		hidden_effect = { 
			save_event_target_as = tec_target_country
			event_target:tec_target_country = {
				start_situation = {
					type = situation_tec_psionic_path_t1
					target = event_target:tec_target_country.capital_scope
					effect = {
						save_event_target_as = new_situation
						set_situation_approach = situation_approach_tec_psionic_path_t1_harmony
						set_situation_locked = no
					}
				}
			}
			event_target:new_situation = {
				set_situation_locked = no
			}
		}	
	}

	option = {
		name = "tec_psionic_path.100.b"
		custom_tooltip = "tec_psionic_path.100.b.tooltip"
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		hidden_effect = { 
			save_event_target_as = tec_target_country
			event_target:tec_target_country = {
				start_situation = {
					type = situation_tec_psionic_path_t1
					target = event_target:tec_target_country.capital_scope
					effect = {
						save_event_target_as = new_situation
						set_situation_approach = situation_approach_tec_psionic_path_t1_entropy
						set_situation_locked = no
					}
				}
			}
			event_target:new_situation = {
				set_situation_locked = no
			}
		}	
	}
}

# Situation
	# 
# /
	# 20> 40> 60> 80 						A - standard
	# 20> 40> 60> -20> -40> -60> -80> 80	B - 5% output
	# -20> -40> -60> -80> 20> 40> 60> 80	C - 5% output -5% growth/assembly
	# Standard path
# Positive progress
situation_event = { # Psi t1 20%
	id = tec_psionic_path.10020
	title = "tec_psionic_path.10020.name"
	desc = "tec_psionic_path.10020.desc"

	picture = GFX_evt_surreal_visions
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10020.a
		custom_tooltip = tec_psionic_path.10020.a.tooltip
		icon = {
			icon = GFX_situation_approach_influence
			icon_background = GFX_situation_approach_bg_tec_blue
			text = set_situation_approach_icon_text
		}
	}
}

situation_event = { # Psi t1 40%
	id = tec_psionic_path.10040
	title = "tec_psionic_path.10040.name"
	desc = "tec_psionic_path.10040.desc"

	picture = GFX_evt_slingshot_stars
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10040.a
		custom_tooltip = tec_psionic_path.10040.a.tooltip
		icon = {
			icon = GFX_situation_approach_influence
			icon_background = GFX_situation_approach_bg_tec_blue
			text = set_situation_approach_icon_text
		}
	}
}

situation_event = { # Psi t1 60%
	id = tec_psionic_path.10060
	title = "tec_psionic_path.10060.name"
	desc = "tec_psionic_path.10060.desc"

	picture = GFX_evt_surreal_visions
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10060.a
		custom_tooltip = tec_psionic_path.10060.a.tooltip
		icon = {
			icon = GFX_situation_approach_influence
			icon_background = GFX_situation_approach_bg_tec_blue
			text = set_situation_approach_icon_text
		}
	}
}
situation_event = {
	id = tec_psionic_path.10061
	title = "tec_psionic_path.10061.name"
	desc = "tec_psionic_path.10061.desc"

	picture = GFX_evt_surreal_visions
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10061.a
		custom_tooltip = tec_psionic_path.10061.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_tec_blue
			text = set_situation_approach_icon_text
		}
	}
}

situation_event = { # Psi t1 80% - Ending A standard
	id = tec_psionic_path.10080
	title = "tec_psionic_path.10080.name"
	desc = "tec_psionic_path.10080.desc"

	picture = GFX_evt_zro_4
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10080.a
		custom_tooltip = tec_psionic_path.10080.a.tooltip
		icon = {
			icon = GFX_situation_approach_influence
			icon_background = GFX_situation_approach_bg_tec_blue
			text = set_situation_approach_icon_text
		}
	}
}
situation_event = { # Psi t1 80% - Ending B +5%
	id = tec_psionic_path.10081
	title = "tec_psionic_path.10081.name"
	desc = "tec_psionic_path.10081.desc"

	picture = GFX_evt_zro_4
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10081.a
		custom_tooltip = tec_psionic_path.10081.a.tooltip
		icon = {
			icon = GFX_situation_approach_influence
			icon_background = GFX_situation_approach_bg_tec_blue
			text = set_situation_approach_icon_text
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_psionic_harmony
			}
		}
	}
}
situation_event = { # Psi t1 80% - Ending C +5%-5%
	id = tec_psionic_path.10082
	title = "tec_psionic_path.10082.name"
	desc = "tec_psionic_path.10082.desc"

	picture = GFX_evt_zro_4
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10082.a
		custom_tooltip = tec_psionic_path.10082.a.tooltip
		icon = {
			icon = GFX_situation_approach_influence
			icon_background = GFX_situation_approach_bg_tec_blue
			text = set_situation_approach_icon_text
		}
		hidden_effect = {
			owner = {
				set_country_flag = tec_psionic_entropy
			}
		}
	}
}
# Negative progress
situation_event = { # Psi t1 -20%
	id = tec_psionic_path.10120
	title = "tec_psionic_path.10120.name"
	desc = "tec_psionic_path.10120.desc"

	picture = GFX_evt_surreal_visions
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10120.a
		custom_tooltip = tec_psionic_path.10120.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
	}
}
situation_event = {
	id = tec_psionic_path.10121
	title = "tec_psionic_path.10121.name"
	desc = "tec_psionic_path.10121.desc"

	picture = GFX_evt_surreal_visions
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10121.a
		custom_tooltip = tec_psionic_path.10121.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
	}
}
situation_event = { # Psi t1 -40%
	id = tec_psionic_path.10140
	title = "tec_psionic_path.10140.name"
	desc = "tec_psionic_path.10140.desc"

	picture = GFX_evt_surreal_visions
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10140.a
		custom_tooltip = tec_psionic_path.10140.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
	}
}
situation_event = {
	id = tec_psionic_path.10141
	title = "tec_psionic_path.10141.name"
	desc = "tec_psionic_path.10141.desc"

	picture = GFX_evt_surreal_visions
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10141.a
		custom_tooltip = tec_psionic_path.10141.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
	}
}
situation_event = { # Psi t1 -60%
	id = tec_psionic_path.10160
	title = "tec_psionic_path.10160.name"
	desc = "tec_psionic_path.10160.desc"

	picture = GFX_evt_surreal_visions
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10160.a
		custom_tooltip = tec_psionic_path.10160.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_tec_blue
			text = set_situation_approach_icon_text
		}
		hidden_effect = {
			set_situation_flag = tec_rejected_entropy
			set_situation_approach = situation_approach_tec_psionic_path_t1_harmony
			add_situation_progress = 60
		}
	}
	option = {
		name = tec_psionic_path.10160.b
		custom_tooltip = tec_psionic_path.10160.b.tooltip
		allow = {
			always = no
		}
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		hidden_effect = {
			set_situation_flag = tec_embraced_entropy
		}
	}
}
situation_event = {
	id = tec_psionic_path.10161
	title = "tec_psionic_path.10161.name"
	desc = "tec_psionic_path.10161.desc"

	picture = GFX_evt_surreal_visions
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10161.a
		custom_tooltip = tec_psionic_path.10161.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_tec_blue
			text = set_situation_approach_icon_text
		}
		hidden_effect = {
			set_situation_flag = tec_rejected_entropy
			set_situation_approach = situation_approach_tec_psionic_path_t1_harmony
			add_situation_progress = 60
		}
	}
	option = {
		name = tec_psionic_path.10161.b
		custom_tooltip = tec_psionic_path.10161.b.tooltip
		allow = {
			always = no
		}
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		hidden_effect = {
			set_situation_flag = tec_embraced_entropy
		}
	}
}
situation_event = { # Psi t1 -80%
	id = tec_psionic_path.10180
	title = "tec_psionic_path.10180.name"
	desc = "tec_psionic_path.10180.desc"

	picture = GFX_evt_surreal_visions
	is_triggered_only = yes
	situation = this
	location = target

	trigger = {
		always = no
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.10180.a
		custom_tooltip = tec_psionic_path.10180.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
	}
}

# Random
situation_event = { # Bad 3 A gate - Kills 3-5 pops
	id = tec_psionic_path.10021
	title = "tec_gene_path.20021.name"
	desc = "tec_gene_path.20021.desc"

	picture = GFX_evt_tec_red_genetics
	show_sound = event_vivisection
	is_triggered_only = yes
	situation = this
	location = target

	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 0.5
			current_situation_approach = situation_approach_tec_gene_path_gate_slow
		}
		modifier = {
			factor = 1.5
			current_situation_approach = situation_approach_tec_gene_path_gate_fast
		}
	}

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner = {
				# Check organic species
				owner_main_species = {
					save_event_target_as = tec_target_species
				}
				# Check planet
				random_owned_planet = {
					limit = {
						any_owned_species = {
							is_same_value = event_target:tec_target_species
						}
					}
					save_event_target_as = tec_target_planet
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_gene_path.20021.a
		custom_tooltip = tec_gene_path.20021.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_genecrank
			icon_background = GFX_situation_approach_bg_red
			text = tec_icon_text_bad_outcome
		}
		hidden_effect = {
			if = {
				limit = {
					situation_progress > 10
				}
				add_situation_progress = -10
			}
			event_target:tec_target_planet = {
				while = {
					count = 5
					random_list = {
						33 = {
							# Safe i guess?
						}
						66 = {
							random_owned_pop = {
								limit = {
									is_same_species = event_target:tec_target_species
								}
								kill_pop = yes
							}
						}
					}
				}
			}
		}
	}
}

# Finisher
country_event = { # T1A Situation completed
	id = tec_psionic_path.105
	title = "tec_psionic_path.105.name"
	desc = "tec_psionic_path.105.desc"
	picture = GFX_evt_psionics
	show_sound = event_mind_over_matter
	trackable = yes

	is_triggered_only = yes

	immediate = {
		#tec_create_latent_psionic_species = yes
		# Old code
			every_owned_pop = {
				limit = {
					is_same_species = root
					NOT = { species = { has_trait = trait_latent_psionic } }
				}
				modify_species = {
					species = this
					add_trait = trait_latent_psionic
				}
				species = { save_event_target_as = psionic_species }
			}
			change_dominant_species = { species = event_target:psionic_species change_all = yes }
		# /
		observer_event = { id = observer.5 }
		every_country = {
			limit = {
				is_ai = no
				has_communications = root
				NOR = {
					is_same_value = root
					# TO DO policy for muting other empire things 
					has_country_flag = tec_mute_empire_announces
				}
			}
			country_event = {
				id = tec_psionic_path.10501
				days = 5
				random = 2
			}
		}
	}

	option = {
		name = "tec_psionic_path.105.a"
		custom_tooltip = "tec_psionic_path.105.a.tooltip"
		hidden_effect = {
			set_country_flag = tec_psionic_path_unlocked_tradition_1
		}
	}
}
country_event = { # T1A Notification to other empires - og utopia.2602 tec_gene_path.10501
	id = tec_psionic_path.10501
	title = "utopia.2602.name"
	desc = {
		text = utopia.2602.1.desc
		trigger = {
			NOR = {
				any_owned_pop = { is_same_species = from }
				any_owned_leader = { is_same_species = from }
			}
		}
	}
	desc = {
		text = utopia.2602.2.desc
		trigger = {
			OR = {
				any_owned_pop = { is_same_species = from }
				any_owned_leader = { is_same_species = from }
			}
		}
	}
	picture = GFX_evt_psionics
	show_sound = event_laboratory_sound
	location = from.capital_scope

	is_triggered_only = yes

	option = {
		name = "utopia.2602.a"
		trigger = {
			NOR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
				is_at_war_with = from
				species = { has_trait = trait_psionic }
			}
		}
	}
	option = {
		name = "utopia.2602.b"
		trigger = {
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
			NOR = {
				is_at_war_with = from
				species = { has_trait = trait_psionic }
			}
		}
	}
	option = {
		name = "utopia.2602.c"
		trigger = {
			is_at_war_with = from
			NOT = { species = { has_trait = trait_psionic } }
		}
	}
	option = {
		name = "utopia.2602.d"
		trigger = {
			species = { has_trait = trait_psionic }
		}
	}
}

	# T1B Situation completed

	# T1B Notification to other empires

# Picked tr_psionics_adopt
country_event = { # The Shroud
	id = tec_psionic_path.110
	title = "tec_psionic_path.110.name"
	desc = "tec_psionic_path.110.desc"
	picture = GFX_evt_psionics
	show_sound = event_psionic
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_psionic_path.110.a"
		# Old code
			#hidden_effect = { save_event_target_as = breach_shroud_owner }
			#capital_scope = {
			#	enable_special_project = {
			#		name = "BREACHING_SHROUD_PROJECT"
			#		location = this
			#		owner = root
			#	}
			#}
		# /
		hidden_effect = {
			country_event = {
				id = tec_psionic_path.111
				days = 5
			}
		}
	}
}

country_event = { # The Seance
	id = tec_psionic_path.111
	title = "tec_psionic_path.111.name"
	desc = "tec_psionic_path.111.desc"
	picture = GFX_evt_psionics
	show_sound = event_psionic

	is_triggered_only = yes

	immediate = {
		random_country = {
			limit = { is_country_type = shroud }
			save_event_target_as = the_shroud
		}
	}

	option = {
		name = "tec_psionic_path.111.a"
		establish_communications_no_message = event_target:the_shroud
		hidden_effect = {
			set_country_flag = shroud_intro
			country_event = { id = utopia.3000 }
		}
	}
}

# Picked tr_psionics_mind_readers
country_event = { # T2 picked - og utopia.2650
	id = tec_psionic_path.120
	title = "utopia.2650.name"
	desc = "utopia.2650.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	immediate = {
		every_owned_pop = {
			limit = {
				is_same_species = root
				has_trait = trait_latent_psionic
			}
			species = {
				save_event_target_as = psionic_species
			}
			modify_species = {
				species = this
				remove_trait = trait_latent_psionic
				add_trait = trait_psionic
				effect = {
					save_event_target_as = psionic_species
				}
			}
		}
		change_dominant_species = {
			species = event_target:psionic_species 
			change_all = yes 
		}
		if = {	# Anti edge cases
			limit = {
				owner_main_species = {
					NOT = {
						has_trait = trait_psionic
					}
				}
			}
			owner_main_species = {
				modify_species = {
					species = this
					remove_trait = trait_latent_psionic
					add_trait = trait_psionic
					effect = {
						save_event_target_as = psionic_species
					}
				}		
			}
			every_owned_pop = {
				limit = {
					is_same_species = owner_main_species
				}
				change_species = event_target:psionic_species
			}
			every_envoy = {
				limit = {
					is_same_species = owner_main_species
				}
				change_species = event_target:psionic_species 
			}
			every_pool_leader = {
				limit = {
					is_same_species = owner_main_species
				}
				change_species = event_target:psionic_species 
			}
			every_owned_leader = {
				limit = {
					is_same_species = owner_main_species
				}
				change_species = event_target:psionic_species 
			}
			change_dominant_species = {
				species = event_target:psionic_species 
				change_all = yes 
			}
		}
	}
	option = {
		name = "utopia.2650.a"
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						tec_is_default_country = yes
						is_country_type = fallen_empire
						is_country_type = awakened_fallen_empire
					}
				}
				every_owned_leader = {
					limit = {
						is_same_species = root
						NOR = {
							has_trait =	leader_trait_admiral_psionic
							has_trait =	leader_trait_general_psionic
							has_trait =	leader_trait_governor_psionic
							has_trait =	leader_trait_scientist_psionic
							has_trait =	leader_trait_ruler_psionic
						}
					}
					if = {
						limit = { leader_class = admiral }
						add_trait = leader_trait_admiral_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = general }
						add_trait = leader_trait_general_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = governor }
						add_trait = leader_trait_governor_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = scientist }
						add_trait = leader_trait_scientist_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = ruler }
						add_trait = leader_trait_ruler_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
				}
				every_pool_leader = {
					limit = {
						is_same_species = root
						NOR = {
							has_trait = leader_trait_admiral_psionic
							has_trait = leader_trait_general_psionic
							has_trait = leader_trait_governor_psionic
							has_trait = leader_trait_scientist_psionic
							has_trait = leader_trait_ruler_psionic
						}
					}
					if = {
						limit = { leader_class = admiral }
						add_trait = leader_trait_admiral_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = general }
						add_trait = leader_trait_general_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = governor }
						add_trait = leader_trait_governor_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = scientist }
						add_trait = leader_trait_scientist_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = ruler }
						add_trait = leader_trait_ruler_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
				}
			}
			# Old code - This is moved to the t2
				#observer_event = { id = observer.6 }
				#every_country = {
				#	limit = {
				#		is_ai = no
				#		has_communications = root
				#		NOT = { is_same_value = root }
				#	}
				#	country_event = { id = tec_psionic_path.201 }
				#}
			# /
		}
	}
}

# --------------- T1 - Misc
country_event = { # Psychic Identified - Triggers 5 years after getting latent psi - og utopia.2605
	id = tec_psionic_path.102
	title = "utopia.2605.name"
	desc = "utopia.2605.desc"
	picture = GFX_evt_psionics
	show_sound = event_psionic
	is_triggered_only = yes

	trigger = {
		owner_species = {
			has_trait = trait_latent_psionic
		}
		any_owned_leader = {
			is_same_species = owner_species
			NOR = {
				has_trait = leader_trait_admiral_psionic
				has_trait = leader_trait_general_psionic
				has_trait = leader_trait_governor_psionic
				has_trait = leader_trait_scientist_psionic
				has_trait = leader_trait_ruler_psionic
				has_trait = leader_trait_admiral_chosen
				has_trait = leader_trait_general_chosen
				has_trait = leader_trait_governor_chosen
				has_trait = leader_trait_scientist_chosen
				has_trait = leader_trait_ruler_chosen
				has_chosen_covenant_trait_non_ruler = yes
			}
		}
	}

	immediate = {
		random_owned_leader = {
			limit = {
				is_same_species = owner_species
				NOT = {
					OR = {
						has_trait = leader_trait_admiral_psionic
						has_trait = leader_trait_general_psionic
						has_trait = leader_trait_governor_psionic
						has_trait = leader_trait_scientist_psionic
						has_trait = leader_trait_ruler_psionic
						has_trait = leader_trait_admiral_chosen
						has_trait = leader_trait_general_chosen
						has_trait = leader_trait_governor_chosen
						has_trait = leader_trait_scientist_chosen
						has_trait = leader_trait_ruler_chosen
						has_chosen_covenant_trait_non_ruler = yes
					}
				}
			}
			save_event_target_as = psionic_leader
		}
	}

	option = {
		name = "utopia.2605.a"
		event_target:psionic_leader = {
			if = {
				limit = { leader_class = admiral }
				add_trait = leader_trait_admiral_psionic
				hidden_effect = { add_ruler_trait = leader_trait_ruler_psionic }
				break = yes
			}
			if = {
				limit = { leader_class = general }
				add_trait = leader_trait_general_psionic
				hidden_effect = { add_ruler_trait = leader_trait_ruler_psionic }
				break = yes
			}
			if = {
				limit = { leader_class = governor }
				add_trait = leader_trait_governor_psionic
				hidden_effect = { add_ruler_trait = leader_trait_ruler_psionic }
				break = yes
			}
			if = {
				limit = { leader_class = scientist }
				add_trait = leader_trait_scientist_psionic
				hidden_effect = { add_ruler_trait = leader_trait_ruler_psionic }
				break = yes
			}
			if = {
				limit = { leader_class = ruler }
				hidden_effect = { add_trait = leader_trait_ruler_psionic }
				add_ruler_trait = leader_trait_ruler_psionic
				break = yes
			}
		}
	}
}

country_event = { # T2A Notification for other empires
	id = tec_psionic_path.201
	title = "utopia.2652.name"
	desc = "utopia.2652.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = AMAZING
		trigger = {
			NOR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
				is_at_war_with = from
				species = { has_trait = trait_psionic }
			}
		}
	}
	option = {
		name = "utopia.2652.b"
		trigger = {
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
			NOR = {
				is_at_war_with = from
				species = { has_trait = trait_psionic }
			}
		}
	}
	option = {
		name = "utopia.2652.c"
		trigger = {
			is_at_war_with = from
			NOT = { species = { has_trait = trait_psionic } }
		}
	}
	option = {
		name = "utopia.2652.d"
		trigger = {
			species = { has_trait = trait_psionic }
		}
	}
}

# New Leaders Get Psionic Trait
# !overwrite utopia.2651 
# tec_psionic_path.210

# Ruler gets normal class trait if one hasn't been assigned
# !overwrite utopia.2653
# tec_psionic_path.211

# --------------- Gating
country_event = { # Post-tradition - An awakening
	id = tec_psionic_path.200
	title = "tec_psionic_path.200.name"
	desc = "tec_psionic_path.200.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = tec_announced_psionic_traits
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}
	option = {
		name = tec_psionic_path.200.a
		custom_tooltip = tec_psionic_path.200.a.tooltip
		hidden_effect = {
			save_event_target_as = tec_target_country
			event_target:tec_target_country = {
				start_situation = {
					type = situation_tec_psionic_path_gate
					target = event_target:tec_target_country.capital_scope
					effect = {
						save_event_target_as = new_situation
					}
				}
			}
		}
	}
	after = {
		hidden_effect = {
			event_target:new_situation = {
				set_situation_locked = no
				set_situation_approach = situation_approach_tec_psionic_path_gate_neutral
			}
		}
	}
}

# Situation
situation_event = { # PSI - 25% - Standard trigger
	id = tec_psionic_path.20025
	title = "tec_psionic_path.20025.name"
	desc = "tec_psionic_path.20025.desc"

	picture = GFX_evt_shroudwalker_teachers
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_flag = situation_tec_psionic_path_gate_unlock_approachs
			set_situation_locked = yes
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.20025.a
		custom_tooltip = tec_psionic_path.20025.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
		set_situation_approach = situation_approach_tec_psionic_path_gate_slow
	}

	option = {
		name = tec_psionic_path.20025.b
		custom_tooltip = tec_psionic_path.20025.b.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		set_situation_approach = situation_approach_tec_psionic_path_gate_fast
	}
}
situation_event = { # PSI - 50% - Cyberpsi trigger
	id = tec_psionic_path.20050
	title = "tec_psionic_path.20050.name"
	desc = "tec_psionic_path.20050.desc"

	picture = GFX_evt_psionics
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.20050.a
		custom_tooltip = tec_psionic_path.20050.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_tec_purple
			text = tec_icon_text_neutral_outcome
		}
	}
}
situation_event = { # PSI - 75% - Biopsi trigger
	id = tec_psionic_path.20075
	title = "tec_psionic_path.20075.name"
	desc = "tec_psionic_path.20075.desc"

	picture = GFX_evt_zro_4
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.20075.a
		custom_tooltip = tec_psionic_path.20075.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_tec_purple
			text = tec_icon_text_neutral_outcome
		}
	}
}

# Random situation events
	# Good 1 - A planet discovers a zro deposit
	# Good 2 - Gives +10% 1 year planet output

	# Bad 1 - Psionic pop dies
	# Bad 2 - Gives -10% 1 planet year output
	# Bad 3 - Gives -20 planet stability for 5 years

country_event = { # Situation finished
	id = tec_psionic_path.205
	title = "tec_psionic_path.205.name"
	desc = {
		trigger = {
			has_country_flag = tec_psionic_slow_temp
		}
		text = tec_psionic_path.205.desc.slow
	}
	desc = {
		trigger = {
			has_country_flag = tec_psionic_fast_temp
		}
		text = tec_psionic_path.205.desc.fast
	}
	desc = {	# Fallback
		trigger = {
			NOR = {
				has_country_flag = tec_psionic_slow_temp
				has_country_flag = tec_psionic_fast_temp
			}
		}
		text = tec_psionic_path.205.desc.fast
	}
	
	picture = GFX_evt_psionics
	show_sound = event_psionic
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			# Gate
			set_country_flag = tec_psionics_gate_completed
			# Safe
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}

	after = {
		hidden_effect = {
			set_country_flag = tec_psionics_gate_completed
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}

	option = {
		name = tec_psionic_path.205.a
		custom_tooltip = tec_gene_path.205.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_tec_purple
			text = tec_icon_text_good_outcome
		}
		trigger = {
			has_country_flag = tec_psionic_slow_temp
		}
	}

	option = {
		name = tec_psionic_path.205.b
		custom_tooltip = tec_psionic_path.205.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_tec_purple
			text = tec_icon_text_good_outcome
		}
		trigger = {
			has_country_flag = tec_psionic_fast_temp
		}
	}
}

# ---------- T2


# Halfway empire situation events

# Random situation events
country_event = { # Good 1
	id = tec_psionic_path.20011
	title = "tec_psionic_path.20011.name"
	desc = "tec_psionic_path.20011.desc"
	picture = GFX_evt_machine_sapience
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	trigger = {
		always = no
	}

	option = {
		name = "tec_psionic_path.20011.a"
	}
}
country_event = { # Good 2
	id = tec_psionic_path.20012
	title = "tec_psionic_path.20012.name"
	desc = "tec_psionic_path.20012.desc"
	picture = GFX_evt_machine_sapience
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	trigger = {
		always = no
	}

	option = {
		name = "tec_psionic_path.20012.a"
	}
}
country_event = { # Bad 1
	id = tec_psionic_path.20021
	title = "tec_psionic_path.20021.name"
	desc = "tec_psionic_path.20021.desc"
	picture = GFX_evt_machine_sapience
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	trigger = {
		always = no
	}

	option = {
		name = "tec_psionic_path.20021.a"
	}
}
country_event = { # Bad 2
	id = tec_psionic_path.20022
	title = "tec_psionic_path.20022.name"
	desc = "tec_psionic_path.20022.desc"
	picture = GFX_evt_machine_sapience
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	trigger = {
		always = no
	}

	option = {
		name = "tec_psionic_path.20022.a"
	}
}


# ---------- T3
country_event = {
	id = tec_psionic_path.300
	title = "tec_psionic_path.300.name"
	desc = "tec_psionic_path.300.desc"
	picture = GFX_evt_zro_2
	show_sound = event_mystic_reveal_light

	is_triggered_only = yes
	option = {
		name = "tec_psionic_path.300.a"
		custom_tooltip = tec_psionic_path.300.a.tooltip
		hidden_effect = {
			save_event_target_as = tec_target_country
			event_target:tec_target_country = {
				start_situation = {
					type = situation_tec_psionic_path_t2
					target = event_target:tec_target_country.capital_scope
					effect = {
						save_event_target_as = new_situation
					}
				}
			}
		}
	}
	
	after = {
		hidden_effect = {
			event_target:new_situation = {
				set_situation_locked = no
				set_situation_approach = situation_approach_tec_psionic_path_t2_neutral
			}
		}
	}

}

situation_event = { # PSI T2 - 10% - Through the Veil
	id = tec_psionic_path.30010
	title = "tec_psionic_path.30010.name"
	desc = "tec_psionic_path.30010.desc"

	picture = GFX_evt_shroudwalker_enclave
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.20025.a
		custom_tooltip = tec_psionic_path.20025.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_neutral_outcome
		}
	}
}

situation_event = { # PSI T2 - 20% - A Strange Singularity
	id = tec_psionic_path.30020
	title = "tec_psionic_path.30020.name"
	desc = "tec_psionic_path.30020.desc"

	picture = GFX_evt_zro_4
	is_triggered_only = yes
	situation = this
	show_sound = event_the_great_awakening
	location = event_target:tec_recently_ascended_planet

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			set_situation_flag = situation_tec_psionic_path_t2_unlock_approachs
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
			if = {
				limit = {
					owner = {
						capital_scope = {
							num_pops > 10
							any_owned_species = {
								tec_is_total_psionic_species = yes
							}
						}
					}
				}
				owner = {
					capital_scope = {
						save_event_target_as = tec_psionic_target_planet
						random_owned_species = {
							limit = {
								tec_is_total_psionic_species = yes
							}
							save_event_target_as = tec_target_psionic_species
						}
						random_owned_pop = {
							limit = {
								species = {
									is_same_value = event_target:tec_target_psionic_species
								}
							}
							kill_pop = yes
						}
						add_deposit = d_tec_psionic_ascension_zone_1
						save_event_target_as = tec_recently_ascended_planet
					}
				}
			}
			else = {
				owner = {
					random_owned_planet = {
						limit = {
							# lets avoid colonies being ravaged
							num_pops > 10
							any_owned_species = {
								tec_is_total_psionic_species = yes
							}
						}
						save_event_target_as = tec_psionic_target_planet
						random_owned_species = {
							limit = {
								tec_is_total_psionic_species = yes
							}
							save_event_target_as = tec_target_psionic_species
						}
						random_owned_pop = {
							limit = {
								species = {
									is_same_value = event_target:tec_target_psionic_species
								}
							}
							kill_pop = yes
						}
						add_deposit = d_tec_psionic_ascension_zone_1
						save_event_target_as = tec_recently_ascended_planet
					}
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.30020.a
		custom_tooltip = tec_psionic_path.30020.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
		set_situation_approach = situation_approach_tec_psionic_path_t2_slow
	}

	option = {
		name = tec_psionic_path.30020.b
		custom_tooltip = tec_psionic_path.30020.b.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		set_situation_approach = situation_approach_tec_psionic_path_t2_fast
	}
}

situation_event = { # PSI T2 - 60% - Veiled Secrets
	id = tec_psionic_path.30060
	title = "tec_psionic_path.30060.name"
	desc = "tec_psionic_path.30060.desc"

	picture = GFX_evt_zro_2
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.30060.a
		custom_tooltip = tec_psionic_path.30060.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_neutral_outcome
		}
	}
}

situation_event = { # PSI T2 - 80% - That which remains
	id = tec_psionic_path.30080
	title = "tec_psionic_path.30080.name"
	desc = {
		text = tec_psionic_path.30080.desc.hastech
		trigger = {
			owner = {
				OR = {
					has_tech_option = tech_mine_zro
					has_technology = tech_mine_zro
				}
			}
		}
	}
	desc = {
		text = tec_psionic_path.30080.desc.notech
		trigger = {
			owner = {
				NOR = {
					has_tech_option = tech_mine_zro
					has_technology = tech_mine_zro
				}
			}
		}
	}
	picture = GFX_evt_zro_2
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
			owner_main_species = {
				save_event_target_as = tec_target_species
			}
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_psionic_path.30080.a
		custom_tooltip = tec_psionic_path.30080.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_good_outcome
		}

		trigger = {
			hidden_trigger = {
				owner = {
					NOT = {
						has_technology = tech_mine_zro
						has_tech_option = tech_mine_zro
					}
				}
			}
		}

		owner = {
			give_technology = {
				tech = tech_mine_zro
			}
		}
		add_situation_progress = -50
	}

	option = {
		name = tec_psionic_path.30080.b
		custom_tooltip = tec_psionic_path.30080.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_good_outcome
		}

		trigger = {
			hidden_trigger = {
				owner = {
					NOR = {
						has_technology = tech_mine_zro
						has_tech_option = tech_mine_zro
					}
				}
			}
		}
		owner = {
			add_tech_option_or_research_effect = {
				TECH = tech_mine_zro
				PROGRESS = 0.25
				CATEGORY = society_research
			}
		}
		add_situation_progress = -20
	}

	option = {
		name = tec_psionic_path.30080.c
		custom_tooltip = tec_psionic_path.30080.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_mind
			icon_background = GFX_situation_approach_bg_green
			text = tec_icon_text_neutral_outcome
		}
	}
}

# Situation finished
country_event = { # You are told the secrets of ascension
	id = tec_psionic_path.305
	title = "tec_psionic_path.305.name"
	desc = "tec_psionic_path.305.desc"
	picture = GFX_evt_surreal_visions
	show_sound = event_psionic

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = tec_psionics_t2_completed
		}
	}
	option = {
		name = "tec_psionic_path.305.a"
		custom_tooltip = "tec_psionic_path.305.a.tooltip"
	}
}


# ---------- Ascension mechanic
# Ascension controller
planet_event = {
	id = tec_psionic_path.30001
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_modifier = pm_tec_psionic_ascension
	}
	
	immediate = {
		if = {
			limit = {
				exists = owner
				owner = {
					NOT = {
						has_country_flag = tec_done_first_ascension
					}
				}
			}
			planet_event = {
				id = tec_psionic_path.30003
			}
			owner = {
				set_country_flag = tec_done_first_ascension
				change_variable = {
					which = tec_psionic_ascension_number
					value = 1
				}
			}
		}
		else = {
			planet_event = {
				id = tec_psionic_path.30004
			}
			owner = {
				change_variable = {
					which = tec_psionic_ascension_number
					value = 1
				}
			}
		}
	}
}

# Ascension anticheese - If someone attempts to remove all the psionic pops to avoid losing pops...
planet_event = {
	id = tec_psionic_path.30002
	title = "tec_psionic_path.30002.name"
	desc = "tec_psionic_path.30002.desc"
	picture = GFX_evt_zro_5
	show_sound = event_screams

	is_triggered_only = yes

	trigger = {
		any_owned_species = {
			tec_is_any_psionic_species = no
		}
	}

	immediate = {
		if = { # 10+ pops, selects 1
			limit = {
				num_pops < 21
			}
			while = {
				count = 1
				random_owned_pop = {
					limit = {
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_wasteland
				add_planet_devastation = 10
			}
		}
		else_if = { # 20+ pops, selects up to 2
			limit = {
				num_pops < 31
				num_pops > 20
			}
			while = {
				count = 2
				random_owned_pop = {
					limit = {
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_wasteland
			}
		}
		else_if = { # 30+ pops, selects up to 3
			limit = {
				num_pops < 41
				num_pops > 30
			}
			while = {
				count = 3
				random_owned_pop = {
					limit = {
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_wasteland
				add_planet_devastation = 10
			}
		}
		else_if = { # 40+ pops, selects up to 4
			limit = {
				num_pops < 51
				num_pops > 40
			}
			while = {
				count = 4
				random_owned_pop = {
					limit = {
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_wasteland
				add_planet_devastation = 10
			}
		}
		else_if = { # 50+ pops, selects up to 5
			limit = {
				num_pops > 50
			}
			while = {
				count = 5
				random_owned_pop = {
					limit = {
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_wasteland
				add_planet_devastation = 10
			}
		}
	}

	
	option = {
		name = "tec_psionic_path.30002.a"
	}
}

# The first ascension...well actually the second but you know
planet_event = {
	id = tec_psionic_path.30003
	title = "tec_psionic_path.30003.name"
	desc = "tec_psionic_path.30003.desc"
	picture = GFX_evt_zro_4
	show_sound = event_mystic_reveal_light

	is_triggered_only = yes

	trigger = {
		any_owned_species = {
			tec_is_any_psionic_species = yes
		}
	}

	immediate = {
		if = { # 10+ pops, selects 1
			limit = {
				num_pops < 21
			}
			while = {
				count = 1
				random_owned_species = {
					limit = {
						tec_is_any_psionic_species = yes
					}
					save_event_target_as = tec_selected_psionic_species
				}
				random_owned_pop = {
					limit = {
						species = {
							is_same_value = event_target:tec_selected_psionic_species
						}
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_ascension_zone_1
			}
		}
		else_if = { # 20+ pops, selects up to 2
			limit = {
				num_pops < 31
				num_pops > 20
			}
			while = {
				count = 2
				random_owned_species = {
					limit = {
						tec_is_any_psionic_species = yes
					}
					save_event_target_as = tec_selected_psionic_species
				}
				random_owned_pop = {
					limit = {
						species = {
							is_same_value = event_target:tec_selected_psionic_species
						}
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_ascension_zone_1
			}
		}
		else_if = { # 30+ pops, selects up to 3
			limit = {
				num_pops < 41
				num_pops > 30
			}
			while = {
				count = 3
				random_owned_species = {
					limit = {
						tec_is_any_psionic_species = yes
					}
					save_event_target_as = tec_selected_psionic_species
				}
				random_owned_pop = {
					limit = {
						species = {
							is_same_value = event_target:tec_selected_psionic_species
						}
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_ascension_zone_1
			}
		}
		else_if = { # 40+ pops, selects up to 4
			limit = {
				num_pops < 51
				num_pops > 40
			}
			while = {
				count = 4
				random_owned_species = {
					limit = {
						tec_is_any_psionic_species = yes
					}
					save_event_target_as = tec_selected_psionic_species
				}
				random_owned_pop = {
					limit = {
						species = {
							is_same_value = event_target:tec_selected_psionic_species
						}
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_ascension_zone_1
			}
		}
		else_if = { # 50+ pops, selects up to 5
			limit = {
				num_pops > 50
			}
			while = {
				count = 5
				random_owned_species = {
					limit = {
						tec_is_any_psionic_species = yes
					}
					save_event_target_as = tec_selected_psionic_species
				}
				random_owned_pop = {
					limit = {
						species = {
							is_same_value = event_target:tec_selected_psionic_species
						}
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_ascension_zone_1
			}
		}
	}
	
	option = {
		name = "tec_psionic_path.30003.a"
	}
}

# Ascension continuations
planet_event = {
	id = tec_psionic_path.30004
	title = "tec_psionic_path.30004.name"
	desc = "tec_psionic_path.30004.desc"
	picture = GFX_evt_zro_4
	show_sound = event_mystic_reveal_light

	is_triggered_only = yes

	trigger = {
		any_owned_species = {
			tec_is_any_psionic_species = yes
		}
	}

	immediate = {
		if = { # 10+ pops, selects 1
			limit = {
				num_pops < 21
			}
			while = {
				count = 1
				random_owned_species = {
					limit = {
						tec_is_any_psionic_species = yes
					}
					save_event_target_as = tec_selected_psionic_species
				}
				random_owned_pop = {
					limit = {
						species = {
							is_same_value = event_target:tec_selected_psionic_species
						}
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_ascension_zone_1
			}
		}
		else_if = { # 20+ pops, selects up to 2
			limit = {
				num_pops < 31
				num_pops > 20
			}
			while = {
				count = 2
				random_owned_species = {
					limit = {
						tec_is_any_psionic_species = yes
					}
					save_event_target_as = tec_selected_psionic_species
				}
				random_owned_pop = {
					limit = {
						species = {
							is_same_value = event_target:tec_selected_psionic_species
						}
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_ascension_zone_1
			}
		}
		else_if = { # 30+ pops, selects up to 3
			limit = {
				num_pops < 41
				num_pops > 30
			}
			while = {
				count = 3
				random_owned_species = {
					limit = {
						tec_is_any_psionic_species = yes
					}
					save_event_target_as = tec_selected_psionic_species
				}
				random_owned_pop = {
					limit = {
						species = {
							is_same_value = event_target:tec_selected_psionic_species
						}
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_ascension_zone_1
			}
		}
		else_if = { # 40+ pops, selects up to 4
			limit = {
				num_pops < 51
				num_pops > 40
			}
			while = {
				count = 4
				random_owned_species = {
					limit = {
						tec_is_any_psionic_species = yes
					}
					save_event_target_as = tec_selected_psionic_species
				}
				random_owned_pop = {
					limit = {
						species = {
							is_same_value = event_target:tec_selected_psionic_species
						}
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_ascension_zone_1
			}
		}
		else_if = { # 50+ pops, selects up to 5
			limit = {
				num_pops > 50
			}
			while = {
				count = 5
				random_owned_species = {
					limit = {
						tec_is_any_psionic_species = yes
					}
					save_event_target_as = tec_selected_psionic_species
				}
				random_owned_pop = {
					limit = {
						species = {
							is_same_value = event_target:tec_selected_psionic_species
						}
						is_sapient = yes
					}
					kill_pop = yes
				}
				add_deposit = d_tec_psionic_ascension_zone_1
			}
		}
	}
	
	option = {
		name = "tec_psionic_path.30004.a"
	}
}

# ----- Psionic traits - also used by mixed paths
# Shroud affinity controller on year pulse
country_event = {
	id = tec_psionic_path.500
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = tec_announced_psionic_traits
		NOT = {
			has_country_flag = tec_recently_received_psionic_trait
		}
		NAND = {
			has_country_flag = tec_unlocked_psionic_body
			has_country_flag = tec_unlocked_psionic_mind
			has_country_flag = tec_unlocked_psionic_energy
			has_country_flag = tec_unlocked_psionic_unity
			has_country_flag = tec_unlocked_psionic_telekinesis
			has_country_flag = tec_unlocked_psionic_teleport
		}
		if = {	# Biopsi and cyberpsi can only get 2
			limit = {
				NOT = {
					has_ascension_perk = ap_tec_psionic_ascendance
				}
			}
			check_variable = {
				which = tec_obtained_psionic_traits
				value < 3
			}
		}
	}

	immediate = {
		# reset variables
		set_variable = {
			which = tec_psi_tr_chance_shroud
			value = 1
		}
		set_variable = {
			which = tec_psi_tr_chance_ascension
			value = 2
		}
		set_variable = {	# having a patron reduces the change of getting a psionic trait naturally
			which = tec_psi_tr_chance_patron
			value = 0.1
		}
		
		# checks times accessed the shroud
		multiply_variable = {	# Shroud explored 5 times = 5 points
			which = tec_psi_tr_chance_shroud
			value = tec_regular_shroud_incursions
		}
		# checks times ascended
		multiply_variable = {	# Ascended 5 times = 10 points
			which = tec_psi_tr_chance_shroud
			value = tec_psionic_ascension_number
		}

		# Checks number of traits
		set_variable = {
			which = tec_temp_psionic_trait_handler
			value = tec_obtained_psionic_traits
		}

		multiply_variable = {	# 1 trait = 50%, 2 traits = 33% chance, 3 traits = 22% chance etc
			which = tec_temp_psionic_trait_handler
			value = 1.5
		}

		divide_variable = {
			which = tec_psi_tr_chance_shroud
			value = tec_temp_psionic_trait_handler
		}

		# The result is the chance to get a trait after each year
		if = {
			limit = { # 10%
				check_variable = {
					which = tec_psi_tr_chance_shroud
					value < 11
				}
			}
			random = {
				chance = 3
				set_country_flag = tec_get_psionic_trait
			}
		}
		else_if = {	# 20%
			limit = {
				check_variable = {
					which = tec_psi_tr_chance_shroud
					value > 10
				}
				check_variable = {
					which = tec_psi_tr_chance_shroud
					value < 21
				}
			}
			random = {
				chance = 6
				set_country_flag = tec_get_psionic_trait
			}
		}
		else_if = { # 30%
			limit = {
				check_variable = {
					which = tec_psi_tr_chance_shroud
					value > 20
				}
				check_variable = {
					which = tec_psi_tr_chance_shroud
					value < 31
				}
			}
			random = {
				chance = 9
				set_country_flag = tec_get_psionic_trait
			}
		}
		else_if = { # 30%
			limit = {
				check_variable = {
					which = tec_psi_tr_chance_shroud
					value > 30
				}
			}
			random = {
				chance = 12
				set_country_flag = tec_get_psionic_trait
			}
		}
		# If has the flag...
		if = {
			limit = {
				has_country_flag = tec_get_psionic_trait
				
			}
			if = {	# first trait
				limit = {
					NOR = {
						has_country_flag = tec_unlocked_psionic_body
						has_country_flag = tec_unlocked_psionic_mind
						has_country_flag = tec_unlocked_psionic_energy
						has_country_flag = tec_unlocked_psionic_unity
						has_country_flag = tec_unlocked_psionic_telekinesis
						has_country_flag = tec_unlocked_psionic_teleport
					}
				}
				random_list = {
					20 = {
						modifier = {
							weight = 0
							has_country_flag = tec_unlocked_psionic_body
						}
						country_event = {
							id = tec_psionic_path.50001
							days = 1
							random = 30
						}
						change_variable = {
							which = tec_obtained_psionic_traits
							value = 1
						}
					}
					20 = {
						modifier = {
							weight = 0
							has_country_flag = tec_unlocked_psionic_mind
						}
						country_event = {
							id = tec_psionic_path.50002
							days = 1
							random = 30
						}
						change_variable = {
							which = tec_obtained_psionic_traits
							value = 1
						}
					}
					20 = {
						modifier = {
							weight = 0
							has_country_flag = tec_unlocked_psionic_energy
						}
						country_event = {
							id = tec_psionic_path.50003
							days = 1
							random = 30
						}
						change_variable = {
							which = tec_obtained_psionic_traits
							value = 1
						}
					}
					20 = {
						modifier = {
							weight = 0
							has_country_flag = tec_unlocked_psionic_unity
						}
						country_event = {
							id = tec_psionic_path.50004
							days = 1
							random = 30
						}
						change_variable = {
							which = tec_obtained_psionic_traits
							value = 1
						}
					}
					20 = {
						modifier = {
							weight = 0
							has_country_flag = tec_unlocked_psionic_telekinesis
						}
						country_event = {
							id = tec_psionic_path.50005
							days = 1
							random = 30
						}
						change_variable = {
							which = tec_obtained_psionic_traits
							value = 1
						}
					}
					20 = {
						modifier = {
							weight = 0
							has_country_flag = tec_unlocked_psionic_teleport
						}
						country_event = {
							id = tec_psionic_path.50006
							days = 1
							random = 30
						}
						change_variable = {
							which = tec_obtained_psionic_traits
							value = 1
						}
					}
				}
			}
			else_if = {	# sorter
				limit = {
					OR = {
						has_country_flag = tec_unlocked_psionic_body
						has_country_flag = tec_unlocked_psionic_mind
						has_country_flag = tec_unlocked_psionic_energy
						has_country_flag = tec_unlocked_psionic_unity
						has_country_flag = tec_unlocked_psionic_telekinesis
						has_country_flag = tec_unlocked_psionic_teleport
					}
				}
				random_list = {
					20 = {
						modifier = {
							weight = 0
							has_country_flag = tec_unlocked_psionic_body
						}
						country_event = {
							id = tec_psionic_path.50001
							days = 1
							random = 30
						}
						change_variable = {
							which = tec_obtained_psionic_traits
							value = 1
						}
					}
					20 = {
						modifier = {
							weight = 0
							has_country_flag = tec_unlocked_psionic_mind
						}
						country_event = {
							id = tec_psionic_path.50002
							days = 1
							random = 30
						}
						change_variable = {
							which = tec_obtained_psionic_traits
							value = 1
						}
					}
					20 = {
						modifier = {
							weight = 0
							has_country_flag = tec_unlocked_psionic_energy
						}
						country_event = {
							id = tec_psionic_path.50003
							days = 1
							random = 30
						}
						change_variable = {
							which = tec_obtained_psionic_traits
							value = 1
						}
					}
					20 = {
						modifier = {
							weight = 0
							has_country_flag = tec_unlocked_psionic_unity
						}
						country_event = {
							id = tec_psionic_path.50004
							days = 1
							random = 30
						}
						change_variable = {
							which = tec_obtained_psionic_traits
							value = 1
						}
					}
					20 = {
						modifier = {
							weight = 0
							has_country_flag = tec_unlocked_psionic_telekinesis
						}
						country_event = {
							id = tec_psionic_path.50005
							days = 1
							random = 30
						}
						change_variable = {
							which = tec_obtained_psionic_traits
							value = 1
						}
					}
					20 = {
						modifier = {
							weight = 0
							has_country_flag = tec_unlocked_psionic_teleport
						}
						country_event = {
							id = tec_psionic_path.50005
							days = 1
							random = 30
						}
						change_variable = {
							which = tec_obtained_psionic_traits
							value = 1
						}
					}
				}
			}
			set_timed_country_flag = {
				flag = tec_recently_received_psionic_trait
				years = 10
			}
		}
		else = {
			break = yes
		}

	}

	after = {
		clear_variable = tec_psi_tr_chance_shroud
		clear_variable = tec_psi_tr_chance_ascension
		clear_variable = tec_psi_tr_chance_patron
	}
	
}

country_event = { # Psionic body
	id = tec_psionic_path.50001
	title = "tec_psionic_path.50001.name"
	desc = "tec_psionic_path.50001.desc"
	picture = GFX_evt_surreal_visions
	show_sound = event_psionic

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = tec_unlocked_psionic_body
		}
	}
	option = {
		name = "tec_psionic_path.50001.a"
		custom_tooltip = tec_psionic_path.50001.a.desc
		hidden_effect = {
			set_country_flag = tec_unlocked_psionic_body
		}
	}
}

country_event = { # Psionic mind
	id = tec_psionic_path.50002
	title = "tec_psionic_path.50002.name"
	desc = "tec_psionic_path.50002.desc"
	picture = GFX_evt_surreal_visions
	show_sound = event_psionic

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = tec_unlocked_psionic_mind
		}
	}
	option = {
		name = "tec_psionic_path.50002.a"
		custom_tooltip = tec_psionic_path.50002.a.desc
		hidden_effect = {
			set_country_flag = tec_unlocked_psionic_mind
		}
	}

}

country_event = { # Psionic Energy
	id = tec_psionic_path.50003
	title = "tec_psionic_path.50003.name"
	desc = "tec_psionic_path.50003.desc"
	picture = GFX_evt_surreal_visions
	show_sound = event_psionic

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = tec_unlocked_psionic_energy
		}
	}
	option = {
		name = "tec_psionic_path.50003.a"
		custom_tooltip = tec_psionic_path.50003.a.desc
		hidden_effect = {
			set_country_flag = tec_unlocked_psionic_energy
		}
	}
}

country_event = { # Psionic unity
	id = tec_psionic_path.50004
	title = "tec_psionic_path.50004.name"
	desc = "tec_psionic_path.50004.desc"
	picture = GFX_evt_surreal_visions
	show_sound = event_psionic

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = tec_unlocked_psionic_unity
		}
	}
	option = {
		name = "tec_psionic_path.50004.a"
		custom_tooltip = tec_psionic_path.50004.a.desc
		hidden_effect = {
			set_country_flag = tec_unlocked_psionic_unity
		}
	}
}

country_event = { # Psionic telekinesis
	id = tec_psionic_path.50005
	title = "tec_psionic_path.50005.name"
	desc = "tec_psionic_path.50005.desc"
	picture = GFX_evt_surreal_visions
	show_sound = event_psionic

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = tec_unlocked_psionic_telekinesis
		}
	}
	option = {
		name = "tec_psionic_path.50005.a"
		custom_tooltip = tec_psionic_path.50005.a.desc
		hidden_effect = {
			set_country_flag = tec_unlocked_psionic_telekinesis
		}
	}
}

country_event = { # Psionic teleport
	id = tec_psionic_path.50006
	title = "tec_psionic_path.50006.name"
	desc = "tec_psionic_path.50006.desc"
	picture = GFX_evt_surreal_visions
	show_sound = event_psionic

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = tec_unlocked_psionic_teleport
		}
	}
	option = {
		name = "tec_psionic_path.50006.a"
		custom_tooltip = tec_psionic_path.50006.a.desc
		hidden_effect = {
			set_country_flag = tec_unlocked_psionic_teleport
		}
	}
}
# ------


# Psionic path B
# ------------------------------------------------------------ tec_psionic_path_B.xxx
namespace = tec_psionic_path_B

# T2 picked

# Situation

# Situation finished

# T2 notification for other empires

# T3 picked

# Incursion trigger

# Incursion situation

# Halfway incursion events

# Random incursion events

# Incursion rewards


# --------------------------------- GESTALT ASCENSIONS ---------------------------------
# Hive psionic path
# ------------------------------------------------------------ tec_psionic_hive_path.xxx
namespace = tec_psionic_hive_path

# T1 picked

# Notification for other countries

# T2 picked

# Situation - Probing dimensions

# Situation finished

# T2 subsituations

# T3 picked

# Scaling situation 


# Machine Main Path
# ------------------------------------------------------------ tec_machine_path.xxx
namespace = tec_machine_path

# --------------- T1
country_event = { # T1 picked
	id = tec_machine_path.100
	title = "tec_machine_path.100.name"
	desc = "tec_machine_path.100.desc"
	picture = GFX_evt_machine_sapience
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_machine_path.100.a"
		custom_tooltip = "tec_machine_path.100.a.tooltip"
		hidden_effect = {
			save_event_target_as = tec_target_country
			event_target:tec_target_country = {
				start_situation = {
					type = situation_tec_machine_path_t1
					target = event_target:tec_target_country.capital_scope
					effect = {
						save_event_target_as = new_situation
					}
				}
				event_target:new_situation = {
					set_situation_locked = no
				}
			}
		}
	}
}

# --------------- Situation
situation_event = { # Machine t1 25%
	id = tec_machine_path.10025
	title = "tec_machine_path.10025.name"
	desc = "tec_machine_path.10025.desc"

	picture = GFX_evt_tec_synthetic_recognition
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_machine_path.10025.a
		custom_tooltip = tec_machine_path.10025.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_neutral_outcome
		}
	}
}
situation_event = { # Machine t1 50%
	id = tec_machine_path.10050
	title = "tec_machine_path.10050.name"
	desc = "tec_machine_path.10050.desc"

	picture = GFX_evt_tec_synthetic_first
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_machine_path.10050.a
		custom_tooltip = tec_machine_path.10050.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_neutral_outcome
		}
	}
}
situation_event = { # Machine t1 75%
	id = tec_machine_path.10075
	title = "tec_machine_path.10075.name"
	desc = "tec_machine_path.10075.desc"

	picture = GFX_evt_machine_sapience
	is_triggered_only = yes
	situation = this
	location = target

	immediate = {
		hidden_effect = {
			set_situation_locked = yes
		}
	}

	after = {
		hidden_effect = {
			set_situation_locked = no
		}
	}

	option = {
		name = tec_machine_path.10075.a
		custom_tooltip = tec_machine_path.10075.a.tooltip
		icon = {
			icon = GFX_situation_approach_tec_ai
			icon_background = GFX_situation_approach_bg_tec_blue
			text = tec_icon_text_neutral_outcome
		}
	}
}

country_event = { # Finished
	id = tec_machine_path.105
	title = "tec_machine_path.105.name"
	desc = "tec_machine_path.105.desc"
	picture = GFX_evt_tec_synthetic_first
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_machine_path.105.a"
		custom_tooltip = tec_machine_path.105.a.tooltip
		hidden_effect = {
			set_country_flag = tec_synth_path_unlocked_tradition_1
			set_country_flag = tec_machine_synthetic_trait
			machine_synthetic_leader_effect = yes
		}
	}
}

# T2
country_event = { # T2 picked
	id = tec_machine_path.200
	title = "tec_machine_path.200.name"
	desc = "tec_machine_path.200.desc"
	picture = GFX_evt_tec_synthetic_first
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_machine_path.200.a"
		custom_tooltip = tec_machine_path.200.a.tooltip
		hidden_effect = {
			set_country_flag = tec_completed_synth_t2
		}
	}
}

# T2 situation - Synthetic Singularity
# 10%
# 25%
# 50%
# 75% 

# Halfway empire situation events

# Random situation events

# Situation finished

# T3 picked
country_event = { # T3 picked
	id = tec_machine_path.300
	title = "tec_machine_path.300.name"
	desc = "tec_machine_path.300.desc"
	picture = GFX_evt_machine_sapience
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_machine_path.300.a"
		hidden_effect = {
			save_event_target_as = tec_synth_t3_owner
		}
		capital_scope = {
			enable_special_project = {
				name = "TEC_SYNTH_T3_PROJECT"
				location = this
				owner = root
			}
		}
	}
}

# T3 situation
# 10% - Decide the focus
# 25%
# 50%
# 75% 

# Halfway empire situation events

# Random situation events

# Situation finished

# Post-auto special project event

# T3 Notification to other empires



# --------------------------------- MIXED ASCENSIONS ---------------------------------
# Bio-Cyb: Replicant
# ------------------------------------------------------------ tec_replicant_path.xxx
namespace = tec_replicant_path

# T3 picked
country_event = { # Biosynths on pick
	id = tec_replicant_path.300
	title = "tec_replicant_path.300.name"
	desc = "tec_replicant_path.300.desc"
	picture = GFX_evt_cybernetics
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_replicant_path.300.a"
		hidden_effect = {
			save_event_target_as = tec_replicant_owner
		}
		capital_scope = {
			enable_special_project = {
				name = "TEC_REPLICANT_PROJECT"
				location = this
				owner = root
			}
		}
	}
}

# T3 situation
# 10%
# 25% - Elections
# 50%
# 75% - Results
# 90% - Preparing population

# Halfway empire situation events

# Random situation events

# Situation finished
country_event = { # Biosynths after ending project
	id = tec_replicant_path.301
	title = "tec_replicant_path.301.name"
	desc = "tec_replicant_path.301.desc"
	picture = GFX_evt_hive_mind
	show_sound = event_synthetic_evolution

	is_triggered_only = yes

	immediate = {
		tec_create_replicant_species = yes
	}

	option = {
		name = "tec_replicant_path.301.a"
		custom_tooltip = SYNTH_ASSIMILATION_CITIZENSHIP_ENABLED
		hidden_effect = {
			every_country = {
				limit = {
					is_ai = no
					NOT = {
						is_same_value = root 
					}
					has_communications = root
				}
				country_event = {
					id = tec_replicant_path.302
					days = 5 
				}
				country_event = {
					id = tec_replicant_path.303
					days = 10 
				}
			}
		}
	}

	after = {
		observer_event = { id = observer.4 }
		every_country = {
			limit = {
				is_ai = no
				NOT = { is_same_value = root }
				has_communications = root
			}
			country_event = { id = utopia.2555 days = 5 }
			country_event = { id = utopia.2556 days = 10 }
		}
		if = {
			limit = {
				any_country = {
					OR = {
						is_country_type = fallen_empire
						is_country_type = awakened_fallen_empire
					}
					has_ethic = ethic_fanatic_spiritualist
					has_communications = root
					NOT = { is_same_value = root }
				}
			}
			random_country = {
				limit = {
					OR = {
						is_country_type = fallen_empire
						is_country_type = awakened_fallen_empire
					}
					has_ethic = ethic_fanatic_spiritualist
					has_communications = root
					NOT = { is_same_value = root }
				}
				country_event = { id = utopia.2557 days = 15 }
			}
		}
		else = {
			random_country = {
				limit = {
					tec_is_default_country = yes
					has_ethic = ethic_fanatic_spiritualist
					NOT = {
						has_valid_civic = civic_tec_machine_cult
					}
					has_communications = root
					NOT = { is_same_value = root }
				}
				country_event = { id = utopia.2557 days = 15 }
			}
			random_country = {
				limit = {
					tec_is_default_country = yes
					is_spiritualist = yes
					has_valid_civic = civic_tec_machine_cult
					has_communications = root
					NOT = { is_same_value = root }
				}
				country_event = { id = utopia.25571 days = 15 }
			}
		}
		add_modifier = {
			modifier = modifier_tec_free_modification
			days = -1
		}
	}
}

# T2 Notification to other empires
country_event = { # Notification for Other Nations
	id = tec_replicant_path.302
	title = tec_replicant_path.302.name
	desc = tec_replicant_path.302.desc

	desc = {
		text = utopia.2555.2.desc
		trigger = {
			OR = {
				has_ethic = ethic_fanatic_spiritualist
				has_ethic = ethic_spiritualist
			}
			NOT = {
				has_valid_civic = civic_tec_machine_cult
			}
		}
	}
	picture = GFX_evt_cybernetics
	show_sound = event_synthetic_evolution

	is_triggered_only = yes

	option = {
		name = INTRIGUING
		trigger = {
			OR = {
				NOR = {
					has_ethic = ethic_fanatic_spiritualist
					has_ethic = ethic_spiritualist	
				}
				AND = {
					OR = {
						has_ethic = ethic_fanatic_spiritualist
						has_ethic = ethic_spiritualist
					}
					OR = {
						has_valid_civic = civic_tec_machine_cult
						has_valid_civic = civic_tec_occultist
					}
				}
			}
		}
	}

	option = {
		name = DISCONCERTING
		trigger = {
			OR = {
				has_ethic = ethic_fanatic_spiritualist
				has_ethic = ethic_spiritualist
			}
			NOR = {
				has_valid_civic = civic_tec_machine_cult
				has_valid_civic = civic_tec_occultist
			}
		}
	}
}
country_event = { # Diplomatic Announcement
	id = tec_replicant_path.303
	title = TRANSMISSION
	desc = "tec_replicant_path.303.desc"

	diplomatic = yes

	is_triggered_only = yes

	picture_event_data = {
		portrait = from
		room = from.ruler
	}

	option = {
		name = tec_replicant_path.303.a
		trigger = {
			NOT = { is_at_war_with = from }
		}
	}
	option = {
		name = tec_replicant_path.303.b
		trigger = {
			NOT = { is_at_war_with = from }
		}
	}

	option = {
		name = utopia.2556.d
		trigger = {
			NOT = {
				is_at_war_with = from
			}
		}
	}

	option = {
		name = tec_replicant_path.303.c
		trigger = {
			is_at_war_with = from
		}
	}

	option = {
		name = tec_replicant_path.303.d
		trigger = {
			has_valid_civic = civic_machine_terminator
		}
	}

	
}

# Post ascension situation for the extra traits

# TO ADJUST
country_event = { # Biosynths SYNTHETICS after a month of ascending
	id = tec_replicant_path.398
	title = "tec_replicant_path.398.name"
	desc = "tec_replicant_path.398.desc"
	picture = GFX_evt_cybernetics
	show_sound = event_synthetic_evolution
	trackable = yes

	is_triggered_only = yes

	option = {
		name = "tec_replicant_path.398.a"
		hidden_effect = {
			save_event_target_as = tec_replicant_owner
		}
		capital_scope = {
			enable_special_project = {
				name = "TEC_REPLICANT_PROJECT_SYNTHETICS"
				location = this
				owner = root
			}
		}
	}
}

country_event = { # Biosynths SYNTHETICS after ending project
	id = tec_replicant_path.399
	title = "tec_replicant_path.399.name"
	desc = "tec_replicant_path.399.desc"
	picture = GFX_evt_hive_mind
	show_sound = event_synthetic_evolution

	is_triggered_only = yes

	immediate = {

		every_owned_pop = {
			limit = {
				species = {
					OR = {
						has_trait = trait_mechanical
						has_trait = trait_machine_unit
					}
				}
			}
			change_species = root.owner_main_species
			#	change_species = event_target:new_replicant_species
		}
		

		every_controlled_ship = {
			limit = {
				is_ship_class = shipclass_colonizer
				species = {
					OR = {
						has_trait = trait_mechanical
						has_trait = trait_machine_unit
					}
				}
			}
			change_species = root.owner_main_species
			#	change_species = event_target:new_replicant_species
		}

		every_owned_army = {
			limit = {
				exists = species
				exists = planet
				species = {
					OR = {
						has_trait = trait_mechanical
						has_trait = trait_machine_unit
					}
				}
				army_type = assault_army
			}
			modify_army = {
				name = random
				species = root.owner_main_species
				#species = event_target:new_replicant_species
			}
		}

		every_owned_army = {
			limit = {
				exists = species
				exists = planet
				army_type = defense_army
				species = {
					OR = {
						has_trait = trait_mechanical
						has_trait = trait_machine_unit
					}
				}
			}
			modify_army = {
				name = random
				species = root.owner_main_species
				#species = event_target:new_replicant_species
			}
		}

		every_owned_leader = {
			limit = {
				species = {
					OR = {
						has_trait = trait_mechanical
						has_trait = trait_machine_unit
					}
				}
			}
			change_species = root.owner_main_species
			#	change_species = event_target:new_replicant_species
			change_leader_portrait = species
		}
		every_pool_leader = {
			limit = {
				species = {
					OR = {
						has_trait = trait_mechanical
						has_trait = trait_machine_unit
					}
				}
			}
			change_species = root.owner_main_species
			#	change_species = event_target:new_replicant_species
			change_leader_portrait = species
		}

		every_owned_leader = {
			limit = {
				species = {
					OR = {
						has_trait = @trait_tec_replicant_standard
					}
				}
				NOR = {
					has_trait = leader_trait_admiral_tec_replicant
					has_trait = leader_trait_general_tec_replicant
					has_trait = leader_trait_governor_tec_replicant
					has_trait = leader_trait_scientist_tec_replicant
					has_trait = leader_trait_ruler_tec_replicant
				}
			}
			if = {
				limit = { leader_class = admiral }
				add_trait = leader_trait_admiral_tec_replicant
				add_ruler_trait = leader_trait_ruler_tec_replicant
				remove_ruler_trait = leader_trait_admiral_synthetic
				remove_ruler_trait = leader_trait_ruler_synthetic
			}
			if = {
				limit = { leader_class = general }
				add_trait = leader_trait_general_tec_replicant
				add_ruler_trait = leader_trait_ruler_tec_replicant
				remove_ruler_trait = leader_trait_general_synthetic
				remove_ruler_trait = leader_trait_ruler_synthetic
			}
			if = {
				limit = { leader_class = governor }
				add_trait = leader_trait_governor_tec_replicant
				add_ruler_trait = leader_trait_ruler_tec_replicant
				remove_ruler_trait = leader_trait_governor_synthetic
				remove_ruler_trait = leader_trait_ruler_synthetic
			}
			if = {
				limit = { leader_class = scientist }
				add_trait = leader_trait_scientist_tec_replicant
				add_ruler_trait = leader_trait_ruler_tec_replicant
				remove_ruler_trait = leader_trait_scientist_synthetic
				remove_ruler_trait = leader_trait_ruler_synthetic
			}
			if = {
				limit = { leader_class = ruler }
				add_trait = leader_trait_ruler_tec_replicant
				add_ruler_trait = leader_trait_ruler_tec_replicant
				remove_ruler_trait = leader_trait_ruler_synthetic
			}
		}
		every_pool_leader = {
			limit = {
				species = { has_trait = @trait_tec_replicant_standard }
				NOR = {
					has_trait = leader_trait_admiral_tec_replicant
					has_trait = leader_trait_general_tec_replicant
					has_trait = leader_trait_governor_tec_replicant
					has_trait = leader_trait_scientist_tec_replicant
					has_trait = leader_trait_ruler_tec_replicant
				}
			}
			if = {
				limit = { leader_class = admiral }
				add_trait = leader_trait_admiral_tec_replicant
				add_ruler_trait = leader_trait_ruler_tec_replicant
				remove_trait = leader_trait_admiral_cyborg
				remove_ruler_trait = leader_trait_ruler_cyborg
			}
			if = {
				limit = { leader_class = general }
				add_trait = leader_trait_general_tec_replicant
				add_ruler_trait = leader_trait_ruler_tec_replicant
				remove_trait = leader_trait_general_cyborg
				remove_ruler_trait = leader_trait_ruler_cyborg
			}
			if = {
				limit = { leader_class = governor }
				add_trait = leader_trait_governor_tec_replicant
				add_ruler_trait = leader_trait_ruler_tec_replicant
				remove_trait = leader_trait_governor_cyborg
				remove_ruler_trait = leader_trait_ruler_cyborg
			}
			if = {
				limit = { leader_class = scientist }
				add_trait = leader_trait_scientist_tec_replicant
				add_ruler_trait = leader_trait_ruler_tec_replicant
				remove_trait = leader_trait_scientist_cyborg
				remove_ruler_trait = leader_trait_ruler_cyborg
			}
			if = {
				limit = { leader_class = ruler }
				add_trait = leader_trait_ruler_synthetic
				add_ruler_trait = leader_trait_ruler_synthetic
				remove_trait = leader_trait_ruler_cyborg
			}
		}
	}

	option = {
		name = "tec_replicant_path.399.a"
		custom_tooltip = "tec_replicant_path.399.a.tooltip"
	}
}



# Cyb-Psi: Cyberpsionic
# ------------------------------------------------------------ tec_cyberpsionic_path.xxx
namespace = tec_cyberpsionic_path

# Post-rework
country_event = {	# Provides special project
	id = tec_cyberpsionic_path.300
	title = "tec_cyberpsionic_path.300.name"
	desc = "tec_cyberpsionic_path.300.desc"
	picture = GFX_evt_cybernetics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.300.a"
		hidden_effect = {
			hidden_effect = {
				save_event_target_as = flesh_weak_owner
			}
			capital_scope = {
				enable_special_project = {
					name = TEC_CYBERPSIONIC_TRAIT_PROJECT
					location = this
					owner = root
				}
			}
		}
	}
}

# Upon completion, gives the trait and adds the special projects; also notifies the other empires
country_event = {
	id = tec_cyberpsionic_path.301
	title = "tec_cyberpsionic_path.301.name"
	desc = "tec_cyberpsionic_path.301.desc"
	picture = GFX_evt_cybernetics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.301.a"
		custom_tooltip = tec_cyberpsionic_path.301.a.tooltip
		hidden_effect = {
			every_country = {
				limit = {
					is_ai = no
					has_communications = root
					NOT = { is_same_value = root }
				}
				country_event = {
					id = tec_cyberpsionic_path.302 
					days = 5
				}
			}
			
			hidden_effect = {
				set_country_flag = tec_announced_psionic_traits
			}
			country_event = { id = tec_cyberpsionic_path.30101 days = 5 } # Selection traits
		}
	}
}

country_event = {
	id = tec_cyberpsionic_path.30101
	title = "tec_cyberpsionic_path.30101.name"
	desc = "tec_cyberpsionic_path.30101.desc"
	picture = GFX_evt_cybernetics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.30101.a"
		custom_tooltip = tec_cyberpsionic_path.30101.a.tooltip
		hidden_effect = {
			save_event_target_as = tec_cyberpsi_owner
			begin_event_chain = {
				event_chain = tec_cyberpsionic_election_chain
			}
			capital_scope = {
				enable_special_project = {
					name = TEC_CYBERPSIONIC_ELECTION_A
					location = this
					owner = root
				}
				enable_special_project = {
					name = TEC_CYBERPSIONIC_ELECTION_B
					location = this
					owner = root
				}
				enable_special_project = {
					name = TEC_CYBERPSIONIC_ELECTION_C
					location = this
					owner = root
				}
			}
		}
	}
}

	# B2 Notification for Other Nations
country_event = {
	id = tec_cyberpsionic_path.302
	title = "tec_cyberpsionic_path.302.name"
	desc = {
		text = tec_cyberpsionic_path.302.desc
	}
	picture = GFX_evt_cybernetics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.302.a"
	}

	option = {
		name = "tec_cyberpsionic_path.302.b"
		trigger = {
			OR = {
				has_ascension_perk = ap_tec_psionic_ascendance
				has_ascension_perk = ap_tec_biopsionic
				has_ascension_perk = ap_tec_hive_psionic_3
			}
			opinion_level = {
				who = from
				level < neutral 
			}
		}
	}

	option = {
		name = "tec_cyberpsionic_path.302.c"
		trigger = {
			OR = {
				has_civic = civic_machine_terminator
				has_civic = civic_fanatic_purifiers
				has_civic = civic_hive_devouring_swarm
			}
		}
	}
	option = {
		name = "tec_cyberpsionic_path.302.e"
		trigger = {
			is_machine_empire = yes
			NOR = {
				has_ethic = ethic_gestalt_empathy
				has_civic = civic_machine_assimilator
				has_civic = civic_machine_servitor
			}
		}
	}
	
}

# Starts the first trait thing
# 3 Traits
country_event = {	# power
	id = tec_cyberpsionic_path.30011
	title = "tec_cyberpsionic_path.30011.name"
	desc = {
		text = tec_cyberpsionic_path.30011.desc
	}
	picture = GFX_evt_cybernetics
	show_sound = event_the_flesh_is_weak

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.30011.a"
		custom_tooltip = tec_cyberpsionic_path.30011.a.tooltip
		hidden_effect = {
			set_country_flag = tec_announced_psionic_traits
		}
	}
	after = {
		hidden_effect = {
			if = {
				limit = {
					has_completed_event_chain_counter = {
						event_chain = tec_cyberpsionic_election_chain
						counter = tec_cyberpsionic_projects_completed
					}
				}
				#country_event = {
				#	id = tec_cyberpsionic_path.30101
				#	days = 2
				#}
				end_event_chain = tec_cyberpsionic_election_chain
			}
		}
	}
}

country_event = {	# equilibrium
	id = tec_cyberpsionic_path.30012
	title = "tec_cyberpsionic_path.30012.name"
	desc = {
		text = tec_cyberpsionic_path.30012.desc
	}
	picture = GFX_evt_cybernetics
	show_sound = event_the_flesh_is_weak

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.30012.a"
		custom_tooltip = tec_cyberpsionic_path.30012.a.tooltip
		hidden_effect = {
			set_country_flag = tec_announced_psionic_traits
		}
	}

	after = {
		hidden_effect = {
			if = {
				limit = {
					has_completed_event_chain_counter = {
						event_chain = tec_cyberpsionic_election_chain
						counter = tec_cyberpsionic_projects_completed
					}
				}
				#country_event = {
				#	id = tec_cyberpsionic_path.30101
				#	days = 2
				#}
				end_event_chain = tec_cyberpsionic_election_chain
			}
		}
	}
}

country_event = {	# control
	id = tec_cyberpsionic_path.30013
	title = "tec_cyberpsionic_path.30013.name"
	desc = {
		text = tec_cyberpsionic_path.30013.desc
	}
	picture = GFX_evt_cybernetics
	show_sound = event_the_flesh_is_weak

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.30013.a"
		custom_tooltip = tec_cyberpsionic_path.30013.a.tooltip
		hidden_effect = {
			set_country_flag = tec_announced_psionic_traits
		}
	}

	after = {
		hidden_effect = {
			if = {
				limit = {
					has_completed_event_chain_counter = {
						event_chain = tec_cyberpsionic_election_chain
						counter = tec_cyberpsionic_projects_completed
					}
				}
				#country_event = {
				#	id = tec_cyberpsionic_path.30101
				#	days = 2
				#}
				end_event_chain = tec_cyberpsionic_election_chain
			}
		}
	}
}

# After reaching the shroud being cyberpsionic
	# Note - changes if you have the zro tech or not, if you don't gives the option
country_event = {	# Provides special project
	id = tec_cyberpsionic_path.30015
	title = "tec_cyberpsionic_path.30015.name"
	desc = {
		text = tec_cyberpsionic_path.30015.desc
		trigger = {
			has_technology = tech_mine_zro
		}
	}
	desc = {
		text = tec_cyberpsionic_path.30015.b.desc
		trigger = {
			NOT = {
				has_technology = tech_mine_zro
			}
		}
	}
	picture = GFX_evt_zro_4
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.30015.a"
		trigger = {
			hidden_trigger = {
				has_technology = tech_mine_zro
			}
		}
		hidden_effect = {
			country_event = {
				id = tec_cyberpsionic_path.30016
				days = 7
			}
		}
	}
	option = {
		name = "tec_cyberpsionic_path.30015.b"
		custom_tooltip = tec_cyberpsionic_path.30015.b.tooltip
		trigger = {
			hidden_trigger = {
				NOT = {
					has_technology = tech_mine_zro
				}
			}
		}
		hidden_effect = {
			add_research_option = tech_mine_zro
			set_country_flag = tec_cyberpsi_zro_gate
		}
	}
}

# Project to analyze zro
country_event = {	# Provides special project
	id = tec_cyberpsionic_path.30016
	title = "tec_cyberpsionic_path.30016.name"
	desc = "tec_cyberpsionic_path.30016.desc"

	picture = GFX_evt_baol_datacrystals
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.30016.a"
		hidden_effect = {
			hidden_effect = {
				save_event_target_as = tec_cyberpsi_owner
			}
			begin_event_chain = {
				event_chain = tec_cyberpsionic_zro_chain
			}
			capital_scope = {
				enable_special_project = {
					name = TEC_CYBERPSIONIC_ZRO_A
					location = this
					owner = root
				}
			}
		}
	}
}

# On tech researched gate
country_event = {
	id = tec_cyberpsionic_path.30017
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = tec_cyberpsi_zro_gate
		has_technology = tech_mine_zro
	}

	immediate = {
		remove_country_flag = tec_cyberpsi_zro_gate
		country_event = {
			id = tec_cyberpsionic_path.30016
			days = 7
		}
	}
}

# Discover traits
# tec_cyberpsionic_path.30020
# Special project 1 : Main tech
country_event = {
	id = tec_cyberpsionic_path.30021
	title = "tec_cyberpsionic_path.30021.name"
	desc = "tec_cyberpsionic_path.30021.desc"

	picture = GFX_evt_baol_datacrystals
	show_sound = event_the_flesh_is_weak

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.30021.a"
		custom_tooltip = "tec_cyberpsionic_path.30021.a.tooltip"
	}

	after = {
		hidden_effect = {
			if = {
				limit = {
					has_completed_event_chain_counter = {
						event_chain = tec_cyberpsionic_zro_chain
						counter = tec_cyberpsionic_zro_projects_completed
					}
				}
				end_event_chain = tec_cyberpsionic_zro_chain
				country_event = {
					id = tec_cyberpsionic_path.30025
					days = 1
				}
			}
		}
	}
}
# Special project 2: Main traits
country_event = {
	id = tec_cyberpsionic_path.30022
	title = "tec_cyberpsionic_path.30022.name"
	desc = "tec_cyberpsionic_path.30022.desc"

	picture = GFX_evt_baol_datacrystals
	show_sound = event_the_flesh_is_weak

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.30022.a"
		custom_tooltip = "tec_cyberpsionic_path.30022.a.tooltip"
	}

	after = {
		hidden_effect = {
			if = {
				limit = {
					has_completed_event_chain_counter = {
						event_chain = tec_cyberpsionic_zro_chain
						counter = tec_cyberpsionic_zro_projects_completed
					}
				}
				end_event_chain = tec_cyberpsionic_zro_chain
				country_event = {
					id = tec_cyberpsionic_path.30025
					days = 1
				}
			}
		}
	}
}
# Special project 3: Shroud extraction
country_event = {
	id = tec_cyberpsionic_path.30023
	title = "tec_cyberpsionic_path.30023.name"
	desc = "tec_cyberpsionic_path.30023.desc"

	picture = GFX_evt_matter_decompressor
	show_sound = event_the_flesh_is_weak

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.30023.a"
		custom_tooltip = "tec_cyberpsionic_path.30023.a.tooltip"
	}

	after = {
		hidden_effect = {
			if = {
				limit = {
					has_completed_event_chain_counter = {
						event_chain = tec_cyberpsionic_zro_chain
						counter = tec_cyberpsionic_zro_projects_completed
					}
				}
				end_event_chain = tec_cyberpsionic_zro_chain
				country_event = {
					id = tec_cyberpsionic_path.30025
					days = 1
				}
			}
		}
	}
}

#Ending
country_event = {
	id = tec_cyberpsionic_path.30025
	title = "tec_cyberpsionic_path.30025.name"
	desc = "tec_cyberpsionic_path.30025.desc"

	picture = GFX_evt_zro_4
	show_sound = event_the_flesh_is_weak

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.30025.a"
		custom_tooltip = "tec_cyberpsionic_path.30025.a.tooltip"
	}
}

# Danger notification when the empire extract too much
country_event = {
	id = tec_cyberpsionic_path.30050
	title = "tec_cyberpsionic_path.30050.name"
	desc = "tec_cyberpsionic_path.30050.desc"

	picture = GFX_evt_surreal_visions
	show_sound = event_red_alert

	is_triggered_only = yes

	option = {
		name = "tec_cyberpsionic_path.30050.a"
	}
}
# First shroud incursion
country_event = {
	id = tec_cyberpsionic_path.30051
	title = "tec_cyberpsionic_path.30051.name"
	desc = "tec_cyberpsionic_path.30051.desc"
	location = event_target:tec_incursion_target_planet

	picture = GFX_evt_vortex
	show_sound = event_red_alert

	is_triggered_only = yes

	immediate = {
		random_owned_planet = {
			limit = {
				has_planet_flag = tec_incursion_target_planet
			}
			save_event_target_as = tec_incursion_target_planet
			solar_system = {
				save_event_target_as = tec_shroud_incursion_system
			}
		}
	}
	option = {
		name = "tec_cyberpsionic_path.30051.a"
	}
}
# Post-first shroud incursions
# tec_cyberpsionic_path.30052

# SHroud incursion handler
country_event = {
	id = tec_cyberpsionic_path.30055
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = tec_u_cp_dimensional_extraction
		any_owned_planet = {
			OR = {
				has_building = building_tec_cyberpsionic_extractor_2
				has_building = building_tec_cyberpsionic_extractor_3
			}
		}
		check_variable = {
			which = tec_dimensional_extraction_buildings_ref
			value > 5
		}
	}

	immediate = {
		random_list = {
			10 = {
				modifier = {
					factor = 2
					check_variable = {
						which = tec_dimensional_extraction_buildings_ref
						value >= 6
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tec_dimensional_extraction_buildings_ref
						value >= 9
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tec_dimensional_extraction_buildings_ref
						value >= 12
					}
				}
				modifier = {
					factor = 2
					check_variable = {
						which = tec_dimensional_extraction_buildings_ref
						value >= 15
					}
				}
				set_timed_country_flag = {
					flag = tec_dimensional_incursion_on
					days = 180
				}
				random_owned_planet = {
					limit = {
						OR = {
							has_building = building_tec_cyberpsionic_extractor_2
							has_building = building_tec_cyberpsionic_extractor_3
						}
					}
					set_timed_planet_flag = {
						flag = tec_incursion_target_planet
						days = 180
					}
				}
				country_event = {
					id = tec_cyberpsionic_path.30056
					days = 1
					random = 120
				}
			}
			90 = {
				#nothing :>
				break = yes
			}
		}
		
	}
}

# Spawns the entity
country_event = {
	id = tec_cyberpsionic_path.30056
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		any_owned_planet = {
			has_planet_flag = tec_incursion_target_planet
		}
	}

	immediate = {
		random_owned_planet = {
			limit = {
				has_planet_flag = tec_incursion_target_planet
			}
			save_event_target_as = tec_incursion_target_planet
			solar_system = {
				save_event_target_as = tec_shroud_incursion_system
			}
		}
		if = {
			limit = {
				NOT = {
					has_country_flag = tec_first_aggro_incursion_done
				}
			}
			set_country_flag = tec_first_aggro_incursion_done
			country_event = {
				id = tec_cyberpsionic_path.30051
			}
		}
		else = {
			create_message = {
				type = MESSAGE_TEC_CYBERPSIONIC_INCURSION
				localization = MESSAGE_TEC_CYBERPSIONIC_INCURSION
				days = 30
				target = event_target:tec_shroud_incursion_system
				variable = {
					type = name
					localization = PLANET
					scope = event_target:tec_shroud_incursion_system
				}
			}
		}
		event_target:tec_shroud_incursion_system = {
			if = {
				limit = { NOT = { exists = event_target:shroud_country } }
				create_country = {
					name = "NAME_Creatures_of_the_Shroud"
					type = shroud_spirits
					flag = {
						icon = {
							category = "special"
							file = "the_shroud.dds"
						}
						background= {
							category = "backgrounds"
							file = "00_solid.dds"
						}
						colors = {
							"dark_purple"
							"black"
							"null"
							"null"
						}
					}
				}
				last_created_country = {
					save_global_event_target_as = shroud_country
				}
			}
			create_fleet = {
				name = "NAME_Psionic_Entity"
				settings = {
					spawn_debris = no
					is_boss = yes
				}
				effect = {
					set_owner = event_target:shroud_country
					set_fleet_flag = tec_dimensional_incursor
					create_ship = {
						name = "Dimensional Invader"
						#"NAME_Psionic_Entity"
						design = "NAME_Corrupted_Avatar"
					}
					last_created_ship = {
						if = {
							limit = {
								root = {
									max_naval_capacity > 1000
									used_naval_capacity_percent > 0.5
								}
							}
							add_modifier = {
								modifier = tec_dimensional_rage_10
							}
						}
						else_if = {
							limit = {
								root = {
									max_naval_capacity > 500
									used_naval_capacity_percent > 0.5
								}
							}
							add_modifier = {
								modifier = tec_dimensional_rage_5
							}
						}
						else_if = {
							limit = {
								root = {
									max_naval_capacity > 400
									used_naval_capacity_percent > 0.5
								}
							}
							add_modifier = {
								modifier = tec_dimensional_rage_4
							}
						}
						else_if = {
							limit = {
								root = {
									max_naval_capacity > 300
									used_naval_capacity_percent > 0.5
								}
							}
							add_modifier = {
								modifier = tec_dimensional_rage_3
							}
						}
						else_if = {
							limit = {
								root = {
									max_naval_capacity > 200
									used_naval_capacity_percent > 0.5
								}
							}
							add_modifier = {
								modifier = tec_dimensional_rage_2
							}
						}
						else_if = {
							limit = {
								root = {
									max_naval_capacity > 100
									used_naval_capacity_percent > 0.5
								}
							}
							add_modifier = {
								modifier = tec_dimensional_rage_1
							}
						}
					}
					set_location = {
						target = prev.star
						distance = 100
						angle = random
					}
					set_fleet_stance = aggressive
					set_aggro_range_measure_from = return_point
					set_aggro_range = 2000
				}
			}
			star = {
				create_ambient_object = {
					type = "psi_storm_1"
					location = this
				}
				last_created_ambient_object = {
					set_ambient_object_flag = psi_storm_object
					set_location = {
						target = prev
						distance = 0
						angle = random
					}
				}
			}
		}
		root = {
			establish_communications_no_message = event_target:shroud_country
		}
	}
}

# Remove Shroud System Effect
country_event = {
	id = tec_cyberpsionic_path.30057
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		is_same_value = event_target:shroud_country
		fromfrom = { has_fleet_flag = tec_dimensional_incursor }
	}

	immediate = {
		fromfrom = {
			solar_system = {
				random_system_ambient_object = {
					limit = { has_ambient_object_flag = psi_storm_object }
					destroy_ambient_object = this
				}
			}
		}
	}
}



# Bio-Psi: Purity of form
# ------------------------------------------------------------ tec_biopsionic_path.xxx
namespace = tec_biopsionic_path

country_event = {
	id = tec_biopsionic_path.300
	title = "tec_biopsionic_path.300.name"
	desc = "tec_biopsionic_path.300.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	immediate = {
		every_owned_pop = {
			limit = {
				is_same_species = root
				OR = {
					has_trait = trait_latent_psionic
					has_trait = trait_psionic
					has_trait = @trait_tec_hive_psionic_entanglement
				}
			}
			if = {
				limit = {
					has_trait = trait_latent_psionic
				}
				modify_species = {
					species = this
					remove_trait = trait_latent_psionic
					add_trait = @trait_tec_biopsionic
				}
			}
			if = {
				limit = {
					has_trait = trait_psionic
				}
				modify_species = {
					species = this
					remove_trait = trait_psionic
					add_trait = @trait_tec_biopsionic
				}
			}
			if = {
				limit = {
					has_trait = @trait_tec_hive_psionic_entanglement
				}
				modify_species = {
					species = this
					remove_trait = @trait_tec_hive_psionic_entanglement
					add_trait = @trait_tec_biopsionic
				}
			}
			species = { save_event_target_as = psionic_species }
		}
		change_dominant_species = {
			species = event_target:psionic_species 
			change_all = yes 
		}
	}
	option = {
		name = "tec_biopsionic_path.300.a"
		custom_tooltip = "tec_biopsionic_path.300.a.tooltip"
		hidden_effect = {
			set_country_flag = tec_biopsionic_assimilation
			every_country = {
				limit = {
					OR = {
						tec_is_default_country = yes
						is_country_type = fallen_empire
						is_country_type = awakened_fallen_empire
					}
				}
				every_owned_leader = {
					remove_leader_traits_after_modification = yes
					limit = {
						is_same_species = root
						NOR = {
							has_trait =	leader_trait_admiral_tec_pure_psionic
							has_trait =	leader_trait_general_tec_pure_psionic
							has_trait =	leader_trait_governor_tec_pure_psionic
							has_trait =	leader_trait_scientist_tec_pure_psionic
							has_trait =	leader_trait_ruler_tec_pure_psionic
						}
					}
					if = {
						limit = { leader_class = admiral }
						add_trait = leader_trait_admiral_tec_pure_psionic
						add_ruler_trait = leader_trait_ruler_tec_pure_psionic
					}
					if = {
						limit = { leader_class = general }
						add_trait = leader_trait_general_tec_pure_psionic
						add_ruler_trait = leader_trait_ruler_tec_pure_psionic
					}
					if = {
						limit = { leader_class = governor }
						add_trait = leader_trait_governor_tec_pure_psionic
						add_ruler_trait = leader_trait_ruler_tec_pure_psionic
					}
					if = {
						limit = { leader_class = scientist }
						add_trait = leader_trait_scientist_tec_pure_psionic
						add_ruler_trait = leader_trait_ruler_tec_pure_psionic
					}
					if = {
						limit = { leader_class = ruler }
						add_trait = leader_trait_ruler_tec_pure_psionic
						add_ruler_trait = leader_trait_ruler_tec_pure_psionic
					}
				}
				every_pool_leader = {
					limit = {
						is_same_species = root
						NOR = {
							has_trait = leader_trait_admiral_tec_pure_psionic
							has_trait = leader_trait_general_tec_pure_psionic
							has_trait = leader_trait_governor_tec_pure_psionic
							has_trait = leader_trait_scientist_tec_pure_psionic
							has_trait = leader_trait_ruler_tec_pure_psionic
						}
					}
					if = {
						limit = { leader_class = admiral }
						add_trait = leader_trait_admiral_tec_pure_psionic
						add_ruler_trait = leader_trait_ruler_tec_pure_psionic
					}
					if = {
						limit = { leader_class = general }
						add_trait = leader_trait_general_tec_pure_psionic
						add_ruler_trait = leader_trait_ruler_tec_pure_psionic
					}
					if = {
						limit = { leader_class = governor }
						add_trait = leader_trait_governor_tec_pure_psionic
						add_ruler_trait = leader_trait_ruler_tec_pure_psionic
					}
					if = {
						limit = { leader_class = scientist }
						add_trait = leader_trait_scientist_tec_pure_psionic
						add_ruler_trait = leader_trait_ruler_tec_pure_psionic
					}
					if = {
						limit = { leader_class = ruler }
						add_trait = leader_trait_ruler_tec_pure_psionic
						add_ruler_trait = leader_trait_ruler_tec_pure_psionic
					}
				}
			}
			every_country = {
				limit = {
					is_ai = no
					has_communications = root
					NOT = { is_same_value = root }
				}
				country_event = { id = tec_biopsionic_path.302 }
			}
			country_event = { id = tec_biopsionic_path.30001 days = 360 }
		}
	}
}

country_event = { # B2 Notification for Other Nations
	id = tec_biopsionic_path.302
	title = "tec_biopsionic_path.302.name"
	desc = {
		text = tec_biopsionic_path.302.desc
	}
	picture = GFX_evt_genetic_modification
	show_sound = event_engineered_evolution

	is_triggered_only = yes

	option = {
		name = "tec_biopsionic_path.302.a"
	}

	option = {
		name = "tec_biopsionic_path.302.b"
	}

	option = {
		name = "tec_biopsionic_path.302.c"
		trigger = {
			OR = {
				has_civic = civic_machine_terminator
				has_civic = civic_fanatic_purifiers
				has_civic = civic_hive_devouring_swarm
			}
		}
	}
	option = {
		name = "tec_biopsionic_path.302.d"
		trigger = {
			is_machine_empire = yes
			NOR = {
				has_ethic = ethic_gestalt_empathy
				has_civic = civic_machine_assimilator
				has_civic = civic_machine_servitor
			}
		}
	}
	
}

country_event = { # 1 year after
	id = tec_biopsionic_path.30001
	title = "tec_biopsionic_path.30001.name"
	desc = {
		text = tec_biopsionic_path.30001.desc
	}
	picture = GFX_evt_genetic_modification
	show_sound = event_engineered_evolution

	is_triggered_only = yes

	option = {
		name = "tec_biopsionic_path.30001.a"
		custom_tooltip = tec_biopsionic_path.30001.a.tooltip
		hidden_effect = {
			save_event_target_as = tec_biopsi_owner
			enable_special_project = {
				name = TEC_PUREPSIO_FINAL_PROJECT
				location = capital_scope
				owner = root
			}
		}
	}
}

country_event = {
	id = tec_biopsionic_path.30010
	title = "tec_biopsionic_path.30010.name"
	desc = {
		text = tec_biopsionic_path.30010.desc
	}
	picture = GFX_evt_genetic_modification
	show_sound = event_engineered_evolution

	is_triggered_only = yes

	option = {
		name = "tec_biopsionic_path.30010.a"
		custom_tooltip = tec_biopsionic_path.30010.a.tooltip
		hidden_effect = {
			country_event = {
				id = tec_biopsionic_path.30011
				days = 60 
				random = 60
			}
		}
	}
}

country_event = { # Enables psionic traits
	id = tec_biopsionic_path.30011
	title = "tec_biopsionic_path.30011.name"
	desc = {
		text = tec_biopsionic_path.30011.desc
	}
	picture = GFX_evt_genetic_modification
	show_sound = event_engineered_evolution

	is_triggered_only = yes

	option = {
		name = "tec_biopsionic_path.30011.a"
		custom_tooltip = tec_biopsionic_path.30011.a.tooltip
		hidden_effect = {
			set_country_flag = tec_announced_psionic_traits
			country_event = {
				id = tec_biopsionic_path.30015
				days = 30
				random = 60
			}
		}
	}
}

country_event = { # New events
	id = tec_biopsionic_path.30015
	title = "tec_biopsionic_path.30015.name"
	desc = {
		text = tec_biopsionic_path.30015.desc
	}
	picture = GFX_evt_psionics
	show_sound = event_engineered_evolution
	is_triggered_only = yes
	option = {
		name = "tec_biopsionic_path.30015.a"
		custom_tooltip = tec_biopsionic_path.30015.a.tooltip
		hidden_effect = {
			# adds special project
			save_event_target_as = tec_biopsionic_ascension_owner
			event_target:tec_biopsionic_ascension_owner = {
				enable_special_project = {
					name = TEC_PUREPSIO_CONVERGENCE_PROJECT
					location = capital_scope
					owner = root
				}
			}
		}
	}
}

country_event = {	# After special project
	id = tec_biopsionic_path.30016
	title = "tec_biopsionic_path.30016.name"
	desc = {
		text = tec_biopsionic_path.30016.desc
	}
	picture = GFX_evt_psionics
	show_sound = event_engineered_evolution
	is_triggered_only = yes
	option = {
		name = "tec_biopsionic_path.30016.a"
		custom_tooltip = tec_biopsionic_path.30016.a.tooltip
		hidden_effect = {
			country_event = {
				id = tec_biopsionic_path.30017
				days = 10
				random = 20
			}
		}
	}
}

country_event = {	# After validation
	id = tec_biopsionic_path.30017
	title = "tec_biopsionic_path.30017.name"
	desc = {
		text = tec_biopsionic_path.30017.desc
	}
	picture = GFX_evt_psionics
	show_sound = event_engineered_evolution
	is_triggered_only = yes
	option = {
		name = "tec_biopsionic_path.30017.a"
		custom_tooltip = tec_biopsionic_path.30017.a.tooltip
		hidden_effect = {
			set_country_flag = tec_u_pure_memory
			set_country_flag = tec_u_pure_adaptability
			set_country_flag = tec_u_pure_happiness
			set_country_flag = tec_u_pure_soulshaping
		}
	}
}

country_event = { # Pops get merged
	id = tec_biopsionic_path.30022
	title = "tec_biopsionic_path.30022.name"
	desc = {
		trigger = {
			check_variable = {
				which = tec_total_converged_pops
				value = 0
			}
		}
		text = "tec_biopsionic_path.30022.firsttime.desc"
	}
	desc = {
		trigger = {
			check_variable = {
				which = tec_total_converged_pops
				value > 0
			}
		}
		text = "tec_biopsionic_path.30022.desc"
	}
	picture = GFX_evt_zro_4
	show_sound = event_the_great_awakening
	location = event_target:tec_recently_ascended_planet

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			every_owned_planet = {
				limit = {
					has_building = building_tec_biopsionic_convergence
					any_owned_species = {
						tec_is_any_psionic_species = yes
						count_species_pop = {
							limit = {
								NOT = {
									has_modifier = tec_converged_pop
								}
							}
							count >= 1
						}
					}
					# building comes here
				}
				# Sort by numbers
					if = {
						limit = {
							num_pops >=100
						}
						set_variable = {
							which = tec_biopsi
							value = 10
						}
					}
					else_if = {
						limit = {
							num_pops >=90
							num_pops < 100
						}
						set_variable = {
							which = tec_biopsi
							value = 9
						}
					}
					else_if = {
						limit = {
							num_pops >=80
							num_pops < 90
						}
						set_variable = {
							which = tec_biopsi
							value = 8
						}
					}
					else_if = {
						limit = {
							num_pops >=70
							num_pops < 80
						}
						set_variable = {
							which = tec_biopsi
							value = 7
						}
					}
					else_if = {
						limit = {
							num_pops >=60
							num_pops < 70
						}
						set_variable = {
							which = tec_biopsi
							value = 6
						}
					}
					else_if = {
						limit = {
							num_pops >=50
							num_pops < 60
						}
						set_variable = {
							which = tec_biopsi
							value = 5
						}
					}
					else_if = {
						limit = {
							num_pops >=40
							num_pops < 50
						}
						set_variable = {
							which = tec_biopsi
							value = 4
						}
					}
					else_if = {
						limit = {
							num_pops >=30
							num_pops < 40
						}
						set_variable = {
							which = tec_biopsi
							value = 3
						}
					}
					else_if = {
						limit = {
							num_pops >=20
							num_pops < 30
						}
						set_variable = {
							which = tec_biopsi
							value = 2
						}
					}
					else_if = {
						limit = {
							num_pops < 20
						}
						set_variable = {
							which = tec_biopsi
							value = 1
						}
					}
				# /
				while = {
					count = tec_biopsi
					random_owned_pop = {
						limit = {
							tec_is_any_psionic_species = yes
							NOT = {
								has_modifier = tec_converged_pop
							}
						}
						kill_pop = yes
					}
					random_owned_pop = {
						limit = {
							tec_is_any_psionic_species = yes
							NOT = {
								has_modifier = tec_converged_pop
							}
						}
						add_modifier = {
							modifier = tec_converged_pop
							days = -1
						}
						root = {
							change_variable = {
								which = tec_total_converged_pops
								value = 1
							}
						}
						root = {
							change_variable = {
								which = tec_temp_converged_pops
								value = 1
							}
						}
					}
					change_variable = {
						which = tec_conv_planet
						value = 0.2
					}
				}
			}
			create_message = {
				type = MESSAGE_TEC_CONVERGENCE_MERGED_POPS
				localization = MESSAGE_TEC_CONVERGENCE_MERGED_POPS
				days = 30
				target = root
				variable = {
					type = variable
					varname = tec_temp_converged_pops
					localization = VALUE
					scope = root
				}
			}
		}
	}
	option = {
		name = "tec_biopsionic_path.30022.a"
		custom_tooltip = "tec_biopsionic_path.30022.a.tooltip"
	}

	after = {
		hidden_effect = {
			clear_variable = tec_temp_converged_pops
		}
	}
}

# LEVEL TRAIT HANDLER	from=leader
country_event = {
	id = tec_biopsionic_path.30099
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		from = {
			species = {
				has_trait = @trait_tec_biopsionic_brain
			}
		}
		NOT = {
			has_country_flag = tec_leader_sharing_gate
		}
	}

	immediate = {
		set_timed_country_flag = {
			flag = tec_leader_sharing_gate
			days = 1
		}
		random = {
			chance = 25
			if = {
				limit = {
					from = {
						OR = {
							leader_class = ruler
							leader_class = governor
						}
					}
				}
				random_owned_leader = {
					limit = {
						NOT = {
							is_same_value = from
						}
						OR = {
							leader_class = governor
							leader_class = ruler
						}
					}
					tec_pure_brain_leader_effect = yes
				}
			}
			else_if = {
				limit = {
					from = {
						leader_class = scientist
					}
				}
				random_owned_leader = {
					limit = {
						NOT = {
							is_same_value = from
						}
						leader_class = scientist
					}
					tec_pure_brain_leader_effect = yes
				}
			}
			else_if = {
				limit = {
					from = {
						leader_class = admiral
					}
				}
				random_owned_leader = {
					limit = {
						NOT = {
							is_same_value = from
						}
						leader_class = admiral
					}
					tec_pure_brain_leader_effect = yes
				}
			}
			else_if = {
				limit = {
					from = {
						leader_class = general
					}
				}
				random_owned_leader = {
					limit = {
						NOT = {
							is_same_value = from
						}
						leader_class = general
					}
					tec_pure_brain_leader_effect = yes
				}
			}
		}
	}
}










# Scrap
# ------------------------------------------------------------


# This is unfinished, basically did this for the vid :>
namespace = tec_ferro

planet_event = {
	id = tec_ferro.10
	title = "tec_ferro.10.name"
	desc = "tec_ferro.10.desc"
	picture = GFX_evt_atmospheric_entry
	show_sound = event_mystic_reveal_light

	is_triggered_only = yes

	trigger = {
		always = yes
	}

	option = {
		name = "tec_ferro.10.a"
		custom_tooltip = "tec_ferro.10.a.tooltip"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_ferro.10.a.tooltip
		}
	}

	option = {
		name = "tec_ferro.10.b"
		custom_tooltip = "tec_ferro.10.b.tooltip"
		icon = {
			icon = GFX_situation_approach_shrug
			icon_background = GFX_situation_approach_bg_yellow
			text = tec_ferro.10.b.tooltip
		}
	}
}